function sha1(a){var d,e,f,m,n,o,p,q,r,b=function(a,b){var c=a<<b|a>>>32-b;return c},c=function(a){var c,d,b="";for(c=7;c>=0;c--)d=a>>>4*c&15,b+=d.toString(16);return b},g=new Array(80),h=1732584193,i=4023233417,j=2562383102,k=271733878,l=3285377520;a=unescape(encodeURIComponent(a));var s=a.length,t=[];for(e=0;s-3>e;e+=4)f=a.charCodeAt(e)<<24|a.charCodeAt(e+1)<<16|a.charCodeAt(e+2)<<8|a.charCodeAt(e+3),t.push(f);switch(s%4){case 0:e=2147483648;break;case 1:e=a.charCodeAt(s-1)<<24|8388608;break;case 2:e=a.charCodeAt(s-2)<<24|a.charCodeAt(s-1)<<16|32768;break;case 3:e=a.charCodeAt(s-3)<<24|a.charCodeAt(s-2)<<16|a.charCodeAt(s-1)<<8|128}for(t.push(e);t.length%16!=14;)t.push(0);for(t.push(s>>>29),t.push(s<<3&4294967295),d=0;d<t.length;d+=16){for(e=0;16>e;e++)g[e]=t[d+e];for(e=16;79>=e;e++)g[e]=b(g[e-3]^g[e-8]^g[e-14]^g[e-16],1);for(m=h,n=i,o=j,p=k,q=l,e=0;19>=e;e++)r=b(m,5)+(n&o|~n&p)+q+g[e]+1518500249&4294967295,q=p,p=o,o=b(n,30),n=m,m=r;for(e=20;39>=e;e++)r=b(m,5)+(n^o^p)+q+g[e]+1859775393&4294967295,q=p,p=o,o=b(n,30),n=m,m=r;for(e=40;59>=e;e++)r=b(m,5)+(n&o|n&p|o&p)+q+g[e]+2400959708&4294967295,q=p,p=o,o=b(n,30),n=m,m=r;for(e=60;79>=e;e++)r=b(m,5)+(n^o^p)+q+g[e]+3395469782&4294967295,q=p,p=o,o=b(n,30),n=m,m=r;h=h+m&4294967295,i=i+n&4294967295,j=j+o&4294967295,k=k+p&4294967295,l=l+q&4294967295}return r=c(h)+c(i)+c(j)+c(k)+c(l),r.toLowerCase()}window.webix||(webix={}),webix.version="3.1.2",webix.codebase="./",webix.name="core",webix.clone=function(a){var b=webix.clone.a;return b.prototype=a,new b},webix.clone.a=function(){},webix.extend=function(a,b,c){if(a.b)return webix.PowerArray.insertAt.call(a.b,b,1),a;for(var d in b)(!a[d]||c)&&(a[d]=b[d]);return b.defaults&&webix.extend(a.defaults,b.defaults),b.$init&&b.$init.call(a),a},webix.copy=function(a){var b;arguments.length>1?(b=arguments[0],a=arguments[1]):b=webix.isArray(a)?[]:{};for(var c in a){var d=a[c];d&&"object"==typeof d?webix.isDate(d)?b[c]=new Date(d):(b[c]=webix.isArray(d)?[]:{},webix.copy(b[c],d)):b[c]=d}return b},webix.single=function(a){var b=null,c=function(){return b||(b=new a({})),b.c&&b.c.apply(b,arguments),b};return c},webix.protoUI=function(){var a=arguments,b=a[0].name,c=function(a){if(!c)return webix.ui[b].prototype;var d=c.b;if(d){for(var e=[d[0]],f=1;f<d.length;f++)e[f]=d[f],e[f].b&&(e[f]=e[f].call(webix,e[f].name)),e[f].prototype&&e[f].prototype.name&&(webix.ui[e[f].prototype.name]=e[f]);if(webix.ui[b]=webix.proto.apply(webix,e),c.d)for(var f=0;f<c.d.length;f++)webix.type(webix.ui[b],c.d[f]);c=d=null}return this!=webix?new webix.ui[b](a):webix.ui[b]};return c.b=Array.prototype.slice.call(arguments,0),webix.ui[b]=c},webix.proto=function(){for(var a=arguments,b=a[0],c=!!b.$init,d=[],e=a.length-1;e>0;e--){if("function"==typeof a[e]&&(a[e]=a[e].prototype),a[e].$init&&d.push(a[e].$init),a[e].defaults){var f=a[e].defaults;b.defaults||(b.defaults={});for(var g in f)webix.isUndefined(b.defaults[g])&&(b.defaults[g]=f[g])}if(a[e].type&&b.type)for(var g in a[e].type)b.type[g]||(b.type[g]=a[e].type[g]);for(var h in a[e])b[h]||b[h]===!1||(b[h]=a[e][h])}c&&d.push(b.$init),b.$init=function(){for(var a=0;a<d.length;a++)d[a].apply(this,arguments)},b.$skin&&b.$skin();var i=function(a){this.$ready=[],this.$init(a),this.e&&this.e(a,this.defaults);for(var b=0;b<this.$ready.length;b++)this.$ready[b].call(this)};return i.prototype=b,b=a=null,i},webix.bind=function(a,b){return function(){return a.apply(b,arguments)}},webix.require=function(a,b,c){var d=webix.promise.defer();if(b&&b!==!0&&(d=d.then(function(){b.call(c||this)})),webix.require.disabled)return d.resolve(),d;if("string"==typeof a){if(webix.f[a]!==!0){var e=a;if(a.toString().match(/^([a-z]+\:)*\/\//i)||(e=webix.codebase+a),".css"==a.substr(a.length-4)){var f=webix.html.create("LINK",{type:"text/css",rel:"stylesheet",href:e});return document.getElementsByTagName("head")[0].appendChild(f),d.resolve(),d}b===!0?(webix.exec(webix.ajax().sync().get(e).responseText),webix.f[a]=!0):webix.f[a]?webix.f[a].push(d):(webix.f[a]=[d],webix.ajax(e,function(b){webix.exec(b);var c=webix.f[a];webix.f[a]=!0;for(var d=0;d<c.length;d++)c[d].resolve()}))}else d.resolve();return d}var g=a.length||0;if(g){var h=function(){g?(g--,webix.require(a[a.length-g-1],h,c)):d.resolve()};h()}else{for(var i in a)g++;var h=function(){g--,0===g&&d.resolve()};for(var i in a)webix.require(i,h,c)}},webix.f={},webix.exec=function(a){window.execScript?window.execScript(a):window.eval(a)},webix.wrap=function(a,b){return a?function(){var c=a.apply(this,arguments);return b.apply(this,arguments),c}:b},webix.isUndefined=function(a){return"undefined"==typeof a},webix.delay=function(a,b,c,d){return window.setTimeout(function(){if(!b||!b.$destructed){var d=a.apply(b,c||[]);return a=b=c=null,d}},d||1)},webix.once=function(a){var b=!0;return function(){b&&(b=!1,a.apply(this,arguments))}},webix.uid=function(){return this.g||(this.g=(new Date).valueOf()),this.g++,this.g},webix.toNode=function(a){return"string"==typeof a?document.getElementById(a):a},webix.toArray=function(a){return webix.extend(a||[],webix.PowerArray,!0)},webix.toFunctor=function(str,scope){if("string"==typeof str){var method=str.replace("()","");return scope&&scope[method]?scope[method]:window[method]||eval(str)}return str},webix.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)},webix.isDate=function(a){return a instanceof Date},webix.h={},webix.event=function(a,b,c,d){a=webix.toNode(a);var e=webix.uid();return d&&(c=webix.bind(c,d)),webix.h[e]=[a,b,c],a.addEventListener?a.addEventListener(b,c,arguments[4]):a.attachEvent&&a.attachEvent("on"+b,webix.h[e][2]=function(){return c.apply(a,arguments)}),e},webix.eventRemove=function(a){if(a){var b=webix.h[a];b[0].removeEventListener?b[0].removeEventListener(b[1],b[2],!1):b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]),delete this.h[a]}},webix.EventSystem={$init:function(){this.i||(this.i={},this.j={},this.k={})},blockEvent:function(){this.i.l=!0},unblockEvent:function(){this.i.l=!1},mapEvent:function(a){webix.extend(this.k,a,!0)},on_setter:function(a){if(a)for(var b in a){var c=webix.toFunctor(a[b],this.$scope),d=b.indexOf("->");-1!==d?this[b.substr(0,d)].attachEvent(b.substr(d+2),webix.bind(c,this)):this.attachEvent(b,c)}},callEvent:function(a,b){if(this.i.l)return!0;a=a.toLowerCase();var c=this.i[a.toLowerCase()],d=!0;if(c)for(var e=0;e<c.length;e++)c[e].apply(this,b||[])===!1&&(d=!1);if(this.k[a]){var f=this.k[a];f.$eventSource=this,f.callEvent(a,b)||(d=!1),f.$eventSource=null}return d},attachEvent:function(a,b,c){a=a.toLowerCase(),c=c||webix.uid(),b=webix.toFunctor(b,this.$scope);var d=this.i[a]||webix.toArray();return arguments[3]?d.unshift(b):d.push(b),this.i[a]=d,this.j[c]={f:b,t:a},c},detachEvent:function(a){if(this.j[a]){var b=this.j[a].t,c=this.j[a].f,d=this.i[b];d.remove(c),delete this.j[a]}},hasEvent:function(a){a=a.toLowerCase();var b=this.i[a];return b&&b.length?!0:!1}},webix.extend(webix,webix.EventSystem,!0),webix.PowerArray={removeAt:function(a,b){a>=0&&this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(b||0===b){var c=this.splice(b,this.length-b);this[b]=a,this.push.apply(this,c)}else this.push(a)},find:function(a){for(var b=0;b<this.length;b++)if(a==this[b])return b;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this},filter:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])||(this.splice(c,1),c--);return this}},webix.env={},function(){if(webix.env.strict=!!window.webix_strict,webix.env.https="https:"===document.location.protocol,(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("Windows Phone"))&&(webix.env.mobile=!0),(webix.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))&&(webix.env.touch=!0),-1!=navigator.userAgent.indexOf("Opera"))webix.env.isOpera=!0;else{if(webix.env.isIE=!!document.all||-1!==navigator.userAgent.indexOf("Trident"),webix.env.isIE){var a=parseFloat(navigator.appVersion.split("MSIE")[1]);8==a&&(webix.env.isIE8=!0)}webix.env.isEdge=-1!=navigator.userAgent.indexOf("Edge"),webix.env.isFF=-1!=navigator.userAgent.indexOf("Firefox"),webix.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),webix.env.isSafari=webix.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac")}-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(webix.env.isAndroid=!0,navigator.userAgent.toLowerCase().indexOf("trident")&&(webix.env.isAndroid=!1,webix.env.isIEMobile=!0)),webix.env.transform=!1,webix.env.transition=!1;for(var b=-1,c=["","webkit","Moz","O","ms"],d=["","-webkit-","-Moz-","-o-","-ms-"],e=document.createElement("DIV"),f=0;f<c.length;f++){var g=c[f]?c[f]+"Transform":"transform";if("undefined"!=typeof e.style[g]){b=f;break}}if(b>-1){webix.env.cssPrefix=d[b];var h=webix.env.jsPrefix=c[b];webix.env.transform=h?h+"Transform":"transform",webix.env.transition=h?h+"Transition":"transition",webix.env.transitionDuration=h?h+"TransitionDuration":"transitionDuration",e.style[webix.env.transform]="translate3d(0,0,0)",webix.env.translate=e.style[webix.env.transform]?"translate3d":"translate",webix.env.transitionEnd="-Moz-"==webix.env.cssPrefix?"transitionend":h?h+"TransitionEnd":"transitionend"}}(),webix.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),webix.html={m:0,denySelect:function(){webix.m||(webix.m=document.onselectstart),document.onselectstart=webix.html.stopEvent},allowSelect:function(){0!==webix.m&&(document.onselectstart=webix.m||null),webix.m=0},index:function(a){for(var b=0;a=a.previousSibling;)b++;return b},n:{},createCss:function(a){var b="";for(var c in a)b+=c+":"+a[c]+";";var d=this.n[b];return d||(d="s"+webix.uid(),this.addStyle("."+d+"{"+b+"}"),this.n[b]=d),d},addStyle:function(a){var b=this.ky;b||(b=this.ky=document.createElement("style"),b.setAttribute("type","text/css"),b.setAttribute("media","screen"),document.getElementsByTagName("head")[0].appendChild(b)),b.styleSheet?b.styleSheet.cssText+=a:b.appendChild(document.createTextNode(a))},create:function(a,b,c){b=b||{};var d=document.createElement(a);for(var e in b)d.setAttribute(e,b[e]);return b.style&&(d.style.cssText=b.style),b["class"]&&(d.className=b["class"]),c&&(d.innerHTML=c),d},getValue:function(a){return a=webix.toNode(a),a?webix.isUndefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){a&&(b&&b.parentNode?b.parentNode.insertBefore(a,b):c.appendChild(a))},locate:function(a,b){var c;for(a.tagName?c=a:(a=a||event,c=a.target||a.srcElement);c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{y:Math.round(i),x:Math.round(j),width:a.offsetWidth,height:a.offsetHeight}}for(var i=0,j=0;a;)i+=parseInt(a.offsetTop,10),j+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:i,x:j,width:a.offsetHeight,height:a.offsetWidth}},posRelative:function(a){return a=a||event,webix.isUndefined(a.offsetX)?{x:a.layerX,y:a.layerY}:{x:a.offsetX,y:a.offsetY}},pos:function(a){if(a=a||event,a.touches&&a.touches[0]&&(a=a.touches[0]),a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=webix.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){return a&&a.preventDefault&&a.preventDefault(),a&&(a.returnValue=!1),webix.html.stopEvent(a)},stopEvent:function(a){return(a||event).cancelBubble=!0,!1},addCss:function(a,b,c){c&&-1!==a.className.indexOf(b)||(a.className+=" "+b)},removeCss:function(a,b){a.className=a.className.replace(RegExp(" "+b,"g"),"")},getTextSize:function(a,b){var c=webix.html.create("DIV",{"class":"webix_view webix_measure_size "+(b||"")},"");c.style.cssText="width:1px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden; white-space:nowrap;",document.body.appendChild(c);for(var d="object"!=typeof a?[a]:a,e=0,f=0,g=0;g<d.length;g++)c.innerHTML=d[g],e=Math.max(e,c.scrollWidth),f=Math.max(f,c.scrollHeight);return webix.html.remove(c),{width:e,height:f}}},webix.ready=function(a){this.o?a.call():this.p.push(a)},webix.p=[],function(){var a=document.getElementsByTagName("SCRIPT");a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),webix.codebase=a.slice(0,a.length).join("/")+"/");var b=function(){webix.env.isIE&&(document.body.className+=" webix_ie"),webix.callEvent("onReady",[])},c=function(){webix.o=!0,window.webix_ready&&webix.isArray(webix_ready)&&(webix.p=webix_ready.concat(webix.p));for(var a=0;a<webix.p.length;a++)webix.p[a].call();webix.p=[]};webix.attachEvent("onReady",function(a){a?c():webix.delay(c)}),"complete"==document.readyState?b():webix.event(window,"load",b)}(),webix.locale=webix.locale||{},webix.ready(function(){webix.event(document.body,"click",function(a){webix.callEvent("onClick",[a||event])})}),webix.editStop=function(){webix.callEvent("onEditEnd",[])},function(a){function b(a,b){var c=this;c.promise=c,c.state="pending",c.val=null,c.fn=a||null,c.er=b||null,c.next=[]}var c="undefined"!=typeof setImmediate?setImmediate:function(a){setTimeout(a,0)};b.prototype.resolve=function(a){var b=this;"pending"===b.state&&(b.val=a,b.state="resolving",c(function(){b.fire()}))},b.prototype.reject=function(a){var b=this;"pending"===b.state&&(b.val=a,b.state="rejecting",c(function(){b.fire()}))},b.prototype.then=function(a,c){var d=this,e=new b(a,c);return d.next.push(e),"resolved"===d.state&&e.resolve(d.val),"rejected"===d.state&&e.reject(d.val),e},b.prototype.fail=function(a){return this.then(null,a)},b.prototype.finish=function(a){var b=this;if(b.state=a,"resolved"===b.state)for(var c=0;c<b.next.length;c++)b.next[c].resolve(b.val);if("rejected"===b.state){for(var c=0;c<b.next.length;c++)b.next[c].reject(b.val);if(webix.assert&&!b.next.length)throw b.val}},b.prototype.thennable=function(a,b,c,d,e){var f=this;if(e=e||f.val,"object"==typeof e&&"function"==typeof a)try{var g=0;a.call(e,function(a){0===g++&&b(a)},function(a){0===g++&&c(a)})}catch(h){c(h)}else d(e)},b.prototype.fire=function(){var a,b=this;try{a=b.val&&b.val.then}catch(c){return b.val=c,b.state="rejecting",b.fire()}b.thennable(a,function(a){b.val=a,b.state="resolving",b.fire()},function(a){b.val=a,b.state="rejecting",b.fire()},function(c){if(b.val=c,"resolving"===b.state&&"function"==typeof b.fn)try{b.val=b.fn.call(void 0,b.val)}catch(d){return b.val=d,b.finish("rejected")}if("rejecting"===b.state&&"function"==typeof b.er)try{b.val=b.er.call(void 0,b.val),b.state="resolving"}catch(d){return b.val=d,b.finish("rejected")}return b.val===b?(b.val=TypeError(),b.finish("rejected")):void b.thennable(a,function(a){b.val=a,b.finish("resolved")},function(a){b.val=a,b.finish("rejected")},function(a){b.val=a,b.finish("resolving"===b.state?"resolved":"rejected")})})},b.prototype.done=function(){if(this.state=!this.next)throw this.val;return null},b.prototype.nodeify=function(a){return"function"==typeof a?this.then(function(b){try{a(null,b)}catch(c){setImmediate(function(){throw c})}return b},function(b){try{a(b)}catch(c){setImmediate(function(){throw c})}return b}):this},b.prototype.spread=function(a,b){return this.all().then(function(b){return"function"==typeof a&&a.apply(null,b)},b)},b.prototype.all=function(){var a=this;return this.then(function(c){function d(){++f===g&&e.resolve(c)}var e=new b;if(!(c instanceof Array))return e.reject(TypeError),e;for(var f=0,g=c.length,h=0,i=c.length;i>h;h++){var j,k=c[h];try{j=k&&k.then}catch(l){e.reject(l);break}!function(b){a.thennable(j,function(a){c[b]=a,d()},function(a){c[b]=a,d()},function(){d()},k)}(h)}return e})};var d={all:function(a){var c=new b(null,null);return c.resolve(a),c.all()},defer:function(){return new b(null,null)},fcall:function(){var a=new b,c=Array.apply([],arguments),d=c.shift();try{var e=d.apply(null,c);a.resolve(e)}catch(f){a.reject(f)}return a},nfcall:function(){var a=new b,c=Array.apply([],arguments),d=c.shift();try{c.push(function(b,c){return b?a.reject(b):a.resolve(c)}),d.apply(null,c)}catch(e){a.reject(e)}return a}};a.promise=d}(webix),function(){function a(a,c,d){var e={name:c,data:d,key:i},g=webix.promise.defer();return k.push([a,e,g]),h||(h=setTimeout(b,1)),g.sync=function(){return e.sync=!0,f(a,e)},g}function b(){for(var a=[],b=[],c="",d=0;d<k.length;d++){var f=k[d];f[1].sync||(j.multicall?(c=f[0],a.push(f[1]),b.push(f)):e.apply(this,f))}k=[],h=!1,j.multicall&&a.length&&e(c,{data:a,key:i,multicall:!0},b)}function c(a,b){if(j.multicall)for(var c=0;c<a.length;c++)a[c][2].resolve(b[c]);else a.resolve(b)}function d(a,b){if(j.multicall)for(var c=0;c<a.length;c++)a[c][2].reject(b);else a.reject(b)}function e(a,b,e){var f=webix.ajax();b.data=f.stringify(b.data),f.post(a,b).then(function(a){var b=g(a.text());b?c(e,b.data):d(e,a.text())},function(a){d(e,a)}),webix.callEvent("onRemoteCall",[e,b])}function f(a,b){var c=webix.ajax();return webix.callEvent("onRemoteCall",[null,b]),b.data=c.stringify(b.data),g(c.sync().post(a,b).responseText).data}function g(a){return webix.DataDriver.json.toObject.call(j,a)}var h,i="",j={timeout:30,parseDates:!0,multicall:!0},k=[],l=webix.remote=function(a,b,c,d){if(!b){var e=document.getElementsByTagName("script");b=e[e.length-1].src}c=c||l,d=d||"";for(var f in a)if("$key"==f)i=a.$key;else if(0===f.indexOf("$"))l[f]=a[f];else if("object"==typeof a[f]){var g=c[f]={};l(a[f],b,g,f+".")}else c[f]=m(b,d+f)},m=function(b,c){return function(){return a(b,c,[].splice.call(arguments,0))}};l.config=j,l.flush=b}(),webix.skin={},webix.skin.air={topLayout:"wide",barHeight:34,tabbarHeight:36,rowHeight:34,toolbarHeight:22,listItemHeight:28,inputHeight:34,inputPadding:2,menuHeight:34,menuMargin:0,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,calendarHeight:70,padding:0,optionHeight:27},webix.skin.aircompact={topLayout:"wide",barHeight:24,tabbarHeight:26,rowHeight:26,toolbarHeight:22,listItemHeight:28,inputHeight:29,inputPadding:2,menuHeight:25,menuMargin:0,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,calendarHeight:70,padding:0,optionHeight:23},webix.skin.web={name:"web",topLayout:"space",barHeight:28,tabbarHeight:30,rowHeight:30,toolbarHeight:22,listItemHeight:28,inputHeight:28,inputPadding:2,menuMargin:0,menuHeight:27,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:3,tabTopOffset:3,calendarHeight:70,padding:0,optionHeight:22},webix.skin.clouds={topLayout:"wide",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:22,listItemHeight:32,inputHeight:30,inputPadding:2,menuHeight:34,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0},webix.skin.terrace={topLayout:"space",barHeight:37,tabbarHeight:39,rowHeight:38,toolbarHeight:22,listItemHeight:28,inputHeight:30,inputPadding:2,menuMargin:0,menuHeight:32,labelTopHeight:16,layoutMargin:{space:20,wide:20,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:20,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,calendarHeight:70,padding:17,optionHeight:24},webix.skin.metro={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:36,listItemHeight:32,inputHeight:30,buttonHeight:45,inputPadding:2,menuHeight:36,labelTopHeight:16,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0,optionHeight:23},webix.skin.light={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:32,toolbarHeight:36,listItemHeight:32,inputHeight:34,buttonHeight:45,inputPadding:3,menuHeight:36,labelTopHeight:16,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendarHeight:70,padding:0,optionHeight:27},webix.skin.glamour={topLayout:"space",barHeight:39,tabbarHeight:39,rowHeight:32,toolbarHeight:39,listItemHeight:32,inputHeight:34,buttonHeight:34,inputPadding:3,menuHeight:36,labelTopHeight:16,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:3,form:8,accordion:0},tabMargin:1,tabOffset:0,tabBottomOffset:1,calendarHeight:70,padding:0,optionHeight:27},webix.skin.touch={topLayout:"space",barHeight:42,tabbarHeight:50,rowHeight:42,toolbarHeight:42,listItemHeight:42,inputHeight:42,inputPadding:4,menuHeight:42,labelTopHeight:24,unitHeaderHeight:34,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:0,form:0,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendar:{headerHeight:70,timepickerHeight:35,height:310,width:300},padding:0,customCheckbox:!0,customRadio:!0,optionHeight:32},webix.skin.flat={topLayout:"space",barHeight:45,tabbarHeight:45,rowHeight:34,toolbarHeight:45,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:5,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:29},webix.skin.compact={topLayout:"space",barHeight:34,tabbarHeight:34,rowHeight:24,toolbarHeight:34,listItemHeight:28,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:4,accordion:5},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:3,form:12,accordion:0},tabMargin:3,tabOffset:0,tabBottomOffset:3,tabTopOffset:1,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:23},webix.skin.material={topLayout:"space",barHeight:45,tabbarHeight:47,rowHeight:38,toolbarHeight:22,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:2,menuMargin:0,menuHeight:34,labelTopHeight:16,propertyItemHeight:34,layoutMargin:{material:10,space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:16,accordion:0},layoutPadding:{material:10,space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:16,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,customCheckbox:!0,customRadio:!0,calendarHeight:70,padding:0,accordionType:"accordion"},webix.skin.set=function(a){if(webix.skin.$active=webix.skin[a],webix.skin.$name=a,webix.ui)for(var b in webix.ui){var c=webix.ui[b];c&&c.prototype&&c.prototype.$skin&&c.prototype.$skin(c.prototype)}},webix.skin.set(window.webix_skin||"flat"),webix.Destruction={$init:function(){webix.destructors.push(this)},destructor:function(){var a=this.s;if(this.di&&this.editCancel(),this.callEvent&&this.callEvent("onDestruct",[]),this.destructor=function(){},this.getChildViews){var b=this.getChildViews();if(b)for(var c=0;c<b.length;c++)b[c].destructor();if(this.Ns)for(var c=0;c<this.Ns.length;c++)this.Ns[c].destructor()}delete webix.ui.views[a.id],this.t=null,this.u=null,this.v=null,this.w&&(this.w.innerHTML="",this.w.t=null),this.x&&this.x.parentNode&&this.x.parentNode.removeChild(this.x),this.data&&this.data.destructor&&this.data.destructor(),this.unbind&&this.unbind(),this.data=null,this.x=this.$view=this.w=this.y=null,this.i=this.j={},webix.UIManager.A==this&&(webix.UIManager.A=null);var d=a.url;d&&d.$proxy&&d.release&&d.release(),this.$scope=null,this.$destructed=!0}},webix.destructors=[],webix.event(window,"unload",function(){webix.callEvent("unload",[]),webix.B=!0;for(var a=0;a<webix.destructors.length;a++)webix.destructors[a].destructor();webix.destructors=[],webix.ui.et=webix.toArray();for(var b in webix.h){var c=webix.h[b];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]),delete webix.h[b]}}),function(){var a={},b={},c=new RegExp("(\\r\\n|\\n)","g"),d=new RegExp('(\\")',"g"),e=new RegExp("(\\\\)","g"),f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g=/[&<>"'`]/g,h=function(a){return f[a]||"&amp;"};webix.template=function(f){if("function"==typeof f)return f;if(a[f])return a[f];if(f=(f||"").toString(),-1!=f.indexOf("->")){var g=f.split("->");switch(g[0]){case"html":f=webix.html.getValue(g[1]);break;case"http":f=(new webix.ajax).sync().get(g[1],{uid:webix.uid()}).responseText}}if(f=(f||"").toString(),webix.env.strict){if(!b[f]){b[f]=[];var h=[];if(f.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,function(a,b,c,d,e){h.push({pos:e,str:a,fn:function(a){return a[b]?c:d}})}),f.replace(/\{common\.([^}\(]*)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a,c){return c[b]||""}})}),f.replace(/\{common\.([^\}\(]*)\(\)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a,c){return c[b]?c[b].apply(this,arguments):""}})}),f.replace(/\{obj\.([^:}]*)\}/g,function(a,b,c){h.push({pos:c,str:a,fn:function(a){return a[b]}})}),f.replace("{obj}",function(a,b,c){h.push({pos:c,str:a,fn:function(a){return a}})}),f.replace(/#([^#'";, ]+)#/gi,function(a,b,c){h.push("!"==b.charAt(0)?{pos:c,str:a,fn:function(a){return b=b.substr(1),-1!=b.indexOf(".")&&(a=webix.CodeParser.collapseNames(a)),webix.template.escape(a[b.substr(1)])}}:{pos:c,str:a,fn:function(a){return-1!=b.indexOf(".")&&(a=webix.CodeParser.collapseNames(a)),a[b]}})}),h.sort(function(a,b){return a.pos>b.pos?1:-1}),h.length){for(var i=0,j=function(a,c,d){b[a].push(function(){return a.slice(c,d)})},k=0;k<h.length;k++){var l=h[k].pos;j(f,i,l),b[f].push(h[k].fn),i=l+h[k].str.length}j(f,i,f.length)}else b[f].push(function(){return f})}return function(){for(var a="",c=0;c<b[f].length;c++)a+=b[f][c].apply(this,arguments);return a}}f=f.replace(e,"\\\\"),f=f.replace(c,"\\n"),f=f.replace(d,'\\"'),f=f.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),f=f.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\""),f=f.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"'),f=f.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"'),f=f.replace("{obj}",'"+obj+"'),f=f.replace(/#([^#'";, ]+)#/gi,function(a,b){return"!"==b.charAt(0)?'"+webix.template.escape(obj.'+b.substr(1)+')+"':'"+(obj.'+b+')+"'});try{a[f]=Function("obj","common",'return "'+f+'";')}catch(m){}return a[f]},webix.template.escape=function(a){return a===webix.undefined||null===a?"":(a.toString()||"").replace(g,h)},webix.template.empty=function(){return""},webix.template.bind=function(a){return webix.bind(webix.template(a),this)},webix.type=function(a,b){if(a.b)return a.d||(a.d=[]),void a.d.push(b);"function"==typeof a&&(a=a.prototype),a.types||(a.types={"default":a.type},a.type.name="default");var c=b.name,d=a.type;c&&(d=a.types[c]=webix.clone(b.baseType?a.types[b.baseType]:a.type));for(var e in b)d[e]=0===e.indexOf("template")?webix.template(b[e]):b[e];return c}}(),webix.Settings={$init:function(){this.s=this.config={}},define:function(a,b){return"object"==typeof a?this.C(a):this.D(a,b)},D:function(a,b){var c=this[a+"_setter"];return this.s[a]=c?c.call(this,b,a):b},C:function(a){if(a)for(var b in a)this.D(b,a[b])},e:function(a,b){var c={};b&&(c=webix.extend(c,b)),"object"!=typeof a||a.tagName||webix.extend(c,a,!0),this.C(c)},E:function(a,b){for(var c in b)switch(typeof a[c]){case"object":a[c]=this.E(a[c]||{},b[c]);break;case"undefined":a[c]=b[c]}return a}},webix.proxy=function(a,b){var c=webix.copy(webix.proxy[a]);return c.source=b,c.init&&c.init(),c},webix.proxy.post={$proxy:!0,load:function(a,b,c){c=webix.extend(c||{},this.params||{},!0),webix.ajax().bind(a).post(this.source,c,b)}},webix.proxy.sync={$proxy:!0,load:function(a,b){webix.ajax().sync().bind(a).get(this.source,null,b)}},webix.proxy.connector={$proxy:!0,connectorName:"!nativeeditor_status",load:function(a,b){webix.ajax(this.source,b,a)},saveAll:function(a,b,c,d){for(var e=this.source,f={},g=[],h=0;h<b.length;h++){var i=b[h];g.push(i.id);for(var j in i.data)0!==j.indexOf("$")&&(f[i.id+"_"+j]=i.data[j]);f[i.id+"_"+this.connectorName]=i.operation}f.ids=g.join(","),f.webix_security=webix.securityKey,e+=-1==e.indexOf("?")?"?":"&",e+="editing=true",webix.ajax().post(e,f,d)},result:function(a,b,c,d,e,f){if(e=e.xml(),!e)return c.yr(null,d,e,f);var g=e.data.action;g.length||(g=[g]);for(var h=[],i=0;i<g.length;i++){var j=g[i];h.push(j),j.status=j.type,j.id=j.sid,j.newid=j.tid,c.processResult(j,j,{text:d,data:e,loader:f})}return h}},webix.proxy.rest={$proxy:!0,load:function(a,b){webix.ajax(this.source,b,a)},save:function(a,b,c,d){var e=this.source;e+="/"==e.charAt(e.length-1)?"":"/";var f=b.operation,g=b.data;"insert"==f&&delete g.id,"update"==f?webix.ajax().put(e+g.id,g,d):"delete"==f?webix.ajax().del(e+g.id,g,d):webix.ajax().post(e,g,d)}},webix.proxy.faye={$proxy:!0,init:function(){this.clientId=this.clientId||webix.uid()},load:function(a){var b=this.clientId;this.client.subscribe(this.source,function(c){c.clientId!=b&&webix.dp(a).ignore(function(){if("delete"==c.operation)a.remove(c.data.id);else if("insert"==c.operation)a.add(c.data);else if("update"==c.operation){var b=a.getItem(c.data.id);b&&(webix.extend(b,c.data,!0),a.refresh(b.id))}})})},save:function(a,b){b.clientId=this.clientId,this.client.publish(this.source,b)}},webix.proxy.indexdb={$proxy:!0,create:function(a,b,c,d){this.source=a+"/",this.F(d,c,function(a){var c=a.target.result;for(var d in b)for(var e=b[d],f=c.createObjectStore(d,{keyPath:"id",autoIncrement:!0}),g=0;g<e.length;g++)f.put(e[g])})},F:function(a,b,c){if(-1!=this.source.indexOf("/")){var d=this.source.split("/");this.source=d[1],b=b||d[2];var e,f=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB;e=b?f.open(d[0],b):f.open(d[0]),c&&(e.onupgradeneeded=c),e.onerror=function(){},e.onblocked=function(){},e.onsuccess=webix.bind(function(b){this.db=b.target.result,a&&a.call(this)},this)}else this.db?a.call(this):webix.delay(this.F,this,[a],50)},load:function(a,b){this.F(function(){var c=this.db.transaction(this.source).objectStore(this.source),d=[];c.openCursor().onsuccess=function(c){var e=c.target.result;e?(d.push(e.value),e["continue"]()):(a.parse(d),webix.ajax.$callback(a,b,"[]",d))}})},save:function(a,b,c){this.F(function(){var a,d=b.operation,e=b.data,f=b.id,g=this.db.transaction([this.source],"readwrite").objectStore(this.source);"delete"==d?a=g["delete"](f):"update"==d?a=g.put(e):"insert"==d&&(delete e.id,a=g.add(e)),a.onsuccess=function(a){var e={status:d,id:b.id};"insert"==d&&(e.newid=a.target.result),c.processResult(e,e)}})}},webix.ajax=function(a,b,c,d){return 0!==arguments.length?(new webix.ajax).get(a,b,c,d):this.getXHR?this:new webix.ajax},webix.ajax.count=0,webix.ajax.prototype={master:null,getXHR:function(){return new XMLHttpRequest},stringify:function(a){var b=Date.prototype.toJSON;Date.prototype.toJSON=function(){
return webix.i18n.parseFormatStr(this)};var c;return c=a instanceof Date?a.toJSON():JSON.stringify(a),Date.prototype.toJSON=b,c},G:function(a,b,c,d,e){b&&(webix.isArray(b)||"function"==typeof(b.success||b.error||b))&&(d=c,c=b,b=null);var f=webix.promise.defer(),g=this.getXHR();webix.isArray(c)||(c=[c]),c.push({success:function(a,b){f.resolve(b)},error:function(){f.reject(g)}});var h=this.I||{};if("GET"!==e){var i=!1;for(var j in h)"content-type"==j.toString().toLowerCase()&&(i=!0);i||(h["Content-Type"]="application/x-www-form-urlencoded")}if(webix.callEvent("onBeforeAjax",[e,a,b,g,h,null,f])){if("object"==typeof b){var k=[];for(var l in b){var m=b[l];(null===m||m===webix.undefined)&&(m=""),"object"==typeof m&&(m=this.stringify(m)),k.push(l+"="+encodeURIComponent(m))}b=k.join("&")}b&&"GET"===e&&(a=a+(-1!=a.indexOf("?")?"&":"?")+b,b=null),g.open(e,a,!this.H);var n=this.Tw;n&&(g.responseType=n);for(var j in h)g.setRequestHeader(j,h[j]);var o=this;return this.master=this.master||d,g.onreadystatechange=function(){if(!g.readyState||4==g.readyState){if(webix.ajax.count++,c&&o&&!g.aborted){if(-1!=webix.ly.find(g))return webix.ly.remove(g);var a,b,e=o.master||o,f=g.status>=400||0===g.status;"blob"==g.responseType||"arraybuffer"==g.responseType?(a="",b=g.response):(a=g.responseText||"",b=o.J(g)),webix.ajax.$callback(e,c,a,b,g,f)}o&&(o.master=null),c=o=d=null}},this.qh&&(g.timeout=this.qh),this.H?g.send(b||null):setTimeout(function(){g.aborted||(-1!=webix.ly.find(g)?webix.ly.remove(g):g.send(b||null))},1),this.master&&this.master.Ve&&this.master.Ve.push(g),this.H?g:f}},J:function(a){return{xml:function(){try{return webix.DataDriver.xml.tagToObject(webix.DataDriver.xml.toObject(a.responseText,this))}catch(b){}},rawxml:function(){return window.XPathResult?a.responseXML:webix.DataDriver.xml.fromString(a.responseText)},text:function(){return a.responseText},json:function(){try{return JSON.parse(a.responseText)}catch(b){}}}},get:function(a,b,c){return this.G(a,b,c,0,"GET")},post:function(a,b,c){return this.G(a,b,c,0,"POST")},put:function(a,b,c){return this.G(a,b,c,0,"PUT")},del:function(a,b,c){return this.G(a,b,c,0,"DELETE")},sync:function(){return this.H=!0,this},timeout:function(a){return this.qh=a,this},response:function(a){return this.Tw=a,this},header:function(a){return this.I=a,this},headers:function(a){return this.I=webix.extend(this.I||{},a),this},bind:function(a){return this.master=a,this}},webix.ajax.$callback=function(a,b,c,d,e,f){if(!a.$destructed){if(-1===e&&d&&"function"==typeof d.json&&(d=d.json()),f&&webix.callEvent("onAjaxError",[e]),webix.isArray(b)||(b=[b]),!f)for(var g=0;g<b.length;g++)if(b[g]){var h=b[g].before;h&&h.call(a,c,d,e)}for(var g=0;g<b.length;g++)if(b[g]){var i=b[g].success||b[g];f&&(i=b[g].error),i&&i.call&&i.call(a,c,d,e)}}},webix.send=function(a,b,c,d){var e=webix.html.create("FORM",{target:d||"_self",action:a,method:c||"POST"},"");for(var f in b){var g=webix.html.create("INPUT",{type:"hidden",name:f,value:b[f]},"");e.appendChild(g)}e.style.display="none",document.body.appendChild(e),e.submit(),document.body.removeChild(e)},webix.AtomDataLoader={$init:function(a){this.data={},this.waitData=webix.promise.defer(),a&&(this.s.datatype=a.datatype||"json",this.$ready.push(this.K))},K:function(){this.L=!0,this.s.url&&this.url_setter(this.s.url),this.s.data&&this.data_setter(this.s.data)},url_setter:function(a){if("string"==typeof a&&-1!=a.indexOf("->")){var b=a.split("->");a=webix.proxy(b[0],b[1])}return this.L?(this.load(a,this.s.datatype),a):a},data_setter:function(a){return this.L?(this.parse(a,this.s.datatype),!0):a},load:function(a,b){var c=arguments[2]||null;this.callEvent("onBeforeLoad",[]),"string"==typeof b?(this.data.driver=webix.DataDriver[b],b=arguments[2]):this.data.driver||(this.data.driver=webix.DataDriver.json);var d=[{success:this.M,error:this.N}];if(b&&(webix.isArray(b)?d.push.apply(d,b):d.push(b)),"string"==typeof a&&-1!=a.indexOf("->")){var e=a.split("->");a=webix.proxy(e[0],e[1])}return a.$proxy&&a.load?a.load(this,d,c):"function"==typeof a?a(c).then(webix.bind(function(a){webix.ajax.$callback(this,d,"",a,-1)},this),webix.bind(function(a){webix.ajax.$callback(this,d,"",null,a,!0)},this)):webix.ajax(a,d,this)},parse:function(a,b){return a&&a.then&&"function"==typeof a.then?a.then(webix.bind(function(a){a&&"function"==typeof a.json&&(a=a.json()),this.parse(a,b)},this)):a&&a.sync&&this.sync?this.sync(a):(this.callEvent("onBeforeLoad",[]),this.data.driver=webix.DataDriver[b||"json"],void this.M(a,null))},M:function(a,b,c){var d,e=this.data.driver;if(d=-1===c?e.toObject(b):e.toObject(a,b)){var f=e.getDetails(e.getRecords(d)[0]);this.setValues?this.setValues(f):this.data=f}else this.N(a,b,c);this.callEvent("onAfterLoad",[]),this.waitData.resolve()},N:function(a,b,c){this.callEvent("onAfterLoad",[]),this.callEvent("onLoadError",arguments),webix.callEvent("onLoadError",[a,b,c,this])},O:function(a){if(!this.s.dataFeed||this.P||!a)return!0;var b=this.s.dataFeed;return"function"==typeof b?b.call(this,a.id||a,a):(b=b+(-1==b.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a),this.callEvent("onBeforeLoad",[]),webix.ajax(b,function(a,b,c){this.P=!0;var d=webix.DataDriver.json,e=d.toObject(a,b);e?this.setValues(d.getDetails(d.getRecords(e)[0])):this.N(a,b,c),this.P=!1,this.callEvent("onAfterLoad",[])},this),!1)}},webix.DataDriver={},webix.DataDriver.json={toObject:function(a){if(!a)return null;if("string"==typeof a)try{if(this.parseDates){var b=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3})?Z/;a=JSON.parse(a,function(a,c){return"string"==typeof c&&b.test(c)?new Date(c):c})}else a=JSON.parse(a)}catch(c){return null}return a},getRecords:function(a){return a&&a.data&&(a=a.data),a&&!webix.isArray(a)?[a]:a},getDetails:function(a){return"string"==typeof a?{id:a||webix.uid(),value:a}:a},getOptions:function(a){return a.collections},getInfo:function(a){return{Q:a.total_count||0,R:a.pos||0,S:a.parent||0,T:a.config,U:a.webix_security}},child:"data",parseDates:!1},webix.DataDriver.html={toObject:function(a){if("string"==typeof a){var b=null;return-1==a.indexOf("<")&&(b=webix.toNode(a)),b||(b=document.createElement("DIV"),b.innerHTML=a),b.firstChild}return a},getRecords:function(a){return a.getElementsByTagName(this.tag)},getDetails:function(a){return webix.DataDriver.xml.tagToObject(a)},getOptions:function(){return!1},getInfo:function(){return{Q:0,R:0}},tag:"LI"},webix.DataDriver.jsarray={toObject:function(a){return"string"==typeof a?JSON.parse(a):a},getRecords:function(a){return a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return null!==this.idColumn&&(b.id=a[this.idColumn]),b},getOptions:function(){return!1},getInfo:function(){return{Q:0,R:0}},idColumn:null},webix.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return null!==this.idColumn&&(b.id=a[this.idColumn]),b},getOptions:function(){return!1},getInfo:function(){return{Q:0,R:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},idColumn:null,row:"\n",cell:","},webix.DataDriver.xml={V:function(a){return a&&a.documentElement?a.getElementsByTagName("parsererror").length?null:a:null},toObject:function(a,b){var c=b?b.rawxml?b.rawxml():b:null;return this.V(c)?c:(c="string"==typeof a?this.fromString(a.replace(/^[\s]+/,"")):a,this.V(c)?c:null)},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(a){return this.tagToObject(a,{})},getOptions:function(){return!1},getInfo:function(a){var b=this.xpath(a,this.config);return b=b.length?this.assignTypes(this.tagToObject(b[0],{})):null,{Q:a.documentElement.getAttribute("total_count")||0,R:a.documentElement.getAttribute("pos")||0,S:a.documentElement.getAttribute("parent")||0,T:b,U:a.documentElement.getAttribute("webix_security")||null}},xpath:function(a,b){if(window.XPathResult){var c=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var d=[],e=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null),f=e.iterateNext();f;)d.push(f),f=e.iterateNext();return d}var g=!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(h){}if(g)return a.selectNodes(b);var i=b.split("/").pop();return a.getElementsByTagName(i)},assignTypes:function(a){for(var b in a){var c=a[b];if("object"==typeof c)this.assignTypes(c);else if("string"==typeof c){if(""===c)continue;"true"==c?a[b]=!0:"false"==c?a[b]=!1:c==1*c&&(a[b]=1*a[b])}}return a},tagToObject:function(a,b){var c=1==a.nodeType&&a.getAttribute("stack"),d=0;if(c){b=[];for(var e=a.childNodes,f=0;f<e.length;f++)1==e[f].nodeType&&b.push(this.tagToObject(e[f],{}))}else{b=b||{};var g=a.attributes;if(g&&g.length)for(var f=0;f<g.length;f++)b[g[f].name]=g[f].value,d=1;for(var e=a.childNodes,f=0;f<e.length;f++)if(1==e[f].nodeType){var h=e[f].tagName;b[h]?("function"!=typeof b[h].push&&(b[h]=[b[h]]),b[h].push(this.tagToObject(e[f],{}))):b[h]=this.tagToObject(e[f],{}),d=2}if(!d)return this.nodeValue(a);2>d&&(b.value=b.value||this.nodeValue(a))}return b},nodeValue:function(a){return a.firstChild?a.firstChild.wholeText||a.firstChild.data:""},fromString:function(a){try{if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");return b.loadXML(a),b}}catch(c){return null}}},webix.BaseBind={bind:function(a,b,c){this.attachEvent||webix.extend(this,webix.EventSystem),"string"==typeof a&&(a=webix.$$(a)),a.W&&a.W(),this.W&&this.W(),a.getBindData||webix.extend(a,webix.BindSource),this.X(),a.addBind(this.s.id,b,c),this.Os=a.s.id;var d=this.s.id;this.Ps=this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return a.getBindData(d)}),this.refresh&&this.isVisible(this.s.id)&&this.refresh()},unbind:function(){if(this.Os){var a=webix.$$(this.Os);a&&a.removeBind(this.s.id),this.detachEvent(this.Ps),this.Os=null}},X:function(){var a=this.s;if(this.filter){var b=a.id;this.data.Y=webix.bind(function(){webix.$$(this.Os).Z[b]=!1},this)}var c=this.render;this.render=function(){if(!this.$){this.$=!0;var a=this.callEvent("onBindRequest");return this.$=!1,c.apply(this,a===!1?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(){return this.validate&&!this.validate()?!1:(webix.$$(this.Os).setBindData(this.getValue?this.getValue:this.getValues(),this.s.id),void(this.setDirty&&this.setDirty(!1)))}),!a.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",webix.bind(function(){this.Os&&(webix.$$(this.Os).Z[this.s.id]=!1)},this)),this.X=function(){}}},webix.BindSource={$init:function(){this.bb={},this.Z={},this.cb={},this.db(this)},saveBatch:function(a){this.eb=!0,a.call(this),this.eb=!1,this.fb()},setBindData:function(a,b){if(b&&(this.cb[b]=!0),this.setValue)this.setValue(a);else if(this.setValues)this.setValues(a);else{var c=this.getCursor();c?this.updateItem(c,a):this.add(a)}this.callEvent("onBindUpdate",[a,b]),this.save&&this.save(),b&&(this.cb[b]=!1)},getBindData:function(a,b){if(this.Z[a])return!1;var c=webix.$$(a);c.isVisible(c.s.id)&&(this.Z[a]=!0,this.gb(c,this.bb[a][0],this.bb[a][1]),b&&c.filter&&c.refresh())},addBind:function(a,b,c){this.bb[a]=[b,c]},removeBind:function(a){delete this.bb[a],delete this.Z[a],delete this.cb[a]},db:function(a){a.filter?webix.extend(this,webix.CollectionBind):a.setValue?webix.extend(this,webix.ValueBind):webix.extend(this,webix.RecordBind)},fb:function(){if(!this.eb)for(var a in this.bb)this.cb[a]||(this.Z[a]=!1,this.getBindData(a,!0))},hb:function(a,b,c){a.setValue?a.setValue(c&&b?c[b]:c):a.filter?a.data.silent(function(){this.filter(b,c)}):!c&&a.clear?a.clear():a.O(c)&&a.setValues(webix.clone(c)),a.callEvent("onBindApply",[c,b,this])}},webix.DataValue=webix.proto({name:"DataValue",isVisible:function(){return!0},$init:function(a){(!a||webix.isUndefined(a.value))&&(this.data=a||"");var b=a&&a.id?a.id:webix.uid();this.s={id:b},webix.ui.views[b]=this},setValue:function(a){this.data=a,this.callEvent("onChange",[a])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind),webix.DataRecord=webix.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(a){this.data=a||{};var b=a&&a.id?a.id:webix.uid();this.s={id:b},webix.ui.views[b]=this},getValues:function(){return this.data},setValues:function(a,b){this.data=b?webix.extend(this.data,a,!0):a,this.callEvent("onChange",[a])},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind,webix.AtomDataLoader,webix.Settings),webix.ValueBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(a,b,c){b=b||"value";var d=this.getValue()||"";if(c&&(d=c(d)),a.setValue)a.setValue(d);else if(a.filter)a.data.silent(function(){this.filter(b,d)});else{var e={};e[b]=d,a.O(d)&&a.setValues(e)}a.callEvent("onBindApply",[d,b,this])}},webix.RecordBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(a,b,c){var d=this.getValues()||null;c&&(d=c(d)),this.hb(a,b,d)}},webix.CollectionBind={$init:function(){this.ib=null,this.attachEvent("onSelectChange",function(){var a=this.getSelectedId();this.setCursor(a?a.id||a:null)}),this.attachEvent("onAfterCursorChange",this.fb),this.attachEvent("onAfterDelete",function(a){a==this.getCursor()&&this.setCursor(null)}),this.data.attachEvent("onStoreUpdated",webix.bind(function(a,b,c){a&&a==this.getCursor()&&"paint"!=c&&"delete"!=c&&this.fb()},this)),this.data.attachEvent("onClearAll",webix.bind(function(){this.ib=null},this)),this.data.attachEvent("onIdChange",webix.bind(function(a,b){this.ib==a&&(this.ib=b,this.fb())},this))},refreshCursor:function(){this.ib&&this.callEvent("onAfterCursorChange",[this.ib])},setCursor:function(a){a==this.ib||null!==a&&!this.getItem(a)||(this.callEvent("onBeforeCursorChange",[this.ib]),this.ib=a,this.callEvent("onAfterCursorChange",[a]))},getCursor:function(){return this.ib},gb:function(a,b,c){if("$level"==b&&this.data.getBranch)return(a.data||a).importData(this.data.getBranch(this.getCursor()));var d=this.getItem(this.getCursor())||this.s.defaultData||null;return"$data"==b?"function"==typeof c?c.call(a,d,this):a.data.importData(d?d[c]:[]):(c&&(d=c(d)),void this.hb(a,b,d))}},webix.AtomRender={jb:function(a){return a.$empty?"":this.s.template(a,this)},render:function(){var a=this.s;return this.isVisible(a.id)?((!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&!a.content&&(this.y.innerHTML="",this.y.innerHTML=this.jb(this.data)),this.callEvent&&this.callEvent("onAfterRender",[])),!0):!1},sync:function(a){this.kb=!1,"DataStore"!=a.name&&(a.data&&"DataStore"==a.name?a=a.data:this.kb=!0),this.kb?a.bind("change",webix.bind(function(a){a.id==this.data.id&&(this.data=a.attributes,this.refresh())},this)):a.attachEvent("onStoreUpdated",webix.bind(function(b){b&&b!=this.data.id||(this.data=a.pull[b],this.refresh())},this))},template_setter:webix.template},webix.SingleRender=webix.proto({template_setter:function(a){this.type.template=webix.template(a)},jb:function(a){var b=this.type;return(b.templateStart?b.templateStart(a,b):"")+b.template(a,b)+(b.templateEnd?b.templateEnd(a,b):"")},customize:function(a){webix.type(this,a)}},webix.AtomRender),webix.UIManager={A:null,lb:{},mb:0,nb:{enter:13,tab:9,esc:27,escape:27,up:38,down:40,left:37,right:39,pgdown:34,pagedown:34,pgup:33,pageup:33,end:35,home:36,insert:45,"delete":46,backspace:8,space:32,meta:91,win:91,mac:91,multiply:106,add:107,subtract:109,decimal:110,divide:111},ob:function(){webix.event(document.body,"click",webix.bind(this.pb,this)),webix.event(document,"keydown",webix.bind(this.qb,this)),document.body.addEventListener&&document.body.addEventListener("focus",webix.bind(this.rb,this),!0),webix.destructors.push(this)},destructor:function(){webix.UIManager.A=null},getFocus:function(){return this.A},sb:function(a){this.tb=this.tb||a.s.id},setFocus:function(a,b){return a=webix.$$(a),a&&!a.$view&&(a=null),this.mb=new Date,this.A===a?!0:(this.A&&this.A.callEvent&&this.A.callEvent("onBlur",[this.A]),a&&a.callEvent&&a.callEvent("onFocus",[a,this.A]),webix.callEvent("onFocusChange",[a,this.A]),this.A&&this.A.blur&&!b&&this.A.blur(),this.A=a,a&&a.focus&&!b&&a.focus(),!0)},applyChanges:function(a){var b=this.getFocus();b&&b!=a&&b.Xy&&b.Xy(a)},hasFocus:function(a){return a===this.A?!0:!1},ub:function(a,b){var c=webix.html.locate(a,"view_id")||this.tb;return c=webix.$$(c),this.tb=null,c!=this.A?(b||(this.tb=null),c?(c=webix.$$(c),this.canFocus(c)&&this.setFocus(c)):b||this.setFocus(null),!0):void 0},pb:function(a){return new Date-this.mb<100?(this.tb=null,!1):this.ub(a)},rb:function(a){return this.ub(a,!0)},canFocus:function(a){return a.isVisible()&&a.isEnabled()},vb:function(a){var b=this.getFocus();return a&&!this.wb(a,b)?!1:void(this.xb("getPrev",a)?this.A=null:this.setFocus(this.getPrev(a)))},Xz:{190:46},wb:function(a,b){if(!a)return!1;if(!b)return!1;for(;b;){if(b===a)return!0;b=b.getParentView()}return!1},yb:function(){this&&this.callEvent&&this.callEvent("onTimedKeyPress",[])},BA:function(a){return 112>a&&a>105},qb:function(a){var b=a.which||a.keyCode;b>95&&106>b&&(b-=48),b=this.Xz[b]||b;var c=a.ctrlKey,d=a.shiftKey,e=a.altKey,f=a.metaKey,g=this.zb(b,c,d,e,f),h=this.getFocus();h&&h.callEvent&&(h.callEvent("onKeyPress",[b,a])===!1&&webix.html.preventEvent(a),h.hasEvent("onTimedKeyPress")&&(clearTimeout(h.Ab),h.Ab=webix.delay(this.yb,h,[],h.s.keyPressTimeout||250))),this.tabControl&&(9!==b||c||e||f||(this.xb(d?"getPrev":"getNext"),webix.html.preventEvent(a))),this.BA(b)||(g=this.zb(String.fromCharCode(b),c,d,e,f));var i=!c&&!e&&!f&&9!=b&&27!=b&&13!=b;return this.Bb(g,i,a)===!1?(webix.html.preventEvent(a),!1):void 0},xb:function(a){if(!this.getFocus())return null;a=a||"getNext";for(var b=this.getFocus(),c=b,d=webix.uid();;){if(b=this[a](b),b&&b.s.tabFocus&&this.canFocus(b))return this.setFocus(b);if(b===c||b.$fmarker==d)return null;b.$fmarker=d}},getTop:function(a){for(var b,c=webix.$$(a);c&&(b=c.getParentView());)c=b;return c},getNext:function(a,b){var c=a.getChildViews();if(c.length&&!b)return c[0];var d=a.getParentView();if(!d)return a;var e=d.getChildViews();if(e.length)for(var f=webix.PowerArray.find.call(e,a)+1;f<e.length;){if(this.canFocus(e[f]))return e[f];f++}return this.getNext(d,!0)},getPrev:function(a,b){var c=a.getChildViews();if(c.length&&b)return this.getPrev(c[c.length-1],!0);if(b)return a;var d=a.getParentView();if(!d)return this.getPrev(a,!0);var e=d.getChildViews();if(e)for(var f=webix.PowerArray.find.call(e,a)-1;f>=0;){if(this.canFocus(e[f]))return this.getPrev(e[f],!0);f--}return d},addHotKey:function(a,b,c){var d=this.Cb(a);c||(c=null),d.handler=b,d.view=c;var e=this.zb(d.letter,d.ctrl,d.shift,d.alt,d.meta);return this.lb[e]||(this.lb[e]=[]),this.lb[e].push(d),a},removeHotKey:function(a,b,c){var d=this.Cb(a),e=this.zb(d.letter,d.ctrl,d.shift,d.alt,d.meta);if(b||c){var f=this.lb[e];if(f){for(var g=f.length-1;g>=0;g--)c&&f[g].view!==c||b&&f[g].handler!==b||f.splice(g,1);f.length||delete this.lb[e]}}else delete this.lb[e]},zb:function(a,b,c,d,e){return a+"_"+["",b?"1":"0",c?"1":"0",d?"1":"0",e?"1":"0"].join("")},Bb:function(a,b,c){var d=this.getFocus();return this.lb[a]?this.Db(this.lb[a],d,c):b&&this.lb.ANY_0000?this.Db(this.lb.ANY_0000,d,c):!0},Db:function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(null===e.view||b===e.view||"string"==typeof e.view&&b&&b.name===e.view){var f=e.handler(b,c);if(!!f===f)return f}}return!0},Cb:function(a){var b,c,d,e,f=this.nb,g=a.toLowerCase().split(/[\+\-_]/);b=c=d=e=0;for(var h="",i=0;i<g.length;i++)if("ctrl"===g[i])b=1;else if("shift"===g[i])c=1;else if("alt"===g[i])d=1;else if("command"===g[i])e=1;else if(f[g[i]]){var j=f[g[i]];h=this.BA(j)?j.toString():String.fromCharCode(j)}else h=g[i];return{letter:h.toUpperCase(),ctrl:b,shift:c,alt:d,meta:e}}},webix.ready(function(){webix.UIManager.ob(),webix.UIManager.addHotKey("enter",function(a,b){if(a&&a.editStop&&a.Eb)return a.editStop(),!0;if(a&&a.touchable){var c=a.getFormView();c&&!a.Dt&&c.callEvent("onSubmit",[a,b])}}),webix.UIManager.addHotKey("esc",function(a){if(a){if(a.editCancel&&a.Eb)return a.editCancel(),!0;var b=a.getTopParentView();b&&b.setPosition&&b.Fb()}}),webix.UIManager.addHotKey("shift+tab",function(a,b){if(a&&a.Gb&&!a.Gb(!1,b))return!1;if(a&&a.Eb){if(a.editNext)return a.editNext(!1);if(a.editStop)return a.editStop(),!0}}),webix.UIManager.addHotKey("tab",function(a,b){if(a&&a.Gb&&!a.Gb(!0,b))return!1;if(a&&a.Eb){if(a.editNext)return a.editNext(!0);if(a.editStop)return a.editStop(),!0}else webix.delay(function(){webix.UIManager.tabControl||webix.UIManager.setFocus(webix.$$(document.activeElement),!0)},1)})}),webix.IdSpace={$init:function(){this.Hb={},this.Ib={},this.getTopParentView=webix.bind(function(){return this},this),this.Jb(),this.$ready.push(this.Kb)},$$:function(a){return this.Hb[a]},innerId:function(a){return this.Ib[a]},Jb:function(){this.Lb=webix.Mb,webix.Mb=this},Kb:function(){for(var a in this.Hb){var b=this.Hb[a];this.callEvent&&b.mapEvent&&!b.k.onitemclick&&b.mapEvent({onitemclick:this}),b.getTopParentView=this.getTopParentView}webix.Mb=this.Lb,this.Lb=0},ui:function(){this.Jb();var a=webix.ui.apply(webix,arguments);return this.Kb(),a}},function(){var a=[],b=webix.ui;if(!webix.ui){b=webix.ui=function(a,e,f){webix.Nb=!0;var g=webix.isArray(a),h=webix.toNode(a.container||e||document.body);h.s&&(f=d(h,g,f));var i,j=h==document.body;if(a.s||h&&g?i=a:(h&&j&&(a.$topView=!0),a.Ob||(a.Ob={}),i=b.A(a)),!j||i.setPosition||i.$apiOnly||webix.ui.Pb(),i.s&&i.s.ft&&!h.$view)i.s.gt=h;else if(!i.$apiOnly)if(h.appendChild)c(h,i,a);else if(h.destructor){var k=h;if(f||0===f||webix.isArray(i)||(f=h,h=h.getParentView()),h&&h.Qb)i.getParentView&&i.getParentView()&&i.getParentView().Rb(i),h.Qb(i,f);else{var e=k.$view.parentNode;k.destructor(),c(e,i,a)}}return webix.Nb=!1,i};var c=function(b,c,d){b.appendChild(c.x),((!c.setPosition||c.s.fullscreen)&&b==document.body||c.s.position)&&a.push(c),d.skipResize||c.adjust()},d=function(a,b,c){var d=[a];if(b)d=a.getChildViews();else if(a.gd)d=[a.gd];else{if("number"==typeof c)return c;if(c)return d=[webix.$$(c)],e(d),d[0].config.id}return e(d),c},e=function(a){for(var b=a.length-1;b>=0;b--)delete webix.ui.views[a[b].config.id],a[b].config.id="x"+webix.uid(),webix.ui.views[a[b].config.id]=a[b],e(a[b].getChildViews())}}webix.ui.animate=function(a,b,c){var d=webix.$$(b);if(d){var e=c||{type:"slide",direction:"left"},f=d.x.cloneNode(!0),g=webix.ui(a,b);g.x.parentNode.appendChild(f);var h=webix.animate.formLine(g.x,f,e);return e.callback=function(){webix.animate.breakLine(h)},webix.animate(h,e),g}},webix.ui.animateView=function(a,b,c){if(a=webix.$$(a)){c=c||{type:"slide",direction:"left"};for(var d=function(a){var b=a.x,c=b.className,d=b.innerHTML;return"<div class='"+c+"' style='width:"+b.offsetWidth+"px;height:"+b.offsetHeight+"px;'>"+d+"</div>"},e=[],f=0;f<a.x.childNodes.length;f++){var g=a.x.childNodes[f],h=g.currentStyle?g.currentStyle.display:getComputedStyle(g,null).display;e.push(h||"")}var i=d(a);"function"==typeof b&&b.call(this);for(var j=d(a),k=a.x.insertBefore(webix.html.create("DIV",{"class":"webix_view_animate",style:"width:"+a.x.offsetWidth+"px;height:"+a.x.offsetHeight+"px;"},j+i),a.x.firstChild),f=1;f<a.x.childNodes.length;f++)a.x.childNodes[f].style.display="none";var l=webix.animate.formLine(k.childNodes[0],k.childNodes[1],c);return c.callback=function(){if(k){a.x.removeChild(k),k=null;for(var b=0;b<a.x.childNodes.length;b++)a.x.childNodes[b].style.display=e[b]}},webix.animate(l,c),a}},webix.ui.Sb=function(){var a=webix.html.create("div");a.className="webix_skin_mark",a.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth,c={110:"air",120:"aircompact",130:"clouds",140:"web",150:"terrace",160:"metro",170:"light",180:"glamour",190:"touch",200:"flat",210:"compact",220:"material"}[10*Math.floor(a.offsetHeight/10)];if(document.body.removeChild(a),c){var d=webix.skin[c];d&&d!=webix.skin.$active&&webix.skin.set(c)}return webix.env.$customScroll?0:b},webix.ui.scrollSize=webix.env.touch||webix.env.$customScroll?0:17,webix.ready(function(){var a=webix.ui.Sb();webix.ui.scrollSize=webix.env.touch?0:a}),webix.ui.Tb=function(a){return"$"+a+(this.Ub[a]=(this.Ub[a]||0)+1)},webix.ui.Ub={},webix.ui.Pb=function(){webix.html.addStyle("html, body{ height:100%; }"),document.body.className+=" webix_full_screen",webix.ui.Pb=function(){},webix.Touch.limit(!1)},webix.ui.resize=function(){if(webix.UIManager.applyChanges(),webix.callEvent("onClick",[]),!webix.ui.$freeze)for(var b=a.length-1;b>=0;b--)a[b].$destructed?a.splice(b,1):a[b].adjust()},webix.ui.each=function(a,b,c,d){if(a)for(var e=d?[a]:a.getChildViews(),f=0;f<e.length;f++)b.call(c||webix,e[f])!==!1&&webix.ui.each(e[f],b,c)},webix.event(window,"resize",webix.ui.resize),b.Wb={},b.delay=function(a){webix.ui.Wb[a.id]=a},b.hasMethod=function(a,b){var c=webix.ui[a];return c?(c.b&&(c=c.call(webix)),!!webix.ui[a].prototype[b]):!1},webix.ui.zIndex=function(){return webix.ui.zIndexBase++},webix.ui.zIndexBase=100,b.A=function(a){if(a.view){var c=a.view;return new b[c](a)}if(a.rows||a.cols){for(var d=a.rows||a.cols,e=!1,f=0;f<d.length;f++)d[f].body&&!d[f].view&&(e=!0);return e?new b.headerlayout(a):new b.layout(a)}return a.cells?new b.multiview(a):a.template||a.content?new b.template(a):new b.spacer(a)},b.views={},webix.$$=function(a){if(!a)return null;if(b.views[a])return b.views[a];if(b.Wb[a])return webix.ui(b.Wb[a]);var c=a;if("object"==typeof a){if(a.s)return a;c=a.target||a.srcElement||a}return b.views[webix.html.locate({target:webix.toNode(c)},"view_id")]},webix.isUndefined(window.$$)&&(window.$$=webix.$$),webix.UIExtension=window.webix_view||{},webix.protoUI({name:"baseview",$init:function(a){a.id||(a.id=webix.ui.Tb(this.name)),this.Xb=webix.Xb,webix.Xb=null,this.$scope=a.$scope||(this.Xb?this.Xb.$scope:null),this.x||(this.w=this.x=webix.html.create("DIV",{"class":"webix_view"}),this.$view=this.x)},$skin:!1,defaults:{width:0,height:0,gravity:1},getNode:function(){return this.x},getParentView:function(){return this.Xb||null},getTopParentView:function(){var a=this.getParentView();return a?a.getTopParentView():this},getFormView:function(){var a=this.getParentView();return!a||a.setValues?a:a.getFormView()},getChildViews:function(){return[]},isVisible:function(a){if(this.s.hidden)return a&&(this.Yb||(this.Yb=[],this.Zb={}),this.Zb[a]||(this.Zb[a]=!0,this.Yb.push(a))),!1;var b=this.getParentView();return b?b.isVisible(a,this.s.id):!0},isEnabled:function(){if(this.$b)return!1;var a=this.getParentView();return a?a.isEnabled():!0},disable:function(){webix.html.remove(this.$b),this.s.disabled=!0,this.$b=webix.html.create("div",{"class":"webix_disabled"}),window.getComputedStyle&&(this._b=window.getComputedStyle(this.x,null).getPropertyValue("position")),"absolute"!=this._b&&(this.x.style.position="relative"),this.x.appendChild(this.$b),webix.html.addCss(this.x,"webix_disabled_view",!0),webix.UIManager.vb(this)},enable:function(){this.s.disabled=!1,this.$b&&(webix.html.remove(this.$b),webix.html.removeCss(this.x,"webix_disabled_view"),this.$b=null,this._b&&(this.x.style.position=this._b))},disabled_setter:function(a){return a?this.disable():this.enable(),a},container_setter:function(a){return!0},css_setter:function(a){return"object"==typeof a&&(a=webix.html.createCss(a)),this.x.className+=" "+a,a},id_setter:function(a){if(webix.Mb&&(webix.Mb!=this||this.Lb)){var b=this.config.$id=a;(this.Lb||webix.Mb).Hb[a]=this,a=webix.ui.Tb(this.name),(this.Lb||webix.Mb).Ib[a]=b}return webix.ui.views[a]=this,this.x.setAttribute("view_id",a),a},$setSize:function(a,b){var c=this.ac;return c&&c[0]==a&&c[1]==b?!1:(this.ac=[a,b],this.$width=this.bc=a-(this.cc?webix.ui.scrollSize:0),this.$height=this.dc=b-(this.ec?webix.ui.scrollSize:0),this.x.style.width=a+"px",this.x.style.height=b+"px",webix.env.isWebKit&&(this.x.offsetWidth,this.x.offsetHeight),!0)},$getSize:function(a,b){var c=this.s,d=[c.width||c.minWidth||0,c.width||c.maxWidth||1e5,c.height||c.minHeight||0,c.height||c.maxHeight||1e5,c.gravity];return d[0]+=a,d[1]+=a,d[2]+=b,d[3]+=b,d},show:function(a,b){var c=this.getParentView(),d=!arguments[2];if(c)!b&&b!==!1&&this.s.animate&&c.s.animate&&(b=webix.extend(c.s.animate?webix.extend({},c.s.animate):{},this.s.animate,!0)),(d?c.fc:c.Fb)&&(d?c.fc:c.Fb).call(c,this,b),d&&this.Qd(),a&&d&&c.show(a);else if(this.s.hidden){if(d){var e=webix.toNode(this.s.gt||document.body);e.appendChild(this.x),this.s.hidden=!1,this.adjust(),this.Qd()}}else d||(this.s.hidden=this.s.ft=!0,this.x&&(this.s.gt=this.x.parentNode,webix.html.remove(this.x)))},Qd:function(){if(this.Yb){for(var a=0;a<this.Yb.length;a++){var b=webix.$$(this.Yb[a]);b&&b.render()}this.Yb=[],this.Zb={}}},hidden_setter:function(a){return a&&this.hide(),this.s.hidden},hide:function(){this.show(null,null,!0),webix.UIManager.vb(this)},adjust:function(){if(!this.x.parentNode)return!1;var a=this.x.parentNode.offsetWidth||0,b=this.x.parentNode.offsetHeight||0,c=this.$getSize(0,0);c[0]>a&&(a=c[0]),c[2]>b&&(b=c[2]),a>c[1]&&(a=c[1]),b>c[3]&&(b=c[3]),this.$setSize(a,b)},resize:function(){if(!webix.gc&&!webix.ui.$freeze){var a=this.getParentView();a?a.resizeChildren?a.resizeChildren():a.resize():(this.adjust(),webix.callEvent("onResize",[]))}}},webix.Settings,webix.Destruction,webix.BaseBind,webix.UIExtension),webix.protoUI({name:"view",$init:function(a){this.hc(a)},hc:function(a){var b=webix.isUndefined(a.borderless);b&&!this.setPosition&&a.$topView&&(a.borderless=!0,b=!1),b&&this.defaults.borderless||a.borderless?a.Ob={top:!0,left:!0,bottom:!0,right:!0}:(a.Ob||(a.Ob={}),this.w.style.borderWidth="1px")},$getSize:function(a,b){var c=this.s.Ob;c&&(a+=(c.left?0:1)+(c.right?0:1),b+=(c.top?0:1)+(c.bottom?0:1));var d=webix.ui.baseview.prototype.$getSize.call(this,a,b);return d},$setSize:function(a,b){var c=this.s.Ob;return c&&(a-=(c.left?0:1)+(c.right?0:1),b-=(c.top?0:1)+(c.bottom?0:1)),webix.ui.baseview.prototype.$setSize.call(this,a,b)}},webix.ui.baseview)}(),webix.ui.view.call(webix),webix.protoUI({name:"spacer",defaults:{borderless:!0},$init:function(){this.x.className+=" webix_spacer"}},webix.ui.view),webix.protoUI({name:"baselayout",$init:function(a){this.$ready.push(this.kc),this.y=this.w,this.lc=[],this.ht=[],a.$topView&&(a.borderless=!0,a.Ob={top:!0,left:!0,bottom:!0,right:!0}),a.isolate&&webix.extend(this,webix.IdSpace)},rows_setter:function(a){this.mc=1,this.nc=a},cols_setter:function(a){this.mc=0,this.$view.style.whiteSpace="nowrap",this.nc=a},Rb:function(a){webix.PowerArray.removeAt.call(this.q,webix.PowerArray.find.call(this.q,a)),this.resizeChildren(!0)},Qb:function(a,b){if(webix.isUndefined(b)){for(var c=0;c<this.q.length;c++)this.q[c].destructor();this.nc=a,this.kc()}else{var d;if("number"==typeof b){(0>b||b>this.q.length)&&(b=this.q.length);var e=(this.q[b]||{}).x;webix.PowerArray.insertAt.call(this.q,a,b),a.s.hidden||webix.html.insertBefore(a.x,e,this.y)}else{d=webix.$$(b),b=webix.PowerArray.find.call(this.q,d);var f=d.x.parentNode;f&&!a.s.hidden&&f.insertBefore(a.x,d.x),d.destructor(),this.q[b]=a}this.mc||this.oc(a),this.q[b].Xb=this}this.resizeChildren(!0);var g=this.elements?this:this.getFormView();g&&g.Qs(),webix.callEvent("onReconstruct",[this])},oc:function(a){a.x.style.display="inline-block",a.x.style.verticalAlign="top"},addView:function(a,b){return webix.isUndefined(b)&&(b=this.q.length),webix.ui(a,this,b).s.id},removeView:function(a){var b;b="object"!=typeof a?webix.$$(a):a;var c=webix.PowerArray.find.call(this.q,b);if(c>=0){this.Vx&&this.Vx(c,b);var d=this.elements?this:this.getFormView();this.q.splice(c,1),d&&webix.ui.each(b,function(a){a.name&&delete d.getCleanValues()[a.config.name]},d,!0),b.destructor(),this.resizeChildren(!0),
d&&d.Qs()}webix.callEvent("onReconstruct",[this])},reconstruct:function(){this.qc=0,this.Qb(this.nc)},Fb:function(a,b,c){a.s.hidden||(a.s.hidden=!0,webix.html.remove(a.x),this.qc++,c||webix.Nb||this.resizeChildren(!0))},Lw:function(a){a.callEvent&&a.callEvent("onViewShow",[])},resizeChildren:function(){if(!webix.ui.$freeze&&this.lc){var a=this.getParentView();if(a)return a.resizeChildren?a.resizeChildren():a.resize();var b,c,d,e,f=this.$getSize(0,0);d=b=this.lc[0]||0,e=c=this.lc[1]||0,a?this.rc(b,c):(f[0]>b&&(d=f[0]),f[2]>c&&(e=f[2]),b>f[1]&&(d=f[1]),c>f[3]&&(e=f[3]),this.$setSize(d,e)),webix.callEvent("onResize",[])}},getChildViews:function(){return this.q},index:function(a){a.s&&(a=a.s.id);for(var b=0;b<this.q.length;b++)if(this.q[b].s.id==a)return b;return-1},fc:function(a,b,c){if(a.s.hidden){a.s.hidden=!1;for(var d=this.index(a)+1;this.q[d]&&this.q[d].s.hidden;)d++;var e=this.q[d]?this.q[d].x:null;webix.html.insertBefore(a.x,e,this.y||this.x),this.qc--,c||(this.resizeChildren(!0),a.refresh&&a.refresh()),a.callEvent&&(a.callEvent("onViewShow",[]),webix.ui.each(a,this.Lw))}},showBatch:function(a){if(this.s.visibleBatch!=a){this.s.visibleBatch=a;for(var b=[],c=0;c<this.q.length;c++)this.q[c].s.batch?this.q[c].s.batch==a?b.push(this.q[c]):this.Fb(this.q[c],null,!0):b.push(this.q[c]);for(var c=0;c<b.length;c++)this.fc(b[c],null,!0);this.resizeChildren(!0)}},kc:function(a){this.q=[];for(var b=0;b<a.length;b++)webix.Xb=this,a[b].Ob||(a[b].borderless=!0),this.q[b]=webix.ui.A(a[b],this),this.mc||this.oc(this.q[b]),this.s.visibleBatch&&this.s.visibleBatch!=this.q[b].s.batch&&this.q[b].s.batch&&(this.q[b].s.hidden=!0,this.qc++),this.q[b].s.hidden||((this.y||this.w).appendChild(this.q[b].x),this.q[b].$nospace&&this.qc++);this.sc&&this.sc(a)},tc:function(a,b,c){if(this.mc!=c)for(var d=0;d<this.q.length;d++)this.q[d].s[a]=b,this.q[d].tc&&this.q[d].tc(a,b,c)},$getSize:function(a,b){var c=0,d=1e5,e=1e5,f=0;this.mc?e=0:d=0;var g=0,h=0,i=0;this.uc=[];for(var j=0;j<this.q.length;j++)if(!this.q[j].s.hidden){var k=this.uc[j]=this.q[j].$getSize(0,0);this.q[j].$nospace?h++:this.mc?(k[0]>c&&(c=k[0]),k[1]<d&&(d=k[1]),f+=k[2],e+=k[3],k[2]==k[3]&&-1!=k[2]?(g+=k[2],h++):i+=k[4]):(k[2]>f&&(f=k[2]),k[3]<e&&(e=k[3]),c+=k[0],d+=k[1],k[0]==k[1]&&-1!=k[0]?(g+=k[0],h++):i+=k[4])}f>e&&(e=f),c>d&&(d=c),this.vc=[g,this.q.length-h,i],this.ng=[c+a,f+b];var l=webix.ui.baseview.prototype.$getSize.call(this,0,0);return l[1]>=1e5&&(l[1]=0),l[3]>=1e5&&(l[3]=0),l[0]=(l[0]||c)+a,l[1]=Math.max(l[0],(l[1]||d)+a),l[2]=(l[2]||f)+b,l[3]=Math.max(l[2],(l[3]||e)+b),this.s.responsive&&(l[0]=0),l},$setSize:function(a,b){this.lc=[a,b],webix.ui.baseview.prototype.$setSize.call(this,a,b),this.rc(a,b)},wc:function(a,b,c){b=a[b],c=a[c];var d=b;if(b!=c){var e=this.xc*a[4]/this.yc;if(b>e)d=b,this.yc-=a[4],this.xc-=d;else{if(!(e>c))return-1;d=c,this.yc-=a[4],this.xc-=d}}return d},it:function(a,b){var c=webix.$$(b);"hide"!==c&&c?(c||(c=webix.ui({view:"popup",body:[{}]})),a.jt=a.s.width,a.kt=a.s.height,a.lt=c.s.id,a.s.width=0,a.s.height||(a.s.autoheight=!0),webix.ui(a,c,this.ht.length)):(a.hide(),webix.delay(this.resize,this),a.lt="hide"),this.ht.push(a)},mt:function(a){var b=a.lt;a.lt=0,"hide"!==b&&b?(a.s.width=a.jt,a.s.height=a.kt,delete a.s.autoheight,webix.ui(a,this,0)):(a.show(),webix.delay(this.resize,this)),this.ht.pop()},nt:function(a){if(!this.ot){if(this.ot=!0,a<this.ng[0])for(var b=0;b<this.q.length-1;b++){var c=this.q[b];if(!c.lt){this.it(c,this.s.responsive);break}}else if(this.ht.length){var c=this.ht[this.ht.length-1],d="hide"==c.lt?0:c.jt,e=c.$getSize(d,0);e[0]+this.ng[0]+this.Dc+20<=a&&this.mt(c)}this.ot=!1}},rc:function(a,b){webix.gc=(webix.gc||0)+1,this.s.responsive&&this.nt(a,b),this.xc=(this.mc?b:a)-this.vc[0],this.yc=this.vc[2];for(var c=a,d=b,e=[],f=0;f<this.q.length;f++)if(!this.q[f].s.hidden){var g=this.uc[f];if(this.mc){var d=this.wc(g,2,3);if(0>d){e.push(f);continue}}else{var c=this.wc(g,0,1);if(0>c){e.push(f);continue}}this.q[f].$setSize(c,d)}for(var f=0;f<e.length;f++){var h=e[f],g=this.uc[h],i=Math.round(this.xc*g[4]/this.yc);this.xc-=i,this.yc-=g[4],this.mc?d=i:c=i,this.q[h].$setSize(c,d)}webix.gc-=1},zc:function(a,b){var c=this.index(a);return-1==c?null:this.q[c+b]},Ac:function(){return this.q[0]}},webix.EventSystem,webix.ui.baseview),webix.protoUI({name:"layout",$init:function(){this.qc=0},defaults:{type:"line"},kc:function(){this.Bc&&(a=this.Bc(a)),this.Uw||(this.x.className+=" webix_layout_"+(this.s.type||""),this.Uw=1),this.s.margin!==webix.undefined&&(this.Cc=this.s.margin),this.s.padding!=webix.undefined&&(this.Dc=this.Ec=this.s.padding),this.s.paddingX!==webix.undefined&&(this.Dc=this.s.paddingX),this.s.paddingY!==webix.undefined&&(this.Ec=this.s.paddingY),(this.Ec||this.Dc)&&(this.Fc=!0),this.Wx()&&!this.s.borderless&&(this.w.style.borderWidth="1px",this.Gc=!0);var a=this.nc;this.s.borderless&&(this.s.Ob={top:!0,left:!0,right:!0,bottom:!0}),this.Hc(a),webix.ui.baselayout.prototype.kc.call(this,a),this.Ic(a)},$getSize:function(a,b){a=a||0,b=b||0;var c=this.Cc*(this.q.length-this.qc-1);if(this.Gc||this.Wx()){var d=this.s.Ob;d&&(a+=(d.left?0:1)+(d.right?0:1),b+=(d.top?0:1)+(d.bottom?0:1))}return this.s.height||(b+=2*(this.Ec||0)+(this.mc?c:0)),this.s.width||(a+=2*(this.Dc||0)+(this.mc?0:c)),webix.ui.baselayout.prototype.$getSize.call(this,a,b)},$setSize:function(a,b){this.lc=[a,b];var c;c=this.Wx()||this.Gc?webix.ui.view.prototype.$setSize.call(this,a,b):webix.ui.baseview.prototype.$setSize.call(this,a,b),b=this.dc,a=this.bc;var d=this.s;d.scroll&&(b=Math.max(b,this.ng[1]),a=Math.max(a,this.ng[0])),this.rc(a,b)},rc:function(a,b){var c=this.Cc*(this.q.length-this.qc-1);return this.mc?(b-=c+2*this.Ec,a-=2*this.Dc):(a-=c+2*this.Dc,b-=2*this.Ec),webix.ui.baselayout.prototype.rc.call(this,a,b)},resizeChildren:function(a){if(a){this.ac=null;for(var b=[],c=0;c<this.q.length;c++){var d=this.q[c];b[c]=d.s;var e=d.lc&&!d.Gc||d.s.borderless?"0px":"1px";d.x.style.borderTopWidth=d.x.style.borderBottomWidth=d.x.style.borderLeftWidth=d.x.style.borderRightWidth=e}this.Hc(b);for(var c=0;c<b.length;c++)b[c].borderless&&this.q[c].hc&&this.q[c].hc(b[c]);this.Ic(this.q)}webix.ui.baselayout.prototype.resizeChildren.call(this)},Wx:function(){return this.Fc&&this.Cc>0&&!this.Xx},Hc:function(a){if(!this.Wx()||this.s.borderless&&"space"!=this.s.type){for(var b=0;b<a.length;b++)a[b].Ob=webix.clone(this.s.Ob);var c=!1;this.Xx&&(c=!0);var d=a.length;if(this.mc){for(var b=1;d-1>b;b++)a[b].Ob.top=a[b].Ob.bottom=c;if(d>1){for("head"!=this.s.type&&(a[0].Ob.bottom=c);a[d-1].hidden&&d>1;)d--;d>0&&(a[d-1].Ob.top=c)}}else{for(var b=1;d-1>b;b++)a[b].Ob.left=a[b].Ob.right=c;if(d>1){for("head"!=this.s.type&&(a[0].Ob.right=c),a[d-1].Ob.left=c;d>1&&a[d-1].hidden;)d--;d>0&&(a[d-1].Ob.left=c)}}}else for(var b=0;b<a.length;b++)a[b].Ob&&a[b].borderless||(a[b].Ob={top:!1,left:!1,right:!1,bottom:!1})},Jc:function(a,b){b.top&&(a.borderTopWidth="0px"),b.left&&(a.borderLeftWidth="0px"),b.right&&(a.borderRightWidth="0px"),b.bottom&&(a.borderBottomWidth="0px")},Ic:function(a){for(var b=0,c=0;c<a.length;c++){var d=this.q[c],e=d.s.Ob;if(d.s.hidden&&this.q[c+1]){var f=this.q[c+1].s.Ob;e.top||(f.top=!1),e.left||(f.left=!1),c==b&&b++}this.Jc(d.x.style,d.s.Ob)}for(var g=this.mc?"marginLeft":"marginTop",h=this.mc?"marginTop":"marginLeft",i=this.mc?this.Dc:this.Ec,j=this.mc?this.Ec:this.Dc,c=0;c<a.length;c++)this.q[c].x.style[g]=(i||0)+"px";this.q.length&&(this.q[b].x.style[h]=(j||0)+"px");for(var k=b+1;k<a.length;k++)this.q[k].x.style[h]=this.Cc+"px"},type_setter:function(a){return this.Cc="undefined"!=typeof this.Kc[a]?this.Kc[a]:this.Kc.line,this.Dc=this.Ec="undefined"!=typeof this.Kc[a]?this.Lc[a]:this.Lc.line,this.Xx="material"==a||"clean"==a,"material"==a&&(this.s.borderless=!0),a},$skin:function(){var a=webix.skin.$active;this.Kc=a.layoutMargin,this.Lc=a.layoutPadding}},webix.ui.baselayout),webix.ui.layout.call(webix),webix.animate=function(a,b){var c=b;if(webix.isArray(a))for(var d=0;d<a.length;d++){if(webix.isArray(b)&&(c=b[d]),"slide"==c.type){if("out"==c.subtype&&0===d)continue;if("in"==c.subtype&&1==d)continue}if("flip"!=c.type)webix.animate(a[d],c);else{var e=webix.clone(c);0===d&&(e.type="flipback"),1==d&&(e.callback=null),webix.animate(a[d],e)}}else{var f=webix.toNode(a);f.Mc?webix.animate.end(f,c):webix.animate.start(f,c)}},webix.animate.end=function(a,b){a.style[webix.env.transitionDuration]="1ms",a.Mc=null,webix.Nc&&window.clearTimeout(webix.Nc),webix.Nc=webix.delay(webix.animate,webix,[a,b],10)},webix.animate.isSupported=function(){return!webix.$testmode&&!webix.noanimate&&webix.env.transform&&webix.env.transition&&!webix.env.isOpera},webix.animate.formLine=function(a,b,c){var d=c.direction;b.parentNode.style.position="relative",b.style.position="absolute",a.style.position="absolute";var e=webix.env.isFF?"top"==d||"left"==d?-1:1:0;return"top"==d||"bottom"==d?(a.style.left="0px",a.style.top=(c.top||e)+("top"==d?1:-1)*b.offsetHeight+"px"):(a.style.top=(c.top||0)+"px",a.style.left=e+("left"==d?1:-1)*b.offsetWidth+"px"),b.parentNode==a.parentNode&&c.keepViews?a.style.display="":webix.html.insertBefore(a,b.nextSibling,b.parentNode),"slide"==c.type&&"out"==c.subtype&&(a.style.left="0px",a.style.top=(c.top||0)+"px",b.parentNode.removeChild(b),webix.html.insertBefore(b,a.nextSibling,a.parentNode)),[a,b]},webix.animate.breakLine=function(a){arguments[1]?a[1].style.display="none":webix.html.remove(a[1]),webix.animate.clear(a[0]),webix.animate.clear(a[1]),a[0].style.position=""},webix.animate.clear=function(a){a.style[webix.env.transform]="none",a.style[webix.env.transition]="none",a.style.top=a.style.left=""},webix.animate.defaults={type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0},webix.animate.start=function(a,b){"string"==typeof b&&(b={type:b}),b=webix.Settings.E(b,webix.animate.defaults);var c,d,e=webix.env.cssPrefix,f=a.Mc=b;switch("slide"==f.type&&f.direction){case"right":f.x=a.offsetWidth;break;case"left":f.x=-a.offsetWidth;break;case"top":f.y=-a.offsetHeight;break;case"bottom":default:f.y=f.y||a.offsetHeight}("flip"==f.type||"flipback"==f.type)&&(c=[0,0],d="scaleX","vertical"==f.subtype?(c[0]=20,d="scaleY"):c[1]=20,("right"==f.direction||"bottom"==f.direction)&&(c[0]*=-1,c[1]*=-1));var g=f.duration+"ms "+f.timing+" "+f.delay+"ms",h=e+"TransformStyle: preserve-3d;",i="",j="";switch(f.type){case"fade":i="opacity "+g,h="opacity: 0;";break;case"show":i="opacity "+g,h="opacity: 1;";break;case"flip":g=f.duration/2+"ms "+f.timing+" "+f.delay+"ms",j="skew("+c[0]+"deg, "+c[1]+"deg) "+d+"(0.00001)",i="all "+g;break;case"flipback":f.delay+=f.duration/2,g=f.duration/2+"ms "+f.timing+" "+f.delay+"ms",a.style[webix.env.transform]="skew("+-1*c[0]+"deg, "+-1*c[1]+"deg) "+d+"(0.00001)",a.style.left="0",j="skew(0deg, 0deg) "+d+"(1)",i="all "+g;break;case"slide":var k=f.x+"px",l=f.y+"px";j=webix.env.translate+"("+k+", "+l+("translate3d"==webix.env.translate?", 0":"")+")",i=e+"transform "+g}webix.delay(function(){a.style[webix.env.transition]=i,webix.delay(function(){h&&(a.style.cssText+=h),j&&(a.style[webix.env.transform]=j);var b=!1,c=webix.event(a,webix.env.transitionEnd,function(d){a.Mc=null,f.callback&&f.callback.call(f.master||window,a,f,d),b=!0,webix.eventRemove(c)});window.setTimeout(function(){b||(a.Mc=null,f.callback&&f.callback.call(f.master||window,a,f),b=!0,webix.eventRemove(c))},1.3*(1*f.duration+1*f.delay))})})},webix.MouseEvents={$init:function(a){a=a||{},this.Oc=0,this.Pc=300,this.Qc=null,this.Rc(a.onClick,"on_click"),this.Rc(a.onContext,"on_context"),this.Rc(a.onDblClick,"on_dblclick"),this.Rc(a.onMouseMove,"on_mouse_move"),this.on_click&&(webix.event(this.w,"click",this.Sc,this),webix.env.isIE8&&this.on_dblclick&&webix.event(this.w,"dblclick",this.Tc,this)),this.on_context&&webix.event(this.w,"contextmenu",this.Uc,this),this.on_mouse_move&&this.Vc()},Vc:function(){this.Wc||(this.on_mouse_move=this.on_mouse_move||{},webix.event(this.w,"mousemove",this.Xc,this),webix.event(this.w,webix.env.isIE?"mouseleave":"mouseout",this.Xc,this),this.Wc=1)},Rc:function(a,b){if(a){var c=this[b],d=c?webix.extend({},c):{};this[b]=webix.extend(d,a)}},Sc:function(a){if(!this.isEnabled())return!1;if(webix.UIManager.sb(this),this.on_dblclick){var b=(new Date).valueOf();if(b-this.Oc<=this.Pc&&this.locate){var c=this.locate(a);if(""+c==""+this.Qc)return this.Oc=0,this.Tc(a)}this.Oc=b}var d=this.Yc(a,this.on_click,"ItemClick");return d},Tc:function(a){return this.Yc(a,this.on_dblclick,"ItemDblClick")},Uc:function(a){this.Yc(a,this.on_context,"BeforeContextMenu","AfterContextMenu")},Xc:function(a){if(document.createEventObject)a=document.createEventObject(event);else if(!(webix.$testmode||webix.isUndefined(a.movementY)||a.movementY||a.movementX))return;this.Zc&&window.clearTimeout(this.Zc),this.callEvent("onMouseMoving",[a]),this.Zc=window.setTimeout(webix.bind(function(){"mousemove"==a.type?this.$c(a):this._c(a)},this),this.s.mouseEventDelay||500)},$c:function(a){this.Yc(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},_c:function(a){this.callEvent("onMouseOut",[a||event])},Yc:function(a,b,c,d){if(a=a||event,!a.processed&&this.x){a.processed=!0;var e=a.target||a.srcElement;if(webix.env.isIE8){var f=this.s.id,g=e.w_view;if(g){if(g!==f)return}else e.w_view=f}for(var h="",i=null,j=!1;e&&e.parentNode&&e!=this.x.parentNode;){if(!j&&e.getAttribute&&(i=e.getAttribute(this.ad))){if(this.Qc=i,this.callEvent){if(!this.callEvent("on"+c,[i,a,e]))return;d&&this.callEvent("on"+d,[i,a,e])}j=!0}if(h=e.className){h=h.toString().split(" ");for(var k=0;k<h.length;k++)if(b[h[k]]){var l=webix.toFunctor(b[h[k]],this.$scope),m=l.call(this,a,i||webix.html.locate(a,this.ad),e);if(m===!1)return j}}e=e.parentNode}return j}}},webix.protoUI({name:"accordionitem",$init:function(a){this.x.innerHTML="<div webix_ai_id='"+a.id+"'  class='webix_accordionitem_header'><div class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>",this.w=this.x,this.bd=this.w.childNodes[0],a.header||(this.bd.style.display="none"),this.cd=this.w.childNodes[0].childNodes[1],this.dd=this.w.childNodes[0].childNodes[0],this.ed=this.w.childNodes[1],this.x.className+=" webix_accordionitem",this.fd=this.gd=null,this.q=!0},Rb:function(){this.gd={destructor:function(){}}},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x),this.resize()},ad:"webix_ai_id",getChildViews:function(){return[this.gd]},body_setter:function(a){return"object"!=typeof a&&(a={template:a}),a.Ob={top:!0,left:!0,right:!0,bottom:!0},this.gd=webix.ui.A(a),this.gd.$view.style.border="0px solid red",this.gd.Xb=this,this.ed.appendChild(this.gd.x),a},header_setter:function(a){return a&&(a=webix.template(a)),a},headerAlt_setter:function(a){return a&&(a=webix.template(a)),a},$getSize:function(a,b){var c=this.gd.$getSize(0,0),d=this.s.Ob;d&&(a+=(d.left?0:1)+(d.right?0:1),b+=(d.top?0:1)+(d.bottom?0:1));var e=0,f=webix.ui.baseview.prototype.$getSize.call(this,0,0);f[0]=(f[0]||c[0])+a,f[1]>=1e5&&(f[1]=c[1]),f[1]+=a,f[2]=(f[2]||c[2])+b;var g=f[3]<1e5;return g||(f[3]=c[3]),f[3]+=b,this.getParentView().mc?this.s.collapsed?f[2]=f[3]=this.hd():this.s.header&&(e=this.s.headerHeight):(this.s.collapsed&&(f[0]=f[1]=this.hd()),this.s.header&&(e=this.s.headerHeight)),g||(f[2]+=e,f[3]+=e),f},on_click:{webix_accordionitem_header:function(a){return this.id(a),!1},webix_accordionitem_header_v:function(a){return this.id(a),!1}},id:function(){this.define("collapsed",!this.s.collapsed)},collapsed_setter:function(a){if(this.s.header!==!1){var b=this.getParentView();if(a)if(!b||b.jd(this))this.kd();else{var c=0;if(b.q.length>1)for(var d=0;d<b.q.length;d++){var e=b.q[d];if(this!=e&&e.isVisible()){e.expand(),this.kd(),c=1;break}}if(!c)return}else this.ld();return this.s.collapsed=a,a||this.getParentView().md(this),this.refresh(),webix.Nb||this.resize(),b.callEvent("onAfter"+(a?"Collapse":"Expand"),[this.s.id]),this.s.$noresize=a,a}},collapse:function(){this.define("collapsed",!0),webix.UIManager.vb(this)},expand:function(){this.define("collapsed",!1)},fc:function(){this.show()},Fb:function(){this.hide()},ld:function(){this.ed.style.display="",webix.html.removeCss(this.$view,"collapsed"),webix.html.removeCss(this.bd,"collapsed")},kd:function(){this.getParentView().mc,this.s.headerAlt&&(this.cd.innerHTML=this.s.headerAlt()),this.ed.style.display="none",webix.html.addCss(this.$view,"collapsed"),webix.html.addCss(this.bd,"collapsed")},refresh:function(){var a=this.s[this.s.collapsed?"headerAlt":"header"]||this.s.header;a&&(this.cd.innerHTML=a());var b=this.getParentView().mc?"vertical":"horizontal";this.x.className.indexOf(" "+b)<0&&webix.html.addCss(this.x,b)},hd:function(){return this.s.collapsed?this.s.headerAltHeight:this.s.headerHeight},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)||this.hd()!=this.CA){a=this.bc,b=this.dc;var c=this.CA=this.hd();if(this.s.header)if(this.bd.style.height=c+"px",this.bd.style.width="auto",this.bd.style[webix.env.transform]="",this.bd.style.borderBottomWidth=(this.s.collapsed?0:1)+"px",this.getParentView().mc||!this.s.collapsed)b-=this.hd();else if(this.s.collapsed)if(webix.animate.isSupported()){this.bd.style.width=b+"px",this.bd.style.height=a+3+"px";var d=Math.floor(b/2-a/2)+(a-this.s.headerAltHeight)/2;this.bd.style[webix.env.transform]="rotate(90deg) translate("+d+"px, "+(d+1)+"px)"}else this.bd.style.width=a+"px",this.bd.style.height=b+3+"px",this.cd.innerHTML="";this.s.collapsed||(this.gd.$setSize(a,b),this.ct=b)}else if(!this.s.collapsed){var e=this.gd;this.ct&&e.$setSize(this.bc,this.ct)}},$skin:function(){var a=this.defaults;a.headerAltHeight=a.headerHeight=webix.skin.$active.barHeight,webix.skin.$active.borderlessAccordion&&(a.borderless=!0)},defaults:{header:!1,headerAlt:!1,body:""}},webix.MouseEvents,webix.EventSystem,webix.ui.view),webix.protoUI({name:"accordion",defaults:{panelClass:"accordionitem",multi:!1,collapsed:!1},addView:function(){var a=webix.ui.layout.prototype.addView.apply(this,arguments),b=webix.$$(a);return b.collapsed_setter&&b.refresh&&b.refresh(),a},kc:function(){for(var a=this.s.panelClass,b=this.nc,c=0;c<b.length;c++)!b[c].body&&!b[c].header||b[c].view||(b[c].view=a),webix.isUndefined(b[c].collapsed)&&(b[c].collapsed=this.s.collapsed);this.nd=!0,webix.ui.layout.prototype.kc.call(this),this.nd=!1;for(var c=0;c<this.q.length;c++)this.q[c].name==a&&this.q[c].refresh(),this.q[c].od=!1;for(var d=!1,c=this.q.length-1;c>=0&&!d;c--)this.q[c].s.hidden||(this.q[c].od=!0,d=!0)},md:function(a){if(this.s.multi===!1&&this.nd!==!0)for(var b=0;b<this.q.length;b++)a!=this.q[b]&&!this.q[b].s.collapsed&&this.q[b].collapse&&this.q[b].collapse()},jd:function(a){if(this.s.multi===!0||this.nd)return!0;for(var b=0;b<this.q.length;b++)if(a!=this.q[b]&&!this.q[b].s.collapsed&&this.q[b].isVisible())return!0;return!1},$skin:function(){var a=this.defaults;webix.skin.$active.accordionType&&(a.type=webix.skin.$active.accordionType)}},webix.ui.layout),webix.protoUI({name:"headerlayout",defaults:{type:"accordion",multi:"mixed",collapsed:!1}},webix.ui.accordion),webix.DragControl={pd:webix.toArray(["dummy"]),addDrop:function(a,b,c){a=webix.toNode(a),a.webix_drop=this.qd(b),c&&(a.webix_master=!0)},qd:function(a){a=a||webix.DragControl;var b=this.pd.find(a);return 0>b&&(b=this.pd.length,this.pd.push(a)),b},addDrag:function(a,b){a=webix.toNode(a),a.webix_drag=this.qd(b),webix.event(a,webix.env.mouse.down,this.rd,a),webix.event(a,"dragstart",webix.html.preventEvent)},rd:function(a){if(webix.DragControl.sd){if(webix.DragControl.td==a)return;webix.DragControl.ud(),webix.DragControl.destroyDrag(a)}webix.DragControl.sd=this;var b=webix.env.mouse.context(a);webix.DragControl.vd=b,webix.DragControl.td=a,webix.DragControl.wd=webix.event(document.body,webix.env.mouse.move,webix.DragControl.xd),webix.DragControl.yd=webix.event(document.body,webix.env.mouse.up,webix.DragControl.ud),webix.html.addCss(document.body,"webix_noselect",1)},ud:function(){webix.DragControl.zd()},xd:function(a){var b=webix.env.mouse.context(a);return Math.abs(b.x-webix.DragControl.vd.x)<5&&Math.abs(b.y-webix.DragControl.vd.y)<5||(webix.DragControl.zd(!0),!webix.DragControl.createDrag(webix.DragControl.td))?void 0:(webix.DragControl.sendSignal("start"),webix.DragControl.wd=webix.event(document.body,webix.env.mouse.move,webix.DragControl.Ad),webix.DragControl.yd=webix.event(document.body,webix.env.mouse.up,webix.DragControl.Bd),webix.DragControl.Ad(a),webix.env.touch?webix.html.preventEvent(a):void 0)},Bd:function(a){webix.DragControl.zd(),webix.DragControl.td=null,webix.DragControl.Cd&&(webix.DragControl.$drop(webix.DragControl.sd,webix.DragControl.Cd,a),webix.DragControl.$dragOut(webix.DragControl.sd,webix.DragControl.Cd,null,a)),webix.DragControl.destroyDrag(a),webix.DragControl.sendSignal("stop")},zd:function(a){this.wd=webix.eventRemove(this.wd),this.yd=webix.eventRemove(this.yd),a||webix.html.removeCss(document.body,"webix_noselect")},Ad:function(a){var b=webix.html.pos(a),c=webix.env.mouse.context(a);if(webix.DragControl.$dragPos(b,a),webix.DragControl.v.style.top=b.y+webix.DragControl.top+"px",webix.DragControl.v.style.left=b.x+webix.DragControl.left+"px",webix.DragControl.Ed)webix.DragControl.Ed=!1;else{var d=c.target=webix.env.touch?document.elementFromPoint(c.x,c.y):c.target,e=webix.env.touch?c:a;webix.DragControl.Fd(d,e)}return webix.html.preventEvent(a)},Fd:function(a,b){for(;a&&"BODY"!=a.tagName;){if(a.webix_drop){if(this.Cd&&(this.Cd!=a||a.webix_master)&&this.$dragOut(this.sd,this.Cd,a,b),!this.Cd||this.Cd!=a||a.webix_master)return this.Cd=null,this.Dd=this.$dragIn(webix.DragControl.sd,a,b),void(this.Dd&&(this.Cd=a));return}a=a.parentNode}this.Cd&&(this.Cd=this.Dd=this.$dragOut(this.sd,this.Cd,null,b))},sendSignal:function(a){webix.DragControl.active="start"==a},getMaster:function(a){return this.pd[a.webix_drag||a.webix_drop]},getContext:function(){return this.Gd},getNode:function(){return this.v},createDrag:function(a){var b=webix.DragControl.sd;webix.DragControl.Gd={};var c,d=this.pd[b.webix_drag];if(d.$dragCreate){if(c=d.$dragCreate(b,a),!c)return!1;c.style.position="absolute"}else{var e=webix.DragControl.$drag(b,a);if(!e)return!1;c=document.createElement("DIV"),c.innerHTML=e,c.className="webix_drag_zone",document.body.appendChild(c)}return c.style.zIndex=Math.max(c.style.zIndex,webix.ui.zIndex()),webix.DragControl.Hd=webix.event(c,webix.env.mouse.move,webix.DragControl.Id),webix.DragControl.Gd.from||(webix.DragControl.Gd={source:b,from:b}),webix.DragControl.v=c,!0},Id:function(){webix.DragControl.Ed=!0},destroyDrag:function(a){var b=webix.DragControl.sd,c=this.pd[b.webix_drag];c&&c.$dragDestroy?(webix.DragControl.Hd=webix.eventRemove(webix.DragControl.Hd),webix.DragControl.v&&c.$dragDestroy(b,webix.DragControl.v,a)):webix.html.remove(webix.DragControl.v),webix.DragControl.Dd=webix.DragControl.sd=webix.DragControl.Cd=webix.DragControl.v=null},top:5,left:5,$dragPos:function(a,b){var c=this.pd[webix.DragControl.sd.webix_drag];c.$dragPos&&c!=this&&c.$dragPos(a,b,webix.DragControl.v)},$dragIn:function(a,b,c){var d=this.pd[b.webix_drop];return d.$dragIn&&d!=this?d.$dragIn(a,b,c):(b.className=b.className+" webix_drop_zone",b)},$dragOut:function(a,b,c,d){var e=this.pd[b.webix_drop];return e.$dragOut&&e!=this?e.$dragOut(a,b,c,d):(b.className=b.className.replace("webix_drop_zone",""),null)},$drop:function(a,b,c){var d=this.pd[b.webix_drop];return webix.DragControl.Gd.from=webix.DragControl.getMaster(a),d.$drop&&d!=this?d.$drop(a,b,c):void b.appendChild(a)},$drag:function(a,b){var c=this.pd[a.webix_drag];return c.$drag&&c!=this?c.$drag(a,b):"<div style='"+a.style.cssText+"'>"+a.innerHTML+"</div>"}},webix.DataMove={copy:function(a,b,c,d){d=d||{};var e=d.newId||a;c=c||this;var f=this.getItem(a);return c&&(f=c.Jd(f)),c.data.add(c.Jd(f,e),b,d.parent||0)},Kd:function(a,b,c){if(b&&a){var d=this.getIndexById(a);return d+(c==this&&c.getIndexById(b)<d?0:1)}},move:function(a,b,c,d){d=d||{};var e=d.newId||a;if(c=c||this,c.data){if(webix.isArray(a)){a.length>3&&(this.$blockRender=c.$blockRender=!0);for(var f=0;f<a.length;f++){var g=this.move(a[f],b,c,d);b=c.Kd(g,a[f+1],this)}return this.$blockRender=c.$blockRender=!1,void(a.length>3&&(this.refresh(),c!=this&&c.refresh()))}var g=a,h=this.getItem(a);return c&&c!=this?(g=c.data.add(c.Jd(h,e),b,d.parent||0),this.data.remove(a)):(0>b&&(b=this.data.order.length-1),this.data.move(this.getIndexById(a),b),this.data.callEvent("onDataMove",[a,b,null,this.data.order[b+1]])),g}},moveUp:function(a,b){return this.move(a,this.getIndexById(a)-(b||1))},moveDown:function(a,b){return this.moveUp(a,-1*(b||1))},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.count()-1)},Jd:function(a,b){var c=webix.extend({},a);return c.id=!b||this.data.pull[b]?webix.uid():b,c.$template=null,this.s.externalData&&(c=this.s.externalData.call(this,c,b)),c}},webix.Movable={move_setter:function(a){return a&&(this.Ld=webix.clone(this.Ld),this.Ld.master=this,webix.DragControl.addDrag(this.bd,this.Ld)),a},Ld:{$dragCreate:function(a,b){var c=webix.html.offset(a),d=webix.html.pos(b);return webix.DragControl.top=c.y-d.y,webix.DragControl.left=c.x-d.x,webix.toNode(this.master.x)},$dragDestroy:function(a,b){var c=this.master;c.s&&(c.s.top=parseInt(b.style.top,10),c.s.left=parseInt(b.style.left,10)),webix.DragControl.top=webix.DragControl.left=5,this.master.callEvent("onViewMoveEnd",[])},$dragPos:function(a,b){this.master.callEvent("onViewMove",[a,b])}}},webix.Modality={Md:function(a){if(a){if(!this.Nd){this.Nd=webix.html.create("div",{"class":"webix_modal"});var b=this.s.zIndex||webix.ui.zIndex();this.Od=webix.Pd,webix.Pd=b,this.Nd.style.zIndex=b-1,this.x.style.zIndex=b,document.body.appendChild(this.Nd)}}else if(this.Nd){webix.html.remove(this.Nd);var c=this.Od;setTimeout(function(){webix.Pd=c},1),this.Nd=null}return a}},webix.protoUI({name:"window",$init:function(a){this.x.innerHTML="<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>",this.w=this.x.firstChild,this.bd=this.w.childNodes[0],this.y=this.ed=this.w.childNodes[1],this.x.className+=" webix_window",this.fd=this.gd=null,this.s.Ob={top:!1,left:!1,right:!1,bottom:!1},a.id||(a.id=webix.uid()),webix.event(this.w,"click",webix.bind(this.Vw,this)),this.w.addEventListener&&webix.event(this.w,"click",function(){!this.s.zIndex&&this.s.toFront&&(this.x.style.zIndex=webix.ui.zIndex())},this,!0),a.modal&&(this.my=!0)},Vw:function(a){var b=webix.ui.et,c=b.find(this);-1==c&&(c=b.length-1),a.click_view=c,webix.env.isIE8&&(a.srcElement.click_view=c)},getChildViews:function(){return this.fd?[this.fd,this.gd]:[this.gd]},zIndex_setter:function(a){return this.x.style.zIndex=a,a},Rb:function(){this.gd={destructor:function(){}}},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x);var b=this.gd.x.style;b.borderTopWidth=b.borderBottomWidth=b.borderLeftWidth=b.borderRightWidth="1px",this.gd.s.Ob=webix.clone(this.s.Ob),this.resize(!0)},show:function(a,b,c){if(!this.callEvent("onBeforeShow",arguments))return!1;this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||webix.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null);var d,e,f;if(b=b||{},b.pos||(b.pos=this.s.relative),a){"object"!=typeof a||a.tagName?(a=webix.toNode(a),d=webix.html.offset(a)):a.target||a.srcElement?(d=webix.html.pos(a),e=20,f=5):d=a;var g=Math.max(window.innerWidth||0,document.body.offsetWidth),h=Math.max(window.innerHeight||0,document.body.offsetHeight);e=e||a.offsetWidth||0,f=f||a.offsetHeight||0;var i=this.ac,j=d.x,k=d.y,l=0,m=0;if(this.s.autofit){var n=6,o=6,p=6;c="top",k=0,j=0,g-d.x-e<i[0]&&"right"==b.pos&&(b.pos="left"),"right"==b.pos?(j=d.x+n+e,o=-f,c="left",l=Math.round(d.y+f/2),m=j-p):"left"==b.pos?(j=d.x-n-i[0]-1,o=-f,c="right",l=Math.round(d.y+f/2),m=j+i[0]+1):(j=d.x<0?0:g-d.x>i[0]?d.x:g-n-i[0],m=Math.round(d.x+e/2),m>j+i[0]&&(m=j+i[0]/2)),(!i[1]||h-f-d.y-o>i[1])&&"top"!=b.pos?(k=f+d.y+o-4,l||(c="top",l=k-p)):(k=d.y-o-i[1],0>k?(k=0,"top"==c&&(c=!1)):l||(c="bottom",k--,l=k+i[1]+1))}var q=b.x||0,r=b.y||0;this.setPosition(j+q,k+r),this.Rd&&(c?this.Rd(c,m+q,l+r):this.Sd())}else this.s.position&&this.Td();this.x.style.display="block",this.Ww=1,webix.delay(function(){this.Ww=0},this,[],webix.env.touch?400:100),this.Qd(),this.config.autofocus&&(this.Vd=webix.UIManager.getFocus(),webix.UIManager.setFocus(this)),-1==webix.ui.et.find(this)&&webix.ui.et.push(this),this.callEvent("onShow",[])},Fb:function(a){if(!(this.s.hidden||this.s.modal||this.Ww||a&&a.showpopup||webix.Pd&&this.s.zIndex<=webix.Pd)){if(a){var b=webix.env.isIE8?a.srcElement.click_view:a.click_view;b||0===b||(b=-1);var c=webix.ui.et.find(this);if(b>=c)return}this.hide()}},hidden_setter:function(a){return a?this.hide():this.show(),!!a},hide:function(a){if(!this.$destructed&&(a||!this.s.hidden)){if(this.s.modal&&this.Md(!1),"top"==this.s.position?webix.animate(this.x,{type:"slide",x:0,y:-(this.dc+20),duration:300,callback:this.Wd,master:this}):this.Wd(),this.s.autofocus){var b=document.activeElement;b&&this.x&&(this.x.contains(b)||b===document.body)&&(webix.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}},ny:function(){var a=webix.ui.et,b=a.find(this),c=a.length-1;if(b>-1)for(var d=c;d>b;d--)a[d].Sd&&a[d].hide();a.removeAt(b)},destructor:function(){this.s.autofocus&&(webix.B||webix.UIManager.setFocus(this.Vd),this.Vd=null),this.ny(),this.Sd&&this.Sd(),webix.Destruction.destructor.apply(this,[])},Wd:function(){this.$destructed||(this.x.style.display="none",this.s.hidden=!0,this.callEvent("onHide",[]))},close:function(){this.Md(!1),webix.html.remove(this.x),this.destructor()},Xd:function(a){a.borderless=!0},body_setter:function(a){return"object"!=typeof a&&(a={template:a}),this.Xd(a),webix.Xb=this,this.gd=webix.ui.A(a),this.gd.Xb=this,this.ed.appendChild(this.gd.x),a},head_setter:function(a){return a===!1?a:("object"!=typeof a&&(a={template:a,padding:0}),a.borderless=!0,webix.Xb=this,this.fd=webix.ui.A(a),this.fd.Xb=this,this.bd.appendChild(this.fd.x),a)},getBody:function(){return this.gd},getHead:function(){return this.fd},adjust:function(){return this.resize()},resizeChildren:function(){this.gd&&this.resize()},resize:function(){webix.ui.baseview.prototype.adjust.call(this),this.Td(this.s.left,this.s.top)},Td:function(a,b){if(this.s.position){this.$view.style.position="fixed";var c=this.bc,d=this.dc,e=window.innerWidth||document.documentElement.offsetWidth,f=window.innerHeight||document.documentElement.offsetHeight,g=Math.round((e-c)/2),h=Math.round((f-d)/2);if("function"==typeof this.s.position){var i={left:g,top:h,width:c,height:d,maxWidth:e,maxHeight:f};this.s.position.call(this,i),(i.width!=c||i.height!=d)&&this.$setSize(i.width,i.height),this.setPosition(i.left,i.top)}else"top"==this.s.position&&(h=webix.animate.isSupported()?-1*d:10),this.setPosition(g,h);"top"==this.s.position&&webix.animate(this.x,{type:"slide",x:0,y:d-2*(this.s.padding||0),duration:300,callback:this.Yd,master:this})}else this.setPosition(a,b)},Yd:function(a){webix.animate.clear(a),this.s.top=-(2*(this.s.padding||0)),this.setPosition(this.s.left,this.s.top)},setPosition:function(a,b){this.x.style.top=b+"px",this.x.style.left=a+"px",this.s.left=a,this.s.top=b},$getSize:function(a,b){var c=this.s.Ob;c&&(a+=(c.left?0:1)+(c.right?0:1),b+=(c.top?0:1)+(c.bottom?0:1)),this.s.head&&(b+=1);var d=this.gd.$getSize(0,0);if(this.fd){var e=this.fd.$getSize(0,0);e[3]==e[2]&&(this.s.headHeight=e[3]),b+=this.s.headHeight}if(this.s.fullscreen){var f=window.innerWidth||document.body.clientWidth,g=window.innerHeight||document.body.clientHeight;return[f,f,g,g]}var h=webix.ui.view.prototype.$getSize.call(this,0,0);return h[1]=Math.min(h[1],(d[1]>=1e5&&h[1]>=1e5?Math.max(d[0],300):d[1])+a),h[3]=Math.min(h[3],(d[3]>=1e5&&h[3]>=1e5?Math.max(d[2],200):d[3])+b),h[0]=Math.min(Math.max(h[0],d[0]+a),h[1]),h[2]=Math.min(Math.max(h[2],d[2]+b),h[3]),h},$setSize:function(a,b){
webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc,b=this.dc,this.s.head===!1?(this.bd.style.display="none",this.gd.$setSize(a,b)):(this.fd.$setSize(a,this.s.headHeight),this.gd.$setSize(a,b-this.s.headHeight))},$skin:function(){this.defaults.headHeight=webix.skin.$active.barHeight},defaults:{top:0,left:0,autofit:!0,relative:"bottom",body:"",head:"",hidden:!0,autofocus:!0}},webix.ui.view,webix.Movable,webix.Modality,webix.EventSystem),webix.protoUI({name:"popup",$init:function(){this.s.head=!1,this.$view.className+=" webix_popup",webix.attachEvent("onClick",webix.bind(this.Fb,this)),this.attachEvent("onHide",this.Sd)},close:function(){webix.html.remove(this.$d),webix.ui.window.prototype.close.call(this)},$getSize:function(a,b){return webix.ui.window.prototype.$getSize.call(this,a+2*this.s.padding,b+2*this.s.padding)},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc-2*this.s.padding,b=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.gd.$setSize(a,b)},Xd:function(){},defaults:{padding:8},head_setter:function(){},Rd:function(a,b,c){this.Sd(),document.body.appendChild(this.$d=webix.html.create("DIV",{"class":"webix_point_"+a},"")),this.$d.style.zIndex=webix.ui.zIndex(),this.$d.style.top=c+"px",this.$d.style.left=b+"px"},Sd:function(){this.$d=webix.html.remove(this.$d)}},webix.ui.window),webix.ui.et=webix.toArray(),webix.extend(webix.ui.window,{resize_setter:function(a){return a&&!this.Yz&&this.Zz(),a},Zz:function(){this.$z||(this.x.firstChild.style.position="relative",this.$z=webix.html.create("DIV",{"class":"webix_resize_handle"}),this.x.firstChild.appendChild(this.$z),webix.event(this.$z,webix.env.mouse.down,this._z,this))},aA:function(a,b){if(!this.bA){this.bA=webix.html.create("div",{"class":"webix_resize_frame"},""),document.body.appendChild(this.bA);var c=webix.html.offset(this.x);this.bA.style.left=c.x+"px",this.bA.style.top=c.y+"px",this.bA.style.zIndex=webix.ui.zIndex()}this.bA.style.width=a+"px",this.bA.style.height=b+"px"},_z:function(){this.config.resize&&(webix.html.addCss(document.body,"webix_noselect webix_resize_cursor"),this.cA=webix.html.offset(this.x),this.dA=webix.event(document.body,webix.env.mouse.move,this.eA,this),this.fA=webix.event(document.body,webix.env.mouse.up,this.gA,this))},eA:function(a){if(this.cA!==!1){var b=webix.html.pos(a),c={x:b.x-this.cA.x+10,y:b.y-this.cA.y+10};if(Math.abs(this.cA.x-b.x)<(this.config.minWidth||100)||Math.abs(this.cA.y-b.y)<(this.config.maxHeight||100))return;this.hA=c,this.aA(c.x,c.y)}},gA:function(){this.bA&&(this.bA=webix.html.remove(this.bA)),webix.html.removeCss(document.body,"webix_resize_cursor"),webix.html.removeCss(document.body,"webix_noselect"),webix.eventRemove(this.dA),webix.eventRemove(this.fA),this.hA&&(this.config.width=this.hA.x,this.config.height=this.hA.y,this.resize()),this.cA=this.hA=!1}}),webix.protoUI({name:"suggest",defaults:{autofocus:!1,type:"list",keyPressTimeout:1,body:{yCount:10,autoheight:!0,body:!0,select:!0,borderless:!0,navigation:!0},filter:function(a,b){return 0===a.value.toString().toLowerCase().indexOf(b.toLowerCase())?!0:!1}},template_setter:webix.template,filter_setter:function(a){return webix.toFunctor(a,this.$scope)},$init:function(a){var b={};webix.extend(b,webix.copy(this.defaults.body)),b.view=a.type||this.defaults.type;var c=this.Jt(b);a.body&&webix.extend(c,a.body,!0),a.data&&(c.data=a.data),a.url&&(c.url=a.url),a.datatype&&(c.datatype=a.datatype),a.id&&(b.id=b.id||a.id+"_"+b.view),a.body=b,this.$ready.push(this._d),this.attachEvent("onShow",this.ke),this.oy={}},Jt:function(a){return a},Rs:function(a){if(a){var b,c,d;this.s.master&&(b=webix.$$(this.s.master),b.options_setter&&(c=b.getInputNode())&&(d=this.getItemText(a.id),webix.isUndefined(c.value)?c.innerHTML=d:c.value=d.replace(/<[^>]*>/g,"")))}},setMasterValue:function(a,b){var c=a.id?this.getItemText(a.id):a.text||a.value;if(this.s.master){var d=webix.$$(this.s.master);b&&a.id?d.refresh():d.options_setter?d.setValue(a.id):d.setValueHere?d.setValueHere(c):d.setValue(c)}else this.ae&&(this.ae.value=c);b||(this.hide(!0),this.ae&&this.ae.focus()),this.callEvent("onValueSuggest",[a,c]),webix.delay(function(){webix.callEvent("onEditEnd",[])})},getMasterValue:function(){return this.s.master?webix.$$(this.s.master).getValue():null},getItemText:function(a){var b=this.getList().getItem(a);if(!b)return this.oy[a]||"";if(this.s.template)return this.s.template.call(this,b,this.type);if(this.s.textValue)return b[this.s.textValue];var c=this.getList().type,d=c.template.call(c,b,c);return this.oy[a]=d},getSuggestion:function(){var a,b=this.getList();return b.getSelectedId&&(a=b.getSelectedId()),!a&&b.data.order.length&&(a=b.data.order[0]),a&&"object"==typeof a&&(a+=""),a},getList:function(){return this.gd},_d:function(){var a=this.getList(),b=this.s.type;a.count?(a.attachEvent("onItemClick",webix.bind(function(b){this.setMasterValue(a.getItem(b))},this)),a.data.attachEvent("onstoreupdated",webix.bind(function(a,b,c){"delete"==c&&a==this.getMasterValue()?this.setMasterValue({id:"",text:""},1):"update"==c&&a==this.getMasterValue()&&this.setMasterValue(b,1)},this)),a.data.attachEvent("onAfterFilter",webix.bind(this.be,this)),a.data.attachEvent("onStoreLoad",webix.bind(this.be,this)),webix.isUndefined(this.s.fitMaster)&&(this.s.fitMaster=!0)):"calendar"==b?(a.attachEvent("onDateSelect",function(a){this.getParentView().setMasterValue({value:a})}),a.attachEvent("onTodaySet",function(a){this.getParentView().setMasterValue({value:a})}),a.attachEvent("onDateClear",function(a){this.getParentView().setMasterValue({value:a})})):"colorboard"==b&&a.attachEvent("onSelect",function(a){this.getParentView().setMasterValue({value:a})})},input_setter:function(a){return this.linkInput(a),0},linkInput:function(a){var b;a.getInputNode?(b=a.getInputNode(),b.webix_master_id=a.s.id):b=webix.toNode(a),webix.event(b,"keydown",function(a){(b!=document.body||this.isVisible())&&this.ce(a)},this),this.pt=!0},ce:function(a){a=a||event;var b=this.getList(),c=a.target||a.srcElement;this.ae=c,this.s.master=c.webix_master_id,window.clearTimeout(this.de);var d=a.keyCode;return 16!=d&&17!=d?9==d?this.ee(this,b):27==d?this.fe(this,b):13==d?this.ge(this,b):this.he(a)?(webix.html.preventEvent(a),!1):void(webix.isUndefined(c.value)||(clearTimeout(this.dt),this.dt=webix.delay(function(){if(this.pt||webix.UIManager.getFocus()==webix.$$(this.s.master)){this.ie=!0;var a=c.value;b.config.dataFeed?b.filter("value",a):b.filter&&b.filter(webix.bind(function(b){return this.s.filter.call(this,b,a)},this))}},this,[],this.s.keyPressTimeout))):void 0},be:function(){if(!this.ie)return!0;this.ie=!1;var a=this.getList();a.count()>0?(this.adjust(),this.isVisible()||(this.je=!0),this.show(this.ae,null,!0),this.je=!1):(this.hide(!0),this.ae=null)},show:function(a){if(!this.isVisible()){var b=this.getList();b.filter&&!this.je&&(b.filter(""),this.ke(b)),this.$customWidth&&this.$customWidth(a),a.tagName&&this.s.fitMaster&&(this.s.width=a.offsetWidth-2),b.Np&&b.render(),this.adjust()}webix.ui.popup.prototype.show.apply(this,arguments)},ke:function(a){if(a=a||this.getList(),a.select&&a.showItem){var b=this.getMasterValue();b&&a.exists&&a.exists(b)?(a.select(b),a.showItem(b)):(a.unselect(),a.showItem(a.getFirstId()))}},ge:function(a,b){if(b.count&&b.count())if(a.isVisible()){var c=b.getSelectedId(!1,!0);c&&this.setMasterValue(b.getItem(c)),a.hide(!0)}else a.show(this.ae);else a.isVisible()&&a.hide(!0)},fe:function(a){return a.hide(!0)},ee:function(a){return a.hide(!0)},he:function(a){var b=this.getList(),c=a.keyCode;if(b.count&&b.moveSelection){if(!(38!==c||a.ctrlKey||a.metaKey||a.shiftKey||a.altKey))return b.moveSelection("up"),this.Rs(b.getSelectedItem()),!0;if(!(40!==c||a.ctrlKey||a.metaKey||a.shiftKey||a.altKey)){var d=this.isVisible();if(!d){if(!b.count())return!1;this.show(this.ae)}var e=b.getSelectedId();return!e&&b.count?b.select(b.getFirstId()):d&&b.moveSelection("down"),this.Rs(b.getSelectedItem()),!0}}return!1},getValue:function(){var a=this.getList().getSelectedId()||"";return a.id||a},setValue:function(a){var b=this.getList();a?b.exists(a)&&(b.select(a),b.showItem(a)):(b.unselect(),b.showItem(b.getFirstId()))}},webix.ui.popup),webix.attachEvent("onClick",function(a){var b=webix.$$(a);if(b&&b.touchable){webix.UIManager.applyChanges(b),b.getNode(a);var c=a.target||a.srcElement;if("webix_disabled"==c.className)return;var d="";if(c.className&&0===c.className.toString().indexOf("webix_view"))return;for(;c&&c.parentNode;){if(c.getAttribute){if(c.getAttribute("view_id"))break;if(d=c.className){d=d.toString().split(" ");for(var e=0;e<d.length;e++)if(b.on_click[d[e]]){var f=b.on_click[d[e]].call(b,a,b.s.id,c);if(f===!1)return}}}c=c.parentNode}if(b.s.click){var g=webix.toFunctor(b.s.click,b.$scope);g&&g.call&&g.call(b,b.s.id,a)}var h=b.s.popup;if(b.s.popup&&!b.s.readonly){"object"!=typeof h||h.name||(h=b.s.popup=webix.ui(h).s.id);var h=webix.$$(h);h.isVisible()||(h.s.master=b.s.id,h.show(b.getInputNode()||b.getNode(),null,!0))}b.callEvent("onItemClick",[b.s.id,a])}}),webix.protoUI({name:"button",touchable:!0,$skin:function(){this.defaults.height=webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight,this.le=webix.skin.$active.labelTopHeight||15},defaults:{template:function(a,b){var c=b.me(a,b);return a.badge&&(c=c.replace("</button>","<span class='webix_badge'>"+a.badge+"</span></button>")),"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+c+"</div>"},label:"",tabFocus:!0,borderless:!0},me:function(a){var b="class='webixtype_"+(a.type||"base")+"' ";return"<button type='button' "+b+">"+webix.template.escape(a.label||a.value)+"</button>"},$init:function(a){this.x.className+=" webix_control webix_el_"+(this.$cssName||this.name),this.data=this.s,this.y=this.x,a.autowidth&&(a.width=webix.html.getTextSize(a.value||a.label,"webixbutton").width+(a.badge?15:0)+("iconButton"===a.type?30:0)+("icon"===a.type?20:0))},hotkey_setter:function(a){var b=this;this.Bt(a,function(a,c){var d=b.$view.firstChild;if(d.dispatchEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),c.preventDefault(),d.dispatchEvent(e)}})},Bt:function(a,b,c){var d=webix.UIManager.addHotKey(a,b,c);this.attachEvent("onDestruct",function(){webix.UIManager.removeHotKey(d,b,c)})},tooltip_setter:function(a){var b=this.re()||this.$view.firstChild;return b&&(b.title=a),a},type_setter:function(a){return this.ne[a]&&(this.me=webix.template(this.ne[a])),this.oe="prev"==a||"next"==a?this.pe:!1,a},ne:{htmlbutton:"<button type='button' class='webix_el_htmlbutton webixtype_base'>#label#</button>",prev:"<input type='button' class='webixtype_prev' value='#label#' /><div class='webix_el_arrow webixtype_prev_arrow'></div>",next:"<input type='button' class='webixtype_next' value='#label#' /><div class='webix_el_arrow webixtype_next_arrow'></div>",imageButton:"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%; line-height:#cheight#px'><div class='webix_image' style='width:#dheight#px;height:#dheight#px;background-image:url(#image#);'> </div> #label#</button>",imageButtonTop:"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'> </div> <div class='webix_img_btn_text'>#label#</div></button>",image:"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><div class='webix_image' style='width:#cheight#px;height:#cheight#px;background-image:url(#image#);'> </div> #label#</button>",imageTop:"<button type='button' class='webix_img_btn_top' style='background-image:url(#image#);'><div class='webix_img_btn_text'>#label#</div></button>",icon:"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;'></span>#label#</button>",iconButton:"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%;'><span class='webix_icon fa-#icon#'></span> #label#</button>",iconTop:"<button type='button' class='webix_img_btn_top' style='width:100%;top:4px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>",iconButtonTop:"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base' style='width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>"},qe:function(){for(var a=[],b=["input","select","textarea"],c=0;c<b.length;c++)for(var d=this.$view.getElementsByTagName(b[c]),e=0;e<d.length;e++)a.push(d[e]);return a},disable:function(){var a,b=this.re();if(webix.ui.baseview.prototype.disable.apply(this,arguments),b&&-1==b.className.indexOf(" webix_disabled_box")){b.className+=" webix_disabled_box";var c=this.qe();for(a=0;a<c.length;a++)c[a].setAttribute("disabled",!0);if("top"==this.s.labelPosition){var d=this.y.firstChild;d&&(d.className+=" webix_disabled_top_label")}}},enable:function(){webix.ui.baseview.prototype.enable.apply(this,arguments);var a=this.re();if(a){a.className=a.className.replace(" webix_disabled_box","");for(var b=this.qe(),c=0;c<b.length;c++)b[c].removeAttribute("disabled");if("top"==this.s.labelPosition){var d=this.y.firstChild;d&&(d.className=d.className.replace(" webix_disabled_top_label",""))}}},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},setValue:function(a){var b=this.s.value;return b==a?!1:(this.s.value=a,this.se&&this.$setValue(a),void this.callEvent("onChange",[a,b]))},$setValue:function(a){(this.getInputNode()||{}).value=a},getValue:function(){var a=this.se?this.$getValue():this.s.value;return"undefined"==typeof a?"":a},$getValue:function(){return this.s.value||""},focus:function(){var a=this.getInputNode();a&&a.focus&&a.focus()},blur:function(){var a=this.getInputNode();a&&a.blur&&a.blur()},getInputNode:function(){return this.y.getElementsByTagName("input")[0]||this.y.getElementsByTagName("button")[0]},re:function(){for(var a=0;a<this.y.childNodes.length;a++)if(this.y.childNodes[a].className.indexOf("webix_el_box")>=0)return this.y.childNodes[a];return null},ue:Math.sqrt(2),pe:function(){var a=this.s,b=this.re().childNodes[1],c=b.previousSibling,d="next"==a.type?"right":"left",e=a.aheight-2*webix.skin.$active.inputPadding-2,f=e*this.ue/2;b.style.width=f+"px",b.style.height=f+"px",b.style.top=(e-f)/2+webix.skin.$active.inputPadding+"px",b.style[d]=(e-f)/2+this.ue/2+"px",c.style.width=a.awidth-e/2-2+"px",c.style.height=e+2+"px",c.style[d]=e/2+2+"px",c.style.top=webix.skin.$active.inputPadding+"px"},ve:function(){this.we=this.s.inputWidth||(this.bc-this.s.width>2?this.s.width:0)||this.bc,this.xe=this.s.inputHeight||this.zy||0},render:function(){if(this.ve(),this.s.awidth=this.we||this.bc,this.s.aheight=this.xe||this.dc,this.s.bheight=this.s.aheight+2,this.s.cheight=this.s.aheight-2*webix.skin.$active.inputPadding,this.s.dheight=this.s.cheight-2,webix.AtomRender.render.call(this)){if(this.se=!0,this.oe&&this.oe(),this.s.align){var a=this.y.firstChild;switch("top"==this.s.labelPosition&&a.nextSibling&&(a=a.nextSibling),this.s.align){case"right":a.style.cssFloat="right";break;case"center":a.style.display="inline-block",a.parentNode.style.textAlign="center";break;case"middle":a.style.marginTop=Math.round((this.dc-this.xe)/2)+"px";break;case"bottom":a.style.marginTop=this.dc-this.xe+"px";break;case"left":a.style.cssFloat="left"}}this.$render&&this.$render(this.data),this.s.disabled&&this.disable(),this.s.tooltip&&this.define("tooltip",this.s.tooltip),this.ze&&(this.ze(this.data),this.ze=0)}},refresh:function(){this.render()},on_click:{Ae:function(a){var b=webix.html.locate(a,"button_id");b&&this.callEvent("onBeforeTabClick",[b,a])&&(this.setValue(b),this.callEvent("onAfterTabClick",[b,a]))},webix_all_segments:function(a,b){this.on_click.Ae.call(this,a,b)},webix_all_tabs:function(a,b){this.on_click.Ae.call(this,a,b)},webix_inp_counter_next:function(){this.next()},webix_inp_counter_prev:function(){this.prev()},webix_inp_combo:function(a,b,c){c.focus()},webix_inp_checkbox_border:function(a){"DIV"==(a.target||a.srcElement).tagName||this.s.readonly||this.toggle()},webix_inp_checkbox_label:function(){this.s.readonly||this.toggle()},webix_inp_radio_border:function(a){var b=webix.html.locate(a,"radio_id");this.setValue(b)},webix_inp_radio_label:function(a,b,c){return c=c.parentNode.getElementsByTagName("input")[0],this.on_click.webix_inp_radio_border.call(this,c,b,c)},webix_tab_more_icon:function(a,b,c){this.getPopup().resize(),this.getPopup().show(c,null,!0)},webix_tab_close:function(a){var b=webix.html.locate(a,"button_id");b&&this.callEvent("onBeforeTabClose",[b,a])&&this.removeOption(b)}},Be:function(a){for(var b=0;b<a.length;b++)"string"==typeof a[b]?a[b]={id:a[b],value:a[b]}:(webix.isUndefined(a[b].id)&&(a[b].id=a[b].value),webix.isUndefined(a[b].value)&&(a[b].value=a[b].id));return a},Yx:function(a){var b=a?a.placeholder:this.s.placeholder;return b?"<span class='webix_placeholder'>"+b+"</span>":""}},webix.ui.view,webix.AtomRender,webix.Settings,webix.EventSystem),webix.protoUI({name:"label",defaults:{template:"<div style='height:100%;line-height:#cheight#px'>#label#</div>"},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},focus:function(){return!1},re:function(){return this.y.firstChild},setHTML:function(a){this.s.template=function(){return a},this.refresh()},setValue:function(a){this.s.label=a,webix.ui.button.prototype.setValue.apply(this,arguments)},$setValue:function(a){this.y.firstChild.innerHTML=a},oe:function(){}},webix.ui.button),webix.protoUI({name:"icon",$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},defaults:{template:function(a){return"<button type='button' "+(a.tabFocus?"":"tabindex='-1'")+" style='height:100%;width:100%;' class='webix_icon_button'><span class='webix_icon fa-"+a.icon+" '></span>"+(a.badge?"<span class='webix_badge'>"+a.badge+"</span>":"")+"</button>"},width:33},oe:function(){}},webix.ui.button),webix.protoUI({name:"text",Ce:!0,De:function(){this.Ce&&(webix.event(this.getInputNode(),"change",this.Xy,this),this.s.suggest&&webix.$$(this.s.suggest).linkInput(this))},Xy:function(){var a=this.getValue();a!=this.s.value&&this.setValue(a,!0)},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight,this.defaults.inputPadding=webix.skin.$active.inputPadding},$init:function(a){"top"==a.labelPosition&&webix.isUndefined(a.height)&&this.defaults.height&&(a.height=this.defaults.height+this.le),this.Ns=[],this.attachEvent("onAfterRender",this.De)},$renderIcon:function(){var a=this.s;if(a.icon){var b=a.aheight-2*a.inputPadding,c=(b-18)/2-1;return"<span style='height:"+(b-c)+"px;padding-top:"+c+"px;' class='webix_input_icon fa-"+a.icon+"'></span>"}return""},relatedView_setter:function(a){return this.attachEvent("onChange",function(){var a=this.getValue(),b=this.s.relatedAction,c=this.s.relatedView,d=webix.$$(c);if(!d){var e=this.getTopParentView();e&&e.$$&&(d=e.$$(c))}"enable"==b?a?d.enable():d.disable():a?d.show():d.hide()}),a},validateEvent_setter:function(a){return"blur"==a&&this.attachEvent("onBlur",this.validate),"key"==a&&this.attachEvent("onTimedKeyPress",this.validate),a},validate:function(){var a=this.s.validate;!a&&this.s.required&&(a=webix.rules.isNotEmpty);var b=(this.getFormView(),this.s.name),c=this.getValue(),d={};return d[b]=c,a&&!this.getFormView().Se(a,c,d,b)?!1:!0},bottomLabel_setter:function(a){return this.s.bottomPadding||(this.s.bottomPadding=18),a},py:function(){var a=this.s.invalidMessage;return"function"==typeof a&&a.call(this),a},qy:function(a){var b=this.s;"undefined"!=typeof a&&(b.bottomLabel=a);var c=(b.invalid?b.invalidMessage:"")||b.bottomLabel;c||b.bottomPadding||(b.inputHeight=0),c&&!b.bottomPadding?(this.ry=1,b.bottomPadding=b.bottomPadding||18,b.height||this.render(),this.resize()):!c&&this.ry?(b.bottomPadding=this.ry=0,b.height||this.render(),this.resize()):this.render()},$getSize:function(){var a=webix.ui.view.prototype.$getSize.apply(this,arguments),b=this.config.bottomPadding;return b&&(a[2]+=b,a[3]+=b),a},$setSize:function(a,b){var c=this.s;if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(!a||!b)return;"top"==c.labelPosition?(c.inputHeight||(this.zy=this.dc-this.le-(this.config.bottomPadding||0)),c.labelWidth=0):c.bottomPadding&&(c.inputHeight=this.dc-this.config.bottomPadding),this.render()}},Ee:function(a){var b=(this.we||0)-(a.label?this.s.labelWidth:0)-4-(a.iconWidth||0);return 0>b?0:b},Fe:function(a,b){var c=a.id||webix.uid(),d=b.Ee(a),e=a.inputAlign||"left",f=(this.$renderIcon?this.$renderIcon(a):"",this.s.aheight-2*webix.skin.$active.inputPadding-2),g=a.text||a.value||this.Yx(a),h="<div class='webix_inp_static' tabindex='0' onclick='' style='line-height:"+f+"px;width: "+d+"px; text-align: "+e+";' >"+g+"</div>";return b.$renderInput(a,h,c)},qt:function(a){var b="<"+a+(this.s.placeholder?" placeholder='"+this.s.placeholder+"' ":" ");this.s.readonly&&(b+="readonly='true' ");var c=this.s.attributes;if(c)for(var d in c)b+=d+"='"+c[d]+"' ";return b},$renderLabel:function(a,b){var c=a.labelAlign||"left",d="top"==this.s.labelPosition,e=d?"display:block;":"width: "+this.s.labelWidth+"px;",f="",g=d?this.le-2:this.s.aheight-2*this.s.inputPadding;return a.label&&(f="<label style='"+e+"text-align: "+c+";line-height:"+g+"px;' onclick='' for='"+b+"' class='webix_inp_"+(d?"top_":"")+"label "+(a.required?"webix_required":"")+"'>"+(a.label||"")+"</label>"),f},$renderInput:function(a,b,c){var d=a.inputAlign||"left",e="top"==a.labelPosition,f=this.Ee(a);c=c||a.name||webix.uid();var g=this.$renderLabel(a,c),h="";if(b)h+=b;else{h+=this.qt("input")+"id='"+c+"' type='"+(a.type||this.name)+"' value='"+webix.template.escape(a.value||"")+"' style='width: "+f+"px; text-align: "+d+";'";var i=a.attributes;if(i)for(var j in i)h+=" "+j+"='"+i[j]+"'";h+=" />"}var k=this.$renderIcon?this.$renderIcon(a):"";h+=k;var l="";l=e?g+"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+h+"</div>":"<div class='webix_el_box' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+g+h+"</div>";var m=a.awidth-f-2*webix.skin.$active.inputPadding,n=(a.invalid?a.invalidMessage:"")||a.bottomLabel;return n&&(l+="<div class='webix_inp_bottom_label' style='width:"+(f||a.awidth)+"px;margin-left:"+Math.max(m,webix.skin.$active.inputPadding)+"px;'>"+n+"</div>"),l},defaults:{template:function(a,b){return b.$renderInput(a)},label:"",labelWidth:80},type_setter:function(a){return a},oe:!1,$setValue:function(a){this.getInputNode().value=a},$getValue:function(){return this.getInputNode().value},suggest_setter:function(a){if(a){if("string"==typeof a){var b=webix.$$(a);if(b)return webix.$$(a).s.id;a={body:{url:a,dataFeed:a}}}else webix.isArray(a)?a={body:{data:this.Be(a)}}:a.body||(a.body={});webix.extend(a,{view:"suggest"});var c=webix.ui(a);return this.Ns.push(c),c.s.id}return!1}},webix.ui.button),webix.protoUI({name:"segmented",Ce:!1,$init:function(){this.attachEvent("onChange",function(a){if(this.s.multiview){var b=this.getTopParentView(),c=null;b&&b.$$&&(c=b.$$(a)),c||(c=webix.$$(a)),c&&c.show&&c.show()}})},defaults:{template:function(a,b){!a.options;var c=a.options;b.Be(c);var d=b.Ee(a),e=webix.uid(),f="<div style='width:"+d+"px' class='webix_all_segments'>",g=a.optionWidth||Math.floor(d/c.length);a.value||(a.value=c[0].id);for(var h=0;h<c.length;h++)f+="<button type='button' style='width:"+(c[h].width||g)+"px' ",f+="class='"+(a.value==c[h].id?"webix_selected ":"")+"webix_segment_"+(h==c.length-1?"N":h>0?1:0)+"' button_id='"+c[h].id+"' >",f+=c[h].value+"</button>";return b.$renderInput(a,f+"</div>",e)}},$setValue:function(){this.refresh()},getValue:function(){return this.s.value},getInputNode:function(){return null},optionIndex:function(a){for(var b=this.s.options,c=0;c<b.length;c++)if(b[c].id==a)return c;return-1},addOption:function(a,b,c,d){var e=a;"object"!=typeof a?(b=b||a,e={id:a,value:b}):(a=e.id,d=c,c=b),this.optionIndex(a)<0&&webix.PowerArray.insertAt.call(this.s.options,e,d),c&&this.setValue(a)},removeOption:function(a){var b=this.optionIndex(a),c=this.s.options;if(b>=0&&webix.PowerArray.removeAt.call(c,b),this.s.value==a){var d=Math.min(b,c.length-1);d>=0?this.setValue(c[d].id):this.s.value=-1}this.callEvent("onOptionRemove",[a,this.s.value]),this.refresh()},oe:!1},webix.ui.text),webix.protoUI({name:"search",$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},on_click:{webix_input_icon:function(a){return this.callEvent("onSearchIconClick",[a])}},defaults:{type:"text",icon:"search"}},webix.ui.text),webix.protoUI({name:"toggle",Ce:!0,$init:function(){this.attachEvent("onItemClick",function(){this.toggle()})},$setValue:function(){this.render()},toggle:function(){this.setValue(!this.getValue())},getValue:function(){var a=this.s.value;return a&&"0"!=a?1:0},defaults:{template:function(a,b){var c=a.value?" webix_pressed":"";return a.label=(a.value?a.onLabel:a.offLabel)||a.label,a.icon=(a.value?a.onIcon:a.offIcon)||a.icon,"<div class='webix_el_box"+c+"' style='width:"+a.awidth+"px; height:"+a.aheight+"px'>"+b.me(a,b)+"</div>"}},oe:!1},webix.ui.button),webix.protoUI({name:"select",defaults:{template:function(a,b){var c=b.Be(a.options),d=a.name||"x"+webix.uid(),e=b.qt("select")+"id='"+d+"' style='width:"+b.Ee(a)+"px;'>",f=webix.$$(c);if(f&&f.data&&f.data.each)f.data.each(function(b){e+="<option"+(b.id==a.value?" selected='true'":"")+" value='"+b.id+"'>"+b.value+"</option>"});else for(var g=0;g<c.length;g++)e+="<option"+(c[g].id==a.value?" selected='true'":"")+" value='"+c[g].id+"'>"+c[g].value+"</option>";return e+="</select>",b.$renderInput(a,e,d)}},options_setter:function(a){if(a){if("string"==typeof a){var b=new webix.DataCollection({url:a});return b.data.attachEvent("onStoreLoad",webix.bind(this.refresh,this)),b}return a}},getInputNode:function(){return this.y.getElementsByTagName("select")[0]}},webix.ui.text),webix.protoUI({name:"textarea",$skin:function(){},defaults:{template:function(a,b){var c=a.name||a.id,d="x"+webix.uid(),e=b.qt("textarea")+"style='width:"+b.Ee(a)+"px;'";return e+=" id='"+d+"' name='"+c+"' class='webix_inp_textarea'>"+(a.value||"")+"</textarea>",b.$renderInput(a,e,d)},height:0,minHeight:60},Dt:!0,$renderLabel:function(a,b){var c=a.labelAlign||"left",d="top"==this.s.labelPosition,e=d?"display:block;":"width: "+this.s.labelWidth+"px;",f="";return d?this.le-2:(webix.skin.$active.inputHeight||this.s.aheight)-2*this.s.inputPadding,a.label&&(f="<label style='"+e+"text-align: "+c+";' onclick='' for='"+b+"' class='webix_inp_"+(d?"top_":"")+"label "+(a.required?"webix_required":"")+"'>"+(a.label||"")+"</label>"),f},getInputNode:function(){return this.y.getElementsByTagName("textarea")[0]}},webix.ui.text),webix.protoUI({name:"counter",defaults:{template:function(a,b){var c=a.value||0,d=a.name||"x"+webix.uid(),e="<div class='webix_el_group' style='width:"+b.Ee(a)+"px'>";return e+="<input type='button' class='webix_inp_counter_prev' value='-' />",e+=b.qt("input")+"type='text' class='webix_inp_counter_value' value='"+c+"'></input>",e+="<input id='"+d+"' type='button' class='webix_inp_counter_next' value='+'/><div>",b.$renderInput(a,e,d)},min:0,max:1/0,step:1},$setValue:function(a){this.getInputNode().value=a},getInputNode:function(){return this.y.getElementsByTagName("input")[1]},getValue:function(){return 1*webix.ui.button.prototype.getValue.apply(this,arguments)},next:function(a){a=this.s.step,this.shift(a)},prev:function(a){a=-1*this.s.step,this.shift(a)},shift:function(a){var b=this.s.min,c=this.s.max,d=this.getValue()+a;d>=b&&c>=d&&this.setValue(d)}},webix.ui.text),webix.protoUI({name:"checkbox",defaults:{checkValue:1,uncheckValue:0,template:function(a,b){var c=a.name||"x"+webix.uid(),d="";a.labelRight&&(d="<label class='webix_label_right'>"+a.labelRight+"</label>",a.labelWidth&&(a.label=a.label||"&nbsp;"));var e=a.checkValue==a.value,f=Math.floor((b.s.aheight-16)/2),g=b.qt("input")+"style='margin-top:"+f+"px;"+(a.customCheckbox?"display:none":"")+"' id='"+c+"' type='checkbox' "+(e?"checked='1'":"")+"/>",h="webix_inp_checkbox_border webix_el_group webix_checkbox_"+(e?"1":"0"),i="<div style='line-height:"+b.s.cheight+"px' class='"+h+"'>"+g+(a.customCheckbox||"")+d+"</div>";return b.$renderInput(a,i,c)}},customCheckbox_setter:function(a){return a===!0&&webix.skin.$active.customCheckbox&&(a="<a onclick='javascript:void(0)'><button class='webix_custom_checkbox'></button></a>"),a},focus:function(){var a=this.$view.getElementsByTagName(this.s.customCheckbox?"button":"input")[0];a&&a.focus()},blur:function(){var a=this.$view.getElementsByTagName(this.s.customCheckbox?"button":"input")[0];a&&a.blur()},De:function(){},$setValue:function(a){var b=a==this.s.checkValue,c=this.getInputNode()?this.getInputNode().parentNode:null;c&&(c.className=c.className.replace(/(webix_checkbox_)\d/,"$1"+(b?1:0))),this.getInputNode().checked=b},toggle:function(){var a=this.getValue()!=this.s.checkValue?this.s.checkValue:this.s.uncheckValue;this.setValue(a)},getValue:function(){var a=this.s.value;return a==this.s.checkValue?this.s.checkValue:this.s.uncheckValue},$skin:function(){webix.skin.$active.customCheckbox&&(this.defaults.customCheckbox=!0)}},webix.ui.text),webix.protoUI({name:"radio",defaults:{template:function(a,b){for(var c,d=b.Be(a.options),e=[],f=0;f<d.length;f++){var g="x"+webix.uid();c=c||g,f&&(d[f].newline||a.vertical)&&e.push("<div class='webix_line_break'></div>");var h=d[f].id==a.value,i=b.qt("input")+"name='"+a.name+"' type='radio' "+(h?"checked='1'":"")+" value='"+d[f].id+"' id='"+g+"' style='"+(a.customRadio?"display:none":"")+"' />",j="<div radio_id='"+d[f].id+"' class='webix_inp_radio_border webix_radio_"+(h?"1":"0")+"'>"+i+(a.customRadio||"")+"</div>",k=d[f].value||"";k&&(k="<label for='"+g+"' class='webix_label_right'>"+k+"</label>"),e.push("<div class='webix_radio_option'>"+j+k+"</div>")}return e="<div class='webix_el_group' style='margin-left:"+(a.label?a.labelWidth:0)+"px;'>"+e.join("")+"</div>",b.$renderInput(a,e,c)}},$getSize:function(a,b){var c=webix.ui.button.prototype.$getSize.call(this,a,b);if(this.s.options){for(var d=1,e=0;e<this.s.options.length;e++)(this.s.vertical||this.s.options[e].newline)&&d++;c[3]=c[2]=Math.max(c[2],(this.s.optionHeight||25)*d)}return c},Ie:function(){return this.y.getElementsByTagName("input")},$setValue:function(a){for(var b=this.Ie(),c=0;c<b.length;c++){b[c].parentNode.getAttribute("radio_id")==a?(b[c].className="webix_inp_radio_on",b[c].checked=!0):(b[c].className="webix_inp_radio_on webix_hidden",b[c].checked=!1);var d=b[c]?b[c].parentNode:null;d&&(d.className=d.className.replace(/(webix_radio_)\d/,"$1"+(b[c].checked?1:0)))}},getValue:function(){return this.s.value},focus:function(){var a=this.$view.getElementsByTagName(this.s.customRadio?"button":"input")[0];a&&a.focus()},blur:function(){var a=this.$view.getElementsByTagName(this.s.customRadio?"button":"input")[0];a&&a.blur()},customRadio_setter:function(a){return a===!0&&webix.skin.$active.customRadio&&(a="<a onclick='javascript:void(0)'><button class='webix_custom_radio'></button></a>"),a},$skin:function(){webix.skin.$active.customRadio&&(this.defaults.customRadio=!0),webix.skin.$active.optionHeight&&(this.defaults.optionHeight=webix.skin.$active.optionHeight)}},webix.ui.text),webix.protoUI({name:"richselect",defaults:{template:function(a,b){return b.Fe(a,b)},popupWidth:200,icon:"angle-down"},suggest_setter:function(a){return this.options_setter(a)},options_setter:function(a){a=this.Kt?this.Kt(a):a;var b=this.s.popup=this.s.suggest=webix.ui.text.prototype.suggest_setter.call(this,a),c=webix.$$(b).getList();return c&&c.attachEvent("onAfterLoad",webix.bind(this.Ss,this)),b},getList:function(){var a=webix.$$(this.s.suggest);return a.getList()},Ss:function(){var a=this.s.value;webix.isUndefined(a)||this.getPopup().isVisible()||this.s.text||this.$setValue(a);
},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},getInputNode:function(){return this.y.getElementsByTagName("DIV")[1]},getPopup:function(){return webix.$$(this.s.popup)},getText:function(){var a=this.getInputNode();return"undefined"==typeof a.value?a.innerHTML:a.value},$setValue:function(a){if(this.se){var b=a,c=this.getPopup();if(c)var b=this.getPopup().getItemText(a);!b&&a&&a.id&&(this.getPopup().getList().add(a),b=this.getPopup().getItemText(a.id),this.s.value=a.id),this.s.text=b;var d=this.getInputNode();webix.isUndefined(d.value)?d.innerHTML=b||this.Yx():d.value=b.replace(/<[^>]*>/g,"")}},getValue:function(){return this.s.value||""}},webix.ui.text),webix.protoUI({name:"combo",$init:function(){this.attachEvent("onBlur",webix.bind(function(){if(this.s.text!=this.getText()){var a=this.getPopup().getSuggestion();if(!a||""===this.getInputNode().value&&""!==webix.$$(this.s.suggest).getItemText(a)){if(!this.s.editable){var b=this.getValue();this.$setValue(webix.isUndefined(b)?"":b)}}else this.setValue(a)}},this))},getInputNode:function(){return this.y.getElementsByTagName("input")[0]},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},Xy:function(){var a=this.getInputNode(),b="";a.value&&(b=webix.$$(this.s.suggest).getSuggestion()||this.s.value),b!=this.s.value?this.setValue(b,!0):this.$setValue(b)},defaults:{template:function(a,b){return b.$renderInput(a)},icon:"angle-down"}},webix.ui.richselect),webix.protoUI({name:"datepicker",$init:function(){this.$ready.push(this.Je)},defaults:{template:function(a,b){return"time"==b.s.type&&(b.s.icon=b.s.timeIcon),a.editable?b.$renderInput(a):b.Fe(a,b)},stringResult:!1,timepicker:!1,icon:"calendar",icons:!0,timeIcon:"clock-o"},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},getPopup:function(){return webix.$$(this.s.popup)},Je:function(){var a=this.s;if(a.suggest)a.popup=a.suggest;else if(!a.popup){var b=this.s.timepicker;a.popup=a.suggest=this.suggest_setter({type:"calendar",height:240+(b?30:0),width:250,padding:0,body:{timepicker:b,type:this.s.type,icons:this.s.icons}})}this.ze=function(){}},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},Tx:function(a){var b="time"==this.s.type;if("string"==typeof a&&a){var c=b?webix.i18n.parseTimeFormatDate:webix.i18n.parseFormatDate;a=c(a)}if(a){if(b&&webix.isArray(a)){var d=new Date;d.setHours(a[0]),d.setMinutes(a[1]),a=d}isNaN(a.getTime())&&(a="")}return a},$setValue:function(a){var b=webix.$$(this.s.popup.toString()),c=b.gd;a=this.Tx(a),c.selectDate(a,!0),this.s.value=a?c.config.date:"";var d="time"==this.s.type,e=this.config.timepicker,f=this.Hx||(d?webix.i18n.timeFormatStr:e?webix.i18n.fullDateFormatStr:webix.i18n.dateFormatStr);this.s.text=a?f(this.s.value):"";var g=this.getInputNode();g.value==webix.undefined?g.innerHTML=this.s.text||this.Yx():g.value=this.s.text||""},format_setter:function(a){return"function"==typeof a?this.Hx=a:(this.Hx=webix.Date.dateToStr(a),this.Gx=webix.Date.strToDate(a)),a},getInputNode:function(){return this.s.editable?this.y.getElementsByTagName("input")[0]:this.y.getElementsByTagName("DIV")[1]},getValue:function(){var a="time"==this.s.type,b=this.config.timepicker,c=this.s.value;if(this.se){if(this.s.editable){var d=this.Gx||(a?webix.i18n.timeFormatDate:b?webix.i18n.fullDateFormatDate:webix.i18n.dateFormatDate);c=d(this.getInputNode().value)}}else c=this.Tx(c)||null;if(this.s.stringResult){var e=a?webix.i18n.parseTimeFormatStr:webix.i18n.parseFormatStr;return c?e(c):""}return c||null},getText:function(){var a=this.getInputNode();return a?"undefined"==typeof a.value?a.innerHTML:a.value:""}},webix.ui.text),webix.protoUI({name:"colorpicker",$init:function(){this.$ready.push(this.Je)},defaults:{icon:!0},Je:function(){var a=this.s;a.suggest?a.popup=a.suggest:a.popup||(a.popup=a.suggest=this.suggest_setter({type:"colorboard",height:200})),this.ze=function(){}},$render:function(a){webix.isUndefined(a.value)||this.$setValue(a.value)},getValue:function(){return this.se&&this.s.editable?this.getInputNode().value:this.s.value},pz:function(){return this.$view.getElementsByTagName("DIV")[this.s.editable?1:2]},$setValue:function(a){var b=webix.$$(this.config.popup.toString()),c=b.getBody();c.setValue(a),this.config.value=a,this.pz().style.backgroundColor=a;var d=this.getInputNode();d.value==webix.undefined?d.innerHTML=a:d.value=a},$renderIcon:function(){var a=this.config;return'<div class="webix_input_icon" style="background-color:'+a.value+';"> </div>'}},webix.ui.datepicker),webix.RenderStack={$init:function(){this.v=document.createElement("DIV"),this.data.attachEvent("onIdChange",webix.bind(this.Ke,this)),this.attachEvent("onItemClick",this.Le),this.types||(this.types={"default":this.type},this.type.name="default"),this.type=webix.clone(this.type)},customize:function(a){webix.type(this,a)},type_setter:function(a){return this.types[a]?(this.type=webix.clone(this.types[a]),this.type.css&&(this.w.className+=" "+this.type.css)):this.customize(a),this.type.on_click&&webix.extend(this.on_click,this.type.on_click),a},template_setter:function(a){this.type.template=webix.template(a)},jb:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template]:this.type.template)(a,this.type,b)+this.type.templateEnd(a,this.type,b)},Ne:function(a){return this.v.innerHTML=this.jb(a),this.v.firstChild},Ke:function(a,b){var c=this.getItemNode(a);c&&(c.setAttribute(this.ad,b),this.t[b]=this.t[a],delete this.t[a])},Le:function(){if(this.s.click){var a=webix.toFunctor(this.s.click,this.$scope);a&&a.call&&a.apply(this,arguments)}},getItemNode:function(a){if(this.t)return this.t[a];this.t={};for(var b=this.y.childNodes,c=0;c<b.length;c++){var d=b[c].getAttribute(this.ad);d&&(this.t[d]=b[c])}return this.getItemNode(a)},locate:function(a){return webix.html.locate(a,this.ad)},showItem:function(a){var b=this.getItemNode(a);if(b&&this.scrollTo){var c=Math.abs(this.w.offsetLeft-b.offsetLeft),d=c+b.offsetWidth,e=Math.abs(this.w.offsetTop-b.offsetTop),f=e+b.offsetHeight,g=this.getScrollState(),h=g.x;(h>c||h+this.bc<d)&&(h=c);var i=g.y;(i>e||i+this.dc<f)&&(i=e-5),this.scrollTo(h,i),this.Oe&&this.Oe(a)}},render:function(a,b,c){if(this.isVisible(this.s.id)&&!this.$blockRender)if(a){var d=this.getItemNode(a);switch(c){case"paint":case"update":if(!d)return;var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,d),webix.html.remove(d);break;case"delete":if(!d)return;webix.html.remove(d),delete this.t[a];break;case"add":var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,this.getItemNode(this.data.getNextId(a)),this.y);break;case"move":webix.html.insertBefore(this.getItemNode(a),this.getItemNode(this.data.getNextId(a)),this.y)}}else if(this.callEvent("onBeforeRender",[this.data])){(this.Pe||this.y).innerHTML=this.data.getRange().map(this.jb,this).join(""),this.t=null,this.callEvent("onAfterRender",[]);var e=this.y.offsetHeight}}},webix.ValidateData={$init:function(){this.h&&this.attachEvent("onChange",this.clearValidation)},clearValidation:function(){if(this.elements)for(var a in this.elements)this.Qe(a)},validate:function(a,b){this.callEvent("onBeforeValidate",[]);var c=this.Re={},d=!0,e=this.s.rules,f=this.isVisible&&!this.isVisible(),g=a&&a.hidden,h=a&&a.disabled,i={},j={};for(var k in this.elements){var l=this.elements[k].config.name;(f||this.elements[k].isVisible()||g)&&(this.elements[k].isEnabled()||h)?i[l]=this.elements[k]:j[l]=!0}if((e||i)&&!b&&this.getValues&&(b=this.getValues()),e){e.$obj&&(d=this.Se(e.$obj,b,b,"")&&d);var m=e.$all;if(m)for(var n in b)if(!j[n]){var o=this.Se(m,b[n],b,n);o||(c[n]=!0),d=o&&d}for(var n in e)if(!j[n]&&0!==n.indexOf("$")&&!c[n]){var o=this.Se(e[n],b[n],b,n);o||(c[n]=!0),d=o&&d}}if(i)for(var n in i)if(!c[n]){var p=i[n];if(p.validate){var o=p.validate();d=o&&d,o||(c[n]=!0)}else{var q=p.s;if(q){var r=q.validate;if(!r&&q.required&&(r=webix.rules.isNotEmpty),r){var o=this.Se(r,b[n],b,n);o||(c[n]=!0),d=o&&d}}}}return this.callEvent("onAfterValidation",[d,this.Re]),d},Se:function(a,b,c,d){return"string"==typeof a&&(a=webix.rules[a]),a.call(this,b,c,d)?(this.callEvent("onValidationSuccess",[d,c])&&this.Qe&&this.Qe(d),!0):(this.callEvent("onValidationError",[d,c])&&this.Te&&this.Te(d),!1)}},webix.ValidateCollection={Ue:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(a,b,c){!a||"add"!=c&&"update"!=c||this.validate(a)},this)),this.attachEvent("onClearAll",this.clearValidation),this.Ue=function(){}},rules_setter:function(a){return a&&this.Ue(),a},clearValidation:function(){this.data.clearMark("webix_invalid",!0)},validate:function(a){var b=!0;if(a){this.Re={};var c=this.getItem(a);b=webix.ValidateData.validate.call(this,null,c),b?this.callEvent("onValidationSuccess",[a,c])&&this.Qe(a):this.callEvent("onValidationError",[a,c,this.Re])&&this.Te(a,this.Re)}else for(var d in this.data.pull)var b=this.validate(d)&&b;return b},Se:function(a,b,c,d){"string"==typeof a&&(a=webix.rules[a]);var e=a.call(this,b,c,d);return e||(this.Re[d]=!0),e},Qe:function(a){this.data.removeMark(a,"webix_invalid",!0)},Te:function(a){this.data.addMark(a,"webix_invalid",!0)}},webix.rules={isEmail:function(a){return/^[^@]+@[^@]+\.[^@]+$/.test((a||"").toString())},isNumber:function(a){return parseFloat(a)==a},isChecked:function(a){return!!a||"0"===a},isNotEmpty:function(a){return 0===a||a}},webix.MapCollection={$init:function(){this.$ready.push(this.cz),this.attachEvent("onStructureUpdate",this.cz)},cz:function(a){var a=this.dz=[],b=this.s;if(b.columns&&this.zj(b.columns),this.s.map&&this.ez(b.map),this.dz.length)try{this.data.qf=Function("obj",a.join("\n"))}catch(c){}},ez:function(a){for(var b in a)this.dz.push(this.fz(b,a[b]))},fz:function(a,b,c){var d="",e="";return 0===b.indexOf("(date)")?(d="webix.i18n.parseFormatDate(",e=")",c&&!c.format&&(c.format=webix.i18n.dateFormatStr),b=b.replace("(date)","")):0===b.indexOf("(number)")&&(d="(",e=")*1",b=b.replace("(number)","")),""!==b?(b=b.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\""),b=b.replace(/#([^#'";, ]+)#/gi,"\"+(obj.$1||'')+\"")):b='"+(obj.'+a+"||'')+\"","obj."+a+" = "+d+'"'+b+'"'+e+";"},zj:function(a){for(var b=0;b<a.length;b++){var c=a[b].map,d=a[b].id;d||(d=a[b].id="i"+webix.uid(),a[b].header||(a[b].header="")),c&&this.dz.push(this.fz(d,c,a[b])),this.Et(a[b])}},Et:function(a){var b=a.options||a.collection;if(b)if("string"==typeof b){var c=webix.$$(b);c||(c=new webix.DataCollection({url:b}),this.Ns.push(c)),c.getBody&&(c=c.getBody()),this.Bj(c,a)}else if(b.loadNext)this.Bj(b,a);else if(b[0]&&"object"==typeof b[0])b=new webix.DataCollection({data:b}),this.Bj(b,a),this.Ns.push(b);else{if(webix.isArray(b)){for(var d={},e=0;e<b.length;e++)d[b[e]]=b[e];a.options=b=d}a.template=a.template||this.Ej(b,a.id,a.optionslist)}},Bj:function(a,b){if(b){delete b.options,b.collection=a,b.template=b.template||this.Dj(a,b.id,b.optionslist);var c=a.data.attachEvent("onStoreUpdated",webix.bind(function(){this.refresh(),this.refreshFilter(b.id)},this));this.attachEvent("onDestruct",function(){a.$destructed||a.data.detachEvent(c)})}},Ej:function(a,b,c){return c?function(c){var d=c[b]||c.value;if(!d)return"";for(var e=d.split(","),f=0;f<e.length;f++)e[f]=a[e[f]]||"";return e.join(", ")}:function(c){return a[c[b]]||c.value||""}},Dj:function(a,b,c){return c?function(c){var d=c[b]||c.value;if(!d)return"";for(var e=d.split(","),f=0;f<e.length;f++){var g=a.data.pull[e[f]];e[f]=g?g.value||"":""}return e.join(", ")}:function(c){var d=c[b]||c.value,e=a.data.pull[d];return e&&(e.value||0===e.value)?e.value:""}}},webix.DataLoader=webix.proto({$init:function(a){a=a||"",this.Ve=webix.toArray(),this.data=new webix.DataStore,this.data.attachEvent("onClearAll",webix.bind(this.We,this)),this.data.attachEvent("onServerConfig",webix.bind(this.Xe,this)),this.data.feed=this.Ye,this.data.owner=a.id},Ye:function(a,b,c){return this.Ze?this.Ze=[a,b,c]:(this.Ze=!0,this.$e=[a,b],void this._e.call(this,a,b,c))},_e:function(a,b,c){var d=this.data.url;0>a&&(a=0);var e=[{success:this.af,error:this.af},c];if(d&&"string"!=typeof d){var f={from:a,count:b};if(this.getState){var g=this.getState();f.sort=g.sort,f.filter=g.filter}this.load(d,e,f)}else{var h=d+(-1==d.indexOf("?")?"?":"&")+(this.count()?"continue=true":"");if(-1!=b&&(h+="&count="+b),a&&(h+="&start="+a),this.getState){var g=this.getState();if(g.sort&&(h+="&sort["+g.sort.id+"]="+g.sort.dir),g.filter)for(var i in g.filter)h+="&filter["+i+"]="+g.filter[i]}this.load(h,e)}},af:function(){var a=this.Ze,b=this.$e;this.Ze=!1,"object"!=typeof a||a[0]==b[0]&&a[1]==b[1]||this.data.feed.apply(this,a)},load:function(a){var b=webix.AtomDataLoader.load.apply(this,arguments);return this.data.url||(this.data.url=a),b},loadNext:function(a,b,c,d,e){var f=this.s;return f.datathrottle&&!e?(this.bf&&window.clearTimeout(this.bf),void(this.bf=webix.delay(function(){this.loadNext(a,b,c,d,!0)},this,0,f.datathrottle))):(b||0===b||(b=this.count()),a||(a=f.datafetch||this.count()),this.data.url=this.data.url||d,void(this.callEvent("onDataRequest",[b,a,c,d])&&this.data.url&&this.data.feed.call(this,b,a,c)))},cf:function(a,b){var c=this.$e;return this.Ze&&c&&c[0]<=b&&c[1]+c[0]>=a+b?!0:!1},M:function(a,b,c){var d;return-1===c?d=this.data.driver.toObject(b):(this.Ve.remove(c),d=this.data.driver.toObject(a,b)),d?(this.data.df(d),this.ef(),this.callEvent("onAfterLoad",[]),void this.waitData.resolve()):this.N(a,b,c)},removeMissed_setter:function(a){return this.data.ff=a},gf:function(){var a=this.s.save;a===!0&&(a=this.s.save=this.s.url);var b={master:this};a&&a.url?webix.extend(b,a):b.url=a,webix.dp(b)},save_setter:function(a){return a&&this.$ready.push(this.gf),a},scheme_setter:function(a){this.data.scheme(a)},dataFeed_setter:function(a){if("string"==typeof a&&-1!=a.indexOf("->")){var b=a.split("->");a=webix.proxy(b[0],b[1])}return this.data.attachEvent("onBeforeFilter",webix.bind(function(a,b){if("function"==typeof a)return!0;if(this.s.dataFeed&&(a||b)){a=a||"id",b&&"object"==typeof b&&(b=b.id),this.clearAll();var c=this.s.dataFeed;if("function"==typeof c){var d={};d[a]=b,c.call(this,b,d)}else if(c.$proxy){if(c.load){var e={};e[a]=b,c.load(this,{success:this.M,error:this.N},{filter:e})}}else{var f="filter["+a+"]="+encodeURIComponent(b);this.load(c+(c.indexOf("?")<0?"?":"&")+f,this.s.datatype)}return!1}},this)),a},ef:function(){if(this.s.ready&&!this.hf){var a=webix.toFunctor(this.s.ready,this.$scope);a&&webix.delay(a,this,arguments),this.hf=!0}},We:function(){for(var a=0;a<this.Ve.length;a++){var b=this.Ve[a];try{b.aborted=!0}catch(c){webix.ly.push(b)}b.abort()}this.Ve=webix.toArray(),this.waitData=webix.promise.defer()},Xe:function(a){this.C(a)}},webix.AtomDataLoader),webix.ly=webix.toArray(),webix.DataMarks={addCss:function(a,b,c){if(!this.addRowCss&&!c&&!this.hasCss(a,b)){var d=this.getItemNode(a);d&&(d.className+=" "+b,c=!0)}return this.data.addMark(a,b,1,1,c)},removeCss:function(a,b,c){if(!this.addRowCss&&!c&&this.hasCss(a,b)){var d=this.getItemNode(a);d&&(d.className=d.className.replace(b,"").replace("  "," "),c=!0)}return this.data.removeMark(a,b,1,c)},hasCss:function(a,b){return this.data.getMark(a,b)},clearCss:function(a,b){return this.data.clearMark(a,1,b)}},webix.DataStore=function(){this.name="DataStore",webix.extend(this,webix.EventSystem),this.setDriver("json"),this.pull={},this.order=webix.toArray(),this.Me={}},webix.DataStore.prototype={setDriver:function(a){this.driver=webix.DataDriver[a]},df:function(a){this.callEvent("onParse",[this.driver,a]),this.jf&&this.filter();var b=this.driver.getInfo(a);b.U&&(webix.securityKey=b.U),b.T&&this.callEvent("onServerConfig",[b.T]);var c=this.driver.getOptions(a);c&&this.callEvent("onServerOptions",[c]);var d=this.driver.getRecords(a);this.kf(b,d),this.lf&&this.mf&&!this.nf&&this.mf(this.lf),this.of&&(this.blockEvent(),this.sort(this.of),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,a]),this.refresh()},kf:function(a,b){var c=1*(a.R||0),d=!0,e=!1;if(0===c&&this.order[0]&&this.order[this.order.length-1]){if(this.ff){e={};for(var f=0;f<this.order.length;f++)e[this.order[f]]=!0}d=!1,c=this.order.length}for(var g=0,f=0;f<b.length;f++){var h=this.driver.getDetails(b[f]),i=this.id(h);this.pull[i]?d&&this.order[g+c]&&g++:(this.order[g+c]=i,g++),this.pull[i]?(webix.extend(this.pull[i],h,!0),this.pf&&this.pf(this.pull[i]),e&&delete e[i]):(this.pull[i]=h,this.qf&&this.qf(h))}if(e){this.blockEvent();for(var j in e)this.remove(j);this.unblockEvent()}this.order[a.Q-1]||(this.order[a.Q-1]=webix.undefined)},id:function(a){return a.id||(a.id=webix.uid())},changeId:function(a,b){this.pull[a]&&(this.pull[b]=this.pull[a]),this.pull[b].id=b,this.order[this.order.find(a)]=b,this.jf&&(this.jf[this.jf.find(a)]=b),this.Me[a]&&(this.Me[b]=this.Me[a],delete this.Me[a]),this.callEvent("onIdChange",[a,b]),this.Ke&&this.Ke(a,b),delete this.pull[a]},getItem:function(a){return this.pull[a]},updateItem:function(a,b){var c=this.getItem(a);webix.isUndefined(b)||c===b||(webix.extend(c,b,!0),c.id=a),this.pf&&this.pf(c),this.callEvent("onDataUpdate",[a,c]),this.callEvent("onStoreUpdated",[a,c,"update"])},refresh:function(a){this.rf||(a?this.exists(a)&&this.callEvent("onStoreUpdated",[a,this.pull[a],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a,b){this.rf=!0,a.call(b||this),this.rf=!1},getRange:function(a,b){if(a=a?this.getIndexById(a):this.$min||this.startOffset||0,b?b=this.getIndexById(b):(b=0===this.$max?0:Math.min(this.$max||this.endOffset||1/0,this.count()-1),0>b&&(b=0)),a>b){var c=b;b=a,a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(0===b?0:b||1/0,this.count()-1);for(var c=webix.toArray(),d=a||0;b>=d;d++)c.push(this.getItem(this.order[d]));return c},count:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){if(a!=b){var c=this.getIdByIndex(a),d=this.getItem(c);this.jf&&this.sf(this.jf,0,0,this.getIdByIndex(a),this.getIdByIndex(b)),this.sf(this.order,a,b),this.callEvent("onStoreUpdated",[c,d,"move"])}},sf:function(a,b,c,d,e){if(d||e){b=c=-1;for(var f=0;f<a.length;f++)a[f]==d&&0>b&&(b=f),a[f]==e&&0>c&&(c=f)}var g=a[b];a.removeAt(b),a.insertAt(g,Math.min(a.length,c))},scheme:function(a){this.tf={},this.uf=a.$save,this.qf=a.$init||a.$change,this.pf=a.$update||a.$change,this.vf=a.$serialize,this.lf=a.$group,this.of=a.$sort;for(var b in a)"$"!=b.substr(0,1)&&(this.tf[b]=a[b])},importData:function(a,b){var c=a?a.data||a:[];if(this.jf=null,"function"==typeof c.serialize)this.order=webix.toArray([].concat(c.order)),this.pull=c.pull,c.branch&&this.branch&&(this.branch=webix.copy(c.branch),this.Mg=null);else{this.order=webix.toArray(),this.pull={};var d,e;if(webix.isArray(a))for(var f=0;f<a.length;f++)e=d=a[f],"object"==typeof e?d=e.id||webix.uid():e={id:d,value:d},this.order.push(e.id),this.qf&&this.qf(e),this.pull[e.id]=e;else for(var f in c)this.order.push(f),this.pull[f]={id:f,value:c[f]}}if(this.Pg&&!c.branch){this.branch={0:[]},this.Og||this.Lg("data");for(var g=0;g<this.order.length;g++){var f=this.order[g];this.Pg(this.pull[f],0,0,!1)}}b||this.callEvent("onStoreUpdated",[])},sync:function(a,b,c){var d=typeof a;if("string"==d&&(a=webix.$$("source")),"function"!=d&&"object"!=d&&(c=b,b=null),"DataStore"!=a.name){if(!a.data||"DataStore"!==a.data.name&&"TreeStore"!==a.data.name)return this.Ts=a,webix.callEvent("onSyncUnknown",[this,a,b]);a=a.data}var e=webix.bind(function(){this.wf||(this.importData(a,!0),b&&this.silent(b),this.Y&&this.Y(),this.callEvent("onSyncApply",[]),c?c=!1:this.refresh())},this);this.ab=[a.attachEvent("onStoreUpdated",e),a.attachEvent("onIdChange",webix.bind(function(a,b){this.changeId(a,b),this.refresh(b)},this))],this.Ts=a,this.Us=this.attachEvent("onStoreUpdated",function(b,c,d){("update"==d||"save"==d)&&(this.wf=1,a.updateItem(b,c),this.wf=0)}),e()},unsync:function(){if(this.Ts){var a=this.Ts;if("DataStore"==a.name||a.data&&"DataStore"==a.data.name){for(var b=0;b<this.ab.length;b++)a.detachEvent(this.ab[b]);this.detachEvent(this.Us)}else webix.callEvent("onUnSyncUnknown",[this,a]);this.Ts=null}},destructor:function(){this.unsync(),this.pull=this.order=this.Me=null,this.i=this.j={}},add:function(a,b){if(this.tf)for(var c in this.tf)webix.isUndefined(a[c])&&(a[c]=this.tf[c]);this.qf&&this.qf(a);var d=this.id(a),e=arguments[2]||this.order,f=e.length;if((webix.isUndefined(b)||0>b)&&(b=f),b>f&&(b=Math.min(e.length,b)),this.callEvent("onBeforeAdd",[d,a,b])===!1)return!1;if(this.pull[d]=a,e.insertAt(d,b),this.jf){var g=this.jf.length;this.order.length&&(g=Math.min(b||0,g)),this.jf.insertAt(d,g)}return this.callEvent("onAfterAdd",[d,b]),this.callEvent("onStoreUpdated",[d,a,"add"]),a.id},remove:function(a){if(webix.isArray(a))for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===!1)return!1;var c=this.getItem(a);this.order.remove(a),this.jf&&this.jf.remove(a),delete this.pull[a],this.Me[a]&&delete this.Me[a],this.callEvent("onAfterDelete",[a]),this.callEvent("onStoreUpdated",[a,c,"delete"])}},clearAll:function(){this.pull={},this.Me={},this.order=webix.toArray(),this.jf=this.url=null,this.callEvent("onClearAll",[]),this.refresh()},getIdByIndex:function(a){return this.order[a]},getIndexById:function(a){var b=this.order.find(a);return this.pull[a]?b:-1},getNextId:function(a,b){return this.order[this.getIndexById(a)+(b||1)]},getFirstId:function(){return this.order[0]},getLastId:function(){return this.order[this.order.length-1]},getPrevId:function(a,b){return this.order[this.getIndexById(a)-(b||1)]},sort:function(a,b,c){var d=a;"function"==typeof a?d={as:a,dir:b}:"string"==typeof a&&(d={by:a.replace(/#/g,""),dir:b,as:c});var e=[d.by,d.dir,d.as,d];this.callEvent("onBeforeSort",e)&&(this.order=this.xf(d,this.order),this.jf&&this.jf.length!=this.order.length&&(this.jf=this.xf(d,this.jf)),this.refresh(),this.callEvent("onAfterSort",e))},xf:function(a,b){var c=this.zf.yf(a);if(this.order.length){for(var d=webix.toArray(),e=b.length-1;e>=0;e--)d[e]=this.pull[b[e]];return d.sort(c),webix.toArray(d.map(function(a){return this.id(a)},this))}return b},Af:function(a){this.jf&&!a&&(this.order=this.jf,delete this.jf)},Bf:function(a,b,c){for(var d=webix.toArray(),e=0;e<this.order.length;e++){var f=this.order[e];a(this.getItem(f),b)&&d.push(f)}c&&this.jf||(this.jf=this.order),this.order=d},find:function(a,b){var c=[];for(var d in this.pull){var e=this.pull[d],f=!0;if("object"==typeof a){for(var g in a)if(e[g]!=a[g]){f=!1;break}}else a(e)||(f=!1);if(f&&c.push(e),b&&c.length)return c[0]}return c},filter:function(a,b,c){if((a||this.jf||this.Mg)&&this.callEvent("onBeforeFilter",[a,b])&&(this.Af(c),this.order.length)){if(a){var d=a;b=b||"","string"==typeof a&&(a=a.replace(/#/g,""),"function"==typeof b?d=function(c){return b(c[a])}:(b=b.toString().toLowerCase(),d=function(b,c){return-1!=(b[a]||"").toString().toLowerCase().indexOf(c)})),this.Bf(d,b,c,this.Cf)}this.refresh(),this.callEvent("onAfterFilter",[])}},Df:function(){for(var a=[],b=this.order.length-1;b>=0;b--)a[b]=this.pull[this.order[b]];return a},each:function(a,b,c){var d=this.order;c&&(d=this.jf||d);for(var e=0;e<d.length;e++)a.call(b||this,this.getItem(d[e]),e)},Ef:function(a,b){return function(){return a[b].apply(a,arguments)}},provideApi:function(a,b){b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,ondataupdate:a});for(var c=["sort","add","remove","exists","getIdByIndex","getIndexById","getItem","updateItem","refresh","count","filter","find","getNextId","getPrevId","clearAll","getFirstId","getLastId","serialize","sync"],d=0;d<c.length;d++)a[c[d]]=this.Ef(this,c[d])},addMark:function(a,b,c,d,e){var f=this.Me[a]||{};if(this.Me[a]=f,!f[b]){if(f[b]=d||!0,c){var g=f.$css||"";f.$css=g+" "+b}e||this.refresh(a)}return f[b]},removeMark:function(a,b,c,d){var e=this.Me[a];if(e){if(e[b]&&delete e[b],c){var f=e.$css;f&&(e.$css=f.replace(b,"").replace("  "," "))}d||this.refresh(a)}},getMark:function(a,b){var c=this.Me[a];return c?c[b]:!1},clearMark:function(a,b,c){for(var d in this.Me){var e=this.Me[d];e[a]&&(delete e[a],b&&e.$css&&(e.$css=e.$css.replace(a,"").replace("  "," ")),c||this.refresh(d))}},serialize:function(a){var b=this.order;a&&this.jf&&(b=this.jf);for(var c=[],d=0;d<b.length;d++){var e=this.pull[b[d]];this.vf&&(e=this.vf(e),e===!1)||c.push(e)}return c},zf:{yf:function(a){return this.Ff(a.dir,this.Gf(a.by,a.as))},Hf:{server:function(){return!1},date:function(a,b){return a-=0,b-=0,a>b?1:b>a?-1:0},"int":function(a,b){return a=1*a,b=1*b,a>b?1:b>a?-1:0},string_strict:function(a,b){return a=a.toString(),b=b.toString(),a>b?1:b>a?-1:0},string:function(a,b){return b?a?(a=a.toString().toLowerCase(),b=b.toString().toLowerCase(),a>b?1:b>a?-1:0):-1:1}},Gf:function(a,b){return a?("function"!=typeof b&&(b=this.Hf[b||"string"]),function(c,d){return b(c[a],d[a])}):b},Ff:function(a,b){return"asc"!=a&&a?function(a,c){return-1*b(a,c)}:b}}},webix.DataCollection=webix.proto({name:"DataCollection",isVisible:function(){return this.data.order.length||this.data.jf||this.s.dataFeed?!0:!1},$init:function(a){this.data.provideApi(this,!0);var b=a&&a.id?a.id:webix.uid();this.s.id=b,webix.ui.views[b]=this,this.data.attachEvent("onStoreLoad",webix.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},webix.DataMove,webix.CollectionBind,webix.BindSource,webix.ValidateCollection,webix.DataLoader,webix.MapCollection,webix.EventSystem,webix.BaseBind,webix.Destruction,webix.Settings),webix.Scrollable={$init:function(a){return a&&!a.scroll&&this.If?this.y=this.y||this.w:((this.y||this.w).appendChild(webix.html.create("DIV",{"class":"webix_scroll_cont"},"")),this.y=(this.y||this.w).firstChild,void(webix.env.touch||webix.event(this.x,"scroll",webix.bind(function(){this.callEvent&&webix.delay(function(){this.callEvent("onAfterScroll",[])},this)},this))))},scroll_setter:function(a){if(!a)return!1;var b="x"==a?"x":"xy"==a?"xy":"a"==a?"xy":"y";if(webix.Touch&&webix.Touch.$active)this.y.setAttribute("touch_scroll",b),this.attachEvent&&this.attachEvent("onAfterRender",webix.bind(this.Jf,this)),this.Kf=!0;else if(webix.env.$customScroll)webix.CustomScroll.enable(this,b);else{var c=this.y.parentNode.style;-1!=a.toString().indexOf("a")?c.overflowX=c.overflowY="auto":(-1!=b.indexOf("x")&&(this.ec=!0,c.overflowX="scroll"),-1!=b.indexOf("y")&&(this.cc=!0,c.overflowY="scroll"))}return b},Lf:function(a){if(!!this.s.scroll!=!!a){if(!webix.env.$customScroll){var b=this.y.parentNode.style;b.overflowX=b.overflowY=a?"auto":"hidden"}this.ec=this.cc=!!a,this.s.scroll=!!a}},getScrollState:function(){if(webix.Touch&&webix.Touch.$active){var a=webix.Touch.Mf(this.y);return{x:-a.e,y:-a.f}}return{x:this.y.parentNode.scrollLeft,y:this.y.parentNode.scrollTop}},scrollTo:function(a,b){webix.Touch&&webix.Touch.$active?(b=Math.max(0,Math.min(b,this.y.offsetHeight-this.dc)),a=Math.max(0,Math.min(a,this.y.offsetWidth-this.bc)),webix.Touch.Nf(this.y,-a,-b,this.s.scrollSpeed||"100ms")):(this.y.parentNode.scrollLeft=a,this.y.parentNode.scrollTop=b)},Jf:function(){if(-1!=this.s.scroll.toString().indexOf("x")){var a=this.y.scrollWidth;a&&(this.y.style.width="100%",this.y.style.width=a+"px")}if(webix.Touch&&webix.Touch.$active&&this.Kf){webix.Touch.Of(),webix.Touch.Pf();var b=this.getScrollState(),c=this.y.offsetWidth-this.$width-b.x,d=this.y.offsetHeight-this.$height-b.y;if(0>c||0>d){var a=0>c?Math.min(-c-b.x,0):-b.x,e=0>d?Math.min(-d-b.y,0):-b.y;webix.Touch.Nf(this.y,a,e,0)}}}},webix.protoUI({defaults:{size:10,page:0,group:5,template:"{common.pages()}",maxWidth:1e5,height:30,borderless:!0},name:"pager",on_click:{webix_pager_item:function(a,b){this.select(b)}},$init:function(a){this.data=this.s,this.y=this.x,this.x.className+=" webix_pager",(a.master===!1||0===a.master)&&this.$ready.push(this.wt)},wt:function(){this.refresh(),this.$master={refresh:function(){},select:function(){}}},select:function(a){if(this.$master&&"pager"==this.$master.name)return this.$master.select(a);switch(a){case"next":a=this.s.page+1;break;case"prev":a=this.s.page-1;break;case"first":a=0;break;case"last":a=this.s.limit-1}0>a&&(a=0),a>=this.data.limit&&(a=this.data.limit-1);var b=this.data.page;this.data.page=1*a,this.refresh()&&(this.s.animate&&this.Qf(b,1*a,this.s.animate)||this.$master.refresh())},ad:"webix_p_id",template_setter:webix.template,type:{template:function(a,b){return a.template.call(this,a,b)},pages:function(a){var b="";if(-1==a.page)return"";a.$min=a.page-Math.round((a.group-1)/2),a.$max=a.$min+1*a.group-1,a.$min<0&&(a.$max+=-1*a.$min,a.$min=0),a.$max>=a.limit&&(a.$min-=Math.min(a.$min,a.$max-a.limit+1),a.$max=a.limit-1);for(var c=a.$min||0;c<=a.$max;c++)b+=this.button({id:c,index:c+1,selected:c==a.page?"_selected":""});return b},page:function(a){return a.page+1},first:function(){return this.button({id:"first",index:webix.locale.pager.first,selected:""})},last:function(){return this.button({id:"last",index:webix.locale.pager.last,selected:""})},prev:function(){return this.button({id:"prev",index:webix.locale.pager.prev,selected:""})},next:function(){return this.button({id:"next",index:webix.locale.pager.next,selected:""})},button:webix.template("<button type='button' webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}'>{obj.index}</button>")},clone:function(a){a.$view||(a.view="pager",a=webix.ui(a)),this.Rf=a,a.$master=this,this.Sf()},refresh:function(){var a=this.s;if(a.count){a.limit=Math.ceil(a.count/a.size);var b=Math.min(a.limit-1,a.page);return b!=a.page?this.$master.setPage(b):(a.page=b,b>=0&&b!=a.old_page||a.limit!=a.old_limit||a.old_count!=a.count?(this.render(),this.Sf(),a.old_limit=a.limit,a.old_page=a.page,a.old_count=a.count,!0):void 0)}},apiOnly_setter:function(a){return this.$apiOnly=a},Sf:function(){this.Rf&&(this.Rf.s.count=this.s.count,this.Rf.s.page=this.s.page,this.Rf.refresh())},Qf:function(a,b,c){if(a==b)return!1;if(this.Tf)return this.Uf&&window.clearTimeout(this.Uf),this.Uf=webix.delay(this.Qf,this,[a,b,c],100);var d=b>a?"left":"right";("top"==c.direction||"bottom"==c.direction)&&(d=b>a?"top":"bottom"),c.flip&&(d="");var e=0,f=this.$master.y;this.$master.Vf&&(f=this.$master.Vf,e=f.offsetTop,webix.html.addCss(this.$master.$view,"webix_animation"));var g=f.cloneNode(!0);g.style.width=f.style.width="100%",g.style.backgroundColor=f.style.backgroundColor="white",this.$master.refresh(),webix.html.insertBefore(g,f.nextSibling,f.parentNode);var h,i=c!==!0?c:{},j=webix.extend({direction:d,callback:webix.bind(function(){j.callback=null,webix.animate.breakLine(h),this.Tf=!1,this.$master.Vf&&webix.html.removeCss(this.$master.$view,"webix_animation")},this),top:e},i);h=webix.animate.formLine(f,g,j),webix.animate([f,g],j),this.Tf=!0}},webix.MouseEvents,webix.SingleRender,webix.ui.view,webix.EventSystem),webix.locale.pager={first:" &lt;&lt; ",last:" &gt;&gt; ",next:" &gt; ",prev:" &lt; "},webix.PagingAbility={pager_setter:function(a){function b(c){if(a.config.autosize&&this.getVisibleCount){var d=this.getVisibleCount();isNaN(d)?(a.config.size=1,webix.delay(b,this,[!0])):d!=a.config.size&&(a.config.size=d,a.refresh(),c===!0&&this.refresh())}var e=this.s.pager;return-1==e.page?!1:(this.data.$min=this.sy(0,e.page*e.size),this.data.$max=this.sy(this.data.$min,e.size),this.data.$pagesize=this.data.$max-this.data.$min,!0)}if("string"==typeof a){var c=webix.$$(a);if(!c)return this.$blockRender=!0,webix.delay(function(){var b=webix.$$(a);this.s.pager=this.pager_setter(b);var c=b.s;c.count=this.data.ty(c.level),b.refresh(),this.$blockRender=!1,this.render()},this),null;a=c}return this.attachEvent("onBeforeRender",b),a.$view||(a.view="pager",a=webix.ui(a)),this.Wf=a,a.$master=this,this.data.attachEvent("onStoreUpdated",function(){var b=a.s;b.count=this.ty(b.level),a.refresh()}),this.data.ty=this.ty,a.s},ty:function(a){if(a&&0!==a){var b=0;return this.each(function(c){
c.$level==a&&b++}),b}return this.count()},sy:function(a,b){var c=this.s.pager;if(c.level&&0!==c.level){var d=a,e=this.data.order.length;if(b)for(;e>d;){if(this.data.getItem(this.data.order[d]).$level==c.level){if(0===b)break;b--}d++}return d}return a+b},setPage:function(a){this.Wf&&this.Wf.select(a)},getPage:function(){return this.Wf.s.page},getPager:function(){return this.Wf}},webix.protoUI({name:"tooltip",defaults:{dy:0,dx:20},$init:function(a){"string"==typeof a&&(a={template:a}),this.type=webix.extend({},this.type),this.x=this.w=this.y=document.createElement("DIV"),this.w.className="webix_tooltip",webix.html.insertBefore(this.w,document.body.firstChild,document.body),webix.attachEvent("onClick",webix.bind(function(a){this.gz&&webix.$$(a)!=this&&this.hide()},this))},adjust:function(){},isVisible:function(){return!0},show:function(a,b){this.Xf||(this.data!=a&&(this.data=webix.extend({},a),this.render(a)),this.y.firstChild&&(this.w.style.top=b.y+this.s.dy+"px",this.w.style.left=b.x+this.s.dx+"px",this.w.style.display="block"),this.gz=!0)},hide:function(){this.data=null,this.w.style.display="none",this.gz=!1},disable:function(){this.Xf=!0},enable:function(){this.Xf=!1},type:{template:webix.template("{obj.id}"),templateStart:webix.template.empty,templateEnd:webix.template.empty}},webix.SingleRender,webix.Settings,webix.EventSystem,webix.ui.view),webix.AutoTooltip={tooltip_setter:function(a){if(a){"function"==typeof a&&(a={template:a});var b=!a.template,c=new webix.ui.tooltip(a);this.Vc();var d=this.attachEvent("onMouseMove",function(a,d){if(this.DA=d.clientX,this.EA=d.clientY,this.getColumnConfig){var e=c.type.column=this.getColumnConfig(a.column);if(b){if(!e.tooltip&&e.tooltip!=webix.undefined)return;if(e.tooltip)c.type.template=e.tooltip=webix.template(e.tooltip);else{var f=this.getText(a.row,a.column);c.type.template=function(){return f}}}}webix.DragControl.active||c.show(this.getItem(a),webix.html.pos(d))}),e=webix.event(document.body,"mousemove",webix.bind(function(a){a=a||event,(this.DA!=a.clientX||this.EA!=a.clientY)&&c.hide()},this));return this.attachEvent("onDestruct",function(){this.config.tooltip&&this.config.tooltip.destructor()}),c.attachEvent("onDestruct",webix.bind(function(){this.detachEvent(d),webix.eventRemove(e)},this)),c}}},webix.protoUI({name:"proto",$init:function(){this.data.provideApi(this,!0),this.y=this.y||this.w,this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render.apply(this,arguments)},this))},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&this.render()},ad:"webix_item",on_mouse_move:{},type:{}},webix.PagingAbility,webix.DataMarks,webix.AutoTooltip,webix.ValidateCollection,webix.RenderStack,webix.DataLoader,webix.ui.view,webix.EventSystem,webix.Settings),webix.CodeParser={collapseNames:function(a,b,c){if(c=c||{},b=b||"",!a||"object"!=typeof a)return null;for(var d in a)!a[d]||"object"!=typeof a[d]||webix.isDate(a[d])||webix.isArray(a[d])?c[b+d]=a[d]:webix.CodeParser.collapseNames(a[d],b+d+".",c);return c},expandNames:function(a){var b,c,d,e,f,g={};for(f in a){for(d=f.split("."),c=d.length-1,e=g,b=0;c>b;b++)e[d[b]]||(e[d[b]]={}),e=e[d[b]];e[d[c]]=a[f]}return g}},webix.Values={$init:function(){this.elements={}},focus:function(a){var b;if(a)b=this.elements[a];else if(this.q){var c=0;do b=this.q[c],c++;while(b&&!b.focus)}b&&b.focus&&b.focus()},setValues:function(a,b){this.s.complexData&&(a=webix.CodeParser.collapseNames(a)),this.Zf(a,b)},Zf:function(a,b){this.Yf=b,this.blockEvent(),b&&this.$f||(this.$f={});for(var c in a)this.elements[c]||(this.$f[c]=a[c]);for(var c in this.elements){var d=this.elements[c];d&&(webix.isUndefined(a[c])?!b&&d.Ce&&d.setValue(""):d.setValue(a[c]),this.$f[c]=d.getValue())}this.unblockEvent(),this.callEvent("onValues",[])},isDirty:function(){return this.Yf?!0:1===this.getDirtyValues(1)?!0:!1},setDirty:function(a){this.Yf=a,a||(this.$f=this.hz())},getDirtyValues:function(){var a={};if(this.$f)for(var b in this.elements){var c=this.elements[b].getValue();if(this.$f[b]!=c&&(a[b]=c,arguments[0]))return 1}return a},getCleanValues:function(){return this.$f},getValues:function(a){var b=this.hz(a);return this.s.complexData&&(b=webix.CodeParser.expandNames(b)),b},hz:function(a){var b,c=null,d=this.$f?webix.copy(this.$f):{};for(var e in this.elements)c=this.elements[e],b=!0,a&&("object"==typeof a?(a.hidden===!1&&(b=c.isVisible()),b&&a.disabled===!1&&(b=c.isEnabled())):b=a.call(this,c)),b?d[e]=c.getValue():delete d[e];return d},clear:function(){this.Yf=!1;var a={};for(var b in this.elements)this.elements[b].Ce&&(a[b]=this.elements[b].s.defaultValue||"");this.Zf(a)},markInvalid:function(a,b){if(b===!1)this.Qe(a);else{if("string"==typeof b){var c=this.elements[a];c&&(c.s.invalidMessage=b)}this.Te(a)}},Te:function(a){var b=this.elements[a];a&&b&&(this.Qe(a,!0),webix.html.addCss(b.x,"webix_invalid"),b.s.invalid=!0,b.s.invalidMessage&&b.qy&&b.qy())},Qe:function(a,b){var c=this.elements[a];a&&c&&c.$view&&c.s.invalid&&(webix.html.removeCss(c.x,"webix_invalid"),c.s.invalid=!1,c.s.invalidMessage&&!b&&c.qy&&c.qy())}},webix.protoUI({name:"toolbar",defaults:{type:"toolbar"},Gc:!0,_f:"webix_toolbar",ag:!1,$init:function(a){a.borderless||(this.w.style.borderWidth="1px"),this.w.className+=" "+this._f},Qs:function(){var a=this;a.elements={},webix.ui.each(this,function(b){return b.s.name&&b.getValue&&b.setValue&&(a.elements[b.s.name]=b,b.mapEvent&&b.mapEvent({onbeforetabclick:a,onaftertabclick:a,onitemclick:a,onchange:a})),b.setValues?!1:void 0}),this.setDirty(!1)},sc:function(){this.Qs()},Bc:function(a){var b=this.s;return b.elements&&!a&&(this.nc=a=b.elements,this.mc=this.ag,delete b.elements),this.s.elementsConfig&&this.eg(this.nc,b.elementsConfig),a},eg:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];webix.extend(d,b);var e=b;d.elementsConfig&&(e=webix.extend(webix.extend({},d.elementsConfig),b));var f;f=d.body?[d.body]:d.rows||d.cols||d.cells||d.body,f&&this.eg(f,e)}},$getSize:function(a,b){var c=webix.ui.layout.prototype.$getSize.call(this,a,b),d=this.getParentView(),e=this.mc?3:1;return d&&this.mc!=d.mc&&(c[e]+=1e5),c},render:function(){},refresh:function(){this.render()}},webix.Scrollable,webix.AtomDataLoader,webix.Values,webix.ui.layout,webix.ValidateData),webix.protoUI({name:"template",$init:function(a){var b=this.fg[a.type];b&&(webix.extend(a,b),a.borderless&&(delete a.Ob,this.hc(a))),this.y==this.x?(this.y=webix.html.create("DIV"),this.y.className=" webix_template",this.x.appendChild(this.y)):this.y.className+=" webix_template",this.attachEvent("onAfterRender",this.hg)},setValues:function(a,b){this.data=b?webix.extend(this.data,a,!0):a,this.render()},getValues:function(){return this.data},$skin:function(){this.fg.header.height=this.fg.section.height=webix.skin.$active.barHeight},fg:{header:{css:"webix_header"},section:{css:"webix_section",borderless:!0},clean:{css:"webix_clean",borderless:!0}},onClick_setter:function(a){return this.on_click=webix.extend(this.on_click||{},a,!0),this.Sc||webix.extend(this,webix.MouseEvents),a},defaults:{template:webix.template.empty},gg:function(){this.ig=!1,this.jg(),this.resize()},jg:function(){this.ig||(this.ig=!0,this.render())},src_setter:function(a){return this.ig=!0,this.callEvent("onBeforeLoad",[]),webix.ajax(a,webix.bind(function(a){this.s.template=webix.template(a),this.gg(),this.callEvent("onAfterLoad",[])},this)),a},hg:function(){this.s.autoheight&&(this.ac=null,this.resize()),this.s.scroll&&-1!=this.s.scroll.indexOf("x")&&(this.y.style.width=this.y.scrollWidth+"px")},content_setter:function(a){a&&(this.ig=!0,this.render=function(){},this.y.appendChild(webix.toNode(a)))},refresh:function(){this.render()},setHTML:function(a){this.s.template=function(){return a},this.refresh()},setContent:function(a){this.y.innerHTML="",this.content_setter(a)},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(this.jg(),this.s.autoheight){var c=this.getTopParentView();clearTimeout(c.kg),c.kg=webix.delay(this.resize,this)}return!0}},$getSize:function(a,b){return this.s.autoheight&&!this.s.type&&(this.s.height=this.lg()),webix.ui.view.prototype.$getSize.call(this,a,b)},lg:function(){var a;return this.jg(),webix.skin.$active.layoutPadding.space,this.y.style.height="auto",a=this.y.scrollHeight,this.y.style.height="",a},If:!0},webix.Scrollable,webix.AtomDataLoader,webix.AtomRender,webix.EventSystem,webix.ui.view),webix.protoUI({name:"iframe",$init:function(a){this.y=this.w,this.w.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' onload='var t= $$(\""+a.id+"\"); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"},load:function(a){this.src_setter(a)},src_setter:function(a){return this.getIframe().src=a,this.callEvent("onBeforeLoad",[]),a},getIframe:function(){return this.w.getElementsByTagName("iframe")[0]},getWindow:function(){return this.getIframe().contentWindow}},webix.ui.view,webix.EventSystem),webix.OverlayBox={showOverlay:function(a){this.mg?this.mg.innerHTML=a:(this.mg=webix.html.create("DIV",{"class":"webix_overlay"},a||""),webix.html.insertBefore(this.mg,this.x.firstChild,this.x),this.x.style.position="relative")},hideOverlay:function(){this.mg&&(webix.html.remove(this.mg),this.mg=null)}},webix.protoUI({name:"scrollview",defaults:{scroll:"y",scrollSpeed:"0ms"},$init:function(){this.x.className+=" webix_scrollview"},body_setter:function(a){a.borderless=!0,this.gd=webix.ui.A(a),this.gd.Xb=this,this.y.appendChild(this.gd.x)},getChildViews:function(){return[this.gd]},getBody:function(){return this.gd},resizeChildren:function(){this.ng=this.gd.$getSize(0,0),this.og(),webix.callEvent("onResize",[])},og:function(){var a=(this.Mw||webix.ui.scrollSize,Math.max(this.bc,this.ng[0])),b=Math.max(this.dc,this.ng[2]);if(this.gd.$setSize(a,b),this.y.style.width=this.gd.bc+"px",this.y.style.height=this.gd.dc+"px",webix.env.touch){var c=this.getScrollState(),d=this.gd.dc-this.dc;d<c.y&&this.scrollTo(null,d)}},$getSize:function(a,b){var c=this.ng=this.gd.$getSize(0,0),d=webix.ui.view.prototype.$getSize.call(this,a,b),e=this.Mw||webix.ui.scrollSize;return"x"==this.s.scroll?(d[2]=Math.max(d[2],c[2])+e,d[3]=Math.min(d[3],c[3])+e):"y"==this.s.scroll&&(d[0]=Math.max(d[0],c[0])+e,d[1]=Math.min(d[1],c[1])+e),d},$setSize:function(a,b){var c=webix.ui.scrollSize;webix.ui.scrollSize=this.Mw||c,webix.ui.view.prototype.$setSize.call(this,a,b)&&this.og(),webix.ui.scrollSize=c},scroll_setter:function(a){var b=webix.env.$customScroll;return"string"==typeof a&&0===a.indexOf("native-")&&(this.Mw=17,a=a.replace("native-"),webix.env.$customScroll=!1),a=webix.Scrollable.scroll_setter.call(this,a),webix.env.$customScroll=b,a},Qb:function(a){this.gd.destructor(),this.gd=a,this.gd.Xb=this,this.ed.appendChild(this.gd.x),this.resize()},showView:function(a){var b=webix.$$(a).$view.offsetTop-webix.$$(a).$view.parentNode.offsetTop;this.scrollTo(0,b)}},webix.Scrollable,webix.EventSystem,webix.ui.view),webix.TreeRenderStack={$init:function(){},pg:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template](a,this.type,b):this.type.template(a,this.type,b))+this.type.templateEnd()},qg:function(a){return this.v.innerHTML=this.pg(a),this.v.firstChild},jb:function(a){var b="<div class='webix_tree_branch_"+a.$level+"'>"+this.pg(a);return a.open&&(b+=this.rg(a.id)),b+="</div>"},rg:function(a){var b="",c=this.data.branch[a];if(c){b+="<div class='webix_tree_leaves'>";for(var d=c.length-1,e=0;d>=e;e++){var f=this.getItem(c[e]);this.type.sg[f.$level]=e==d,b+=this.jb(f)}b+="</div>"}return b},render:function(a,b,c){if(webix.TreeRenderStack.tg=this,this.isVisible(this.s.id)&&!this.$blockRender){if(a){var d,e=this.getItem(a);if("add"!=c&&(d=this.getItemNode(a),!d))return;switch(c){case"branch":var f=d.parentNode,g=this.Ne(e);webix.html.insertBefore(g,f),webix.html.remove(f),this.t=null;break;case"paint":case"update":var g=this.t[a]=this.qg(e);webix.html.insertBefore(g,d),webix.html.remove(d);break;case"delete":webix.html.remove(d.parentNode);break;case"add":var h;if(0==e.$parent?h=this.y.firstChild:(h=this.getItemNode(e.$parent),h&&(h=h.nextSibling)),h){var i=this.data.getNextSiblingId(a);i=this.getItemNode(i),i&&(i=i.parentNode);var g=this.Ne(e);this.t[a]=g.firstChild,webix.html.insertBefore(g,i,h)}break;default:return!1}this.callEvent("onPartialRender",[a,b,c])}else this.callEvent("onBeforeRender",[this.data])&&(this.type.sg=[],this.y.innerHTML=this.rg(0),this.t=null,this.callEvent("onAfterRender",[]));return this.type.sg=0,webix.TreeRenderStack.tg=null,!0}},getItemNode:function(a){if(this.t)return this.t[a];this.t={};for(var b=this.y.getElementsByTagName("DIV"),c=0;c<b.length;c++){var d=b[c].getAttribute(this.ad);d&&(this.t[d]=b[c])}return this.getItemNode(a)},vg:1},webix.SelectionModel={$init:function(){this.wg=webix.toArray(),this.data.attachEvent("onStoreUpdated",webix.bind(this.xg,this)),this.data.attachEvent("onStoreLoad",webix.bind(this.yg,this)),this.data.attachEvent("onAfterFilter",webix.bind(this.zg,this)),this.data.attachEvent("onIdChange",webix.bind(this.Ag,this)),this.$ready.push(this.uy)},uy:function(){("multiselect"==this.s.select||this.s.multiselect)&&webix.event(this.$view,"mousedown",function(a){var b=(a||event).shiftKey;b&&(webix.vy=this,webix.html.addCss(this,"webix_noselect",1))})},Ag:function(a,b){for(var c=this.wg.length-1;c>=0;c--)this.wg[c]==a&&(this.wg[c]=b)},zg:function(){for(var a=this.wg.length-1;a>=0;a--)if(this.data.getIndexById(this.wg[a])<0){var b=this.wg[a];this.removeCss(b,"webix_selected",!0),this.wg.splice(a,1),this.callEvent("onSelectChange",[b])}},xg:function(a,b,c){if("delete"==c)if(this.loadBranch)for(var d=this.wg.length-1;d>=0;d--)this.exists(this.wg[d])||this.wg.splice(d,1);else this.wg.remove(a);else a||this.data.count()||this.data.jf||(this.wg=webix.toArray())},yg:function(){this.s.select&&this.data.each(function(a){a&&a.$selected&&this.select(a.id)},this)},Bg:function(a,b,c,d){var e=b?"onBeforeSelect":"onBeforeUnSelect";if(!this.callEvent(e,[a,b]))return!1;d&&(this.Dg=!0,this.unselectAll(),this.Dg=!1),b?this.addCss(a,"webix_selected",!0):this.removeCss(a,"webix_selected",!0),c?c.push(a):(b?this.wg.push(a):this.wg.remove(a),this.Cg(a));var e=b?"onAfterSelect":"onAfterUnSelect";return this.callEvent(e,[a]),!0},select:function(a,b){var c=arguments[2],d=arguments[3];if(!a)return this.selectAll();if(!webix.isArray(a)){if(d&&this.wg.length)return this.selectAll(this.wg[this.wg.length-1],a);var e=!1;return c||b||1==this.wg.length&&this.wg[0]==a||(e=!0),!e&&this.isSelected(a)?void(c&&this.unselect(a)):void this.Bg(a,!0,null,e)}for(var f=0;f<a.length;f++)this.select(a[f],f?1:b,c,d)},unselect:function(a){return a?void(this.isSelected(a)&&this.Bg(a,!1)):this.unselectAll()},selectAll:function(a,b){var c,d=[];c=a||b?this.data.getRange(a||null,b||null):this.data.getRange(),c.each(function(a){this.data.getMark(a.id,"webix_selected")||(this.wg.push(a.id),this.Bg(a.id,!0,d))},this),this.Cg(d)},unselectAll:function(){var a=[];this.wg.each(function(b){this.Bg(b,!1,a)},this),this.wg=webix.toArray(),this.Cg(a)},isSelected:function(a){return-1!=this.wg.find(a)},getSelectedId:function(a){switch(this.wg.length){case 0:return a?[]:"";case 1:return a?[this.wg[0]]:this.wg[0];default:return[].concat(this.wg)}},getSelectedItem:function(a){var b=this.getSelectedId(!0);if(b.length>1||a){for(var c=b.length-1;c>=0;c--)b[c]=this.getItem(b[c]);return b}return b.length?this.getItem(b[0]):void 0},Eg:function(a){return a.length>100||a.length>this.data.count/2},Cg:function(a){if("object"!=typeof a&&(a=[a]),a.length){if(this.Eg(a))this.data.refresh();else for(var b=0;b<a.length;b++)this.render(a[b],this.data.getItem(a[b]),"update");this.Dg||this.callEvent("onSelectChange",[a])}}},webix.ready(function(){webix.event(document.body,"mouseup",function(){webix.vy&&(webix.html.removeCss(webix.vy,"webix_noselect"),webix.vy=null)})}),webix.TreeDataMove={$init:function(){},copy:function(a,b,c,d){return d=d||{},d.copy=!0,this.move(a,b,c,d)},Kd:function(a,b,c){if(b&&a){var d=this.getBranchIndex(a);return d+(c==this&&c.getBranchIndex(b)<d?0:1)}},Lt:function(a,b){var c=this.data.branch[a];if(c&&c.length)for(var d=0;d<c.length;d++){if(c[d]==b)return!0;if(this.Lt(c[d],b))return!0}return!1},move:function(a,b,c,d){d=d||{},b=b||0;var e=d.newId||a,f=d.parent||0;if(c=c||this,c.data){if(!webix.isArray(a)){if(this!=c||d.copy){if(e=c.data.add(c.Jd(this.getItem(a),e),b,f||0),this.data.branch[a]&&c.getBranchIndex){var g=this.data.vf;this.data.vf=function(a){var b=webix.copy(a);return delete b.$parent,delete b.$level,delete b.$child,c.data.pull[b.id]&&(b.id=webix.uid()),b};var h={data:this.serialize(a,!0),parent:e};this.data.vf=g,c.parse(h)}d.copy||this.data.remove(a)}else{if(a==f||this.Lt(a,f))return;var i=this.getItem(a),j=this.data.branch[f];j||(j=this.data.branch[f]=[]);var k=this.data.branch[i.$parent],l=webix.PowerArray.find.call(k,a);if(0>b&&(b=Math.max(j.length-1,0)),k===j&&b===l)return;if(webix.PowerArray.removeAt.call(k,l),webix.PowerArray.insertAt.call(j,a,Math.min(j.length,b)),k=this.data.branch[i.$parent],i.$parent&&"0"!=i.$parent&&this.getItem(i.$parent).$count--,f&&"0"!=f){var m=c.getItem(f);m.$count++,this.Fg(i,m.$level+1)}else this.Fg(i,1);i.$parent=f,c.data.callEvent("onDataMove",[a,b,f,j[b+1]])}return this.refresh(),e}for(var n=0;n<a.length;n++){var o=this.move(a[n],b,c,d);b=c.Kd(o,a[n+1],this)}}},Fg:function(a,b){a.$level=b;var c=this.data.branch[a.id];if(c)for(var d=0;d<c.length;d++)this.Fg(this.getItem(c[d]),b+1)},Gg:function(a){a&&!a.header&&this.open(a)},$dropAllow:function(a){if(a.from!=a.to)return!0;for(var b=0;b<a.source.length;b++)if(a.source==a.target||this.Lt(a.source,a.target))return!1;return!0},Jd:function(a,b){var c=webix.DataMove.Jd.call(this,a,b);return delete c.open,c}},webix.TreeDataLoader={$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(this.Hg,this),null,!0),this._e=this.Ig,this.loadNext=this.Jg},Ig:function(a,b,c){var d=this.data.url;this.load(d+(-1==d.indexOf("?")?"?":"&")+(this.count()?"continue=true&":"")+"parent="+encodeURIComponent(a),[this.af,c])},loadBranch:function(a,b,c){a=a||0,this.data.url=this.data.url||c,this.callEvent("onDataRequest",[a,b,this.data.url])&&this.data.url&&this.data.feed.call(this,a,0,b)},Jg:function(){},Hg:function(a,b,c){c&&"add"!=c&&"delete"!=c&&"branch"!=c||this.data.Kg(this)}},webix.TreeStore={name:"TreeStore",$init:function(){this.Cf={showSubItems:!0},this.branch={0:[]},this.attachEvent("onParse",function(a,b){this.Lg(a.child),a.getInfo(b).S}),this.attachEvent("onClearAll",webix.bind(function(){this.Mg=null},this))},filterMode_setter:function(a){return webix.extend(this.Cf,a,!0)},Af:function(a){if(this.Mg&&!a){this.branch=this.Mg,this.order=webix.toArray(webix.copy(this.branch[0]));for(var b in this.branch)"0"!=b&&(this.getItem(b).$count=this.branch[b].length);delete this.Mg}},Bf:function(a,b,c,d){c&&this.Mg||(this.Mg=this.branch,this.branch=webix.clone(this.branch)),this.branch[0]=this.Ng(a,b,this.branch[0],1,d||{})},Ng:function(a,b,c,d,e){for(var f=[],g=e.level&&e.level!=d,h=0;h<c.length;h++){var i=c[h],j=this.getItem(i),k=!1,l=this.branch[i];if(g)k=!0;else if(a(this.getItem(i),b)){if(f.push(i),e.openParents!==!1)for(var m=this.getParentId(i);m&&"0"!=m;)this.getItem(m).open=1,m=this.getParentId(m);if(e.level||e.showSubItems)continue}else k=!0;if((g||!e.level)&&l){var n=this.branch[i]=this.Ng(a,b,l,d+1,e);j.$count=n.length,k&&n.length&&f.push(i)}}return f},count:function(){if(this.order.length)return this.order.length;var a=0;return this.eachOpen(function(){a++}),a},changeId:function(a,b){if(this.branch[a]){for(var c=this.branch[b]=this.branch[a],d=0;d<c.length;d++)this.getItem(c[d]).$parent=b;delete this.branch[a]}var e=this.getItem(a).$parent;if("0"!==e){var f=webix.PowerArray.find.call(this.branch[e],a);this.branch[e][f]=b}return webix.DataStore.prototype.changeId.call(this,a,b)},clearAll:function(){this.branch={0:[]},webix.DataStore.prototype.clearAll.call(this)},getPrevSiblingId:function(a){var b=this.branch[this.getItem(a).$parent],c=webix.PowerArray.find.call(b,a)-1;return c>=0?b[c]:null},getNextSiblingId:function(a){var b=this.branch[this.getItem(a).$parent],c=webix.PowerArray.find.call(b,a)+1;return c<b.length?b[c]:null},getParentId:function(a){return this.getItem(a).$parent},getFirstChildId:function(a){var b=this.branch[a];return b&&b.length?b[0]:null},isBranch:function(a){return!!this.branch[a]},getBranchIndex:function(a){var b=this.branch[this.pull[a].$parent];return webix.PowerArray.find.call(b,a)},Lg:function(a){this.Og="string"==typeof a?function(b){var c=b[a];return c&&delete b[a],c}:a},kf:function(a,b){for(var c=a.S||0,d=0;d<b.length;d++){var e=this.driver.getDetails(b[d]),f=this.id(e),g=!!this.pull[f];g?(e=webix.extend(this.pull[f],e,!0),this.pf&&this.pf(e)):(this.qf&&this.qf(e),this.pull[f]=e),this.Pg(e,c,0,g)}var h=this.pull[c]||{},i=this.branch[c]||[];h.$count=i.length,delete h.webix_kids},Pg:function(a,b,c,d){a.$count=0,a.$parent=b||0,a.$level=c||("0"!=b?this.pull[b].$level+1:1);var e=this.branch[a.$parent];e||(e=this.branch[a.$parent]=[]),this.Mg&&(this.Mg[a.$parent]=e),d||e.push(a.id);var f=this.Og(a);if(a.webix_kids)return a.$count=-1;if(!f)return a.$count=0;webix.isArray(f)||(f=[f]);for(var g=0;g<f.length;g++){var h=webix.DataDriver.json.getDetails(f[g]),i=this.id(h);d=!!this.pull[i],d?(h=webix.extend(this.pull[i],h,!0),this.pf&&this.pf(h)):(this.qf&&this.qf(h),this.pull[i]=h),this.Pg(h,a.id,a.$level+1,d)}var j=this.branch[a.id];j&&(a.$count=j.length)},Kg:function(a){this.order=webix.toArray(),this.Qg(0,a)},Qg:function(a,b){for(var c=this.branch[a],d=0;d<c.length;d++){var e=c[d];this.order.push(e),this.pull[e].open&&(-1==this.pull[e].$count?b.loadBranch(e):this.pull[e].$count&&this.Qg(e,b))}},provideApi:function(a,b){for(var c=["getPrevSiblingId","getNextSiblingId","getParentId","getFirstChildId","isBranch","getBranchIndex","filterMode_setter"],d=0;d<c.length;d++)a[c[d]]=this.Ef(this,c[d]);a.getIndexById||webix.DataStore.prototype.provideApi.call(this,a,b)},getTopRange:function(){return webix.toArray([].concat(this.branch[0])).map(function(a){return this.getItem(a)},this)},eachChild:function(a,b,c,d){var e=this.branch;d&&this.Mg&&(e=this.Mg);var f=e[a];if(f)for(var g=0;g<f.length;g++)b.call(c||this,this.getItem(f[g]))},each:function(a,b,c,d){this.eachChild(d||0,function(d){var e=this.branch;a.call(b||this,d),c&&this.Mg&&(e=this.Mg),e[d.id]&&this.each(a,b,c,d.id)},this,c)},eachOpen:function(a,b,c){this.eachChild(c||0,function(c){a.call(b||this,c),this.branch[c.id]&&c.open&&this.eachOpen(a,b,c.id)})},eachSubItem:function(a,b){var c=this.branch[a||0];if(c)for(var d=0;d<c.length;d++){var e=c[d];this.branch[e]?(b.call(this,this.getItem(e),!0),this.eachSubItem(e,b)):b.call(this,this.getItem(e),!1)}},eachLeaf:function(a,b){var c=this.branch[a||0];if(c)for(var d=0;d<c.length;d++){var e=c[d];this.branch[e]?this.eachLeaf(e,b):b.call(this,this.getItem(e),!1)}},xf:function(a,b){var c=this.zf.yf(a);for(var d in this.branch){for(var e=this.branch[d],f=[],g=0;g<e.length;g++)f.push(this.pull[e[g]]);f.sort(c);for(var g=0;g<e.length;g++)f[g]=f[g].id;this.branch[d]=f}return b},add:function(a,b,c){var d=!1,e=this.getItem(c||0);if(e&&(this.branch[e.id]||(d=!0),e.$count++),this.branch[c||0]=this.order=webix.toArray(this.branch[c||0]),a.$count=0,a.$level=e?e.$level+1:1,a.$parent=e?e.id:0,this.Mg){var f=this.Mg[c||0];if(f||(f=this.Mg[c]=this.order),this.order!==f){var g=f.length;!b&&this.branch[c||0].length&&(g=0),f=webix.toArray(f),f.insertAt(a.id,g)}}var h=webix.DataStore.prototype.add.call(this,a,b);return d&&this.refresh(c),h},Rg:function(a){var b=this.pull[a];if(this.branch[b.id]&&this.branch[b.id].length>0)for(var c=this.branch[a],d=0;d<c.length;d++)this.Rg(c[d],!0);delete this.branch[a],this.Mg&&delete this.Mg[a],delete this.pull[a],this.Me[a]&&delete this.Me[a]},Wy:function(a,b,c){var d=a[b];1==d.length&&d[0]==c&&b?delete a[b]:webix.toArray(d).remove(c)},remove:function(a){var b=this.pull[a],c=b.$parent||0;if(this.callEvent("onBeforeDelete",[a])===!1)return!1;this.Rg(a),this.callEvent("onAfterDelete",[a]);var d=this.pull[c];this.Wy(this.branch,c,a),this.Mg&&this.Wy(this.Mg,c,a);var e=0;d&&(d.$count--,d.$count<=0&&(d.$count=0,d.open=0,e=1)),this.callEvent("onStoreUpdated",[a,b,"delete"]),e&&this.refresh(d.id)},getBranch:function(a){var b=[],c=(this.Mg||this.branch)[a];if(c)for(var d=0;d<c.length;d++)b[d]=this.pull[c[d]];return b},serialize:function(a,b){var c=this.branch;b&&this.Mg&&(c=this.Mg);for(var d=this.branch[a||0],e=[],f=0;f<d.length;f++){var g,h=this.pull[d[f]];if(this.vf){if(g=this.vf(h),g===!1)continue}else g=webix.copy(h);this.branch[h.id]&&(g.data=this.serialize(h.id,b)),e.push(g)}return e}},webix.TreeType={space:function(a){for(var b="",c=1;c<a.$level;c++)b+="<div class='webix_tree_none'></div>";return b},icon:function(a){return a.$count?a.open?"<div class='webix_tree_open'></div>":"<div class='webix_tree_close'></div>":"<div class='webix_tree_none'></div>"},checkbox:function(a){return a.nocheckbox?"":"<input type='checkbox' class='webix_tree_checkbox' "+(a.checked?"checked":"")+(a.disabled?" disabled":"")+">"},folder:function(a){return a.icon?"<div class='webix_tree_file webix_tree_"+a.icon+"'></div>":a.$count?a.open?"<div class='webix_tree_folder_open'></div>":"<div class='webix_tree_folder'></div>":"<div class='webix_tree_file'></div>"}},webix.TreeAPI={open:function(a,b){if(a){var c=this.getItem(a);c.$count&&!c.open&&(this.callEvent("onBeforeOpen",[a])&&(c.open=!0,this.data.callEvent("onStoreUpdated",[a,0,"branch"]),this.callEvent("onAfterOpen",[a])),b&&"0"!=a&&this.open(this.getParentId(a),b))}},close:function(a){if(a){var b=this.getItem(a);b.open&&this.callEvent("onBeforeClose",[a])&&(b.open=!1,this.data.callEvent("onStoreUpdated",[a,0,"branch"]),this.callEvent("onAfterClose",[a]))}},openAll:function(a){this.data.eachSubItem(a||0,function(a,b){b&&(a.open=!0)}),this.data.refresh()},closeAll:function(a){this.data.eachSubItem(a||0,function(a,b){b&&(a.open=!1)}),this.data.refresh()},Sg:function(a,b,c){if(this.s.threeState)return this.Tg(a,null!==b?b:"");var d,e=this.getItem(a),f=c?c.target||c.srcElement:null;d=f&&"checkbox"==f.type?f.checked?!0:!1:null!==b?b:!e.checked,e.checked=d,this.callEvent("onItemCheck",[a,e.checked,c])},isBranchOpen:function(a){if("0"==a)return!0;var b=this.getItem(a);return b.open?this.isBranchOpen(b.$parent):!1},getOpenItems:function(){var a=[];for(var b in this.data.branch)this.exists(b)&&this.getItem(b).open&&a.push(b);return a},getState:function(){return{open:this.getOpenItems(),select:this.getSelectedId(!0)}},Ug:function(a,b){var c=this.data.attachEvent("onStoreLoad",function(){a.setState.call(a,b),a.data.detachEvent(c),a=null})},setState:function(a){if(a.open){this.closeAll();for(var b=a.open,c=0;c<b.length;c++){var d=this.getItem(b[c]);if(d&&d.$count&&(d.open=!0,-1==d.$count))return this.Ug(this,a),this.refresh(),0}this.refresh()}if(a.select&&this.select){var e=a.select;this.unselect();for(var c=0;c<e.length;c++)this.exists(e[c])&&this.select(e[c],!0)}return 1}},webix.TreeClick={webix_tree_open:function(a,b){return this.close(b),!1},webix_tree_close:function(a,b){return this.open(b),!1},webix_tree_checkbox:function(a,b){return this.Sg(b,null,a),!1}},webix.TreeCollection=webix.proto({name:"TreeCollection",$init:function(){webix.extend(this.data,webix.TreeStore,!0),this.data.provideApi(this,!0),webix.extend(this,webix.TreeDataMove,!0)}},webix.TreeDataLoader,webix.DataCollection),webix.DragOrder={Vg:!0,$drag:function(a,b){var c=webix.DragItem.$drag.call(this,a,b);if(c){var d=webix.DragControl.getContext();this.getBranchIndex&&(this.Wg=this.Xg?16*this.getItem(d.start).$level:0),d.fragile||this.addCss(d.start,"webix_transparent")}return c},$dragPos:function(a,b,c){var d=webix.html.offset(this.$view),e=d.x+(this.Xg?+d.width-webix.ui.scrollSize-1:1);c.style.display="none";var f=document.elementFromPoint(e,a.y);if(f!=this.Yg){var g=webix.$$(f);if(g&&g==this){var h=this.locate(f);h&&this.Zg&&(h=this.Zg(h));var i=webix.DragControl.getContext().start;if(h){if(h!=this.Yg){if(h!=i){var j,k;this.getBranchIndex?(j={parent:this.getParentId(h)},k=this.getBranchIndex(h)):(j={},k=this.getIndexById(h)),this.callEvent("onBeforeDropOrder",[i,k,b,j])&&(this.move(i,k,this,j),this.Yg=h)}webix.DragControl.Cd=this.w}}else if(h="$webix-last",this.Yg!=h){if(!this.callEvent("onBeforeDropOrder",[i,-1,b,{parent:0}]))return;this.Yg=h}}}if(c.style.display="block",d.y+=this.$g,a.x=this.Wg||d.x,a.y=a.y-18,a.y<d.y)a.y=d.y;else{var l=d.y+this.$view.offsetHeight-60;a.y>l&&(a.y=l)}webix.DragControl.Ed=!0},$dragIn:function(){return!1},$drop:function(a,b,c){var d=webix.DragControl.getContext(),e=d.start;this.removeCss(e,"webix_transparent");var f=this.getIndexById(e);this.callEvent("onAfterDropOrder",[e,f,c]),d.fragile&&this.refresh()}},webix.DragItem={_g:function(a,b,c){b||webix.DragControl.addDrop(a.w,a,!0),c||webix.DragControl.addDrag(a.w,a),this.attachEvent("onDragOut",function(a,b){this.$dragMark(a,b)})},drag_setter:function(a){return a&&("order"==a&&webix.extend(this,webix.DragOrder,!0),"inner"==a&&(this.ah=!0),this._g(this,"source"==a,"target"==a),delete this.drag_setter),a},$dragIn:function(a,b,c){var d=this.locate(c)||null,e=webix.DragControl.Gd;if((this.ah||e.from.ah)&&e.from!==this)return!1;var f=webix.DragControl.getMaster(b),g=this.getItemNode(d,c)||this.y;return g==webix.DragControl.Dd?g:(e.target=d,e.to=f,this.bh&&(this.bh=window.clearTimeout(this.bh)),this.bh=webix.delay(this.ch,this,[webix.html.pos(c),d],250),this.$dropAllow(e,c)&&this.callEvent("onBeforeDragIn",[e,c])?(this.$dragMark(e,c),g):(e.to=e.target=null,null))},$dropAllow:function(){return!0},Gg:function(){},ch:function(a,b){var c=1,d=0,e=this.s.dragscroll;"string"==typeof e&&(d=-1!=e.indexOf("x"),c=-1!=e.indexOf("y"));var f=this.Vf||this.$view,g=webix.html.offset(f),h=g.y,i=h+f.offsetHeight,j=g.x,k=j+f.offsetWidth,e=this.getScrollState(),l=!1,m=40,n=webix.DragControl.getContext();this.Gg(b),c&&(a.y<h+m?(this.scrollTo(e.x,e.y-2*m),l=!0):a.y>i-m&&(this.scrollTo(e.x,e.y+2*m),l=!0)),d&&(a.x<j+m?(this.scrollTo(e.x-2*m,e.y),l=!0):a.x>k-m&&(this.scrollTo(e.x+2*m,e.y),l=!0)),l&&webix.DragControl.sd&&n&&n.to===this&&(this.bh=webix.delay(this.ch,this,[a],100))},$dragOut:function(a,b,c,d){var e=(this.x.contains(c)?this.locate(d):null)||null,f=webix.DragControl.Gd;return(f.target||"").toString()==(e||"").toString()?null:(this.bh&&(this.bh=window.clearTimeout(this.bh)),f.target=f.to=null,this.callEvent("onDragOut",[f,d]),null)},$drop:function(a,b,c){this.bh&&(this.bh=window.clearTimeout(this.bh));var d=webix.DragControl.Gd;d.to=this;var e=this.Zg?this.Zg(d.target):d.target;this.getBranchIndex?e&&(d.parent=this.getParentId(e),d.index=this.getBranchIndex(e)):d.index=e?this.getIndexById(e):this.count(),this.$dragMark({},c),d.from&&d.from!=d.to&&d.from.callEvent&&d.from.callEvent("onBeforeDropOut",[d,c]),this.callEvent("onBeforeDrop",[d,c])&&(this.dh(d,c),this.callEvent("onAfterDrop",[d,c]))},dh:function(a){if(a.from){var b={parent:a.parent,mode:a.pos};a.from.move(a.source,a.index,a.to,b)}},$drag:function(a,b){var c=this.locate(b);if(this.Zg&&(c=this.Zg(c,!0)),c){var d=[c];if(this.getSelectedId&&!this.Vg){var e=this.getSelectedId(!0,!0);if(e&&e.length>1&&-1!=webix.PowerArray.find.call(e,c)){for(var f={},d=[],g=0;g<e.length;g++)f[e[g]]=!0;for(var g=0;g<this.data.order.length;g++){var h=this.data.order[g];f[h]&&d.push(h)}}}var i=webix.DragControl.Gd={source:d,start:c};if(i.fragile=this.addRowCss&&webix.env.touch&&(webix.env.isWebKit||webix.env.isFF),i.from=this,this.callEvent("onBeforeDrag",[i,b]))return webix.Touch&&(webix.Touch.km=null),i.html||this.$dragHTML(this.getItem(c),b)}return null},$dragHTML:function(a){return this.jb(a)},$dragMark:function(a){var b=null;return a.target&&(b=this.Zg?this.Zg(a.target):a.target),this.eh&&this.eh!=b&&(a.fragile||this.removeCss(this.eh,"webix_drag_over"),this.eh=null),!this.eh&&b?(this.eh=b,
a.fragile||this.addCss(b,"webix_drag_over"),b):a.to?!0:!1}},webix.Group={$init:function(){webix.extend(this.data,webix.GroupStore),this.data.attachEvent("onClearAll",webix.bind(function(){this.data.nf=this.data.fh=null,this.gh=0},this))},group:function(a){this.data.ungroup(!0),this.data.group(a)},ungroup:function(a){this.data.ungroup(a)}},webix.GroupMethods={sum:function(a,b){b=b||this;for(var c=0,d=0;d<b.length;d++)c+=1*a(b[d]);return c},min:function(a,b){b=b||this;for(var c=1/0,d=0;d<b.length;d++)1*a(b[d])<c&&(c=1*a(b[d]));return 1*c},max:function(a,b){b=b||this;for(var c=-1/0,d=0;d<b.length;d++)1*a(b[d])>c&&(c=1*a(b[d]));return 1*c},count:function(a,b){return b.length},any:function(a,b){return a(b[0])},string:function(a){return a.$name}},webix.GroupStore={$init:function(){this.attachEvent("onClearAll",this.oz)},oz:function(){this.nf=this.fh=null,this.gh=0},ungroup:function(a){return this.getBranchIndex?this.hh.apply(this,arguments):void(this.nf&&(this.order=this.nf,this.pull=this.fh,this.fh=this.nf=null,a||this.callEvent("onStoreUpdated",[])))},mf:function(a){this.blockEvent(),this.group(a),this.unblockEvent()},ih:function(a){if("function"==typeof a)return a;var b=function(b){return b[a]};return b.$name=a,b},group:function(a){if(this.getBranchIndex)return this.jh.apply(this,arguments);var b=this.ih(a.by);a.map[b]||(a.map[b]=[b,this.kh]);var c={},d=[];this.each(function(e){var f=b(e);c[f]||(d.push({id:f,$group:!0,$row:a.row}),c[f]=webix.toArray()),c[f].push(e)});for(var e in a.map){var f=a.map[e][1]||"any",g=this.ih(a.map[e][0]);"function"!=typeof f&&(f=webix.GroupMethods[f]);for(var h=0;h<d.length;h++)d[h][e]=f.call(this,g,c[d[h].id])}this.nf=this.order,this.fh=this.pull,this.order=webix.toArray(),this.pull={};for(var h=0;h<d.length;h++){var i=this.id(d[h]);this.pull[i]=d[h],this.order.push(i)}this.callEvent("onStoreUpdated",[])},jh:function(a,b){this.gh=(this.gh||0)+1;var c;"string"==typeof a?(c={by:this.ih(a),map:{}},c.map[a]=[a]):c="function"==typeof a?{by:a,map:{}}:a;var d;b?d=this.getItem(b).$level:(b=0,d=0);for(var e=this.branch[b],f=this.ih(c.by),g=[],h=[],i=0;i<e.length;i++){var j=this.getItem(e[i]),k=f(j),l=d+"$"+k,m=this.branch[l];if(!m){var n=this.pull[l]={id:l,value:k,$group:!0,$row:c.row};h.push(n),m=this.branch[l]=[],m.lh=[],g.push(l)}m.push(j.id),m.lh.push(j)}this.branch[b]=g;for(var o in c.map){var p=c.map[o][1]||"any",q=this.ih(c.map[o][0]);"function"!=typeof p&&(p=webix.GroupMethods[p]);for(var i=0;i<h.length;i++)h[i][o]=p.call(this,q,this.branch[h[i].id].lh)}for(var i=0;i<h.length;i++){var r=h[i];if(this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[r.id,r.value,this.branch[r.id].lh]),c.footer){var s="footer$"+r.id,t=this.pull[s]={id:s,$footer:!0,value:r.value,$level:d,$count:0,$parent:r.id,$row:c.footer.row};for(var o in c.footer){var p=c.footer[o][1]||"any",q=this.ih(c.footer[o][0]);"function"!=typeof p&&(p=webix.GroupMethods[p]),t[o]=p.call(this,q,this.branch[h[i].id].lh)}this.branch[r.id].push(t.id),this.callEvent("onGroupFooter",[t.id,t.value,this.branch[r.id].lh])}delete this.branch[r.id].lh}this.mh(g,b,d+1),this.callEvent("onStoreUpdated",[])},hh:function(a,b,c){if(c||this.gh){this.gh=Math.max(0,this.gh-1),b=b||0;for(var d=[],e=this.branch[b],f=0;f<e.length;f++){var g=e[f],h=this.branch[g];h&&(d=d.concat(h)),delete this.pull[g],delete this.branch[g]}this.branch[b]=d;for(var f=d.length-1;f>=0;f--)this.pull[d[f]].$footer&&d.splice(f,1);this.mh(d,0,1),a||this.callEvent("onStoreUpdated",[])}},mh:function(a,b,c){b&&(this.getItem(b).$count=a.length);for(var d=0;d<a.length;d++){var e=this.pull[a[d]];e.$level=c,e.$parent=b;var f=this.branch[e.id];f&&this.mh(f,e.id,c+1)}}},webix.clipbuffer={nh:null,oh:null,ph:0,init:function(){return null!==this.nh?this.nh:(webix.destructors.push(this),this.nh=document.createElement("textarea"),this.nh.className="webix_clipbuffer",this.nh.setAttribute("webixignore",1),document.body.appendChild(this.nh),webix.event(document.body,"keydown",webix.bind(function(a){var b=a.keyCode,c=!(!a.ctrlKey&&!a.metaKey);86===b&&c&&webix.delay(this.rh,this,[],100)},this)),this.nh)},destructor:function(){this.nh=null},set:function(a){this.init(),this.nh.value=a,this.focus()},focus:function(){this.init(),this.nh.focus(),this.nh.select()},rh:function(){var a=this.nh.value,b=webix.UIManager.getFocus();b&&(b.callEvent("onPaste",[a]),this.nh.select())}},webix.CopyPaste={clipboard_setter:function(a){return(a===!0||1===a)&&(a="modify"),this.attachEvent("onAfterSelect",function(a){var b=this.getItem(a),c=this.type.templateCopy(b);webix.clipbuffer.set(c,this),webix.clipbuffer.focus()}),this.attachEvent("onPaste",function(a){webix.isUndefined(this.rh[this.s.clipboard])||this.rh[this.s.clipboard].call(this,a)}),this.attachEvent("onFocus",function(){webix.clipbuffer.focus()}),this.attachEvent("onItemClick",function(){webix.clipbuffer.focus()}),a},rh:{insert:function(a){this.add({value:a})},modify:function(a){for(var b=this.getSelectedId(!0),c=0;c<b.length;c++)this.getItem(b[c]).value=a,this.refresh(b[c])},custom:function(){}},templateCopy_setter:function(a){this.type.templateCopy=webix.template(a)},type:{templateCopy:function(a){return this.template(a)}}},webix.KeysNavigation={sh:function(a){return function(b,c){var d=c.srcElement||c.target;if(!d.getAttribute("webixignore")){var e=d.tagName;if("INPUT"==e||"TEXTAREA"==e||"SELECT"==e)return!0}return b&&b.moveSelection&&b.config.navigation&&!b.Eb?b.moveSelection(a,c.shiftKey):!0}},moveSelection:function(a){var b=this.getSelectedId(!0);if(!b.length){if("down"==a)a="top";else{if("up"!=a)return;a="bottom"}b=[1]}if(1==b.length){if(b=b[0],"left"==a&&this.close)return this.close(b);if("right"==a&&this.open)return this.open(b);if("top"==a)b=this.getFirstId();else if("bottom"==a)b=this.getLastId();else if("up"==a||"left"==a||"pgup"==a){var c=this.getIndexById(b),d="pgup"==a?10:1;b=this.getIdByIndex(Math.max(0,c-d))}else{if("down"!=a&&"right"!=a&&"pgdown"!=a)return;var c=this.getIndexById(b),d="pgdown"==a?10:1;b=this.getIdByIndex(Math.min(this.count()-1,c+d))}this.showItem(b),this.select(b)}return!1},navigation_setter:function(a){return a&&!webix.UIManager.th&&(webix.UIManager.th=!0,webix.UIManager.addHotKey("up",this.sh("up")),webix.UIManager.addHotKey("down",this.sh("down")),webix.UIManager.addHotKey("shift+up",this.sh("up")),webix.UIManager.addHotKey("shift+down",this.sh("down")),webix.UIManager.addHotKey("shift+right",this.sh("right")),webix.UIManager.addHotKey("shift+left",this.sh("left")),webix.UIManager.addHotKey("pageup",this.sh("pgup")),webix.UIManager.addHotKey("pagedown",this.sh("pgdown")),webix.UIManager.addHotKey("home",this.sh("top")),webix.UIManager.addHotKey("end",this.sh("bottom")),webix.UIManager.addHotKey("right",this.sh("right")),webix.UIManager.addHotKey("left",this.sh("left"))),a}},webix.protoUI({name:"tree",defaults:{scroll:"a"},$init:function(){this.x.className+=" webix_tree",webix.extend(this.data,webix.TreeStore,!0),webix.extend(this.on_click,webix.TreeClick),this.attachEvent("onAfterRender",this.Jf),this.attachEvent("onPartialRender",this.Jf),this.data.provideApi(this,!0)},ad:"webix_tm_id",on_context:{},on_dblclick:{webix_tree_checkbox:function(){return this.on_click.webix_tree_checkbox?this.on_click.webix_tree_checkbox.apply(this,arguments):void 0}},on_click:{webix_tree_item:function(a,b){if(this.s.activeTitle){var c=this.getItem(b);c.open?this.close(b):this.open(b)}if(this.s.select)if("multiselect"==this.s.select||this.s.multiselect){if("level"==this.s.multiselect){var d=this.getSelectedId(!0)[0];if(d&&this.getParentId(b)!=this.getParentId(d))return}this.select(b,!1,a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,a.shiftKey)}else this.select(b)}},rh:{insert:function(a){var b=this.getSelectedId()||"0";this.add({value:a},null,b)},modify:function(a){for(var b=this.getSelectedId(!0),c=0;c<b.length;c++)this.getItem(b[c]).value=a,this.refresh(b[c])},custom:function(){}},Xg:!0,$dragHTML:function(a){return"<div class='borderless'>"+this.type.template(a,this.type)+"</div>"},type:webix.extend({template:function(a,b){var c=b["template"+a.level]||b.templateCommon;return c.apply(this,arguments)},classname:function(a,b,c){var d="webix_tree_item";return a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=" "+a.$css),c&&c.$css&&(d+=" "+c.$css),d},templateCommon:webix.template("{common.icon()} {common.folder()} <span>#value#</span>"),templateStart:webix.template('<div webix_tm_id="#id#" class="{common.classname()}">'),templateEnd:webix.template("</div>"),templateCopy:webix.template("#value#")},webix.TreeType)},webix.AutoTooltip,webix.Group,webix.TreeAPI,webix.DragItem,webix.TreeDataMove,webix.SelectionModel,webix.KeysNavigation,webix.MouseEvents,webix.Scrollable,webix.TreeDataLoader,webix.ui.proto,webix.TreeRenderStack,webix.CopyPaste,webix.EventSystem),webix.TreeStateCheckbox={uh:function(){if(this.vg){var a=this.render;this.render=function(b,c){var d=a.apply(this,arguments);this.s.threeState&&d&&"checkbox"!=c&&this.vh.apply(this,arguments)},this.uh=function(){}}},threeState_setter:function(a){return a&&this.uh(),a},vh:function(a){var b,c,d,e,f;if(d=[],f=this,a&&!f.data.pull[a]&&(a=0),!a||f.data.pull[a].$count)for(c=this.wh(a),c.sort(function(a,b){return f.data.pull[b].$level-f.data.pull[a].$level}),b=0;b<c.length;b++)b&&f.data.pull[c[b]].$parent==f.data.pull[c[b-1]].$parent||(d=d.concat(f.xh(c[b])));else d=d.concat(f.xh(a));for(e={},b=0;b<d.length;b++)e[d[b]]||(e[d[b]]=1,this.yh(d[b]));f=null},yh:function(a){var b,c;c=this.getItemNode(a),c&&(this.render(a,"checkbox","update"),this.getItem(a).indeterminate&&(c=this.getItemNode(a),b=c.getElementsByTagName("input")[0],b&&(b.indeterminate=this.getItem(a).indeterminate)))},xh:function(a){var b,c,d,e,f,g,h,i;for(e=this.getParentId(a),g=this,f=[];e&&"0"!=e;){h=0,c=0,this.data.eachChild(e,function(a){a.indeterminate?h++:a.checked&&c++}),b=d=i=!1;var j=this.getItem(e);c==j.$count?b=!0:(c>0||h>0)&&(d=!0),(d||d!=j.indeterminate)&&(i=!0),j.indeterminate=d,j.checked!=b&&(i=!0),j.checked=b,i?(f.push(e),e=this.getParentId(e)):e=0}return f},getChecked:function(){var a=[],b=this;return this.data.eachSubItem(0,function(c){b.isChecked(c.id)&&a.push(c.id)}),a},Tg:function(a,b){var c=this.getItem(a);if(c&&(""===b&&(b=!c.checked),c.checked!=b||c.indeterminate)){c.checked=b,this.zh(a);var d=this.xh(a);if(this.vg&&d.length<5)for(var e=0;e<d.length;e++)this.yh(d[e]);else this.refresh();this.callEvent("onItemCheck",[a,b])}},checkItem:function(a){this.Sg(a,!0),this.updateItem(a)},uncheckItem:function(a){this.Sg(a,!1),this.updateItem(a)},Ah:function(a,b,c){var d=b?"checkItem":"uncheckItem";a?this[d](a):a=0,this.s.threeState?a||this.data.eachChild(0,function(a){this[d](a.id)},this,c):this.data.each(function(a){this[d](a.id)},this,c,a)},checkAll:function(a,b){this.Ah(a,!0,b)},uncheckAll:function(a,b){this.Ah(a,!1,b)},zh:function(a){var b,c=this.getItem(a);c.indeterminate=!1,b=c.checked,this.data.eachSubItem(a,function(a){a.indeterminate=!1,a.checked=b}),this.vg&&this.isBranchOpen(c.$parent)&&this.render(a,0,"branch")},isChecked:function(a){return this.getItem(a).checked},wh:function(a){var b=[];return this.data.eachSubItem(a,function(a,c){c||b.push(a.id)}),b}},webix.ui.tree&&webix.extend(webix.ui.tree,webix.TreeStateCheckbox,!0),webix.type(webix.ui.tree,{name:"lineTree",css:"webixLineTree",icon:function(a,b){for(var c="",d="",e=1;e<=a.$level;e++){if(e==a.$level)var d=a.$count?a.open?"webix_tree_open ":"webix_tree_close ":"webix_tree_none ";var f=this.Bh(a,b,e);f&&(c+="<div class='"+d+" webix_tree_img webix_tree_"+f+"'></div>")}return c},Bh:function(a,b,c){var d=b.sg,e=webix.TreeRenderStack.tg;if(0===d&&e){var f=a.$level,g=a.id;for(d=[];f;){var h=e.getParentId(g),i=e.data.branch[h];i[i.length-1]==g&&(d[f]=!0),g=h,f--}b.sg=d}if(!d)return 0;if(c==a.$level){var j=3;return a.$parent||0===a.$index&&(j=4),d[a.$level]&&(j=2),a.$count?a.open?"minus"+j:"plus"+j:"line"+j}return d[c]?"blank":"line1"}}),webix.NavigationButtons={Ch:function(){webix.html.remove(this.Dh),this.Dh=webix.html.create("DIV",{"class":"webix_nav_panel webix_nav_panel_"+this.s.navigation.type},""),this.x.appendChild(this.Dh),this.Eh(),this.Fh(),this.Gh()},Gh:function(){var a=[];this.Dh&&(a[0]=webix.event(this.Dh,"click",webix.bind(function(a){for(var b=a.srcElement||a.target,c=!1;b!=this.Dh&&!c;){var d=b.getAttribute(this.Hh);d&&(c=!0,this.Ih(d)),b=b.parentNode}},this))),this.Jh&&(a[1]=webix.event(this.Jh,"click",webix.bind(function(){this.Kh(-1)},this))),this.Lh&&(a[1]=webix.event(this.Lh,"click",webix.bind(function(){this.Kh(1)},this))),this.attachEvent("onDestruct",function(){for(var b=0;b<a.length;b++)this.detachEvent(a[b]);a=null})},Kh:function(a){if(this.q){var b=this.Mh+a;(b>=this.q.length||0>b)&&(b=0>b?this.q.length-1:0),this.setActiveIndex(b)}},Ih:function(a){this.q&&webix.$$(a).show()},Eh:function(){var a,b;if(b=this.s.navigation,b.items){this.Hh=b.linkAttr||"bind_id",this.Dh?this.Nh():this.Ch();var c=this.q?this.q:this.data.order;if(c.length>1)for(var d=0;d<c.length;d++){a=webix.html.create("DIV",{"class":"webix_nav_item webix_nav_"+(d==this.Mh?"active":"inactive")},"<div></div>");var e=this.q?this.q[d].s.id:c[d];e&&a.setAttribute(this.Hh,e),this.Dh.appendChild(a)}}},Nh:function(){if(this.Dh)for(var a=this.Dh.childNodes,b=a.length-1;b>=0;b--)webix.html.remove(a[b])},Fh:function(){var a;a=this.s.navigation,a.buttons&&(this.Jh&&webix.html.remove(this.Jh),this.Jh&&webix.html.remove(this.Lh),this.Jh=webix.html.create("DIV",{"class":"webix_nav_button_"+a.type+" webix_nav_button_prev "},'<div class="webix_nav_button_inner"></div>'),this.x.appendChild(this.Jh),this.Lh=webix.html.create("DIV",{"class":"webix_nav_button_"+a.type+" webix_nav_button_next "},'<div class="webix_nav_button_inner"></div>'),this.x.appendChild(this.Lh))}},webix.protoUI({name:"list",Oh:"webix_list",$init:function(a){webix.html.addCss(this.x,this.Oh+("x"==(a.layout||this.defaults.layout)?"-x":"")),this.data.provideApi(this,!0),this.Ph=webix.bind(this.Ph,this),this.data.attachEvent("onStoreLoad",this.Ph),this.data.attachEvent("onStoreUpdated",this.Ph),this.data.attachEvent("onSyncApply",this.Ph),this.attachEvent("onAfterRender",this.hg)},$dragHTML:function(a){if("y"==this.s.layout&&"auto"==this.type.width){this.type.width=this.bc;var b=this.jb(a);return this.type.width="auto",b}return this.jb(a)},defaults:{select:!1,scroll:!0,layout:"y"},ad:"webix_l_id",on_click:{webix_list_item:function(a,b){this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,a.shiftKey):this.select(b),this.Qh=!1)}},on_dblclick:{},getVisibleCount:function(){return Math.floor(this.dc/this.type.height)},Ph:function(){(this.s.autoheight||this.s.autowidth)&&this.resize()},Rh:function(a){var b=this.data.$pagesize||this.count();return this.Lf(a&&b>a),this.s.autoheight&&(a||1/0)>b&&(a=b),Math.max(this.type.height*a,this.s.minHeight||0)},Sh:function(a){var b=this.data.$pagesize||this.count();return this.Lf(a&&b>a),this.s.autowidth&&(a||1/0)>b&&(a=b),this.type.width*a},hg:function(){"x"==this.s.layout&&(this.y.style.width="auto"!=this.type.width?this.type.width*this.count()+"px":"auto")},$getSize:function(a,b){return"y"==this.s.layout?("auto"!=this.type.width&&(this.s.width=this.type.width+(this.cc?webix.ui.scrollSize:0)),(this.s.yCount||this.s.autoheight)&&(this.s.height=this.Rh(this.s.yCount)||1)):("auto"!=this.type.height&&(this.s.height=this.type.height+(this.ec?webix.ui.scrollSize:0)),(this.s.xCount||this.s.autowidth)&&(this.s.width=this.Sh(this.s.xCount)||1)),webix.ui.view.prototype.$getSize.call(this,a,b)},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)},type:{css:"",widthSize:function(a,b){return b.width+(b.width>-1?"px":"")},heightSize:function(a,b){return b.height+(b.height>-1?"px":"")},classname:function(a,b,c){var d="webix_list_item";return a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=" "+a.$css),c&&c.$css&&(d+=" "+c.$css),d},template:function(a){return(a.icon?"<span class='webix_icon fa-"+a.icon+"'></span> ":"")+a.value+(a.badge?"<div class='webix_badge'>"+a.badge+"</div>":"")},width:"auto",templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;">'),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.listItemHeight}},webix.KeysNavigation,webix.DataMove,webix.DragItem,webix.MouseEvents,webix.SelectionModel,webix.Scrollable,webix.ui.proto,webix.CopyPaste),webix.protoUI({name:"grouplist",defaults:{animate:{}},Oh:"webix_grouplist",$init:function(){webix.extend(this.data,webix.TreeStore,!0),this.data.count=function(){return this.order.length},this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",webix.bind(this.Th,this)),this.Th()},Th:function(){this.Uh=[],this.Vh=[]},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&(this.y.style.width=this.bc)},on_click:{webix_list_item:function(a,b){if(this.Wh)return!1;for(var c=0;c<this.Vh.length;c++)if(this.Vh[c]==b){for(var d=c;d<this.Vh.length;d++)this.data.getItem(this.Vh[d]).$template="";return c?(this.Uh=this.data.branch[this.Vh[c-1]],this.Vh.splice(c)):(this.Uh=this.data.branch[0],this.Vh=[]),this.Xh=!1,this.render()}var e=this.getItem(b);return e.$count?(this.Xh=!0,this.Vh.push(b),e.$template="Back",this.Uh=this.data.branch[e.id],this.render()):void(this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,"touch"==this.s.multiselect||a.ctrlKey||a.metaKey,a.shiftKey):this.select(b),this.Qh=!1))}},getOpenState:function(){return{parents:this.Vh,branch:this.Uh}},render:function(){var a,b;if(this.Vh=webix.copy(this.Vh),this.Uh=webix.copy(this.Uh),this.Vh.length)for(a=0;a<this.Vh.length;a++)this.data.branch[this.Vh[a]]||(this.Vh.splice(a,1),a--);if(b=this.Vh.length?this.Vh[this.Vh.length-1]:0,this.Uh=webix.copy(this.data.branch[b]),!this.Uh.length&&this.Vh.length&&(this.Uh=[b],this.Vh.pop()),this.Wh)return webix.delay(this.render,this,arguments,100);for(a=0;a<this.Uh.length;a++)this.data.getItem(this.Uh[a]).$template="";if(this.Uh.length||(this.Uh=this.data.branch[0]),this.data.order=webix.toArray([].concat(this.Vh).concat(this.Uh)),this.callEvent("onBeforeRender",[this.data])){if(!this.Qh&&this.y.innerHTML&&webix.animate.isSupported()&&this.s.animate&&this.Yh!=this.Vh.length){if(this.callEvent("onBeforeRender",[this.data])){this.Zh||(this.Zh=[]);var c=this.y.cloneNode(!1);c.innerHTML=this.data.getRange().map(this.jb,this).join("");var d=webix.extend({},this.s.animate);d.direction=this.Xh?"left":"right";var e=[webix.clone(d),webix.clone(d)];if(this.Xh)this.Zh.push(this.getScrollState()),webix.Touch&&webix.Touch.$active&&(e[0].y=0,e[1].y=-this.getScrollState().y);else{var f=this.Zh.pop();webix.Touch&&webix.Touch.$active&&(e[0].y=-f.y,e[1].y=-this.getScrollState().y)}var g=webix.animate.formLine(c,this.y,d);webix.Touch&&webix.Touch.$active&&webix.Touch.Nf(c,0,this.Xh?0:e[0].y,"0ms"),d.master=this,d.callback=function(){this.y=c,this.Xh?webix.Touch&&webix.Touch.$active||this.scrollTo(0,0):webix.Touch&&webix.Touch.$active?webix.delay(function(){webix.Touch.Nf(c,0,e[0].y,"0ms")},this):f&&this.scrollTo(0,f.y),webix.animate.breakLine(g),d.master=d.callback=null,this.t=null,this.Wh=!1,this.callEvent("onAfterRender",[])},this.Wh=!0,webix.animate(g,e)}}else webix.RenderStack.render.apply(this,arguments);this.Yh=this.Vh.length}},templateBack_setter:function(a){this.type.templateBack=webix.template(a)},templateItem_setter:function(a){this.type.templateItem=webix.template(a)},templateGroup_setter:function(a){this.type.templateGroup=webix.template(a)},type:{template:function(a,b){return a.$count?b.templateGroup(a,b):b.templateItem(a,b)},css:"group",classname:function(a,b,c){return"webix_list_item webix_"+(a.$count?"group":"item")+(a.$template?"_back":"")+(c&&c.webix_selected?" webix_selected ":"")+(a.$css?a.$css:"")},templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;">'),templateBack:webix.template("#value#"),templateItem:webix.template("#value#"),templateGroup:webix.template("#value#"),templateEnd:function(a){var b="";return a.$count&&(b+="<div class='webix_arrow_icon'></div>"),b+="</div>"}},showItem:function(a){var b,c;for(a&&(b=this.getItem(a),c=b.$parent,b.$count&&(c=b.id)),this.Uh=this.data.branch[c||0],this.Vh=[];c;)this.getItem(c).$template="Back",this.Vh.unshift(c),c=this.getItem(c).$parent;this.Qh=!0,this.render(),this.Qh=!1,webix.RenderStack.showItem.call(this,a)}},webix.Group,webix.ui.list),webix.type(webix.ui.grouplist,{}),webix.protoUI({name:"unitlist",ad:"webix_item_id",uniteBy_setter:webix.template,sort_setter:function(a){return"object"!=typeof a&&(a={}),this.E(a,{dir:"asc",as:"string"}),a},render:function(a,b,c){var d=this.s;if(this.isVisible(d.id)){if(!d.uniteBy)return!1;if(a){var e=this.getItemNode(a);if(e&&"update"==c&&this.s.uniteBy.call(this,b)==this.getItem(a).$unitValue){var f=this.t[a]=this.Ne(b);return webix.html.insertBefore(f,e),void webix.html.remove(e)}}this.callEvent("onBeforeRender",[this.data])&&(this.units=null,this.$h(),this.units&&(this.y.innerHTML=this._h().map(this.jb,this).join(""),this.t=null),this.callEvent("onAfterRender",[]))}},getUnits:function(){var a=[];if(this.units)for(var b in this.units)a.push(b);return a},getUnitList:function(a){return this.units?this.units[a]:null},jb:function(a){var b=this.data.Me[a.id];return this.callEvent("onItemRender",[a]),a.$unit?this.type.templateStartHeader(a,this.type)+this.type.templateHeader.call(this,a.$unit)+this.type.templateEnd(a,this.type):this.type.templateStart(a,this.type,b)+(a.$template?this.type["template"+a.$template]:this.type.template)(a,this.type)+this.type.templateEnd(a,this.type)},_h:function(){var a,b,c,d;a=[];var e=this.data.$min||0,f=this.data.$max||1/0,g=0;for(c in this.units)for(a.push({$unit:c}),d=this.units[c],b=0;b<d.length;b++){if(g==e&&(a=[{$unit:c}]),a.push(this.getItem(d[b])),g==f)return webix.toArray(a);g++}return webix.toArray(a)},$h:function(){var a=this;this.units={},this.data.each(function(b){var c=a.s.uniteBy.call(this,b);b.$unitValue=c,a.units[c]||(a.units[c]=[]),a.units[c].push(b.id)})},type:{headerHeight:20,templateHeader:function(a){return"<span class='webix_unit_header_inner'>"+a+"</span>"},templateStart:function(a,b,c){if(a.$unit)return b.templateStartHeader.apply(this,arguments);var d="webix_list_item webix_list_"+b.css+"_item"+(c&&c.webix_selected?" webix_selected":"")+b.classname(a,b,c),e="width:"+b.widthSize(a,b,c)+"; height:"+b.heightSize(a,b,c)+"; overflow:hidden;"+(b.layout&&"x"==b.layout?"float:left;":"");return'<div webix_item_id="'+a.id+'" class="'+d+'" style="'+e+'">'},templateStartHeader:function(a,b,c){var d="webix_unit_header webix_unit_"+b.css+"_header"+(a.$selected?"_selected":""),e="width:"+b.widthSize(a,b,c)+"; height:"+b.headerHeight+"px; overflow:hidden;";return'<div webix_unit_id="'+a.$unit+'" class="'+d+'" style="'+e+'">'}},$skin:function(){this.type.headerHeight=webix.skin.$active.unitHeaderHeight||20}},webix.ui.list),webix.EditAbility={defaults:{editaction:"click"},$init:function(a){this.ai={},this.Eb=0,this.bi=0,this.w.style.position="relative",a&&(a.onDblClick=a.onDblClick||{}),this.attachEvent("onAfterRender",this.$s),this.s.editable&&this.ci()},Ux:function(a){try{if("number"==typeof a.selectionStart)a.selectionStart=a.selectionEnd=a.value.length;else if("undefined"!=typeof a.createTextRange){var b=a.createTextRange();b.collapse(!1),b.select()}}catch(c){}},$s:function(){var a=this.getEditor();if(a&&a.$inline&&!a.getPopup){var b=this.mi(a);if(b&&b!=a.node){var c=a.node.value;a.node=b,b.value=c,b.focus(),this.Ux(b)}else this.editStop()}},editable_setter:function(a){return a&&this.ci(),a},ci:function(){webix.attachEvent("onEditEnd",webix.bind(function(){this.Eb&&this.editStop()},this)),webix.attachEvent("onClick",webix.bind(function(a){this.Eb&&new Date-this.bi>200&&(this.di&&!this.di.popupType&&a&&this.di.node&&this.di.node.contains(a.target||a.srcElement)||this.editStop())},this)),this.data.attachEvent&&this.data.attachEvent("onIdChange",webix.bind(function(a,b){this.ei(a,b)},this)),this.attachEvent("onItemClick",function(a){this.s.editable&&"click"==this.s.editaction&&this.edit(a)}),this.attachEvent("onItemDblClick",function(a){this.s.editable&&"dblclick"==this.s.editaction&&this.edit(a)}),this.fi=webix.bind(function(){this.bi=new Date},this),this.ci=function(){},this.gi&&this.gi()},Vs:function(){webix.delay(function(){var a=this.getEditor();if(a&&a.config.liveEdit){var b={value:a.getValue(),old:a.value};if(b.value==b.old)return;a.value=b.value,this.ti(a,b.value),this.callEvent("onLiveEdit",[b,a])}},this)},hi:function(a){var b=this.s.form;"string"!=typeof b&&(this.s.form=b=webix.ui(b).config.id);var b=webix.$$(b),c=b.setValues?b:b.getChildViews()[0];c.setValues(this.getItem(a.row||a)),b.config.master=this.config.id,b.show(this.getItemNode(a));var d=c.getChildViews()[0];d.focus&&d.focus()},edit:function(a,b,c){if(this.callEvent("onBeforeEditStart",[a])){if(this.s.form)return this.hi(a);var d=this.ii(a);if(d){if(this.getEditor(a))return;b||this.editStop();var e=webix.extend({},webix.editors[d]),f=this.ji(a,e,c);e.config.liveEdit&&(this.Ws=this.attachEvent("onKeyPress",this.Vs));var g=e.getPopup?e.getPopup(f).x:f;return g&&webix.event(g,"click",this.fi),f&&webix.event(f,"change",this.ki,{view:this,id:a}),c!==!1&&e.focus(),this.bi=new Date,webix.UIManager.setFocus(this,!0),this.callEvent("onAfterEditStart",[a]),e}return null}},getEditor:function(a){return a?this.ai[a]:this.di},ei:function(a,b){var c=this.ai[a];c&&(this.ai[b]=c,c.id=b,delete this.ai[a])},ki:function(){this.view.hasEvent("onEditorChange")&&this.view.callEvent("onEditorChange",[this.id,this.view.getEditorValue(this.id)])},li:function(){return this.s},ji:function(a,b,c){var d=(b.config=this.li(a),b.render());b.$inline&&(d=this.mi(a)),b.node=d;var e=this.getItem(a),f=e[this.s.editValue||"value"];return webix.isUndefined(f)&&(f=""),b.setValue(f,e),b.value=f,this.ni(a,b),c!==!1&&this.showItem(a),b.$inline||this.oi(a,d,!0),b.afterRender&&b.afterRender(),d},pi:function(a){return this.getItemNode(a)},mi:function(a){var b=this.pi(a);return b&&(b=b.getElementsByTagName("input")[0]||b),b},ii:function(){return this.s.editor},ni:function(a,b){b.id=a,this.ai[a]=this.di=b,this.Eb++},qi:function(a){this.di==a&&(this.di=0),a.destroy&&a.destroy(),delete a.popup,delete a.node,delete this.ai[a.id],this.Eb--},focusEditor:function(){var a=this.getEditor.apply(this,arguments);a&&a.focus&&a.focus()},editCancel:function(){this.editStop(null,null,!0)},Xy:function(a){if(a){var b=this.getEditor();if(b&&b.getPopup&&b.getPopup()==a.getTopParentView())return}this.editStop()},editStop:function(a){if(!this.Zx){this.Zx=1;var b=arguments[2],c=1;return a?c=this.ri(this.ai[a],b):this.si(function(a){c*=this.ri(a,b)}),this.Zx=0,c}},ug:function(a){var b=this.getItemNode(a);return{left:b.offsetLeft,top:b.offsetTop,height:b.offsetHeight,width:b.offsetWidth,parent:this.w}},oi:function(a,b,c){if(b.style){var d=this.ug(a);b.style.top=d.top+"px",b.style.left=d.left+"px",b.style.width=d.width-1+"px",b.style.height=d.height-1+"px",b.top=d.top,c&&d.parent.appendChild(b)}},si:function(a){for(var b in this.ai)a.call(this,this.ai[b])},ri:function(a,b){if(a){var c={value:a.getValue(),old:a.value};if(this.callEvent("onBeforeEditStop",[c,a,b])){b||(c.value!=c.old||a.config.liveEdit)&&this.updateItem(this.ti(a,c.value)),a.$inline?a.node=null:webix.html.remove(a.node);var d=a.config.suggest;return d&&"string"==typeof d&&webix.$$(d).hide(),this.qi(a),this.Ws&&this.detachEvent(this.Ws),this.callEvent("onAfterEditStop",[c,a,b]),1}return 0}},validateEditor:function(a){var b=!0;if(this.s.rules){var c=this.getEditor(a),d=c.column||this.s.editValue||"value",e=this.s.rules[d],f=this.s.rules.$all;if(e||f){var g=this.data.getItem(c.row||c.id),h=c.getValue(),i=c.getInputNode();e&&(b=e.call(this,h,g,d)),f&&(b=f.call(this,h,g,d)&&b),b?webix.html.removeCss(i,"webix_invalid"):webix.html.addCss(i,"webix_invalid"),webix.callEvent("onLiveValidation",[c,b,g,h])}}return b},getEditorValue:function(a){var b;return b=0===arguments.length?this.di:this.getEditor(a),b?b.getValue():void 0},getEditState:function(){return this.di||!1},editNext:function(a,b){if(a=a!==!1,1==this.Eb||b){var c=this.ui(this.di||b,function(a){return this.ii(a)?!0:!1},a);if(this.editStop())return c&&(this.edit(c),this.vi(c)),!1}},vi:function(){},ui:function(a,b,c){var d=this.getIndexById(a.id),e=this.data.order;if(c){for(var f=d+1;f<e.length;f++)if(b.call(this,e[f]))return e[f]}else for(var f=d-1;f>=0;f--)if(b.call(this,e[f]))return e[f];return null},ti:function(a,b){return this.getItem(a.id)[this.s.editValue||"value"]=b,a.id}},function(){function a(a,c){var d=a.config.suggest;if(d){var e=a.config.suggest=b(d),f=webix.$$(e);f&&c&&f.linkInput(c)}}function b(a){if("string"==typeof a)return a;if(a.linkInput)return a.s.id;"object"==typeof a?(webix.isArray(a)&&(a={data:a}),a.view=a.view||"suggest"):a===!0&&(a={view:"suggest"});var b=webix.ui(a);return b.config.id}webix.editors={text:{focus:function(){this.getInputNode(this.node).focus(),this.getInputNode(this.node).select()},getValue:function(){return this.getInputNode(this.node).value},setValue:function(b){var c=this.getInputNode(this.node);c.value=b,a(this,c)},getInputNode:function(){return this.node.firstChild},render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<input type='text'>")}},"inline-checkbox":{render:function(){return{}},getValue:function(){return this.node.checked},setValue:function(){},focus:function(){this.node.focus()},getInputNode:function(){},$inline:!0},"inline-text":{render:function(){return{}},getValue:function(){return this.node.value},setValue:function(){},focus:function(){try{this.node.select(),this.node.focus()}catch(a){}},getInputNode:function(){},$inline:!0},checkbox:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().checked},setValue:function(a){this.getInputNode().checked=!!a},getInputNode:function(){return this.node.firstChild.firstChild},render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<div><input type='checkbox'></div>")}},select:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().value},setValue:function(a){this.getInputNode().value=a},getInputNode:function(){return this.node.firstChild},render:function(){var a="",b=this.config.options||this.config.collection;if(b.data&&b.data.each)b.data.each(function(b){a+="<option value='"+b.id+"'>"+b.value+"</option>"});else if(webix.isArray(b))for(var c=0;c<b.length;c++){var d=b[c],e=webix.isUndefined(d.id),f=e?d:d.id,g=e?d:d.value;a+="<option value='"+f+"'>"+g+"</option>"}else for(var h in b)a+="<option value='"+h+"'>"+b[h]+"</option>";return webix.html.create("div",{"class":"webix_dt_editor"},"<select>"+a+"</select>")}},popup:{focus:function(){this.getInputNode().focus()},destroy:function(){this.getPopup().hide()},getValue:function(){return this.getInputNode().getValue()||""},setValue:function(a){this.getPopup().show(this.node),this.getInputNode().setValue(a)},getInputNode:function(){return this.getPopup().getChildViews()[0]},getPopup:function(){return this.config.popup||(this.config.popup=this.createPopup()),webix.$$(this.config.popup)},createPopup:function(){var a=this.config.popup||this.config.suggest;if(a){var b;return"object"!=typeof a||a.name?b=webix.$$(a):(a.view=a.view||"suggest",b=webix.ui(a)),b.linkInput&&b.linkInput(document.body),b}var c=webix.editors.$popup[this.popupType];return"string"!=typeof c&&(c=webix.editors.$popup[this.popupType]=webix.ui(c),this.popupInit(c)),c.s.id},popupInit:function(){},popupType:"text",render:function(){return{}},$inline:!0}},webix.editors.color=webix.extend({
focus:function(){},popupType:"color",popupInit:function(a){a.getChildViews()[0].attachEvent("onSelect",function(a){webix.callEvent("onEditEnd",[a])})}},webix.editors.popup),webix.editors.date=webix.extend({focus:function(){},popupType:"date",setValue:function(a){this.wi=this.config.stringResult||a&&"string"==typeof a,webix.editors.popup.setValue.call(this,a)},getValue:function(){return this.getInputNode().getValue(this.wi?webix.i18n.parseFormatStr:"")||""},popupInit:function(a){a.getChildViews()[0].attachEvent("onDateSelect",function(a){webix.callEvent("onEditEnd",[a])})}},webix.editors.popup),webix.editors.combo=webix.extend({xi:function(a){return this.config.popup?this.config.popup.config.id:a?b(a):this.rt(a)},rt:function(){var a=webix.editors.combo;return a.st=a.st||this.xi(!0)},render:function(){var a=webix.html.create("div",{"class":"webix_dt_editor"},"<input type='text'>"),b=this.config.suggest=this.xi(this.config.suggest);return b&&(webix.$$(b).linkInput(a.firstChild,!0),webix.event(a.firstChild,"click",webix.bind(this.showPopup,this))),a},getPopup:function(){return webix.$$(this.config.suggest)},showPopup:function(){var a=this.getPopup(),b=a.getList(),c=this.getInputNode(),d=this.getValue();a.show(c),d?b.exists(d)&&(b.select(d),b.showItem(d)):(b.unselect(),b.showItem(b.getFirstId())),a.ae=c},afterRender:function(){this.showPopup()},setValue:function(a){if(this.yi=a,this.config.suggest){var b=webix.$$(this.config.suggest),c=this.config.collection||this.config.options;c&&b.getList().data.importData(c),this.zi=this.getInputNode(this.node).value=b.getItemText(a)}},getValue:function(){var a=this.getInputNode().value;return this.config.suggest?a==this.zi?this.yi:webix.$$(this.config.suggest).getSuggestion():a}},webix.editors.text),webix.editors.richselect=webix.extend({focus:function(){},getValue:function(){return this.getPopup().getValue()},setValue:function(a){var b=this.config.collection||this.config.options;this.getInputNode(),b&&this.getPopup().getList().data.importData(b),this.getPopup().show(this.node),this.getPopup().setValue(a)},getInputNode:function(){return this.getPopup().getList()},popupInit:function(a){a.linkInput(document.body)},popupType:"richselect"},webix.editors.popup),webix.editors.password=webix.extend({render:function(){return webix.html.create("div",{"class":"webix_dt_editor"},"<input type='password'>")}},webix.editors.text),webix.editors.$popup={text:{view:"popup",width:250,height:150,body:{view:"textarea"}},color:{view:"popup",body:{view:"colorboard"}},date:{view:"popup",width:250,height:250,padding:0,body:{view:"calendar",icons:!0,borderless:!0}},richselect:{view:"suggest",body:{view:"list",select:!0}}}}(),webix.VirtualRenderStack={$init:function(){this.t={},webix.event(this.x,"scroll",webix.bind(this.Ai,this)),webix.env.touch&&this.attachEvent("onAfterScroll",webix.bind(this.Ai,this)),this.Bi=[]},getItemNode:function(a){return this.t[a]},showItem:function(a){var b=this.Ci(),c=this.data.getIndexById(a),d=Math.floor(c/b.Di)*b.Ei,e=this.getScrollState();(d<e.y||d+this.s.height>=e.y+this.dc)&&this.scrollTo(0,d)},render:function(a,b,c){if(this.isVisible(this.s.id)&&!this.$blockRender)if(a){var d=this.getItemNode(a);switch(c){case"update":if(!d)return;var e=this.t[a]=this.Ne(b);webix.html.insertBefore(e,d),webix.html.remove(d);break;default:this.Fi()}}else this.callEvent("onBeforeRender",[this.data])&&(this.t={},this.Ai(null,!0),this.Gi=!1,this.callEvent("onAfterRender",[]))},Fi:function(){this.Gi||(this.Gi=!0,window.setTimeout(webix.bind(function(){this.render()},this),1))},Hi:function(a){var b=document.createElement("DIV");return b.style.cssText="height:"+a+"px; width:100%; overflow:hidden;",b},Ai:function(a,b){this.Bi=[];var c=this.Ci();(!this.y.firstChild||b)&&(this.y.innerHTML="",this.y.appendChild(this.Hi(c.Ii)),this.u=[this.y.firstChild]);for(var d=c.R;d<=c.Ji;){for(;this.u[d]&&this.u[d].Ki&&d<=c.Ji;)d++;if(d>c.Ji)break;for(var e=d;!this.u[e];)e--;var f=this.u[e],g=d*c.Di+(this.data.$min||0);if(g>(this.data.$max||1/0))break;var h=Math.min(g+c.Di-1,this.data.$max||1/0),i=this.Hi(c.Ei),j=this.data.getIndexRange(g,h);if(!j.length)break;for(var k={$template:"Loading"},l=0;l<j.length;l++)j[l]||this.Bi.push(g+l),j[l]=this.jb(j[l]||k);i.innerHTML=j.join("");for(var l=0;l<j.length;l++)this.t[this.data.getIdByIndex(g+l)]=i.childNodes[l];var m=parseInt(f.style.height,10),n=(d-e)*c.Ei,o=m-n-c.Ei;if(webix.html.insertBefore(i,n?f.nextSibling:f,this.y),this.u[d]=i,i.Ki=!0,0>=n&&o>0)f.style.height=o+"px",this.u[d+1]=f;else if(0>n?webix.html.remove(f):f.style.height=n+"px",o>0){var p=this.u[d+1]=this.Hi(o);webix.html.insertBefore(p,i.nextSibling,this.y)}d++}if(this.Bi.length){var q=this.Bi[0],r=this.Bi.pop()+1;if(r>q){var s=r-q;if(this.cf(s,q))return;s=Math.max(s,this.s.datafetch||this.s.loadahead||0),this.loadNext(s,q)}}},Ci:function(){var a=this.getScrollState(),b=a.y,c=this.bc,d=this.dc,e=this.type,f=Math.floor(c/e.width)||1,g=Math.floor(b/e.height),h=Math.ceil((d+b)/e.height)-1,i=this.data.$max?this.data.$max-this.data.$min:this.data.count(),j=Math.ceil(i/f)*e.height;return{R:g,Ji:h,Li:b,Ii:j,Ei:e.height,Di:f}},ug:function(a){var b=this.getItemNode(a);return b||(this.showItem(a),this.Ai(),b=this.getItemNode(a)),{left:b.offsetLeft,top:b.offsetTop,height:b.offsetHeight,width:b.offsetWidth,parent:this.w}}},webix.protoUI({name:"dataview",$init:function(a){a.sizeToContent&&this.$ready.unshift(this.Mi);var b=a.prerender||this.defaults.prerender;(b===!1||b!==!0&&"auto"!==a.height&&!a.autoheight)&&webix.extend(this,webix.VirtualRenderStack,!0),a.autoheight&&(a.scroll=!1),this.attachEvent("onBeforeRender",function(){this.iz()}),this.w.className+=" webix_dataview"},Mi:function(){var a=webix.html.create("DIV",0,this.type.template({}));a.style.position="absolute",document.body.appendChild(a),this.type.width=a.offsetWidth,this.type.height=a.offsetHeight,webix.html.remove(a)},defaults:{scroll:!0,datafetch:50},ad:"webix_f_id",on_click:{webix_dataview_item:function(a,b){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(b,!1,"touch"==this.s.multiselect||a.ctrlKey||a.metaKey,a.shiftKey):this.select(b))}},on_dblclick:{},on_mouse_move:{},type:{template:webix.template("#value#"),templateLoading:webix.template("Loading..."),width:160,height:50,classname:function(a,b,c){var d="webix_dataview_item ";return b.css&&(d+=b.css+" "),a.$css&&("object"==typeof a.$css&&(a.$css=webix.html.createCss(a.$css)),d+=a.$css+" "),c&&c.$css&&(d+=c.$css+" "),d},templateStart:webix.template('<div webix_f_id="#id#" class="{common.classname()}" style="width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;">'),templateEnd:webix.template("</div>")},Ni:function(a){return this.s.height=this.type.height*Math.ceil(this.data.count()/Math.floor(a/this.type.width))},autoheight_setter:function(a){return a&&(this.data.attachEvent("onStoreLoad",webix.bind(this.resize,this)),this.w.style.overflowY="hidden"),a},$getSize:function(a,b){this.s.xCount>0&&"auto"!=this.type.width&&!this.Nw&&(this.s.width=this.type.width*this.s.xCount+(this.cc?webix.ui.scrollSize:0)),this.s.yCount&&"auto"!=this.type.height&&(this.s.height=this.type.height*this.s.yCount);var c=this.s.width||this.bc;return this.s.autoheight&&c&&(this.Ni(c),this.scroll_setter(!1)),webix.ui.view.prototype.$getSize.call(this,a,b)},iz:function(){var a=!1;return this.s.yCount&&"auto"==this.type.height&&(this.type.height=Math.floor(this.dc/this.s.yCount),a=!0),this.s.xCount&&("auto"==this.type.width||this.Nw)?(this.Nw=!0,this.type.width=Math.floor(this.bc/this.s.xCount),a=!0):this.Nw=!1,a},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(this.s.autoheight&&this.Ni()!=this.dc)return webix.delay(this.resize,this);(this.iz()||this.Ai)&&this.render()}}},webix.DataMove,webix.DragItem,webix.MouseEvents,webix.KeysNavigation,webix.SelectionModel,webix.Scrollable,webix.ui.proto),webix.DataDriver.htmltable={toObject:function(a){a=webix.toNode(a);var b=a.rows;return webix.html.remove(a),b},getRecords:function(a){for(var b=[],c=a[0]&&a[0].Oi?1:0;c<a.length;c++)b.push(a[c]);return b},getDetails:function(a){var b=a.getElementsByTagName("td");a={};for(var c=0;c<b.length;c++)a["data"+c]=b[c].innerHTML;return a},getInfo:function(){return{Q:0,R:0}},getOptions:function(){},getConfig:function(a){var b=[],c=a[0].getElementsByTagName("th");c.length&&(a[0].Oi=!0);for(var d=0;d<c.length;d++){var e={id:"data"+d,header:this.Pi(c[d].innerHTML)},f=this.Qi(c[d]);e=webix.extend(e,f),b.push(e)}return b},Pi:function(a){var b=a.indexOf("json://");return-1!=b&&(a=JSON.parse(a.substr(b+7))),a},Qi:function(a){for(var b=a.attributes,c={},d=0;d<b.length;d++)c[b[d].nodeName]=this.Pi(b[d].nodeValue);return c.width=parseInt(c.width,10),c}},webix.protoUI({name:"vscroll",defaults:{scroll:"x",scrollStep:40,scrollPos:0,scrollSize:18,scrollVisible:1,zoom:1},$init:function(a){var b=a.scroll||"x",c=this.x=webix.toNode(a.container);c.className+=" webix_vscroll_"+b,c.innerHTML="<div class='webix_vscroll_body'></div>",webix.event(c,"scroll",this.Ri,this),this.Si=0,this.Wi=0},Ti:function(a){return a>15e5?(this.s.zoom=Math.floor(a/15e5)+1,this.Ui=a-this.Si,a=Math.floor(a/this.s.zoom)+this.Si):(this.s.zoom=1,this.Ui=1/0),a},scrollWidth_setter:function(a){return a=this.Ti(a),this.x.firstChild.style.width=a+"px",a},scrollHeight_setter:function(a){return a=this.Ti(a),this.x.firstChild.style.height=a+"px",a},sizeTo:function(a,b,c){a=a-(b||0)-(c||0);var d=this.s.scrollSize;webix.env.isIE&&d&&(d+=1),d||!this.s.scrollVisible||webix.env.$customScroll||(this.x.style.pointerEvents="none",d=14),d?(this.x.style.display="block",b&&(this.x.style.marginTop=b+"px"),this.x.style["x"==this.s.scroll?"width":"height"]=Math.max(0,a)+"px",this.x.style["x"==this.s.scroll?"height":"width"]=d+"px"):this.x.style.display="none",this.Si=a},getScroll:function(){return this.s.scrollPos*this.s.zoom},getSize:function(){return(this.s.scrollWidth||this.s.scrollHeight)*this.s.zoom},scrollTo:function(a){0>a&&(a=0);var b=this.s;a=Math.min(((b.scrollWidth||b.scrollHeight)-this.Si)*b.zoom,a),0>a&&(a=0);var c=a/b.zoom;return this.Wi!=c?(this.x["x"==b.scroll?"scrollLeft":"scrollTop"]=c,this.Vi(c),!0):void 0},Ri:function(){var a=this.x["x"==this.s.scroll?"scrollLeft":"scrollTop"];a!=this.Wi&&this.Vi(a)},Vi:function(a){this.Wi=a,this.s.scrollPos=Math.min(this.Ui,a*this.s.zoom)||0,this.callEvent("onScroll",[this.s.scrollPos])},activeArea:function(a,b){this.Xi=b,webix.event(a,"mousewheel",this.Yi,this),webix.event(a,"DOMMouseScroll",this.Yi,this)},Yi:function(a){var b=0;return a.wheelDeltaX&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)?this.Xi&&this.s.scrollVisible&&(b=a.wheelDeltaX/-40):!this.Xi&&this.s.scrollVisible&&(b=webix.isUndefined(a.wheelDelta)?a.detail:a.wheelDelta/-40),webix.env.isSafari&&(this.Yy=a.target||a.srcElement),b&&this.scrollTo(this.s.scrollPos+b*this.s.scrollStep)?webix.html.preventEvent(a):void 0}},webix.EventSystem,webix.Settings),webix.Number={format:function(a,b){if(""===a||"undefined"==typeof a)return a;b=b||webix.i18n,a=parseFloat(a);var c=0>a?"-":"";a=Math.abs(a);var d=a.toFixed(b.decimalSize).toString();d=d.split(".");var e="";if(b.groupSize){var f=b.groupSize,g=d[0].length;do{g-=f;var h=g>0?d[0].substr(g,f):d[0].substr(0,f+g);e=h+(e?b.groupDelimiter+e:"")}while(g>0)}else e=d[0];return b.decimalSize?c+e+b.decimalDelimiter+d[1]:c+e},numToStr:function(a){return function(b){return webix.Number.format(b,a)}}},webix.Date={startOnMonday:!1,toFixed:function(a){return 10>a?"0"+a:a},weekStart:function(a){a=this.copy(a);var b=a.getDay();return this.startOnMonday&&(0===b?b=6:b--),this.datePart(this.add(a,-1*b,"day"))},monthStart:function(a){return a=this.copy(a),a.setDate(1),this.datePart(a)},yearStart:function(a){return a=this.copy(a),a.setMonth(0),this.monthStart(a)},dayStart:function(a){return this.datePart(a,!0)},dateToStr:function(a,b){return"function"==typeof a?a:webix.env.strict?function(b){var c="",d=0;return a.replace(/%[a-zA-Z]/g,function(e,f){c+=a.slice(d,f);var g=function(a){if("%d"==e)return webix.Date.toFixed(a.getDate());if("%m"==e)return webix.Date.toFixed(a.getMonth()+1);if("%j"==e)return a.getDate();if("%n"==e)return a.getMonth()+1;if("%y"==e)return webix.Date.toFixed(a.getFullYear()%100);if("%Y"==e)return a.getFullYear();if("%D"==e)return webix.i18n.calendar.dayShort[a.getDay()];if("%l"==e)return webix.i18n.calendar.dayFull[a.getDay()];if("%M"==e)return webix.i18n.calendar.monthShort[a.getMonth()];if("%F"==e)return webix.i18n.calendar.monthFull[a.getMonth()];if("%h"==e)return webix.Date.toFixed((a.getHours()+11)%12+1);if("%g"==e)return(a.getHours()+11)%12+1;if("%G"==e)return a.getHours();if("%H"==e)return webix.Date.toFixed(a.getHours());if("%i"==e)return webix.Date.toFixed(a.getMinutes());if("%a"==e)return a.getHours()>11?"pm":"am";if("%A"==e)return a.getHours()>11?"PM":"AM";if("%s"==e)return webix.Date.toFixed(a.getSeconds());if("%W"==e)return webix.Date.toFixed(webix.Date.getISOWeek(a));if("%c"==e){var b=a.getFullYear();return b+="-"+webix.Date.toFixed(a.getMonth()+1),b+="-"+webix.Date.toFixed(a.getDate()),b+="T",b+=webix.Date.toFixed(a.getHours()),b+=":"+webix.Date.toFixed(a.getMinutes()),b+=":"+webix.Date.toFixed(a.getSeconds())}return e};c+=g(b),d=f+2}),c+=a.slice(d,a.length)}:(a=a.replace(/%[a-zA-Z]/g,function(a){switch(a){case"%d":return'"+webix.Date.toFixed(date.getDate())+"';case"%m":return'"+webix.Date.toFixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+webix.Date.toFixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+webix.i18n.calendar.dayShort[date.getDay()]+"';case"%l":return'"+webix.i18n.calendar.dayFull[date.getDay()]+"';case"%M":return'"+webix.i18n.calendar.monthShort[date.getMonth()]+"';case"%F":return'"+webix.i18n.calendar.monthFull[date.getMonth()]+"';case"%h":return'"+webix.Date.toFixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+webix.Date.toFixed(date.getHours())+"';case"%i":return'"+webix.Date.toFixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+webix.Date.toFixed(date.getSeconds())+"';case"%W":return'"+webix.Date.toFixed(webix.Date.getISOWeek(date))+"';case"%c":var c='"+date.getFullYear()+"';return c+='-"+webix.Date.toFixed((date.getMonth()+1))+"',c+='-"+webix.Date.toFixed(date.getDate())+"',c+="T",c+='"+webix.Date.toFixed(date.getHours())+"',c+=':"+webix.Date.toFixed(date.getMinutes())+"',c+=':"+webix.Date.toFixed(date.getSeconds())+"',b===!0&&(c+="Z"),c;default:return a}}),b===!0&&(a=a.replace(/date\.get/g,"date.getUTC")),new Function("date","if (!date) return ''; if (!date.getMonth) date=webix.i18n.parseFormatDate(date);  return \""+a+'";'))},strToDate:function(a,b){if("function"==typeof a)return a;var c,d,e,f=a.match(/%[a-zA-Z]/g),g="var temp=date.split(/[^0-9a-zA-Z]+/g);";if(!webix.i18n.calendar.monthShort_hash){for(e=webix.i18n.calendar.monthShort,d=webix.i18n.calendar.monthShort_hash={},c=0;c<e.length;c++)d[e[c]]=c;for(e=webix.i18n.calendar.monthFull,d=webix.i18n.calendar.monthFull_hash={},c=0;c<e.length;c++)d[e[c]]=c}if(webix.env.strict)return function(a){if(!a)return"";if("object"==typeof a)return a;var d=a.split(/[^0-9a-zA-Z]+/g),e=[0,0,1,0,0,0];for(c=0;c<f.length;c++){var g=f[c];if("%y"==g)e[0]=1*d[c]+(d[c]>30?1900:2e3);else if("%Y"==g)e[0]=1*(d[c]||0),e[0]<30&&(e[0]+=2e3);else if("%n"==g||"%m"==g)e[1]=(d[c]||1)-1;else if("%M"==g)e[1]=webix.i18n.calendar.monthShort_hash[d[c]]||0;else if("%F"==g)e[1]=webix.i18n.calendar.monthFull_hash[d[c]]||0;else if("%j"==g||"%d"==g)e[2]=d[c]||1;else if("%g"==g||"%G"==g||"%h"==g||"%H"==g)e[3]=d[c]||0;else if("%a"==g||"%A"==g)e[3]=e[3]%12+("am"==(d[c]||"").toLowerCase()?0:12);else if("%i"==g)e[4]=d[c]||0;else if("%s"==g)e[5]=d[c]||0;else if("%c"==g){var h=/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)/g,i=h.exec(a);e[0]=1*(i[1]||0),e[0]<30&&(e[0]+=2e3),e[1]=(i[2]||1)-1,e[2]=i[3]||1,e[3]=i[4]||0,e[4]=i[5]||0,e[5]=i[6]||0}}return b?new Date(Date.UTC(e[0],e[1],e[2],e[3],e[4],e[5])):new Date(e[0],e[1],e[2],e[3],e[4],e[5])};for(c=0;c<f.length;c++)switch(f[c]){case"%j":case"%d":g+="set[2]=temp["+c+"]||1;";break;case"%n":case"%m":g+="set[1]=(temp["+c+"]||1)-1;";break;case"%y":g+="set[0]=temp["+c+"]*1+(temp["+c+"]>30?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":g+="set[3]=temp["+c+"]||0;";break;case"%i":g+="set[4]=temp["+c+"]||0;";break;case"%Y":g+="set[0]=(temp["+c+"]||0)*1; if (set[0]<30) set[0]+=2000;";break;case"%a":case"%A":g+="set[3]=set[3]%12+((temp["+c+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":g+="set[5]=temp["+c+"]||0;";break;case"%M":g+="set[1]=webix.i18n.calendar.monthShort_hash[temp["+c+"]]||0;";break;case"%F":g+="set[1]=webix.i18n.calendar.monthFull_hash[temp["+c+"]]||0;";break;case"%c":g+="var res = date.split('T');",g+="if(res[0]){ var d = res[0].split('-');",g+="set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;",g+="set[1]= (d[1]||1)-1;",g+="set[2]= d[2]||1;}",g+="if(res[1]){ var t = res[1].split(':');",g+="set[3]= t[0]||0;",g+="set[4]= t[1]||0;",g+="set[5]= t[2]||0;}"}var h="set[0],set[1],set[2],set[3],set[4],set[5]";return b&&(h=" Date.UTC("+h+")"),new Function("date","if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0]; "+g+" return new Date("+h+");")},getISOWeek:function(a){if(!a)return!1;var b=a.getDay();0===b&&(b=7);var c=new Date(a.valueOf());c.setDate(a.getDate()+(4-b));var d=c.getFullYear(),e=Math.floor((c.getTime()-new Date(d,0,1).getTime())/864e5),f=1+Math.floor(e/7);return f},getUTCISOWeek:function(a){return this.getISOWeek(a)},Jv:function(a,b,c,d){if(c){var e=d(a,b);if(e)for(var f=c>0?1:-1;e;)a.setHours(a.getHours()+f),e=d(a,b),f+=c>0?1:-1}},add:function(a,b,c,d){d&&(a=this.copy(a));var e=webix.Date.copy(a);switch(c){case"day":a.setDate(a.getDate()+b),this.Jv(a,e,b,function(a,b){return webix.Date.datePart(b,!0).valueOf()==webix.Date.datePart(a,!0).valueOf()});break;case"week":a.setDate(a.getDate()+7*b),this.Jv(a,e,7*b,function(a,b){return webix.Date.datePart(b,!0).valueOf()==webix.Date.datePart(a,!0).valueOf()});break;case"month":a.setMonth(a.getMonth()+b),this.Jv(a,e,b,function(a,b){return b.getMonth()==a.getMonth()&&b.getYear()==a.getYear()});break;case"year":a.setYear(a.getFullYear()+b),this.Jv(a,e,b,function(a,b){return b.getFullYear()==a.getFullYear()});break;case"hour":a.setHours(a.getHours()+b),this.Jv(a,e,b,function(a,b){return b.getHours()==a.getHours()&&webix.Date.datePart(b,!0)==webix.Date.datePart(a,!0)});break;case"minute":a.setMinutes(a.getMinutes()+b);break;default:webix.Date.add[c](a,b,c)}return a},datePart:function(a,b){b&&(a=this.copy(a));var c=this.copy(a);return c.setHours(0),a.setHours(c.getDate()!=a.getDate()?1:0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},timePart:function(a,b){return b&&(a=this.copy(a)),(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400},copy:function(a){return new Date(a.valueOf())},equal:function(a,b){return a&&b?a.valueOf()===b.valueOf():!1},isHoliday:function(a){return a=a.getDay(),0===a||6==a?"webix_cal_event":void 0}},webix.i18n={Zi:["fullDateFormat","timeFormat","dateFormat","longDateFormat","parseFormat","parseTimeFormat"],parseFormat:"%Y-%m-%d %H:%i",parseTimeFormat:"%H:%i",numberFormat:webix.Number.format,priceFormat:function(a){return webix.i18n.$i(webix.i18n.numberFormat(a,webix.i18n._i))},setLocale:function(a){var b=function(a,c){for(var d in c)"object"!=typeof c[d]||webix.isArray(c[d])?a[d]=c[d]:(a[d]||(a[d]={}),b(a[d],c[d]))};"string"==typeof a&&(a=this.locales[a]),a&&b(this,a);for(var c=webix.i18n.Zi,d=0;d<c.length;d++){var e=c[d],f=webix.i18n[e+"UTC"];webix.i18n[e+"Str"]=webix.Date.dateToStr(webix.i18n[e],f),webix.i18n[e+"Date"]=webix.Date.strToDate(webix.i18n[e],f)}this.$i=webix.template(this.price),this._i=this.priceSettings||this,this.intFormat=webix.Number.numToStr({groupSize:this.groupSize,groupDelimiter:this.groupDelimiter,decimalSize:0})}},webix.i18n.locales={},webix.i18n.locales["en-US"]={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%m/%d/%Y",timeFormat:"%h:%i %A",longDateFormat:"%d %F %Y",fullDateFormat:"%m/%d/%Y %h:%i %A",price:"${obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today"},controls:{select:"Select"}},webix.i18n.setLocale("en-US"),webix.protoUI({name:"datatable",defaults:{leftSplit:0,rightSplit:0,columnWidth:100,minColumnWidth:20,minColumnHeight:26,prerender:!1,autoheight:!1,autowidth:!1,header:!0,fixedRowHeight:!0,scrollAlignY:!0,scrollX:!0,scrollY:!0,datafetch:50},$skin:function(){var a=webix.skin.$active.rowHeight,b=this.defaults;b.rowHeight=a,b.headerRowHeight=webix.skin.$active.barHeight},on_click:{webix_richfilter:function(){return!1},webix_table_checkbox:function(a,b){b=this.locate(a);var c=this.getItem(b.row),d=this.getColumnConfig(b.column),e=a.target||a.srcElement,f="checkbox"==e.type?e.checked:c[b.column]!=d.checkValue,g=f?d.checkValue:d.uncheckValue;return c[b.column]=g,this.callEvent("onCheck",[b.row,b.column,g]),this.data.callEvent("onDataUpdate",[b,c]),this.data.callEvent("onStoreUpdated",[b.row,c,this.s.checkboxRefresh?"update":"save"]),!1},webix_table_radio:function(a){var b=this.locate(a),c=this.getItem(b.row),d=this.getColumnConfig(b.column);return this.eachRow(function(a){var c=this.data.pull[a];c&&c[b.column]==d.checkValue&&(c[b.column]=d.uncheckValue)}),c[b.column]=d.checkValue,this.callEvent("onCheck",[b.row,b.column,!0]),this.refresh(),!1}},on_dblclick:{webix_table_checkbox:function(){return this.on_click.webix_table_checkbox.apply(this,arguments)}},on_context:{},$init:function(a){this.on_click=webix.extend({},this.on_click);var b="<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>";b+="<div class='webix_ss_center'><div class='webix_ss_center_scroll'></div></div>",b+="<div class='webix_ss_right' ><div class='webix_ss_center_scroll'></div></div></div>",b+="<div class='webix_ss_hscroll'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll'></div><div class='webix_ss_vscroll_footer'></div>",this.w.innerHTML=b,this.bj=this.w.id=this.name+webix.uid(),this.w.className+=" webix_dtable",this.y=this.w,this.I=this.w.firstChild,this.Vf=this.I.nextSibling,this.cj=this.Vf.nextSibling.nextSibling,this.data.provideApi(this,!0),this.data.attachEvent("onParse",webix.bind(this.dj,this)),this.$ready.push(this.ej),this.fj=[],this.Mt=[],this.Nt=[],this.gj=[],this.hj={},this.ij={},this.$g=this.jj=0,this.Ns=[],this.data.attachEvent("onServerConfig",webix.bind(this.kj,this)),this.data.attachEvent("onServerOptions",webix.bind(this.lj,this)),this.attachEvent("onViewShow",this.Ow),webix.callEvent("onDataTable",[this,a])},mj:function(){this.nj=this.oj=webix.ui.scrollSize,webix.html.addStyle("#"+this.bj+" .webix_cell { height:"+this.s.rowHeight+"px; line-height:"+(this.s.rowLineHeight||this.s.rowHeight)+"px;"+(this.s.fixedRowHeight?"":"white-space:normal;")+" }"),webix.html.addStyle("#"+this.bj+" .webix_hcell { height:"+this.s.headerRowHeight+"px; line-height:"+this.s.headerRowHeight+"px;}"),this.mj=function(){}},ej:function(){this.data.attachEvent("onStoreLoad",webix.bind(this.nz,this)),this.data.attachEvent("onSyncApply",webix.bind(this.nz,this)),this.data.attachEvent("onStoreUpdated",webix.bind(function(){return this.render.apply(this,arguments)},this)),this.data.attachEvent("onStoreUpdated",webix.bind(this.pj,this)),this.render()},refresh:function(){this.render()},render:function(a,b,c){if("save"!=c){if("move"==c){var d=webix.DragControl.getContext();if(d&&d.fragile)return}if(!this.fj.length){var e=this.s.columns;if(!e||!e.length){if(!this.s.autoConfig||!this.data.order.length)return;this.tj=0,this.qj()}this.rj()}return!this.isVisible(this.s.id)||this.$blockRender?this.mj():!a||-1==b||"paint"!=c&&"update"!=c?(this.sj&&(clearTimeout(this.sj),this.sj=0),this.callEvent("onBeforeRender",[this.data])?(this.mj(),this.tj||this.uj(),this.bc&&(this.s.experimental&&("paint"==c||"update"==c)&&a?this.Kv(a):this.vj(!0,!0)),a&&"update"==c||(this.wj=this.xj(),this.yj()),this.callEvent("onAfterRender",[this.data]),!0):void 0):(this.sj&&clearTimeout(this.sj),void(this.sj&&this.Lv!=a?(this.Lv=null,this.sj=webix.delay(function(){this.render()},this)):(this.Lv=a,this.sj=webix.delay(function(){this.render(a,-1,c)},this))))}},getColumnConfig:function(a){return this.Aj[a]||this.am[a]},lj:function(a){for(var b in a){var c=this.getColumnConfig(b),d=new webix.DataCollection({data:a[b]});this.Ns.push(d),this.Bj(d,c)}},kj:function(a){a.columns&&this.tj&&this.refreshColumns(null,!0)},rj:function(){if(this.s.columns){this.fj=this.s.columns,this.Aj={};for(var a=0;a<this.fj.length;a++){var b=this.fj[a];this.Aj[b.id]=b;var c=b.cssFormat;c&&(b.cssFormat=webix.toFunctor(c,this.$scope)),b.width=b.width||this.s.columnWidth,"string"==typeof b.format&&(b.format=webix.i18n[b.format]||window[b.format]),webix.isUndefined(b.checkValue)&&(b.checkValue=1),webix.isUndefined(b.uncheckValue)&&(b.uncheckValue=0),b.css&&"object"==typeof b.css&&(b.css=webix.html.createCss(b.css));var d=b.template;d&&("string"==typeof d&&(d=d.replace(/#\$value#/g,"#"+b.id+"#")),b.template=webix.template(d))}this.Mj("header",this.Mt),this.Mj("footer",this.Nt),this.callEvent("onStructureLoad",[])}},Cj:function(){this.uj()},uj:function(){this.Fj=this.fj.length-this.s.rightSplit,this.Gj=0;for(var a=0;a<this.fj.length;a++){if(!this.fj[a].node){var b=webix.html.create("DIV");b.style.width=this.fj[a].width+"px",this.fj[a].node=b}a>=this.s.leftSplit&&a<this.Fj&&(this.Gj+=this.fj[a].width)}var c=[];if(this.s.rightSplit){var d=this.fj.length-this.s.rightSplit;c[d]=" webix_first",c[d-1]=" webix_last"}if(this.s.leftSplit){var e=this.s.leftSplit;c[e]=" webix_first",c[e-1]=" webix_last"}c[0]=(c[0]||"")+" webix_first";var f=this.fj.length-1;c[f]=(c[f]||"")+" webix_last";for(var a=0;a<this.fj.length;a++){var g=this.fj[a].node;g.setAttribute("column",a),g.className="webix_column "+(this.fj[a].css||"")+(c[a]||"")}this.Hj(),this.Ij(),this.Jj(),this.Kj(),this.tj=!0},Ij:function(){for(var a=0,b=0;b<this.fj.length;b++){var c=this.fj[b];(b==this.s.leftSplit||b==this.Fj)&&(a=0),c.node&&(c.node.style.left=a+"px",(this.s.leftSplit||this.s.rightSplit)&&(webix.html.remove(c.node),c.attached=!1)),a+=c.width}},Kj:function(){this.Lj||(this.Lj=0),this.s.header&&(this.fk(this.I,0,1),this.Mj("header",this.Mt),this.$g=this.Mt.Ot,this.Nj(this.I,"header",this.Mt)),this.s.footer&&(this.fk(this.cj,0,1),this.Mj("footer",this.Nt),this.jj=this.Nt.Ot,this.Nj(this.cj,"footer",this.Nt)),this.refreshHeaderContent(!1,!1),this.Oj(),this.Nk&&this.markSorting(this.Nk,this.Ok)},Mj:function(a,b){for(var c=0,d=0;d<this.fj.length;d++){var e=this.fj[d][a];e&&"object"==typeof e&&e.length||(webix.isUndefined(e)&&(e="header"==a?this.fj[d].id:""),e=[e]);for(var f=0;f<e.length;f++)"object"!=typeof e[f]&&(e[f]={text:e[f]}),e[f]&&e[f].height&&(b[f]=e[f].height);c=Math.max(c,e.length),this.fj[d][a]=e}b.Ot=c;for(var d=c-1;d>=0;d--)b[d]=b[d]||this.s.headerRowHeight,b.Ot+=1*b[d];for(var d=0;d<this.fj.length;d++)for(var g=this.fj[d][a],f=0;f<g.length;f++){if(g[f]&&g[f].rowspan)for(var h=1;h<g[f].rowspan;h++)g[f+h]=null;if(g[f]&&g[f].colspan)for(var h=1;h<g[f].colspan;h++)this.fj[d+h][a][f]=null}for(var d=0;d<this.fj.length;d++){var e=this.fj[d][a];if(e.length<c){var i=e.length-1;e[i].rowspan=c-e.length+1;for(var f=i+1;c>f;f++)e[f]=null}}return c},Pj:function(a,b){for(var c=a.getElementsByTagName("TD"),d=0;d<c.length;d++)if(c[d].getAttribute("active_id")==b)return c[d]},getHeaderContent:function(a){var b=this.Pj(this.I,a);if(b||(b=this.Pj(this.cj,a)),b){var c=this.hj[a],d=webix.ui.datafilter[c.content];return d.getHelper?d.getHelper(b,c):{type:d,getValue:function(){return d.getValue(b)},setValue:function(a){return d.setValue(b,a)}}}},Pt:function(a,b,c){var d=c?-1:0;for(c+=b,b;c>b;b++)d+=a[b]+1;return d},Qj:function(a,b,c,d,e){if(a==b)return"";for(var f="<table style='width:"+c+"px' cellspacing='0' cellpadding='0'>",g=a;b>g;g++){f+="<tr>";for(var g=a;b>g;g++)f+="<th  style='width:"+this.fj[g].width+"px'></th>";f+="</tr>"}for(var h=this.fj[0][d].length,i=0;h>i;i++){f+="<tr section='"+d+"'>";for(var g=a;b>g;g++){var j=this.fj[g][d][i];if(null!==j){j.content&&(j.contentId=j.contentId||webix.uid(),j.columnId=this.fj[g].id,j.format=this.fj[g].format,j.text=webix.ui.datafilter[j.content].render(this,j),this.hj[j.contentId]=j,this.Rj=!0),f+="<td column='"+(j.colspan?j.colspan-1+g:g)+"'";var k="";g==a&&(k+="webix_first");var l=g+(j.colspan?j.colspan-1:0);l>=b-1&&(k+=" webix_last"),k&&(f+=' class="'+k+'"');var m=e[i],n="";j.contentId&&(f+=" active_id='"+j.contentId+"'"),j.colspan&&(f+=" colspan='"+j.colspan+"'"),j.rowspan&&(f+=" rowspan='"+j.rowspan+"'",m=this.Pt(this.Mt,i,j.rowspan)),m!=this.s.headerRowHeight&&(n=" style='line-height:"+m+"px; height:"+m+"px;'");var o="webix_hcell",p=j.css;p&&("object"==typeof p&&(j.css=p=webix.html.createCss(p)),o+=" "+p),this.fj[g].$selected&&(o+=" webix_sel_hcell"),f+="><div class='"+o+"'"+n+">";var q=""===j.text?"&nbsp;":j.text;j.rotate&&(q="<div class='webix_rotate' style='width:"+(m-10)+"px; transform-origin:center "+(m-15)/2+"px;-webkit-transform-origin:center "+(m-15)/2+"px;'>"+q+"</div>"),f+=q+"</div></td>"}}f+="</tr>"}return f+="</tr></table>"},showItemByIndex:function(a,b){var c=this.s.pager;if(c){var d=Math.floor(a/c.size);d!=c.page&&webix.$$(c.id).select(d)}if(-1!=a){var e=this.Sj();if(a<e[0]+1||a>=e[1]-1){var f=this.Tj(c?this.data.$min:0,a);a<e[0]+1?f=Math.max(0,f-1):(f+=this.Uj(a)-this.Vj,a>0&&(f+=this.Uj(a-1)-1)),this.Wj.scrollTo(f)}}if(-1!=b){if(b<this.s.leftSplit)return;if(b>=this.Fj)return;var e=this.Xj();if(b<e[0]+1||b>=e[1]-1){for(var f=0,g=this.s.leftSplit;b>g;g++)f+=this.fj[g].width;b<e[0]+1||(f+=this.fj[b].width-this.Yj),this.Zj.scrollTo(f)}}},showCell:function(a,b){if(!b||!a){var c=this.getSelectedId(!0);1==c.length&&(b=b||c[0].column,a=a||c[0].row)}b=b?this.getColumnIndex(b):-1,a=a?this.getIndexById(a):-1,this.showItemByIndex(a,b)},scrollTo:function(a,b){if(this.Zj){if(this.$j)return this.$j(a,b);null!==a&&this.Zj.scrollTo(a),null!==b&&this.Wj.scrollTo(b)}},getScrollState:function(){if(this._j)return this._j();var a=this.Tj(0,this.ak||0);return{x:this.bk||0,y:a-(this.ck||0)}},showItem:function(a){this.showItemByIndex(this.getIndexById(a),-1)},Nj:function(a,b,c){a.childNodes[0].innerHTML=this.Qj(0,this.s.leftSplit,this.dk,b,c),a.childNodes[1].innerHTML=this.Qj(this.s.leftSplit,this.Fj,this.Gj,b,c),a.childNodes[1].onscroll=webix.bind(this._s,this),a.childNodes[2].innerHTML=this.Qj(this.Fj,this.fj.length,this.ek,b,c)},_s:function(){var a=this.getScrollState().x,b=this.I.childNodes[1].scrollLeft;b!=a&&this.scrollTo(b,null)},pj:function(){this.refreshHeaderContent(!0,!0)},nz:function(){this.refreshHeaderContent(!1,!0)},refreshHeaderContent:function(a,b,c){this.s.header&&(b&&this.fk(this.I,a,1,c),this.fk(this.I,a,0,c)),this.s.footer&&(b&&this.fk(this.cj,a,1,c),this.fk(this.cj,a,0,c))},refreshFilter:function(a){(!a||this.hj[a])&&this.refreshHeaderContent(!1,!0,a)},fk:function(a,b,c,d){if(this.Rj&&a)for(var e=a.getElementsByTagName("TD"),f=0;f<e.length;f++)if(e[f].getAttribute("active_id")){
var g=this.hj[e[f].getAttribute("active_id")];if(d&&d!=g.columnId)continue;var h=webix.ui.datafilter[g.content];c?h.getValue&&(g.value=h.getValue(e[f])):(!b||h.trackCells)&&h.refresh(this,e[f],g)}},headerContent:[],gk:function(a,b,c){this.oj?(a.style.height=Math.max(b,1)-1+"px",a.style.width=(this.Fj?0:c)+this.oj-1+"px",webix.env.isWebKit&&a.offsetWidth):a.style.display="none"},Oj:function(){this.s.header&&this.gk(this.hk,this.$g,this.Lj),this.s.footer&&this.gk(this.ik,this.jj,this.Lj)},sk:function(){var a=!(this.s.autowidth||this.s.scrollX===!1);this.nj=a?webix.ui.scrollSize:0;var b=!(this.s.autoheight||this.s.scrollY===!1);this.oj=b?webix.ui.scrollSize:0,this.Zj&&(this.Zj.s.scrollSize=this.nj,this.Zj.s.scrollVisible=a),this.Wj&&(this.Wj.s.scrollSize=this.oj,this.Wj.s.scrollVisible=b)},Hj:function(){this.jk=0,this.bk=0;var a,b;if(a=b=1,(this.s.autoheight||this.s.scrollY===!1)&&(b=this.oj=0),(this.s.autowidth||this.s.scrollX===!1)&&(a=this.nj=0),webix.env.touch&&(a=b=0),this.Zj||(this.Zj=new webix.ui.vscroll({container:this.cj.previousSibling,scrollWidth:this.Gj,scrollSize:this.nj,scrollVisible:a}),!a||this.nj||webix.env.$customScroll||(this.Zj.x.style.position="absolute"),this.Zj.attachEvent("onScroll",webix.bind(this.kk,this))),!this.Wj){this.hk=this.cj.nextSibling;var c=this.hk.nextSibling;this.ik=c.nextSibling,this.Wj=new webix.ui.vscroll({container:c,scrollHeight:100,scroll:"y",scrollSize:this.oj,scrollVisible:b}),this.Wj.activeArea(this.Vf),this.Zj.activeArea(this.Vf,!0),this.Wj.attachEvent("onScroll",webix.bind(this.lk,this))}this.bc&&this.callEvent("onResize",[this.bc,this.dc]),webix.env.$customScroll&&webix.CustomScroll.enable(this),this.Hj=function(){}},columnId:function(a){return this.fj[a].id},getColumnIndex:function(a){for(var b=0;b<this.fj.length;b++)if(this.fj[b].id==a)return b;return-1},nk:function(a,b){var c,d=0,e=0,f=0,g=0,h=0;for(c=0;c<this.fj.length&&((this.Fj==c||this.s.leftSplit==c)&&(d=0,h++),this.fj[c].id!=b);c++)d+=this.fj[c].width;for(e+=this.fj[c].width,c=0;c<this.data.order.length&&this.data.order[c]!=a;c++)g+=this.Uj(c);return f+=this.Uj(c),[d,e,g-this.jk,f,this.Vf.childNodes[h]]},ok:function(){return this.row},locate:function(a){if(this.s.subview&&this!=webix.$$(a))return null;for(a=a.target||a.srcElement||a;a&&a.getAttribute&&!a.getAttribute("view_id");){var b=a.className.toString(),c=null;if(-1!=b.indexOf("webix_cell")&&(c=this.pk(a),c&&(c.row=this.data.order[c.rind])),-1!=b.indexOf("webix_hcell")&&(c=this.pk(a),c&&(c.header=!0)),c)return c.column=this.fj[c.cind].id,c.toString=this.ok,c;a=a.parentNode}return null},pk:function(a){var b=a.parentNode;if(!b)return null;var c=1*(a.getAttribute("column")||b.getAttribute("column")),d=a.getAttribute("row")||0;if(!d)for(var e=0;e<b.childNodes.length;e++)b.childNodes[e]==a&&(d=e+this.fj[c].qk);return{rind:d,cind:c}},rk:function(a){this.tj&&(this.Ij(),this.Jj(),this.Kj(),a||this.vj(!1,!1))},setColumnWidth:function(a,b,c){return this.Xs(this.getColumnIndex(a),b,c)},Xs:function(a,b,c){if(!isNaN(b)){var d=this.fj[a];d.minWidth&&b<d.minWidth?b=d.minWidth:b<this.s.minColumnWidth&&(b=this.s.minColumnWidth);var e=d.width;return e!=b?(a>=this.s.leftSplit&&a<this.Fj&&(this.Gj+=b-e),d.width=b,d.node?(d.node.style.width=b+"px",c||this.rk(),this.callEvent("onColumnResize",[d.id]),!0):!1):!1}},FA:function(a){return(a.$height||this.s.rowHeight)+(a.$subopen?a.$subHeight:0)},Uj:function(a){var b=this.data.order[a];return b?this.FA(this.data.pull[b]):this.s.rowHeight},Tj:function(a,b){if(this.s.fixedRowHeight)return(b-a)*this.s.rowHeight;for(var c=0;b>a;a++)c+=this.Uj(a);return c},ug:function(a,b){1==arguments.length&&(b=a.column,a=a.row);for(var c=this.getItem(a),d=this.getColumnConfig(b),e=0,f=0,g=0;g<this.fj.length;g++){(g==this.s.leftSplit||g==this.Fj)&&(e=0);var h=this.fj[g];if(h.id==b){var i=g<this.s.leftSplit?0:g>=this.Fj?2:1;f=this.Vf.childNodes[i].firstChild;break}e+=h.width}var j=(this.data.order.length,this.Tj(this.ak||0,this.getIndexById(a)));return{parent:f,top:j+(this.ck||0),left:e,width:d.width,height:c.$height||this.s.rowHeight}},xj:function(){var a=this.s.pager,b=0,c=this.data.order.length;return a&&(b=a.size*a.page,c=Math.min(c,b+a.size),a.level&&(b=this.data.$min,c=this.data.$max)),this.Tj(b,c)},setRowHeight:function(a,b){if(!isNaN(b)){b<this.s.minColumnHeight&&(b=this.s.minColumnHeight);var c=this.getItem(a),d=c.$height||this.s.rowHeight;d!=b&&(c.$height=b,this.config.fixedRowHeight=!1,this.render(),this.callEvent("onRowResize",[a]))}},lk:function(a){if(this.jk=a,this.s.prerender)for(var b=this.Vf.childNodes,c=0;c<b.length;c++)b[c].scrollTop=a;else this.vj();webix.env.$customScroll&&webix.CustomScroll.sk(this.Vf),this.callEvent("onScrollY",[]),this.callEvent("onAfterScroll",[])},kk:function(a){this.Vf.childNodes[1].scrollLeft=this.bk=a,this.s.header&&(this.I.childNodes[1].scrollLeft=a),this.s.footer&&(this.cj.childNodes[1].scrollLeft=a),this.s.prerender===!1&&this.vj(this.tk?!1:!0),webix.env.$customScroll&&webix.CustomScroll.sk(this.Vf),this.callEvent("onScrollX",[]),this.callEvent("onAfterScroll",[])},Xj:function(a){if(a)return[0,this.fj.length];for(var b=this.bk,c=this.s.leftSplit;b>0;)b-=this.fj[c].width,c++;var d=c;for(b&&c--,b+=this.Yj;b>0&&d<this.Fj;)b-=this.fj[d].width,d++;return[c,d]},getVisibleCount:function(){return Math.floor(this.Vj/this.config.rowHeight)},Sj:function(a){var b=this.jk,c=0,d=this.count(),e=this.s.pager;if(e){var c=e.page*e.size,d=Math.min(d,c+e.size);e.level&&(c=this.data.$min,d=this.data.$max)}if(this.s.autoheight)return[c,d,0];if(a)return[c,d,0];var f=c,g=this.s.fixedRowHeight?this.s.rowHeight:0;if(g){var h=Math.ceil(b/g);b-=h*g,f+=h}else for(;b>0;)b-=this.Uj(f),f++;var i=f>0&&b?-(this.Uj(f-1)+b):0,j=f;if(b&&f--,b+=this.Vj||this.dc,g){var h=Math.ceil(b/g);b-=h*g,j+=h,j>d&&(j=d)}else for(;b>0&&d>j;)b-=this.Uj(j),j++;return[f,j,i]},Kv:function(a){var b=this.getItem(a),c=this.getIndexById(a),d=this.Sj();if(!(c<d[0]||c>=d[1]))for(var e=this.Xj(),f=0;f<this.fj.length;f++){var g=this.fj[f];if(f<this.Fj&&f>=this.s.leftSplit&&(f<e[0]||f>e[1])&&(g.qk=-999),g.attached&&g.node){var h=g.node.childNodes[c-d[0]],i=this.Ek(b,this.fj[f],0);h.innerHTML=i,h.className=this.Mv(this.fj[f],i,b,a)}}},vj:function(a,b){if(this.fj.length){b&&this.uk();var c=this.Xj(this.s.prerender),d=this.Sj(this.s.prerender===!0);if(a){for(var e=this.s.leftSplit;e<c[0];e++)this.vk(e,b);for(var e=c[1];e<this.Fj;e++)this.vk(e,b)}this.wk=[];for(var f=0,e=0;e<this.s.leftSplit;e++)f+=this.xk(e,d,b);for(var e=c[0];e<c[1];e++)f+=this.xk(e,d,b,e==c[0]);for(var e=this.Fj;e<this.fj.length;e++)f+=this.xk(e,d,b);this.yk(d[0],d[1],b),this.zk(d)}},Ak:function(a,b){this.Bk=a,this.Ck=b,webix.html.remove(this.gj),this.gj=[]},yk:function(a,b,c){if(this.GA&&(this.GA.style.top=this.ck+"px"),(c||a!=this.Bk||b!=this.Ck)&&(this.Ak(a,b),this.Dk)){this.Dk=!1;for(var d=0;d<this.wk.length;d++){var e,f=this.wk[d],g=this.getItem(f.id);e="function"==typeof g.$row?g.$row.call(this,g,this.type):this.Ek(g,this.getColumnConfig(g.$row),d);var h=this.gj[d]=webix.html.create("DIV",null,e);h.className="webix_cell "+(g.$sub?"webix_dtable_sub"+(this.s.subview?"view":"row"):"webix_dtable_colrow"),h.setAttribute("column",0),h.setAttribute("row",f.index);var i=g.$height||this.s.rowHeight;h.style.height=g.$subopen?g.$subHeight+"px":i+"px",h.style.top=f.top+(g.$subopen?i-1:-1)+"px",this.GA||(this.GA=webix.html.create("DIV"),this.GA.style.position="relative",this.GA.style.top=this.ck+"px",this.Vf.appendChild(this.GA)),this.GA.appendChild(h),this.attachEvent("onSyncScroll",function(a,b,c){webix.Touch.Nf(this.GA,0,b,c)}),this.s.subview&&this.callEvent("onSubViewRender",[g,h])}}},zk:function(a){var b=this.s.pager,c=this.s.datafetch,d=!this.Fk||a[0]>=this.Fk;if(this.Fk=a[0],this.Gk){if(b&&(!c||c>=b.size)&&this.Hk([0,b.size*b.page],Math.max(c,b.size),!0))return this.Gk=null;this.Ik(this.Gk,d),this.Gk=null}else this.s.loadahead&&this.Hk(a,this.s.loadahead,d)},Hk:function(a,b,c){var d=a[1],e=d+b;c||(d=a[0]-b,e=a[0]),0>d&&(d=0),e=Math.min(e,this.data.order.length-1);for(var f=!1,g=d;e>g;g++)this.data.order[g]||(f?(f.last=g,f.count=g-d):f={start:g,count:e-d});return f?(this.Ik(f,c),!0):void 0},Ik:function(a,b){var c=Math.max(a.count,this.s.datafetch||this.s.loadahead||0),d=b?a.start:a.last-c+1;this.cf(a.count,a.start)||this.loadNext(c,d)},Zy:function(a){if(webix.env.isSafari){var b,c,d,e,f=["x","y"];for(b=0;2>b;b++)e=this["_"+f[b]+"_scroll"],e&&e.Yy&&e.Yy.parentNode==a&&(c=e.Yy);c&&(this.$y&&webix.html.remove(this.$y),this.$y=c,d=c.cloneNode(!0),c.parentNode.insertBefore(d,c),this.$y.style.display="none",this.Vf.appendChild(this.$y))}},vk:function(a){var b=this.fj[a];this.Zy(b.node),webix.html.remove(b.node),b.attached=!1},uk:function(){for(var a=0;a<this.fj.length;a++)this.fj[a].qk=-1;this.gj.length&&(webix.html.remove(this.gj),this.gj=[])},getText:function(a,b){return this.Ek(this.getItem(a),this.getColumnConfig(b),0)},Mv:function(a,b,c,d){var e="webix_cell";if(a.cssFormat){var f=a.cssFormat(b,c,d,a.id);f&&(e+="object"==typeof f?" "+webix.html.createCss(f):" "+f)}var g=c.$css;g&&("object"==typeof g&&(c.$css=g=webix.html.createCss(g)),e+=" "+g);var h=this.data.Me[d];if(h&&(h.$css&&(e+=" "+h.$css),h.$cellCss)){var i=h.$cellCss[a.id];i&&(e+=" "+i)}if(c.$cellCss){var j=c.$cellCss[a.id];j&&("object"==typeof j&&(j=webix.html.createCss(j)),e+=" "+j)}var k=this.data.getMark(c.id,"webix_selected");return(k&&(k.$row||k[a.id])||a.$selected)&&(e+=this.Lk),e},Ek:function(a,b,c){if(!a)return"";var d;return d=a[b.id],d===webix.undefined||null===d?d="":b.format&&(d=b.format(d)),b.template&&(d=b.template(a,this.type,d,b,c)),d},type:{checkbox:function(a,b,c,d){var e=c==d.checkValue?'checked="true"':"";return"<input class='webix_table_checkbox' type='checkbox' "+e+">"},radio:function(a,b,c,d){var e=c==d.checkValue?'checked="true"':"";return"<input class='webix_table_radio' type='radio' "+e+">"},editIcon:function(){return"<span class='webix_icon fa-pencil'></span>"},trashIcon:function(){return"<span class='webix_icon fa-trash'></span>"}},type_setter:function(a){return this.types&&this.types[a]?(this.type=webix.clone(this.types[a]),this.type.css&&(this.w.className+=" "+this.type.css)):webix.type(this,a),this.type.on_click&&webix.extend(this.on_click,this.type.on_click),a},xk:function(a,b,c,d){var e=this.fj[a];if(!e.attached){var f=a<this.s.leftSplit?0:a>=this.Fj?2:1;this.Vf.childNodes[f].firstChild.appendChild(e.node),e.attached=!0,e.split=f}this.ak=b[0],this.ck=0;var g=0;if(this.s.scrollAlignY?b[1]==this.data.order.length||this.data.$pagesize&&b[1]%this.data.$pagesize===0?e.node.style.top=(this.ck=b[2])+"px":e.Jk&&(e.node.style.top="0px"):(this.ck=b[2],b[2]!=e.Jk&&(e.node.style.top=b[2]+"px")),!c&&e.qk==b[0]&&e.Kk==b[1])return 0;for(var h="",i=this.s.columns[a],j=this.s.rowHeight,k=b[0];k<b[1];k++){var l,m=this.data.order[k],n=this.data.getItem(m);if(n){if(d&&n.$row&&(this.Dk=!0,this.wk.push({top:g,id:n.id,index:k}),!n.$sub)){h+="<div class='webix_cell'></div>",g+=j;continue}var l=this.Ek(n,i,k),o=this.Mv(i,l,n,m),p=n.$subopen?"margin-bottom:"+n.$subHeight+"px;":"";n.$height?(h+="<div class='"+o+"' style='height:"+n.$height+"px;"+p+"'>"+l+"</div>",g+=n.$height-j):h+="<div class='"+o+"'"+(p?" style='"+p+"'":"")+">"+l+"</div>",p&&(g+=n.$subHeight)}else h+="<div class='webix_cell'></div>",this.Gk?this.Gk.last=k:this.Gk={start:k,count:b[1]-k};g+=j}return this.Zy(e.node),e.node.innerHTML=h,e.qk=b[0],e.Kk=b[1],e.Jk=b[2],1},yj:function(){if(this.fj.length&&!isNaN(1*this.dc)){var a=this.wj+(this.nj?this.nj:0);if(!this.s.autoheight&&!this.s.yCount||!this.resize()){this.Wj.sizeTo(this.dc,this.$g,this.jj),this.Wj.define("scrollHeight",a),this.Vj=Math.max(0,this.dc-this.nj-this.$g-this.jj);for(var b=0;3>b;b++)this.Vf.childNodes[b].style.height=this.Vj+"px",this.Vf.childNodes[b].firstChild.style.height=this.s.prerender?this.wj+"px":this.Vj+"px";this.I.style.height=this.$g+"px"}}},Jj:function(){if(this.fj.length){var a=0;for(this.dk=0,this.ek=0,this.Yj=0;a<this.s.leftSplit;)this.dk+=this.fj[a].width,a++;for(a=this.fj.length-1;a>=this.Fj;)this.ek+=this.fj[a].width,a--;if(this.bc&&(!this.s.autowidth||!this.resize())){this.Yj=this.bc-this.ek-this.dk-this.oj,this.Vf.childNodes[1].firstChild.style.width=this.Gj+"px",this.Vf.childNodes[0].style.width=this.dk+"px",this.Vf.childNodes[1].style.width=this.Yj+"px",this.Vf.childNodes[2].style.width=this.ek+"px",this.I.childNodes[0].style.width=this.dk+"px",this.I.childNodes[1].style.width=this.Yj+"px",this.I.childNodes[2].style.width=this.ek+"px",this.cj.childNodes[0].style.width=this.dk+"px",this.cj.childNodes[1].style.width=this.Yj+"px",this.cj.childNodes[2].style.width=this.ek+"px";var b=this.Yj-this.Gj;if(0>b&&(b=0),b!=this.Lj&&(this.Lj=b,this.Oj()),webix.env.isWebKit){var c=this.Vf.childNodes[0].offsetWidth;c=this.Vf.childNodes[1].offsetWidth,c=this.Vf.childNodes[1].firstChild.offsetWidth,c=this.Vf.childNodes[2].offsetWidth}this.Zj.sizeTo(this.bc-this.oj),this.Zj.define("scrollWidth",this.Gj+this.dk+this.ek)}}},$getSize:function(a,b){if((this.s.autoheight||this.s.yCount)&&this.s.columns){var c=(this.s.yCount||0)*this.s.rowHeight;c||(c=this.isVisible()?this.wj:this.count()*this.s.rowHeight),this.s.height=Math.max(c+(this.nj?this.nj:0)-1,this.s.minHeight||0)+this.$g+this.jj}this.s.autowidth&&this.s.columns&&(this.s.width=Math.max(this.Gj+this.dk+this.ek+this.oj,this.s.minWidth||0));var d=this.dk+this.ek+this.oj,e=webix.ui.view.prototype.$getSize.call(this,a,b);return e[0]=Math.max(e[0]||d),e},Ow:function(){if(this.Zj){var a=this.getScrollState();this.Zj.Wi=this.Wj.Wi=-1,this.scrollTo(a.x,a.y)}},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&(this.tj&&(this.callEvent("onResize",[this.bc,this.dc]),this.Jj(),this.yj()),this.render())},Mk:function(a){var b=this.getColumnConfig(a);if(b.sort){var c="asc";b.id==this.Nk&&(c="asc"==this.Ok?"desc":"asc"),this.zf(b.id,c,b.sort)}},markSorting:function(a,b){if(this.Pk||(this.Pk=webix.html.create("DIV")),webix.html.remove(this.Pk),b){var c=this.Qk(this.getColumnIndex(a));c&&(this.Pk.className="webix_ss_sort_"+b,c.style.position="relative",c.appendChild(this.Pk)),this.Nk=a,this.Ok=b}else this.Nk=this.Ok=null},scroll_setter:function(a){return"string"==typeof a?(this.s.scrollX=-1!=a.indexOf("x"),this.s.scrollY=-1!=a.indexOf("y"),a):this.s.scrollX=this.s.scrollY=a},Qk:function(a){for(var b=this.I.getElementsByTagName("TD"),c=null,d=0;d<b.length;d++)if(b[d].getAttribute("column")==a&&!b[d].getAttribute("active_id")&&(c=b[d].firstChild,(b[d].colSpan||0)<2))return c;return c},zf:function(a,b,c){b=b||"asc",this.markSorting(a,b),"server"==c?this.loadNext(-1,0,{before:function(){var a=this.data.url;this.clearAll(),this.data.url=a}},0,1):("text"==c&&(this.data.each(function(b){b.$text=this.getText(b.id,a)},this),c="string",a="$text"),"function"==typeof c?this.data.sort(c,b):this.data.sort(a,b,c||"string"))},iA:function(a,b,c,d){var e,f,g;if(a.length)for(f=0;f<a.length;f++)if(e=webix.toFunctor(a[f],this.$scope),g=e.call(this,b,c,d),g===!1)return!1},Yc:function(a,b,c,d){a=a||event;var e=a.target||a.srcElement;if(!this.s.subview||this==webix.$$(e)){for(var f,g="",h=[],i=!1,j=null,e=a.target||a.srcElement;e&&e.parentNode&&e!=this.x.parentNode;){if(g=e.className){g=g.toString().split(" ");for(var k=g.length-1;k>=0;k--)b[g[k]]&&h.push(b[g[k]])}if(e.parentNode.getAttribute&&!j){var l=e.parentNode.getAttribute("column")||e.getAttribute("column");if(l){var m="DIV"==e.parentNode.tagName;if(i=!0,m){var n=e.parentNode.getAttribute("row")||e.getAttribute("row")||webix.html.index(e)+this.fj[l].qk;this.Qc=j={row:this.data.order[n],column:this.fj[l].id},j.toString=this.ok}else this.Qc=j={column:this.fj[l].id};if(f=this.iA(h,a,j,e),f===!1)return;if(m)this.callEvent("on"+c,[j,a,e])&&d&&this.callEvent("on"+d,[j,a,e]);else if("ItemClick"==c){var o="header"==e.parentNode.parentNode.getAttribute("section");o&&this.callEvent("onHeaderClick",[j,a,e])&&this.Mk(j.column)}h=[]}}e=e.parentNode}return this.iA(h,a,j,this.$view),i}},showOverlay:function(a){if(!this.Rk){var b=webix.html.create("DIV",{"class":"webix_overlay"},"");this.Vf.appendChild(b),this.Rk=b}this.Rk.innerHTML=a},hideOverlay:function(){this.Rk&&(webix.html.remove(this.Rk),this.Rk=null)},mapCells:function(a,b,c,d,e,f){if(null===a&&this.data.order.length>0&&(a=this.data.order[0]),null===b&&(b=this.columnId(0)),null===c&&(c=this.data.order.length),null===d&&(d=this.s.columns.length),this.exists(a)&&(a=this.getIndexById(a),b=this.getColumnIndex(b),null!==b))for(var g=0;c>g&&a+g<this.data.order.length;g++)for(var h=a+g,i=this.data.order[h],j=this.getItem(i),k=0;d>k&&b+k<this.s.columns.length;k++){var l=b+k,m=this.columnId(l),n=e(j[m],i,m,g,k);f||(j[m]=n)}},dj:function(a,b){!this.s.columns&&a.getConfig&&this.define("columns",a.getConfig(b))},qj:function(){var a=this.getItem(this.getFirstId()),b=this.s.columns=[];for(var c in a)"id"!=c&&b.push({id:c,header:c[0].toUpperCase()+c.substr(1),sort:"string",editor:"text"});b.length&&(b[0].fillspace=!0),"undefined"==typeof this.s.select&&this.define("select","row")}},webix.AutoTooltip,webix.Group,webix.DataMarks,webix.DataLoader,webix.MouseEvents,webix.MapCollection,webix.ui.view,webix.EventSystem,webix.Settings),webix.ui.datafilter={textWaitDelay:500,summColumn:{getValue:function(a){return a.firstChild.innerHTML},setValue:function(){},refresh:function(a,b,c){var d=0;a.mapCells(null,c.columnId,null,1,function(a){a=1*a,isNaN(a)||(d+=a)},!0),c.format&&(d=c.format(d)),c.template&&(d=c.template({value:d})),b.firstChild.innerHTML=d},trackCells:!0,render:function(a,b){return b.template&&(b.template=webix.template(b.template)),""}},masterCheckbox:{getValue:function(){},setValue:function(){},getHelper:function(a,b){return{check:function(){b.checked=!1,a.onclick()},uncheck:function(){b.checked=!0,a.onclick()},isChecked:function(){return b.checked}}},refresh:function(a,b,c){b.onclick=function(){this.getElementsByTagName("input")[0].checked=c.checked=!c.checked;var b=a.getColumnConfig(c.columnId),d=c.checked?b.checkValue:b.uncheckValue;a.data.each(function(b){b[c.columnId]=d,a.callEvent("onCheck",[b.id,c.columnId,d]),this.callEvent("onStoreUpdated",[b.id,b,"save"])}),a.refresh()}},render:function(a,b){return"<input type='checkbox' "+(b.checked?"checked='1'":"")+">"}},textFilter:{getInputNode:function(a){return a.firstChild.firstChild},getValue:function(a){return this.getInputNode(a).value},setValue:function(a,b){this.getInputNode(a).value=b},refresh:function(a,b,c){b.component=a.s.id,a.registerFilter(b,c,this),b.Sk=a.s.id,c.value&&this.getValue(b)!=c.value&&this.setValue(b,c.value),b.onclick=webix.html.preventEvent,webix.event(b,"keydown",this.Tk)},render:function(a,b){return this.init&&this.init(b),b.css="webix_ss_filter","<input "+(b.placeholder?'placeholder="'+b.placeholder+'" ':"")+"type='text'>"},Tk:function(a){var b=this.Sk;9!=(a.which||a.keyCode)&&(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){webix.$$(b).filterByAll()},webix.ui.datafilter.textWaitDelay))}},selectFilter:{getInputNode:function(a){return a.firstChild.firstChild},getValue:function(a){return this.getInputNode(a).value},setValue:function(a,b){this.getInputNode(a).value=b},refresh:function(a,b,c){c.compare=c.compare||function(a,b){return a==b},b.component=a.s.id,a.registerFilter(b,c,this);var d,e=c.options;e?"string"==typeof e?(d=c.options=[],webix.ajax(e).then(webix.bind(function(d){c.options=d.json(),this.refresh(a,b,c)},this))):d=e:d=a.collectValues(c.columnId);var f=webix.$$(e);f&&f.data&&f.data.getRange&&(d=f.data.getRange());for(var g=document.createElement("select"),h=0;h<d.length;h++){var i=document.createElement("option");i.value=d[h].id,i.text=d[h].value,g.add(i)}b.firstChild.innerHTML="",b.firstChild.appendChild(g),c.value&&this.setValue(b,c.value),b.onclick=webix.html.preventEvent,g.Sk=a.s.id,webix.event(g,"change",this.Vk)},render:function(a,b){return this.init&&this.$init(b),b.css="webix_ss_filter",""},Vk:function(){webix.$$(this.Sk).filterByAll()}}},webix.ui.datafilter.serverFilter=webix.extend({$server:!0,Tk:function(a,b){var c=this.Sk,d=a.which||a.keyCode;b=a.target||a.srcElement,9==d||d>=33&&40>=d||(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){webix.$$(c).filterByAll()},webix.ui.datafilter.textWaitDelay))}},webix.ui.datafilter.textFilter),webix.ui.datafilter.serverSelectFilter=webix.extend({$server:!0,Vk:function(){var a=this.Sk;webix.$$(a).filterByAll()}},webix.ui.datafilter.selectFilter),webix.ui.datafilter.numberFilter=webix.extend({init:function(a){a.prepare=function(b){var c=-1!=b.indexOf("=")?1:0,d=this.format(b);return""===d?"":(-1!=b.indexOf(">")?a.compare=this.Wk:-1!=b.indexOf("<")?(a.compare=this.Xk,c*=-1):(a.compare=this.Yk,c=0),d-c)}},format:function(a){return a.replace(/[^\-\.0-9]/g,"")},Wk:function(a,b){return 1*a>b},Xk:function(a,b){return""!==a&&b>1*a},Yk:function(a,b){return 1*a==b}},webix.ui.datafilter.textFilter),webix.ui.datafilter.dateFilter=webix.extend({format:function(a){if(""===a)return"";var b=new Date;if(-1!=a.indexOf("today"))b=webix.Date.dayStart(b);else if(-1==a.indexOf("now")){var c=a.match(/[0-9]+/g);if(!c||!c.length)return"";c.length<3?(c.reverse(),b=new Date(c[0],(c[1]||1)-1,1)):b=webix.i18n.dateFormatDate(a.replace(/^[>< =]+/,""))}return b.valueOf()}},webix.ui.datafilter.numberFilter),webix.extend(webix.ui.datatable,{filterByAll:function(){var a=!1;this.data.silent(function(){this.filter();var b=!1;for(var c in this.ij){var d=this.ij[c],e=d[2].getValue(d[0]),f=e;d[1].prepare&&(f=d[1].prepare.call(d[2],f,d[1],this)),d[1].value=e;var g=d[1].compare;if(this.callEvent("onBeforeFilter",[c,f,d[1]])){if(d[2].$server)return a=!0,this.jA();""!==f&&(g?this.filter(function(a,b){if(!a)return!1;var d=a[c];return g(d,b,a)},f,b):this.filter(c,f,b),b=!0)}}},this),a||(this.refresh(),this.callEvent("onAfterFilter",[]))},filterMode_setter:function(a){return webix.extend(this.data.Cf,a,!0)},getFilter:function(a){var b=this.ij[a];return b&&b[2].getInputNode?b[2].getInputNode(b[0]):null},registerFilter:function(a,b,c){this.ij[b.columnId]=[a,b,c]},collectValues:function(a){var b=[{id:"",value:""}],c={"":!0},d=this.getColumnConfig(a),e=d.options||d.collection;if(e){if("object"==typeof e&&!e.loadNext){if(webix.isArray(e))for(var f=0;f<e.length;f++)b.push({id:e[f],value:e[f]});else for(var g in e)b.push({id:g,value:e[g]});return b}"string"==typeof e&&(e=webix.$$(e)),e.getBody&&(e=e.getBody()),this.Zk.call(e,"id","value",b,c)}else this.Zk(d.id,d.id,b,c);return b},Zk:function(a,b,c,d){this.data.each(function(e){var f=e?e[b]:"";d[f]||(d[f]=!0,c.push({id:e[a],value:f}))},this,!0),c.sort(function(a,b){return a.value>b.value?1:-1})},jA:function(){this.loadNext(-1,0,{before:function(){var a=this.data.url;this.editStop&&this.editStop(),this.clearAll(),this.data.url=a},success:function(){this.callEvent("onAfterFilter",[])}},0,1)}}),webix.extend(webix.ui.datatable,{hover_setter:function(a){return a&&!this.Yw&&(this.Vc(),this.config.experimental=!0,this.attachEvent("onMouseMoving",function(){var a=this.locate(arguments[0]);a=a?a.row:null,this.Zw!=a&&(this.Zw&&this.removeRowCss(this.Zw,this.s.hover),this.$w(),this.Zw=a)}),this.attachEvent("onMouseOut",function(){this.Zw&&(this.removeRowCss(this.Zw,this.s.hover),this.Zw=null)}),this.Yw=1),a},$w:function(){webix.delay(function(){this.Zw&&this.addRowCss(this.Zw,this.s.hover)},this,[],5)},select_setter:function(a){return!this.select&&a&&(webix.extend(this,this._k.$k,!0),a===!0?a="row":"multiselect"==a&&(a="row",this.s.multiselect=!0),webix.extend(this,this._k[a],!0)),a},getSelectedId:function(a){return a?[]:""},getSelectedItem:function(a){return webix.SelectionModel.getSelectedItem.call(this,a)},_k:{$k:{Lk:" webix_cell_select",$init:function(){this.al(),this.on_click.webix_cell=webix.bind(this.bl,this),this.cl=this.zg=function(){this.unselect()},this.data.attachEvent("onStoreUpdated",webix.bind(this.xg,this)),this.data.attachEvent("onClearAll",webix.bind(this.cl,this)),this.data.attachEvent("onAfterFilter",webix.bind(this.zg,this)),this.data.attachEvent("onIdChange",webix.bind(this.Ag,this)),this.$ready.push(webix.SelectionModel.uy)},Ag:function(a,b){for(var c=0;c<this.dl.length;c++)this.dl[c]==a&&(this.dl[c]=b);for(var c=0;c<this.el.length;c++){var d=this.el[c];d.row==a&&(a=this.fl(d),d.row=b,b=this.fl(d),d.id=b,delete this.gl[a],this.gl[b]=!0)}},xg:function(a,b,c){"delete"==c&&this.unselect(a)},al:function(){this.el=[],this.gl={},this.dl=[]},isSelected:function(a,b){var c;return c=webix.isUndefined(b)?"object"==typeof a?this.fl(a):a:this.fl({row:a,column:b}),this.gl[c]},getSelectedId:function(a,b){var c;if(this.el.length>1||a){if(c=[].concat(this.el),b)for(var d=0;d<c.length;d++)c[d]=c[d].id}else if(c=this.el[0],b&&c)return c.id;return c},ok:function(){return this.row},hl:function(a,b){var c=this.fl(a);if(null!==c){if(-1===b)return this.ll(a);if(a.id=c,a.toString=this.ok,!this.callEvent("onBeforeSelect",[a,b]))return!1;if(!this.gl[c]||!b&&1!=this.el.length)return b||this.il(),this.el.push(a),this.gl[c]=!0,this.callEvent("onAfterSelect",[a,b]),this.jl(this.kl(a)),!0}},il:function(){if(!this.el.length)return!1;for(var a=0;a<this.dl.length;a++){var b=this.getItem(this.dl[a]);b&&this.data.removeMark(b.id,"webix_selected",0,1)}var c=this.s.columns;if(c)for(var a=0;a<c.length;a++)c[a].$selected=null;return this.al(),!0},clearSelection:function(){this.il()&&(this.callEvent("onSelectChange",[]),this.render())},ll:function(a){var b=this.fl(a);if(!b&&this.el.length&&(this.clearSelection(),this.callEvent("onSelectChange",[])),this.gl[b]){if(!this.callEvent("onBeforeUnSelect",[a]))return!1;for(var c=0;c<this.el.length;c++)if(this.el[c].id==b){this.el.splice(c,1);break}delete this.gl[b],this.callEvent("onAfterUnSelect",[a]),this.jl(0,this.ml(a))}},nl:function(a){var b=this.getItem(a);return this.data.addMark(b.id,"webix_selected",0,{$count:0},!0)},jl:function(a){a&&this.dl.push(a),this.Dg||(this.render(),this.callEvent("onSelectChange",[]))},bl:function(a,b){var c=a.ctrlKey||a.metaKey||"touch"==this.s.multiselect,d=a.shiftKey;if(this.s.multiselect||"multiselect"==this.s.select||(c=d=!1),d&&this.el.length){var e=this.el[this.el.length-1];this.ol(b,e)}else c&&this.gl[this.fl(b)]?this.ll(b):this.hl({row:b.row,column:b.column},c)},pl:function(a,b,c){var d=this.s.columns;if(b){for(var e=[],f=0;f<d.length;f++)d[f].$selected&&e.push(d[f]);d=e}for(var g=this.data.order,h=0,f=0;f<g.length;f++){var i=this.getItem(g[f]);if(i){var j=this.data.getMark(i.id,"webix_selected");if(j||b){for(var k=0,l=0;l<d.length;l++){var m=d[l].id;if(c||b||j[m]){if(!a)return{row:g[f],column:m};i[m]=a(i[m],g[f],m,h,k),k++}}h++}}}}},row:{Lk:" webix_row_select",fl:function(a){return a.row},select:function(a,b){a&&(a=a.toString()),this.hl({row:a},b)},kl:function(a){return this.nl(a.row).$row=!0,a.row},unselect:function(a){this.ll({row:a})},ml:function(a){return this.data.removeMark(a.row,"webix_selected",0,1),a.row},mapSelection:function(a){return this.pl(a,!1,!0)},ol:function(a,b){return this.selectRange(a.row,b.row)},selectRange:function(a,b,c){webix.isUndefined(c)&&(c=!0);var d=this.getIndexById(a),e=this.getIndexById(b);if(d>e){var f=d;d=e,e=f}this.Dg=!0;for(var g=d;e>=g;g++)this.select(this.getIdByIndex(g),c);this.Dg=!1,this.jl()}},cell:{fl:function(a){return a.column?a.row+"_"+a.column:null},select:function(a,b,c){this.hl({row:a,column:b},c)},kl:function(a){var b=this.nl(a.row);return b.$count++,b[a.column]=!0,a.row},unselect:function(a,b){this.ll({row:a,column:b})},ml:function(a){var b=this.nl(a.row);return b.$count--,b[a.column]=!1,b.$count<=0&&this.data.removeMark(a.row,"webix_selected"),a.row},mapSelection:function(a){return this.pl(a,!1,!1)},ol:function(a,b){return this.selectRange(a.row,a.column,b.row,b.column)},selectRange:function(a,b,c,d,e){webix.isUndefined(e)&&(e=!0);var f=this.getIndexById(a),g=this.getIndexById(c),h=this.getColumnIndex(b),i=this.getColumnIndex(d);if(f>g){var j=f;f=g,g=j}if(h>i){var j=h;h=i,i=j}this.Dg=!0;for(var k=f;g>=k;k++)for(var l=h;i>=l;l++)this.select(this.getIdByIndex(k),this.columnId(l),e);this.Dg=!1,this.jl()}},column:{Lk:" webix_column_select",fl:function(a){return a.column},ok:function(){return this.column},select:function(a,b){this.hl({column:a},b)},kl:function(a){this.s.columns[this.getColumnIndex(a.column)].$selected=!0,this.Dg||this.Kj()},unselect:function(a){this.ll({column:a})},ml:function(a){this.s.columns[this.getColumnIndex(a.column)].$selected=null,this.Kj()},mapSelection:function(a){return this.pl(a,!0,!1)},ol:function(a,b){return this.selectRange(a.column,b.column)},selectRange:function(a,b,c){webix.isUndefined(c)&&(c=!0);var d=this.getColumnIndex(a),e=this.getColumnIndex(b);if(d>e){var f=d;d=e,e=f}this.Dg=!0;for(var g=d;e>=g;g++)this.select(this.columnId(g),c);this.Dg=!1,this.Kj(),this.jl()}}}}),webix.extend(webix.ui.datatable,{blockselect_setter:function(a){return a&&this.ql&&(webix.event(this.x,"mousemove",this.rl,this),webix.event(this.x,"mousedown",this.sl,this),webix.event(document.body,"mouseup",this.tl,this),this.ql=this.ul=this.vl=!1),a},ql:!0,wl:function(a,b){for(var c=a.target||a.srcElement;c;){if(c.getAttribute&&c.getAttribute("webixignore"))return!1;if(c==b)return!0;c=c.parentNode}return!1},sl:function(a){if(this.wl(a,this.Vf)){if(a.target&&"INPUT"==a.target.tagName)return;webix.html.addCss(document.body,"webix_noselect"),this.xl=webix.html.offset(this.Vf);var b=webix.html.pos(a);this.ul=[b.x-this.xl.x,b.y-this.xl.y]}},tl:function(){this.yl&&(this.jz("select",!0),this.yl=webix.html.remove(this.yl)),webix.html.removeCss(document.body,"webix_noselect"),this.ul=this.vl=!1},jz:function(a,b){var c=this.zl.apply(this,this.ul),d=this.zl.apply(this,this.vl);if(this.callEvent("onBeforeBlockSelect",[c,d,b])){if(c.row&&d.row)if("select"===a)this.il(),this.ol(c,d);else{var e,f,g,h;if(this.ul,"box"===a)e=Math.min(this.ul[0],this.vl[0]),g=Math.max(this.ul[0],this.vl[0]),f=Math.min(this.ul[1],this.vl[1]),h=Math.max(this.ul[1],this.vl[1]);else{var i=this.ug(c.row,c.column),j=this.ug(d.row,d.column),k=this.getScrollState();this.ek&&this.ul[0]>this.dk+this.Yj?i.left+=this.dk+this.Yj:this.dk?this.ul[0]>this.dk&&(i.left+=this.dk-k.x):i.left-=k.x,this.ek&&this.vl[0]>this.dk+this.Yj?j.left+=this.dk+this.Yj:this.dk?this.vl[0]>this.dk&&(j.left+=this.dk-k.x):j.left-=k.x,e=Math.min(i.left,j.left),g=Math.max(i.left+i.width,j.left+j.width),f=Math.min(i.top,j.top),h=Math.max(i.top+i.height,j.top+j.height)}var l=this.yl.style;l.left=e+"px",l.top=f+"px",l.width=g-e+"px",l.height=h-f+"px"}b&&this.callEvent("onAfterBlockSelect",[c,d])}},Al:function(){this.yl=webix.html.create("div",{"class":"webix_block_selection"},""),this.Vf.appendChild(this.yl)},rl:function(a){if(this.ul!==!1){var b=webix.html.pos(a),c=[b.x-this.xl.x,b.y-this.xl.y];if(Math.abs(this.ul[0]-c[0])<5&&Math.abs(this.ul[1]-c[1])<5)return;this.vl===!1&&this.Al(a),this.vl=c,this.jz(this.config.blockselect)}},zl:function(a,b){this.ek&&a>this.dk+this.Yj?a+=this.Zj.getSize()-this.Yj-this.dk-this.ek:(!this.dk||a>this.dk)&&(a+=this.Zj.getScroll()),b+=this.getScrollState().y;var c=null,d=null;0>a&&(a=0),0>b&&(b=0);for(var e=this.s.columns,f=this.data.order,g=0,h=0;h<e.length;h++)if(g+=e[h].width,g>=a){d=e[h].id;break}if(d||(d=e[e.length-1].id),g=0,this.s.fixedRowHeight)c=f[Math.floor(b/this.s.rowHeight)];else for(var h=0;h<f.length;h++)if(g+=this.Uj(h),g>=b){c=f[h];break}return c||(c=f[f.length-1]),{row:c,column:d}}}),webix.protoUI({name:"resizearea",defaults:{dir:"x"},$init:function(a){var b=a.dir||"x",c=webix.toNode(a.container),d="x"==b?"width":"height",e=a.margin?a.margin+"px":0;this.Cl="x"==b?"left":"top",this.x=webix.html.create("DIV",{"class":"webix_resize_area webix_dir_"+b}),webix.event(this.x,webix.env.mouse.down,webix.html.stopEvent),e&&(e="x"==b?e+" 0 "+e:"0 "+e+" 0 "+e),this.Dl=webix.html.create("DIV",{"class":"webix_resize_handle_"+b,style:e?"padding:"+e:""},"<div class='webix_handle_content'></div>"),this.El=webix.html.create("DIV",{"class":"webix_resize_origin_"+b}),a[d]&&(this.El.style[d]=a[d]+(a.border?1:0)+"px",
this.Dl.style[d]=a[d]+"px"),a.cursor&&(this.Dl.style.cursor=this.El.style.cursor=this.x.style.cursor=a.cursor),this.Fl=webix.event(c,webix.env.mouse.move,this.Gl,this),this.Hl=webix.event(document.body,webix.env.mouse.up,this.Il,this),this.Dl.style[this.Cl]=this.El.style[this.Cl]=a.start+"px",c.appendChild(this.x),c.appendChild(this.Dl),c.appendChild(this.El)},Il:function(){this.callEvent("onResizeEnd",[this.Jl]),webix.eventRemove(this.Fl),webix.eventRemove(this.Hl),webix.html.remove(this.x),webix.html.remove(this.Dl),webix.html.remove(this.El),this.x=this.Dl=this.El=null},Gl:function(a){var b=webix.html.pos(a);this.Jl=("x"==this.s.dir?b.x:b.y)+this.s.start-this.s.eventPos,this.Dl.style[this.Cl]=this.Jl+"px",this.callEvent("onResize",[this.Jl])}},webix.EventSystem,webix.Settings),webix.extend(webix.ui.datatable,{resizeRow_setter:function(a){return this.s.scrollAlignY=!1,this.s.fixedRowHeight=!1,this.resizeColumn_setter(a)},resizeColumn_setter:function(a){return a&&this.Kl&&(webix.event(this.x,"mousemove",this.Ll,this),webix.event(this.x,"mousedown",this.Ml,this),webix.event(this.x,"mouseup",this.Nl,this),this.Kl=!1),a},Kl:!0,Ml:function(a){this.Ol&&(this.Pl=[webix.html.pos(a),this.Ol[2]],webix.html.denySelect())},Nl:function(){this.Pl=!1,webix.html.allowSelect()},Ql:function(a){if(a=a||event,!this.Rl){var b=this.Ol[0],c=this.Pl[1],d=this.pk(c);if(d){var e,f=this.Pl[0];if("x"==b?(e=webix.html.offset(c).x+this.Ol[1]-webix.html.offset(this.Vf).x,f=f.x,this.Ol[1]||(d.cind-=c.parentNode.colSpan||1)):(e=webix.html.offset(c).y+this.Ol[1]-webix.html.offset(this.Vf).y+this.$g,f=f.y,this.Ol[1]||d.rind--),d.cind>=0&&d.rind>=0){this.Rl=[b,d,e];var g=new webix.ui.resizearea({container:this.x,dir:b,eventPos:f,start:e,cursor:("x"==b?"e":"n")+"-resize"});g.attachEvent("onResizeEnd",webix.bind(this.Sl,this))}this.Ml=this.Ol=!1}}},Sl:function(a){if(this.Rl){var b=this.Rl[0],c=this.Rl[1],d=a-this.Rl[2];if("x"==b){this.s.rightSplit&&c.cind+1>=this.Fj&&c.cind!==this.fj.length-1&&(c.cind++,d*=-1);var e=this.fj[c.cind].width;this.Xs(c.cind,e+d)}else{var f=this.getIdByIndex(c.rind),g=this.FA(this.getItem(f));this.setRowHeight(f,g+d)}this.Nl()}this.Rl=null},Ll:function(a){if(this.Ol&&this.Pl)return this.Ql(a);a=a||event;var b=a.target||a.srcElement,c=!1;if("TD"!=b.tagName&&"TABLE"!=b.tagName){var d=b.className||"",e=-1!=d.indexOf("webix_cell");if(!e||!this.config.drag){var f=-1!=d.indexOf("webix_hcell");if(this.Ol=!1,e||f){var g=b.offsetWidth,h=b.offsetHeight,i=webix.html.posRelative(a);e&&this.s.resizeRow&&(i.y<3?(this.Ol=["y",0,b],c="n-resize"):h-i.y<4&&(this.Ol=["y",h,b],c="n-resize")),this.s.resizeColumn&&(i.x<3?(this.Ol=["x",0,b],c="e-resize"):g-i.x<4&&(this.Ol=["x",g,b],c="e-resize"))}this.Tl&&window.clearTimeout(this.Tl),this.Tl=webix.delay(this.Ul,this,[c],c?100:0)}}},Ul:function(a){this.Vl!=a&&(this.Vl=a,this.x.style.cursor=a||"default")}}),webix.extend(webix.ui.datatable,webix.PagingAbility),webix.csv={escape:!0,delimiter:{rows:"\n",cols:"  "},parse:function(a,b){if(b=b||this.delimiter,!this.escape)return this.Wl(a,b);for(var c=a.replace(/\n$/,"").split(b.rows),d=0;d<c.length-1;)this.Xl(c[d],'"')%2===1&&(c[d]+=b.rows+c[d+1],delete c[d+1],d++),d++;var e=[];for(d=0;d<c.length;d++)if("undefined"!=typeof c[d]){for(var f=c[d].split(b.cols),g=0;g<f.length;g++)0===f[g].indexOf('"')&&(f[g]=f[g].substr(1,f[g].length-2)),f[g]=f[g].replace('""','"');e.push(f)}return e},Wl:function(a,b){for(var c=a.split(b.rows),d=0;d<c.length;d++)c[d]=c[d].split(b.cols);return c},Xl:function(a,b){var c=a.split(b);return c.length-1},stringify:function(a,b){if(b=b||this.delimiter,!this.escape){for(var c=0;c<a.length;c++)a[c]=a[c].join(b.cols);return a.join(b.rows)}for(var d=/\n|\"|;|,/,c=0;c<a.length;c++){for(var e=0;e<a[c].length;e++)d.test(a[c][e])&&(a[c][e]=a[c][e].replace(/"/g,'""'),a[c][e]='"'+a[c][e]+'"');a[c]=a[c].join(b.cols)}return a=a.join(b.rows)}},webix.TablePaste={clipboard_setter:function(a){return(a===!0||1===a)&&(this.s.clipboard="block"),webix.clipbuffer.init(),this.attachEvent("onSelectChange",this.Yl),this.attachEvent("onItemClick",function(){webix.clipbuffer.focus()}),this.attachEvent("onPaste",this.Zl),a},Yl:function(){if(!this.getEditor||!this.getEditor()){var a=this.$l();webix.clipbuffer.set(a),webix.UIManager.setFocus(this)}},$l:function(){var a=[];return this.mapSelection(function(b,c,d,e){return a[e]||(a[e]=[]),a[e].push(b),b}),webix.csv.stringify(a,this.s.delimiter)},Zl:function(a){if(!webix.isUndefined(this.rh[this.s.clipboard])){var b=webix.csv.parse(a,this.s.delimiter);this.rh[this.s.clipboard].call(this,b)}},rh:{block:function(a){var b=this.mapSelection(null);b&&(this.mapCells(b.row,b.column,a.length,null,function(b,c,d,e,f){return a[e]&&a[e].length>f?a[e][f]:b}),this.render())},selection:function(a){this.mapSelection(function(b,c,d,e,f){return a[e]&&a[e].length>f?a[e][f]:b}),this.render()},repeat:function(a){this.mapSelection(function(b,c,d,e,f){return c=a[e%a.length],b=c[f%c.length]}),this.render()},custom:function(){}}},webix.extend(webix.ui.datatable,webix.TablePaste),function(){function a(a,b){var f=d(a,b),g='<rows profile="color">';return g+=c("header","head",a,f),a.config.footer&&(g+=c("footer","foot",a,f)),g+=e(a,f,b),g+="</rows>"}function b(a,b){if(a&&a.contentId){var c=b.getHeaderContent(a.contentId);if(c&&c.type.trackCells)return c.getValue()}return a?a.text:""}function c(a,c,d,e){for(var f="<"+c+">",g=1,h=0;h<e.length;h++)e[h][a]&&e[h][a].length>g&&(g=e[h][a].length);for(var h=0;g>h;h++){f+="<columns>";for(var i=0;i<e.length;i++){var j=e[i];f+="<column",f+=j.width?' width="'+j.width+'"':"";var k=j[a][h];f+=k&&k.colspan?' colspan="'+k.colspan+'"':"",f+=k&&k.rowspan?' rowspan="'+k.rowspan+'"':"",f+=j.exportAsTree?' type="tree"':"",f+=' align="left"',f+="><![CDATA[",f+=(b(k,d)||"").replace(/<[^>]*>/g," "),f+="]]></column>"}f+="</columns>"}return f+="</"+c+">"}function d(a,b){function c(a,b){var c=a?webix.clone(a):{};"object"==typeof b&&webix.extend(c,b,!0),d.push(c)}var d=[],e=b.columns;if(b.id&&d.push({id:"id",width:50,header:[{text:"ID"}],footer:[""]}),e)for(var f in e)c(a.getColumnConfig(f),e[f]);else for(var g=a.s.columns,h=0;h<g.length;h++)c(g[h]);return d}function e(a,b,c){for(var d="",e=a.data,f=0;f<e.order.length;f++){var g=e.order[f],h=e.pull[g];if(!c.level||c.level==h.$level){var i=h.$level?' level="'+(h.$level-1)+'"':"";d+='<row id="'+g+'"'+i+">";for(var j=0;j<b.length;j++){var k=a.Ek(h,b[j],f);d+="<cell><![CDATA["+(null!==k&&k!==webix.undefined?k.toString().replace(/<[^>]*>/g,""):"")+"]]></cell>"}d+="</row>"}}return d}function f(a,b){webix.send(a,{grid_xml:encodeURI(b)},null,"_blank")}webix.extend(webix.ui.datatable,{exportToPDF:function(b,c){var d=a(this,c||{});b=b||"http://webix-export.appspot.com/export/pdf",f(b,d)},exportToExcel:function(b,c){var d=a(this,c||{});b=b||"http://webix-export.appspot.com/export/excel",f(b,d)}})}(),webix.storage||(webix.storage={}),webix.storage.local={put:function(a,b){a&&window.JSON&&window.localStorage&&window.localStorage.setItem(a,window.JSON.stringify(b))},get:function(a){if(a&&window.JSON&&window.localStorage){var b=window.localStorage.getItem(a);return b?webix.DataDriver.json.toObject(b):null}return null},remove:function(a){a&&window.JSON&&window.localStorage&&window.localStorage.removeItem(a)},clear:function(){window.localStorage.clear()}},webix.storage.session={put:function(a,b){a&&window.JSON&&window.sessionStorage&&window.sessionStorage.setItem(a,window.JSON.stringify(b))},get:function(a){if(a&&window.JSON&&window.sessionStorage){var b=window.sessionStorage.getItem(a);return b?webix.DataDriver.json.toObject(b):null}return null},remove:function(a){a&&window.JSON&&window.sessionStorage&&window.sessionStorage.removeItem(a)},clear:function(){window.sessionStorage.clear()}},webix.storage.cookie={put:function(a,b,c,d){a&&window.JSON&&(document.cookie=a+"="+escape(window.JSON.stringify(b))+(d&&d instanceof Date?";expires="+d.toUTCString():"")+(c?";domain="+c:"")+(webix.env.https?";secure":""))},_l:function(a){for(var b=document.cookie.split(";"),c="",d="",e="",f=!1,g=0;g<b.length;g++){if(c=b[g].split("="),d=c[0].replace(/^\s+|\s+$/g,""),d==a)return f=!0,c.length>1&&(e=unescape(c[1].replace(/^\s+|\s+$/g,""))),e;c=null,d=""}return null},get:function(a){if(a&&window.JSON){var b=this._l(a);return b?webix.DataDriver.json.toObject(unescape(b)):null}return null},remove:function(a,b){a&&this._l(a)&&(document.cookie=a+"="+(b?";domain="+b:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},clear:function(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++)document.cookie=/^[^=]+/.exec(b[c])[0]+"="+(a?";domain="+a:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},webix.DataState={getState:function(){for(var a=this.config.columns.length,b=this.config.columns,c={ids:[],size:[],select:this.getSelectedId(!0),scroll:this.getScrollState()},d=0;a>d;d++)c.ids.push(b[d].id),c.size.push(b[d].width);if(this.Nk&&(c.sort={id:this.Nk,dir:this.Ok}),this.ij){var e={},f=0;for(var g in this.ij)if(!this.am[g]){var h=this.ij[g];h[1].value=e[g]=h[2].getValue(h[0]),f=1}f&&(c.filter=e)}c.hidden=[];for(var g in this.am)c.hidden.push(g);return c},setState:function(a){var b=this.config.columns;if(a){if(this.Nk=null,this.blockEvent(),a.hidden){for(var c={},d=0;d<a.hidden.length;d++)c[a.hidden[d]]=!0,this.bm.length||this.hideColumn(a.hidden[d]);if(this.bm.length)for(var d=0;d<this.bm.length;d++){var e=this.bm[d];!!c[e]==!this.am[e]&&this.hideColumn(e,!!c[e])}}if(a.ids){for(var f=!1,g=this.config.columns,d=0;d<g.length;d++)g[d].id!=a.ids[d]&&(f=!0);if(f){for(var d=0;d<a.ids.length;d++)g[d]=this.getColumnConfig(a.ids[d])||g[d];this.refreshColumns()}}if(a.size)for(var h=Math.min(a.size.length,b.length),d=0;h>d;d++)b[d]&&b[d].width!=a.size[d]&&this.Xs(d,a.size[d],!0);if(a.filter)for(var i in this.ij){var j=this.ij[i];j[2].setValue(j[0],"")}if(this.unblockEvent(),this.rk(!0),this.callEvent("onStructureUpdate",[]),a.sort){var k=b[this.getColumnIndex(a.sort.id)];k&&this.zf(a.sort.id,a.sort.dir,k.sort)}if(a.filter){for(var i in a.filter){var l=a.filter[i];if(l&&this.ij[i]){var j=this.ij[i];j[2].setValue(j[0],l);var m=j[1].contentId;m&&(this.hj[m].value=l)}}this.filterByAll()}if(a.select&&this.select){var n=a.select;this.unselect();for(var d=0;d<n.length;d++)(!n[d].row||this.exists(n[d].row))&&this.hl(n[d],!0)}a.scroll&&this.scrollTo(a.scroll.x,a.scroll.y)}}},webix.extend(webix.ui.datatable,webix.DataState),function(){var a=webix.Touch={config:{longTouchDelay:1e3,scrollDelay:150,gravity:500,deltaStep:30,speed:"0ms",finish:1500,ellastic:!0},limit:function(b){a.cm=b!==!1},disable:function(){a.Xf=!0},enable:function(){a.Xf=!1},$init:function(){a.$init=function(){},webix.event(document.body,b.down,a.dm),webix.event(document.body,b.move,a.em),webix.event(document.body,b.up,a.fm),webix.event(document.body,"dragstart",function(a){return webix.html.preventEvent(a)}),webix.event(document.body,"touchstart",function(b){if(!a.Xf&&!a.cm&&webix.env.isSafari){var c=b.srcElement.tagName.toLowerCase();return"input"==c||"textarea"==c||"select"==c||"label"==c?!0:(a.im=!0,webix.html.preventEvent(b))}}),a.Of(),a.jm=[null,null],a.$active=!0},Of:function(){a.km=a.lm=a.mm=null,a.nm=a.om=a.pm=this.qm=null,a.rm={sm:0,tm:0,um:0},a.vm&&(webix.html.removeCss(a.vm,"webix_touch"),a.vm=null),window.clearTimeout(a.wm),a.xm=!0,a.ym=!0,a.zm=!0,a.Am||a.Pf()},fm:function(b){if(a.km){if(a.nm){var c=a.Mf(a.om),d=c.e,e=c.f,f=a.config.finish,g=a.Bm(b,!0),h=webix.$$(a.om),i=h&&h.$scroll?h.$scroll.gravity:a.config.gravity;if(g.um){var j=d+i*g.sm/g.um,k=e+i*g.tm/g.um,l=a.jm[0]?a.Cm(j,!1,!1,a.pm.dx,a.pm.px):d,m=a.jm[1]?a.Cm(k,!1,!1,a.pm.dy,a.pm.py):e,n=Math.max(Math.abs(l-d),Math.abs(m-e));150>n&&(f=f*n/150),(l!=d||m!=e)&&(f=Math.round(f*Math.max((l-d)/(j-d),(m-e)/(k-e))));var o={e:l,f:m},h=webix.$$(a.om);h&&h.adjustScroll&&h.adjustScroll(o),f=Math.max(100,f),d!=o.e||e!=o.f?(a.Nf(a.om,o.e,o.f,f+"ms"),a.Dm&&a.Dm.Em(o.e,o.f,f+"ms"),a.Fm(o.e,o.f,f+"ms")):a.Pf()}else a.Pf()}else if(!this.qm)if(a.zm&&!a.ym)a.Gm("onSwipeX");else if(a.ym&&!a.zm)a.Gm("onSwipeY");else if(webix.env.isSafari&&a.im){a.im=!1;var p=a.km.target;webix.delay(function(){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),p.dispatchEvent(a)})}a.Gm("onTouchEnd"),a.Of()}},em:function(b){if(a.km){var c=a.Bm(b);if(a.Gm("onTouchMove"),a.nm)a.Hm(c);else if(a.ym=a.Im(c.Jm,"x",a.ym),a.zm=a.Im(c.Ei,"y",a.zm),a.nm){var d=a.Km("onBeforeScroll",!0);if(d){var e={};d.callEvent("onBeforeScroll",[e]),e.update&&(a.config.speed=e.speed,a.config.scale=e.scale)}a.Lm(c)}return webix.html.preventEvent(b)}},Hm:function(){if(a.om){var b=a.Mf(a.om),c=(b.e,b.f,a.mm||a.km),d=webix.$$(a.om),e=d&&d.$scroll?d.$scroll.ellastic:a.config.ellastic;a.jm[0]&&(b.e=a.Cm(b.e-c.x+a.lm.x,e,b.e,a.pm.dx,a.pm.px)),a.jm[1]&&(b.f=a.Cm(b.f-c.y+a.lm.y,e,b.f,a.pm.dy,a.pm.py)),a.Nf(a.om,b.e,b.f,"0ms"),a.Dm&&a.Dm.Em(b.e,b.f,"0ms"),a.Fm(b.e,b.f,"0ms")}},Fm:function(b,c,d){var e=a.pm.px/a.pm.dx*-b,f=a.pm.py/a.pm.dy*-c;a.jm[0]&&a.Nf(a.jm[0],e,0,d),a.jm[1]&&a.Nf(a.jm[1],0,f,d)},scrollTo:function(b,c,d,e){a.Nf(b,c,d,e)},Nf:function(b,c,d,e){if(!a.tt&&window.setAnimationFrame&&window.setAnimationFrame(function(){return a.tt=!0,a.Nf(b,c,d,e)}),a.tt=null,a.Am=!0,b){var f=a.config.translate||webix.env.translate;b.style[webix.env.transform]=f+"("+Math.round(c)+"px, "+Math.round(d)+"px"+("translate3d"==f?", 0":"")+")",b.style[webix.env.transitionDuration]=e}},Mf:function(b){var c,d=window.getComputedStyle(b)[webix.env.transform];if("none"==d)c={e:0,f:0};else if(window.WebKitCSSMatrix)c=new WebKitCSSMatrix(d);else if(window.MSCSSMatrix)c=new MSCSSMatrix(d);else{var e=d.replace(/(matrix\()(.*)(\))/gi,"$2");e=e.replace(/\s/gi,""),e=e.split(",");for(var c={},f=["a","b","c","d","e","f"],g=0;g<f.length;g++)c[f[g]]=parseInt(e[g],10)}return a.Dm&&a.Dm.Mm(c),c},Cm:function(a,b,c,d,e){if(a===c)return a;var f=Math.abs(a-c),g=f/(a-c);if(a>0)return b?c+g*Math.sqrt(f):0;var h=d-e;return 0>h+a?b?c-Math.sqrt(-(a-c)):-h:a},Nm:function(b){if(!b.scroll_enabled){b.scroll_enabled=!0,b.parentNode.style.position="relative";var c=webix.env.cssPrefix;b.style.cssText+=c+"transition: "+c+"transform; "+c+"user-select:none; "+c+"transform-style:flat;",b.addEventListener(webix.env.transitionEnd,a.Pf,!1)}},Lm:function(){-1!=a.nm.indexOf("x")&&(a.jm[0]=a.Om("x",a.pm.dx,a.pm.px,"width")),-1!=a.nm.indexOf("y")&&(a.jm[1]=a.Om("y",a.pm.dy,a.pm.py,"height")),a.Nm(a.om),window.setTimeout(a.Hm,1)},Om:function(b,c,d,e){if(2>c-d){var f=a.Mf(a.om),g="y"==b?f.e:0,h="y"==b?0:f.f;return a.Dm||a.Nf(a.om,g,h,"0ms"),a.nm=a.nm.replace(b,""),""}var i=webix.html.create("DIV",{"class":"webix_scroll_"+b},"");return i.style[e]=Math.max(d*d/c-7,10)+"px",a.om.parentNode.appendChild(i),i},Im:function(b,c,d){return b>a.config.deltaStep?(a.xm&&(a.Pm(c),a.pk(c),-1==(a.nm||"").indexOf(c)&&(a.nm="")),!1):d},Pf:function(){var b,c,d;d=webix.$$(a.om||this),d&&(a.om?b=a.Mf(a.om):d.getScrollState&&(c=d.getScrollState(),b={e:c.x,f:c.y}),webix.callEvent("onAfterScroll",[b]),d.callEvent&&d.callEvent("onAfterScroll",[b])),a.nm||(webix.html.remove(a.jm),a.jm=[null,null]),a.Am=!1},Pm:function(){window.clearTimeout(a.wm),a.xm=!1},Qm:function(b){return a.jm[0]||a.jm[1]?void a.Rm(b,a.jm[0]?"x":"y"):!0},dm:function(c){var d=c.target||event.srcElement;if(!(a.Xf||d.tagName&&"textarea"==d.tagName.toLowerCase()&&d.offsetHeight<d.scrollHeight)){a.km=b.context(c);var e=webix.$$(c);if(!(!a.cm||a.Sm()||e&&e.$touchCapture))return a.Qm(c),void(a.km=null);a.Gm("onTouchStart"),a.Qm(c)&&(a.wm=window.setTimeout(a.Tm,a.config.longTouchDelay)),!e||!e.touchable||d.className&&0===d.className.indexOf("webix_view")||(a.vm=e.getNode(c),webix.html.addCss(a.vm,"webix_touch"))}},Tm:function(){a.km&&(a.Gm("onLongTouch"),webix.callEvent("onClick",[a.km]),a.qm=!0)},Rm:function(c,d){a.pk(d);var e=a.jm[0]||a.jm[1];if(e){var f=a.Km("onBeforeScroll",!0);f&&f.callEvent("onBeforeScroll",[a.km,a.lm])}!e||a.om&&e.parentNode==a.om.parentNode||(a.Of(),a.Pf(),a.km=b.context(c)),a.em(c)},Bm:function(c){return a.mm=a.lm,a.lm=b.context(c),a.rm.Jm=Math.abs(a.km.x-a.lm.x),a.rm.Ei=Math.abs(a.km.y-a.lm.y),a.mm&&(a.lm.time-a.mm.time<a.config.scrollDelay?(a.rm.sm=a.rm.sm/1.3+a.lm.x-a.mm.x,a.rm.tm=a.rm.tm/1.3+a.lm.y-a.mm.y):a.rm.tm=a.rm.sm=0,a.rm.um=a.rm.um/1.3+(a.lm.time-a.mm.time)),a.rm},Um:function(b){a.pm={dx:b.offsetWidth,dy:b.offsetHeight,px:b.parentNode.offsetWidth,py:b.parentNode.offsetHeight}},Sm:function(b){var c=a.km.target;if(!webix.env.touch&&!webix.env.transition&&!webix.env.transform)return null;for(;c&&"BODY"!=c.tagName;){if(c.getAttribute){var d=c.getAttribute("touch_scroll");if(d&&(!b||-1!=d.indexOf(b)))return[c,d]}c=c.parentNode}return null},pk:function(b){var c=this.Sm(b);return c&&(a.nm=c[1],a.om=c[0],a.Um(c[0])),c},Gm:function(b){webix.callEvent(b,[a.km,a.lm]);var c=a.Km(b);c&&c.callEvent(b,[a.km,a.lm])},Km:function(b,c){var d=webix.$$(c?a.om:a.km);if(!d)return null;for(;d;){if(d.hasEvent&&d.hasEvent(b))return d;d=d.getParentView()}return null},gm:function(b){if(!b.touches[0]){var c=a.lm;return c.time=new Date,c}return{target:b.target,x:b.touches[0].pageX,y:b.touches[0].pageY,time:new Date}},hm:function(a){return{target:a.target||a.srcElement,x:a.pageX,y:a.pageY,time:new Date}}};webix.ready(function(){webix.env.touch&&(a.$init(),-1==document.body.className.indexOf("webix_full_screen")&&a.limit(!0),window.MSCSSMatrix&&webix.html.addStyle(".webix_view{ -ms-touch-action: none; }"))});var b=webix.env.mouse={down:"mousedown",up:"mouseup",move:"mousemove",context:a.hm};window.navigator.pointerEnabled?(b.down="pointerdown",b.move="pointermove",b.up="pointerup"):window.navigator.msPointerEnabled?(b.down="MSPointerDown",b.move="MSPointerMove",b.up="MSPointerUp"):webix.env.touch&&(b.down="touchstart",b.move="touchmove",b.up="touchend",b.context=a.gm)}(),webix.attachEvent("onDataTable",function(a,b){webix.env.touch&&(webix.Touch.$init(),b.scrollSize=0,webix.extend(a,b.prerender===!0?a.Vm:a.Wm),webix.Touch.Xf&&webix.Touch.limit(),a.defaults.scrollAlignY=!1,a.Vf.setAttribute("touch_scroll","xy"),a.$ready.push(function(){var a="",b=this.s;b.autowidth||b.scrollX===!1||(a+="x"),b.autoheight||b.scrollY===!1||(a+="y"),this.Vf.setAttribute("touch_scroll",a)}),webix.Touch.Nm(a.Vf.childNodes[1].firstChild),webix.Touch.Nf(a.Vf.childNodes[1].firstChild,0,0,"0ms"),a.Em(0,0,"0ms"))}),webix.extend(webix.ui.datatable,{Vm:{$j:function(a,b){webix.Touch.Nf(this.Vf.childNodes[1].firstChild,0,0,"0ms"),this.Em(a,b,"0ms")},_j:function(){var a=webix.Touch.Mf(this.Vf.childNodes[1].firstChild);return{x:-a.e,y:-a.f}},$init:function(){this.attachEvent("onBeforeScroll",function(){webix.Touch.om=this.Vf.childNodes[1].firstChild,webix.Touch.Um(webix.Touch.om),webix.Touch.Dm=this}),this.attachEvent("onTouchEnd",function(){webix.Touch.Dm=null})},Em:function(a,b,c){this.s.leftSplit&&webix.Touch.Nf(this.Vf.childNodes[0].firstChild,0,b,c),this.s.rightSplit&&webix.Touch.Nf(this.Vf.childNodes[2].firstChild,0,b,c),this.s.header&&webix.Touch.Nf(this.I.childNodes[1].firstChild,a,0,c),this.s.footer&&webix.Touch.Nf(this.cj.childNodes[1].firstChild,a,0,c),this.callEvent("onSyncScroll",[a,b,c])},Mm:function(){}},Wm:{$j:function(a,b){webix.delay(function(){this.callEvent("onAfterScroll",[{e:-a,f:-b}])},this)},$scroll:{gravity:0,elastic:!1},$init:function(){this.attachEvent("onBeforeScroll",function(){var a=webix.Touch;a.om=this.Vf.childNodes[1].firstChild,a.Um(a.om),a.pm.dy=this.wj,a.Dm=this}),this.attachEvent("onAfterScroll",function(a){var b=this.bk!=-a.e,c=this.jk!=-a.f;webix.Touch.Dm=null,webix.Touch.$m=null,this.jk=0;var d=webix.Touch.config.translate;return webix.Touch.config.translate="translate",this.Em(a.e,0,"0ms"),webix.Touch.config.translate=d,this.bk=-a.e,this.jk=-a.f,this.render(),b&&this.callEvent("onScrollX",[]),c&&this.callEvent("onScrollY",[]),!1})},Em:function(a,b,c){b+=this.jk,webix.Touch.Nf(this.Vf.childNodes[1].firstChild,a,b,c),this.s.leftSplit&&webix.Touch.Nf(this.Vf.childNodes[0].firstChild,0,b,c),this.s.rightSplit&&webix.Touch.Nf(this.Vf.childNodes[2].firstChild,0,b,c),this.s.header&&webix.Touch.Nf(this.I.childNodes[1].firstChild,a,0,c),this.s.footer&&webix.Touch.Nf(this.cj.childNodes[1].firstChild,a,0,c),this.callEvent("onSyncScroll",[a,b,c])},Mm:function(a){a.f-=this.jk}}}),webix.extend(webix.ui.datatable,{$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(a){a||this._m()},this)),this.attachEvent("onStructureLoad",this._m),this.attachEvent("onStructureUpdate",this.an),this.attachEvent("onResize",this.an)},_m:function(){if(this.count()){for(var a=!1,b=this.fj,c=0;c<b.length;c++)b[c].adjust&&(a=this.bn(c,b[c].adjust,!0)||a);a&&this.rk(!0)}},an:function(){var a=this.s.columns,b=[],c=0;if(a&&!this.s.autowidth)for(var d=0;d<a.length;d++){var e=a[d].fillspace;e&&(b[d]=e,c+=1*e||1)}c&&this.cn(b,c)},cn:function(a,b){var c=this.s.columns;if(c){var d=this.bc-this.oj,e=!1;if(d>0){for(var f=0;f<c.length;f++)a[f]||(d-=c[f].width||this.config.columnWidth);for(var f=0;f<a.length;f++)if(a[f]){var g=Math.min(d,Math.round(d*a[f]/b));e=this.Xs(f,g,!0)||e,d-=c[f].width,b-=a[f]}e&&this.rk(!0)}}},dn:function(a,b){var c=webix.html.create("DIV",{"class":"webix_view webix_table_cell webix_measure_size webix_cell"},"");c.style.cssText="width:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",document.body.appendChild(c);var d=this.s.columns[a],e=-1/0;if("header"!=b&&this.data.each(function(a){if(a){var b=this.Ek(a,d,0);c.innerHTML=b,e=Math.max(c.scrollWidth,e)}},this),b&&"data"!=b)for(var f=0;f<d.header.length;f++){var g=d.header[f];g&&(c.innerHTML=g.text,e=Math.max(c.scrollWidth,e))}return c=webix.html.remove(c),e+1+(webix.env.isIE?webix.skin.$active.layoutPadding.space:0)},bn:function(a,b,c){if(a>=0){var d=this.dn(a,b);return this.Xs(a,d,c)}},adjustColumn:function(a,b){this.bn(this.getColumnIndex(a),b)},adjustRowHeight:function(a,b){var c,d=this.getColumnConfig(a),e=(this.data.count(),webix.html.create("DIV",{"class":"webix_table_cell webix_measure_size webix_cell"},""));e.style.cssText="width:"+d.width+"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",this.$view.appendChild(e),e.offsetHeight<1&&(c=this.$view.cloneNode(!0),document.body.appendChild(c),c.appendChild(e)),this.data.each(function(a){a&&(e.innerHTML=this.Ek(a,d,0),a.$height=Math.max(e.scrollHeight,this.s.rowHeight))},this),e=webix.html.remove(e),c&&webix.html.remove(c),b||this.refresh()}}),webix.extend(webix.ui.datatable,{math_setter:function(a){return a&&this.en(),a},fn:"$",en:function(){webix.env.strict||(this.data.attachEvent("onStoreUpdated",webix.bind(this.gn,this)),this.data.attachEvent("onStoreLoad",webix.bind(this.hn,this)),this.attachEvent("onStructureLoad",this.hn))},gn:function(a,b,c){if(a&&"delete"!=c&&"paint"!=c){"add"==c&&this.pn(b);for(var d=0;d<this.fj.length;d++)this.jn(a,this.fj[d].id,"add"!==c)}},jn:function(a,b,c){var d,e=this.getItem(a);if(c===!0?d=e[this.fn+b]||e[b]:(d=e[b],this.kn={}),"undefined"!=typeof d&&null!==d&&(d.length>0&&"="===d.substr(0,1)?(("undefined"==typeof e[this.fn+b]||c!==!0)&&(e[this.fn+b]=e[b]),e[b]=this.ln(d,a,b)):("undefined"!=typeof e[this.fn+b]&&delete e[this.fn+b],this.mn(a,b)),"undefined"!=typeof e.depends&&"undefined"!=typeof e.depends[b]))for(var f in e.depends[b]){var g=e.depends[b][f][0]+"__"+e.depends[b][f][1];"undefined"==typeof this.kn[g]&&(this.kn[g]=!0,this.jn(e.depends[b][f][0],e.depends[b][f][1],!0))}},nn:function(a,b){var c=this.getItem(a);"undefined"!=typeof c[this.fn+b]&&(c[b]=c[this.fn+b])},hn:function(){if(this.fj&&this.count()){this.pn();for(var a=0;a<this.fj.length;a++){var b=this.columnId(a);this.data.each(function(a){this.jn(a.id,b)},this)}}},pn:function(a){for(var b=0;b<this.fj.length;b++)if(this.fj[b].math){var c=this.columnId(b),d="="+this.fj[b].math;d=d.replace(/\$r/g,"#$r#"),d=d.replace(/\$c/g,"#$c#"),a?a[c]=this.qn(d,a.id,c):this.data.each(function(a){a[c]=this.qn(d,a.id,c)},this)}},qn:function(a,b,c){return webix.template(a)({$r:b,$c:c})},rn:function(a,b){var c;if(!this.exists(a))return"#out_of_range";c=this.getItem(a);var d=c[this.fn+b]||c[b]||0;return d=d.toString(),"="!==d.substring(0,1)?d:("undefined"==typeof c[this.fn+b]&&(c[this.fn+b]=c[b]),c[b]=this.ln(d,a,b,!0),c[b])},ln:function(a,b,c,d){if(d===!0){if(this.sn(b,c))return"#selfreference"}else this.tn();this.un(b,c),this.getItem(b),a=a.substring(1);var e=this.vn(a),f=this.wn(a);if(e)a=this.xn(a,f),a=this.yn(a,e);else{a=this.xn(a,f,!0);var f=[]}var g=this.zn(a);if(g!==!1)return g;this.An(b,c),this.mn(b,c);for(var h=0;h<f.length;h++)this.Bn([b,c],f[h]);var g=this.zn(a);if(g!==!1)return g;if(!a)return a;a=this.Cn(a);var g=this.zn(a);return g!==!1?g:a},vn:function(a){var b=/(\+|\-|\*|\/)/g,c=a.replace(/\[[^)]*?\]/g,"").match(b);return c},wn:function(a){var b=/\[([^\]]+),([^\]]+)\]/g,c=a.match(b);null===c&&(c=[]);for(var d=0;d<c.length;d++){var e=c[d],f=e;e=e.substr(1,e.length-2),e=e.split(","),e[0]=this.Dn(e[0]),e[1]=this.Dn(e[1]),":"===e[0].substr(0,1)&&(e[0]=this.getIdByIndex(e[0].substr(1))),":"===e[1].substr(0,1)&&(e[1]=this.columnId(e[1].substr(1))),e[2]=f,c[d]=e}return c},xn:function(a,b,c){var d="(",e=")";c&&(d=e="");for(var f=0;f<b.length;f++){var g=b[f],h=this.rn(g[0],g[1]);isNaN(h)&&(h='"'+h+'"'),a=a.replace(g[2],d+h+e)}return a},yn:function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=this.En(a,e);c.push(f[0]),a=f[1]}c.push(a);for(var d=0;d<c.length;d++){var g=this.Dn(c[d]);c[d]=g}for(var h="",d=0;d<c.length-1;d++)h+=c[d]+b[d];return h+=c[c.length-1]},Cn:function(expr){try{webix.temp_value="",expr="webix.temp_value = "+expr,eval(expr)}catch(ex){webix.temp_value=""}var result=webix.temp_value;return webix.temp_value=null,result.toString()},En:function(a,b){var c=a.indexOf(b),d=a.substr(0,c),e=a.substr(c+1);return[d,e]},Dn:function(a){return a=a.replace(/^ */g,""),a=a.replace(/ *$/g,"")},tn:function(){this.Fn=[]},un:function(a,b){this.Fn[a+"__"+b]=!0},An:function(a,b){"undefined"!=typeof this.Fn[a+"__"+b]&&delete this.Fn[a+"__"+b]},sn:function(a,b){return"undefined"!=typeof this.Fn[a+"__"+b]?!0:!1},Bn:function(a,b){var c=this.getItem(b[0]);"undefined"==typeof c.depends&&(c.depends={}),"undefined"==typeof c.depends[b[1]]&&(c.depends[b[1]]={}),c.depends[b[1]][a[0]+"__"+a[1]]=a,c=this.getItem(a[0]),"undefined"==typeof c.triggers&&(c.triggers={}),"undefined"==typeof c.triggers[a[1]]&&(c.triggers[a[1]]={}),c.triggers[a[1]][b[0]+"__"+b[1]]=b},mn:function(a,b){if(this.exists(a,b)){var c=this.getItem(a,b);if("undefined"!=typeof c.triggers)for(var d in c.triggers[b]){var e=c.triggers[b][d];delete this.getItem(e[0]).depends[e[1]][a+"__"+b]}}},zn:function(a){var b=/#\w+/,c=a.match(b);return null!==c&&c.length>0?c[0]:!1}}),webix.extend(webix.ui.datatable,{ii:function(a){return this.getColumnConfig(a.column).editor},getEditor:function(a,b){return a?(1==arguments.length&&(b=a.column,a=a.row),(this.ai[a]||{})[b]):this.di},si:function(a){for(var b in this.ai){var c=this.ai[b];for(var d in c)"$count"!=d&&a.call(this,c[d])}},ji:function(a,b,c){var d=a.row,e=a.column,f=b.config=this.getColumnConfig(e);c!==!1&&this.showCell(d,e);var g=b.render();b.$inline&&(g=this.mi(a)),b.node=g;var h,i=this.getItem(d),j=f.editFormat;return this.s.editMath&&(h=i["$"+e]),h=h||i[e],webix.isUndefined(h)&&(h=""),b.setValue(j?j(h):h,i),b.value=i[e],this.ni(a,b),b.$inline||this.oi(a,g,!0),b.afterRender&&b.afterRender(),this.s.liveValidation&&(webix.event(b.node,"keyup",this.Gn(a,this)),this.validateEditor(a)),g},Gn:function(a,b){return function(){b.validateEditor(a)}},ti:function(a,b){var c=this.getColumnConfig(a.column).editParse,d=this.getItem(a.row);return d[a.column]=c?c(b):b,this.s.editMath&&delete d["$"+a.column],a.row},ni:function(a,b){var c=this.ai[a.row]=this.ai[a.row]||{};c.$count=(c.$count||0)+1,b.row=a.row,b.column=a.column,this.di=c[a.column]=b,this.Eb++,this.Hn=this.getScrollState()},qi:function(a){this.di==a&&(this.di=0),a.destroy&&a.destroy();var b=this.ai[a.row];delete b[a.column],b.$count--,b.$count||delete this.ai[a.row],this.Eb--},ei:function(a,b){var c=this.ai[a];if(c){this.ai[b]=c,delete this.ai[a];for(var d in c)c[d].row=b}},pi:function(a){var b=this.getColumnConfig(a.column);if(b&&b.node&&b.attached){var c=this.getIndexById(a.row);if(c>=b.qk&&c<b.Kk)return b.node.childNodes[c-b.qk]}return 0},editCell:function(a,b,c,d){return b=b||this.s.columns[0].id,webix.EditAbility.edit.call(this,{row:a,column:b},c,d)},editRow:function(a){a&&a.row&&(a=a.row);var b=!1;this.eachColumn(function(c){this.edit({row:a,column:c},b,!b),b=!0})},editColumn:function(a){a&&a.column&&(a=a.column);var b=!1;this.eachRow(function(c){this.edit({row:c,column:a},b,!b),b=!0})},eachRow:function(a,b){var c=this.data.order;b&&(c=this.data.jf||c);for(var d=0;d<c.length;d++)a.call(this,c[d])},eachColumn:function(a,b){for(var c in this.Aj){var d=this.Aj[c];a.call(this,d.id,d)}if(b)for(var c in this.am){var d=this.am[c];a.call(this,d.id,d)}},vi:function(a){if(this.getSelectedId){var b=this.getSelectedId(!0);if(1==b.length)return this.hl(a),!1}},Gb:function(a,b){if(this.s.editable&&!this.Eb){if(b.target&&"INPUT"==b.target.tagName)return!0;var c=this.getSelectedId(!0);if(1==c.length)return this.editNext(a,c[0]),!1}return!0},ui:function(a,b,c){var d=this.getIndexById(a.row),e=this.getColumnIndex(a.column),f=this.data.order,g=this.fj;if(c)for(var h=d;h<f.length;h++){for(var i=e+1;i<g.length;i++){var j={row:f[h],column:g[i].id};if(b.call(this,j))return j}e=-1}else for(var h=d;h>=0;h--){for(var i=e-1;i>=0;i--){var j={row:f[h],column:g[i].id};if(b.call(this,j))return j}e=g.length}return null},In:function(){this.Eb&&(this.Jn?this.Jn=!1:(this.Wj.scrollTo(this.getScrollState().y+this.Vf.childNodes[1].firstChild.scrollTop),this.Vf.childNodes[1].firstChild.scrollTop=0,this.Jn=!0))},Kn:function(){this.Eb&&this.Zj.scrollTo(this.Vf.childNodes[1].scrollLeft)},gi:function(){this.attachEvent("onScrollY",this.Ln),this.attachEvent("onScrollX",this.Ln),this.attachEvent("onScrollY",this.$s),this.attachEvent("onColumnResize",function(){this.editStop()}),this.attachEvent("onAfterFilter",function(){this.editStop()}),this.attachEvent("onRowResize",function(){this.editStop()}),this.Vf.childNodes[1].firstChild.onscroll=webix.bind(this.In,this),this.Vf.childNodes[1].onscroll=webix.bind(this.Kn,this)},Ln:function(){if(this.Eb){var a=this.Hn;this.Hn=this.getScrollState();var b=this.Hn.y-a.y;this.si(function(a){if(a.getPopup){var c=this.getItemNode(a);a.getPopup().show(c?c:{x:-1e4,y:-1e4})}else a.$inline||(a.node.top-=b,a.node.style.top=a.node.top+"px")})}}}),webix.extend(webix.ui.datatable,webix.EditAbility),webix.extend(webix.ui.datatable,{$init:function(){this.kz(),this.attachEvent("onStructureLoad",this.Nn)},kz:function(){this.am={},this.bm=webix.toArray(),this.Mn=[0,0]},Nn:function(){for(var a=this.fj,b=a.length-1;b>=0;b--)a[b].hidden?this.hideColumn(a[b].id,!0,!0):a[b].batch&&this.config.visibleBatch&&a[b].batch!=this.config.visibleBatch&&this.hideColumn(a[b].id,!0,!0)},moveColumn:function(a,b){var c=this.getColumnIndex(a);if(c!=b){var d=this.s.columns,e=d.splice(c,1),f=b-(b>c?1:0);webix.PowerArray.insertAt.call(d,e[0],f),this.On()}},qz:function(a){this.rz();for(var b=this.getColumnConfig(a),c=1,d=0;d<b.header.length;d++){var e=b.header[d];e&&(c=Math.max(c,1*(e.$colspan||e.colspan||0)))}for(var f=this.bm,g=f.find(b.id),h=[],d=0;c>d;d++)h.push(f[g+d]||a);return h},rz:function(){var a=this.bm,b=this.s.columns;if(!a.length){for(var c=0;c<b.length;c++)a[c]=b[c].id;this.Mn=[this.s.leftSplit,this.Fj]}},isColumnVisible:function(a){return!this.am[a]},hideColumn:function(a,b,c){var d=this.s.columns,e=this.bm,f=this.am;if(b!==!1){var g=this.getColumnIndex(a);if(-1==g)return;this.rz(),g<this.s.leftSplit&&this.s.leftSplit--,g>=this.Fj?this.s.rightSplit--:this.Fj--,this.xt(g,d[g],0),this.vk(g);var h=f[a]=d.splice(g,1)[0];h.qk=-1,delete this.Aj[a]}else{var h=f[a];if(!h)return;for(var i=null,j=0;j<e.length&&e[j]!=a;j++)f[e[j]]||(i=e[j]);var g=i?this.getColumnIndex(i)+1:0;webix.PowerArray.insertAt.call(d,h,g),this.xt(g,h,1),delete h.hidden,j<this.Mn[0]&&this.s.leftSplit++,
j>=this.Mn[1]?this.s.rightSplit++:this.Fj++,delete f[a],this.Aj[a]=h}c||this.On()},xt:function(a,b,c){for(var d=b.header.length-1;d>=0;d--){var e=b.header[d];if(null===e){for(var f=!1,g=d-1;g>=0;g--)b.header[g]&&b.header[g].rowspan>d-g&&(f=!0);if(f)continue;for(var h=a;h>=0;h--){var i=this.fj[h];if(null!==i.header[d]){i.header[d].colspan+c>a-h&&(i.header[d].colspan-=c?-1:1);break}}}else e.colspan&&0===c&&(e.$colspan=e.colspan,e.colspan=1)}},refreshColumns:function(a,b){(a&&a!=this.config.columns||b)&&(this.kz(),this.ij=[]),this.Aj={};for(var c=0;c<this.fj.length;c++){var d=this.fj[c];this.Aj[d.id]=d,d.attached=d.node=null}for(var c=0;3>c;c++)this.Vf.childNodes[c].firstChild.innerHTML="";this.fj=this.config.columns=a||this.config.columns,this.tj=0,this.rj(),this.callEvent("onStructureUpdate"),this.sk(),this.render()},On:function(){this.tj=0,this.callEvent("onStructureUpdate"),this.uj(),this.render()},showColumn:function(a){return this.hideColumn(a,!1)},showColumnBatch:function(a,b){var c="undefined"!=typeof b;b=b!==!1,this.eachColumn(function(d,e){if(e.batch){var f=this.am[e.id];b||(f=!f),e.batch==a&&f?this.hideColumn(e.id,!b,!0):c||e.batch==a||f||this.hideColumn(e.id,b,!0)}},!0),this.On()}}),webix.extend(webix.ui.datatable,{moveSelection:function(a,b){var c=this.getSelectedId(!0),d=c.length-1;if(0>d){if("down"==a||"right"==a)a="top";else{if("up"!=a&&"left"!=a)return;a="bottom"}d=0,c=[{row:1,column:1}]}if(d>=0){var e=c[d].row,f=c[d].column,g=this.s.multiselect?b:!1;if("top"==a||"bottom"==a){if(e&&("top"==a?e=this.data.getFirstId():"bottom"==a&&(e=this.data.getLastId())),f){var d=0;"bottom"==a&&(d=this.config.columns.length-1),f=this.columnId(d)}}else if("up"==a||"down"==a||"pgup"==a||"pgdown"==a){if(e){var d=this.getIndexById(e),h="pgup"==a||"pgdown"==a?Math.round(this.Vj/this.s.rowHeight):1;"up"==a||"pgup"==a?d-=h:("down"==a||"pgdown"==a)&&(d+=h),0>d&&(d=0),d>=this.data.order.length&&(d=this.data.order.length-1),e=this.getIdByIndex(d),!e&&this.s.pager&&this.showItemByIndex(d)}}else{if("right"!=a&&"left"!=a)return;if(f&&"row"!=this.config.select){var d=this.getColumnIndex(f);if("right"==a?d++:"left"==a&&d--,0>d||d>=this.config.columns.length)return;f=this.columnId(d)}else{if(this.open&&"right"==a)return this.open(e);if(this.close&&"left"==a)return this.close(e)}}e&&(this.showCell(e,f),this.hl({row:e,column:f},g))}return!1}}),webix.extend(webix.ui.datatable,webix.KeysNavigation),webix.extend(webix.ui.datatable,webix.DataMove),webix.extend(webix.ui.datatable,{$dragHTML:function(a){for(var b=this.bc-this.oj,c="<div class='webix_dd_drag' style='width:"+(b-2)+"px;'>",d=this.s.columns,e=0;e<d.length;e++){var f=this.Ek(a,d[e]);c+="<div style='width:"+d[e].width+"px;'>"+f+"</div>"}return c+"</div>"},getHeaderNode:function(a,b){var c=this.getColumnIndex(a);b=b||0;for(var d=this.I.childNodes[1].getElementsByTagName("TR")[b+1].childNodes,e=0;e<d.length;e++)if(d[e].getAttribute("column")==c)return d[e].firstChild;return null},getItemNode:function(a){if(a&&!a.header){var b=a.row||a,c=this.getIndexById(b),d=this.Sj();if(c<d[0]&&c>d[1])return;var e=this.Xj(),f=this.s.leftSplit?0:e[0];if(a.column&&(f=this.getColumnIndex(a.column),f<this.Fj&&f>=this.s.leftSplit&&(f<e[0]||f>e[1])))return;var g=this.s.columns[f];if(g.attached&&g.node)return g.node.childNodes[c-d[0]]}},Zg:function(a,b){return!a||a.header&&b?0:this.data.order[a.rind]},dragColumn_setter:function(a){var b;"order"==a?b={$drag:webix.bind(function(a,c){var d=this.locate(c);if(!d||!this.callEvent("onBeforeColumnDrag",[d.column,c]))return!1;webix.DragControl.Gd={from:b,start:d,custom:"column_dnd"};var e=this.getColumnConfig(d.column);return this.Qn=webix.html.posRelative(c),this.Rn=e.width,"<div class='webix_dd_drag_column' style='width:"+e.width+"px'>"+(e.header[0].text||"&nbsp;")+"</div>"},this),$dragPos:webix.bind(function(a,b,c){var d=webix.DragControl.getContext(),e=webix.html.offset(this.$view);c.style.display="none";var f=document.elementFromPoint(a.x,e.y+1),g=f?this.locate(f):null,h=webix.DragControl.getContext().start.column;if(g&&g.column!=h&&(!this.Sn||g.column!=this.Yg)&&"column_dnd"==d.custom&&webix.$$(f)==this){if(!this.callEvent("onBeforeColumnDropOrder",[h,g.column,b]))return;var i=this.getColumnIndex(h),j=this.getColumnIndex(g.column);b.touches&&(this.wy=b.target,this.wy.style.display="none",this.$view.parentNode.appendChild(this.wy)),this.moveColumn(h,j+(j>i?1:0)),this.Yg=g.column,this.Sn=!0}if(g&&g.column==h&&(this.Sn=!1),c.style.display="block",a.x=a.x-this.Qn.x,a.y=e.y,a.x<e.x)a.x=e.x;else{var k=e.x+this.$view.offsetWidth-this.oj-this.Rn;a.x>k&&(a.x=k)}webix.DragControl.Ed=!0},this),$dragDestroy:webix.bind(function(a,b){webix.html.remove(b),this.wy&&webix.html.remove(this.wy);var c=webix.DragControl.getContext().start;this.callEvent("onAfterColumnDropOrder",[c.column,this.Yg,a])},this)}:a&&(b={ah:!0,$drag:webix.bind(function(a,c){var d=this.locate(c);if(!d||!this.callEvent("onBeforeColumnDrag",[d.column,c]))return!1;webix.DragControl.Gd={from:b,start:d,custom:"column_dnd"};for(var e=this.getColumnConfig(d.column).header,f="&nbsp;",g=0;g<e.length;g++)if(e[g]){f=e[g].text;break}return"<div class='webix_dd_drag_column'>"+f+"</div>"},this),$drop:webix.bind(function(a,b,c){var d=c;c.touches&&this.Tn&&(d=this.Tn);var e=this.locate(d);if(!e)return!1;var f=webix.DragControl.getContext().start.column;if(f!=e.column){if(!this.callEvent("onBeforeColumnDrop",[f,e.column,c]))return;var g=this.getColumnIndex(f),h=this.getColumnIndex(e.column);this.moveColumn(f,h+(h>g?1:0)),this.callEvent("onAfterColumnDrop",[f,e.column,c])}},this),$dragIn:webix.bind(function(a,c,d){var e=webix.DragControl.getContext();if("column_dnd"!=e.custom||e.from!=b)return!1;for(var f=d.target||d.srcElement;-1==(f.className||"").indexOf("webix_hcell");)if(f=f.parentNode,!f)return;return f!=this.Tn&&(this.Tn&&webix.html.removeCss(this.Tn,"webix_dd_over_column"),webix.html.addCss(f,"webix_dd_over_column")),this.Tn=f},this),$dragDestroy:webix.bind(function(a,b){this.Tn&&webix.html.removeCss(this.Tn,"webix_dd_over_column"),webix.html.remove(b)},this)}),a&&(webix.DragControl.addDrag(this.I,b),webix.DragControl.addDrop(this.I,b,!0))}}),webix.extend(webix.ui.datatable,webix.DragItem),webix.extend(webix.ui.datatable,{Te:function(a,b){this.Un(a);for(var c in b)this.addCellCss(a,c,"webix_invalid_cell");this.addCss(a,"webix_invalid")},Qe:function(a){this.Un(a),this.removeCss(a,"webix_invalid")},Un:function(a){var b=(this.getItem(a),this.data.getMark(a,"$cellCss"));if(b)for(var c in b)b[c]=b[c].replace("webix_invalid_cell","").replace("  "," ")},addRowCss:function(a,b,c){this.addCss(a,b,c)},removeRowCss:function(a,b,c){this.removeCss(a,b,c)},addCellCss:function(a,b,c,d){var e=this.data.getMark(a,"$cellCss"),f=e||{},g=f[b]||"";f[b]=g.replace(c,"").replace("  "," ")+" "+c,e||this.data.addMark(a,"$cellCss",!1,f,!0),d||this.refresh(a)},removeCellCss:function(a,b,c,d){var e=this.data.getMark(a,"$cellCss");if(e){var f=e[b]||"";f&&(e[b]=f.replace(c,"").replace("  "," ")),d||this.refresh(a)}}}),webix.extend(webix.ui.datatable,webix.ValidateCollection),webix.TreeTableClick={},webix.TreeTablePaste={insert:function(a){for(var b=this.getSelectedId(!0,!0),c=0;c<a.length;c++){for(var d={},e=0;e<this.s.columns.length;e++)d[this.s.columns[e].id]=a[c][e]||"";!webix.isUndefined(d.id)&&this.exists(d.id)&&(d.id=webix.uid()),this.add(d,null,b[0])}}},webix.protoUI({name:"treetable",$init:function(){webix.extend(this.data,webix.TreeStore,!0),webix.extend(this.type,webix.TreeType),webix.extend(this,webix.TreeDataMove,!0);for(var a in webix.TreeClick)this.on_click[a]||(this.on_click[a]=this.Vn(webix.TreeClick[a]));this.type.treetable=webix.template("{common.space()}{common.icon()} {common.folder()}"),this.type.treecheckbox=function(a){return a.indeterminate&&!a.nocheckbox?"<div class='webix_tree_checkbox webix_indeterminate'></div>":webix.TreeType.checkbox.apply(this,arguments)},this.data.provideApi(this,!0)},Xg:!1,Vn:function(a){return function(b,c){return c=c.row,a.call(this,b,c)}},getState:function(){var a=webix.DataState.getState.call(this);return webix.extend(a,webix.TreeAPI.getState.call(this)),a},setState:function(a){webix.TreeAPI.setState.call(this,a)&&webix.DataState.setState.call(this,a)},clipboard_setter:function(a){return webix.extend(this.rh,webix.TreeTablePaste),webix.TablePaste.clipboard_setter.call(this,a)}},webix.TreeAPI,webix.TreeStateCheckbox,webix.TreeDataLoader,webix.ui.datatable),webix.Canvas=webix.proto({$init:function(a){this.Wn=[],this.Xn=a.name,this.tg=webix.toNode(a.container||a);var b=a.width*(window.devicePixelRatio||1),c=a.height*(window.devicePixelRatio||1),d=a.style||"";d+=";width:"+a.width+"px;height:"+a.height+"px;",this.Yn(a.name,d,b,c)},Yn:function(a,b,c,d){return this.Zn=webix.html.create("canvas",{width:c,height:d,canvas_id:a,style:b||""}),this.tg.appendChild(this.Zn),this.Zn.getContext||webix.env.isIE&&(webix.require("legacy/excanvas/excanvas.js",!0),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this.Zn)),this.Zn},getCanvas:function(a){var b=(this.Zn||this.Yn(this.w)).getContext(a||"2d");return this.$n||(this.$n=!0,b.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),b},_n:function(a,b){this.Zn&&(this.Zn.setAttribute("width",a*(window.devicePixelRatio||1)),this.Zn.setAttribute("height",b*(window.devicePixelRatio||1)),this.Zn.style.width=a+"px",this.Zn.style.height=b+"px",this.$n=!1)},renderText:function(a,b,c,d,e){if(c){e&&(e=Math.max(e,0)),b&&(b=Math.max(b,0));var f=webix.html.create("DIV",{"class":"webix_canvas_text"+(d?" "+d:""),style:"left:"+a+"px; top:"+b+"px;"},c);return this.tg.appendChild(f),this.Wn.push(f),e&&(f.style.width=e+"px"),f}},renderTextAt:function(a,b,c,d,e,f,g){var h=this.renderText.call(this,c,d,e,f,g);return h&&(a&&(h.style.top="middle"==a?parseInt(d-h.offsetHeight/2,10)+"px":d-h.offsetHeight+"px"),b&&(h.style.left="left"==b?c-h.offsetWidth+"px":parseInt(c-h.offsetWidth/2,10)+"px")),h},clearCanvas:function(a){var b,c=[];for(b=0;b<this.Wn.length;b++)this.tg.removeChild(this.Wn[b]);if(this.Wn=[],!a&&this.tg.t){for(c=this.ao();c.length;)c[0].parentNode.removeChild(c[0]),c.splice(0,1);c=null,this.tg.t.getElementsByTagName("AREA").length||(this.tg.t.parentNode.removeChild(this.tg.t),this.tg.t=null)}this.getCanvas().clearRect(0,0,this.Zn.offsetWidth,this.Zn.offsetHeight)},toggleCanvas:function(){this.bo("none"==this.Zn.style.display)},showCanvas:function(){this.bo(!0)},hideCanvas:function(){this.bo(!1)},bo:function(a){var b,c;for(c=0;c<this.Wn.length;c++)this.Wn[c].style.display=a?"":"none";if(this.tg.t)for(b=this.ao(),c=0;c<b.length;c++)a?b[c].removeAttribute("disabled"):b[c].setAttribute("disabled","true");this.Zn.style.display=a?"":"none"},ao:function(){var a,b,c=[];for(a=this.tg.t.getElementsByTagName("AREA"),b=0;b<a.length;b++)a[b].getAttribute("userdata")==this.Xn&&c.push(a[b]);return c}}),webix.color={co:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],toHex:function(a,b){a=parseInt(a,10);for(var c="";a>0;)c=this.co[a%16]+c,a=Math.floor(a/16);for(;c.length<b;)c="0"+c;return c},hexToDec:function(a){return parseInt(a,16)},toRgb:function(a){var b,c,d,e;return"string"!=typeof a?(b=a[0],c=a[1],d=a[2]):-1!=a.indexOf("rgb")?(e=a.substr(a.indexOf("(")+1,a.lastIndexOf(")")-a.indexOf("(")-1).split(","),b=e[0],c=e[1],d=e[2]):("#"==a.substr(0,1)&&(a=a.substr(1)),b=this.hexToDec(a.substr(0,2)),c=this.hexToDec(a.substr(2,2)),d=this.hexToDec(a.substr(4,2))),b=parseInt(b,10)||0,c=parseInt(c,10)||0,d=parseInt(d,10)||0,(0>b||b>255)&&(b=0),(0>c||c>255)&&(c=0),(0>d||d>255)&&(d=0),[b,c,d]},hsvToRgb:function(a,b,c){var d,e,f,g,h,i,j,k;switch(d=Math.floor(a/60)%6,e=a/60-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=0,j=0,k=0,d){case 0:i=c,j=h,k=f;break;case 1:i=g,j=c,k=f;break;case 2:i=f,j=c,k=h;break;case 3:i=f,j=g,k=c;break;case 4:i=h,j=f,k=c;break;case 5:i=c,j=f,k=g}return i=Math.floor(255*i),j=Math.floor(255*j),k=Math.floor(255*k),[i,j,k]},rgbToHsv:function(a,b,c){var d,e,f,g,h,i,j,k;return d=a/255,e=b/255,f=c/255,g=Math.min(d,e,f),h=Math.max(d,e,f),j=0,i=0===h?0:1-g/h,k=h,h==g?j=0:h==d&&e>=f?j=60*(e-f)/(h-g)+0:h==d&&f>e?j=60*(e-f)/(h-g)+360:h==e?j=60*(f-d)/(h-g)+120:h==f&&(j=60*(d-e)/(h-g)+240),[j,i,k]}},webix.HtmlMap=webix.proto({$init:function(a){this.ad="map_"+webix.uid(),this.U=a,this.eo=[],this.sA=[]},addRect:function(a,b,c){this.fo(a,"RECT",b,c)},addPoly:function(a,b,c){this.fo(a,"POLY",b,c)},fo:function(a,b,c,d){var e="";4==arguments.length&&(e="userdata='"+d+"'"),this.eo.push("<area "+this.U+"='"+a+"' shape='"+b+"' coords='"+c.join()+"' "+e+"></area>"),this.sA.push({index:d,points:c})},addSector:function(a,b,c,d,e,f,g,h){var i=[];i.push(d),i.push(Math.floor(e*g));for(var j=b;c>j;j+=Math.PI/18)i.push(Math.floor(d+f*Math.cos(j))),i.push(Math.floor((e+f*Math.sin(j))*g));return i.push(Math.floor(d+f*Math.cos(c))),i.push(Math.floor((e+f*Math.sin(c))*g)),i.push(d),i.push(Math.floor(e*g)),this.addPoly(a,i,h)},render:function(a){var b=webix.html.create("DIV");b.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",a.appendChild(b);var c=webix.env.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";b.innerHTML="<map id='"+this.ad+"' name='"+this.ad+"'>"+this.eo.join("\n")+"</map><img "+c+" class='webix_map_img' usemap='#"+this.ad+"'>",a.t=b,this.eo=[]}}),webix.protoUI({name:"chart",$init:function(a){if(this.go=[this.s],this.ho=[],this.w.className+=" webix_chart",this.$ready.push(this.Mi),a.preset&&this.io(a),a.series){var b=a.series;delete a.series,a.series=b}this.attachEvent("onMouseMove",this.tA),this.data.provideApi(this,!0)},Mi:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render()},this))},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:.5,barWidth:30,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto",scale:"linear"},ad:"webix_area_id",on_click:{webix_chart_legend_item:function(a,b,c){var d=c.getAttribute("series_id");if(this.callEvent("onLegendClick",[a,d,c])){var e=this.s,f=e.legend.values,g=f&&f[d].toggle||e.legend.toggle;"undefined"!=typeof d&&this.go.length>1&&g&&(-1!=c.className.indexOf("hidden")?this.showSeries(d):this.hideSeries(d))}}},on_dblclick:{},on_mouse_move:{},locate:function(a){return webix.html.locate(a,this.ad)},$setSize:function(a,b){if(webix.ui.view.prototype.$setSize.call(this,a,b)){for(var c in this.canvases)this.canvases[c]._n(this.bc,this.dc);this.render()}},type_setter:function(a){return"undefined"==typeof this.s.offset&&(this.s.offset=!("area"==a||"stackedArea"==a)),"radar"!=a||this.s.yAxis||this.define("yAxis",{}),"scatter"==a&&(this.s.yAxis||this.define("yAxis",{}),this.s.xAxis||this.define("xAxis",{})),a},removeAllSeries:function(){this.clearCanvas(),this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko),this.ko=null),this.canvases&&(this.canvases={}),this.w.innerHTML="";for(var a=0;a<this.go.length;a++)this.go[a].tooltip&&this.go[a].tooltip.destructor();this.go=[]},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var a in this.canvases)this.canvases[a].clearCanvas()},render:function(){var a,b,c,d,e;if(this.isVisible(this.s.id)&&this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(b in this.canvases)this.canvases[b].clearCanvas();else this.canvases={};if(this.s.legend&&(this.canvases.legend||(this.canvases.legend=this.lo("legend")),this.mo(this.data.getRange(),this.bc,this.dc)),a=this.no(this.bc,this.dc),this.eo=d=new webix.HtmlMap(this.ad),e=this.s,this.go)for(c=this.oo(),b=0;b<this.go.length;b++)this.s=this.go[b],this.canvases[b]||(this.canvases[b]=this.lo(b,"z-index:"+(2+b))),this["$render_"+this.s.type](this.canvases[b].getCanvas(),c,a.start,a.end,b,d);d.render(this.w),this.w.lastChild.style.zIndex=100,this.po(this.w.lastChild,a),this.callEvent("onAfterRender",[]),this.s=e}},po:function(a,b){var c={};c.left=b.start.x,c.top=b.start.y,c.width=b.end.x-b.start.x,c.height=b.end.y-b.start.y;for(var d in c)a.style[d]=c[d]+"px"},oo:function(){var a,b,c,d,e,f,g,h,i,j;if(d=this.data.getRange(),a=-1!=this.s.type.toLowerCase().indexOf("barh")?"yAxis":"xAxis",b=this.s[a],b&&b.units&&"object"==typeof b.units){if(c=b.units,h=[],"undefined"!=typeof c.start&&"undefined"!=typeof c.end&&"undefined"!=typeof c.next)for(g=c.start;g<=c.end;)h.push(g),g=c.next.call(this,g);else"[object Array]"===Object.prototype.toString.call(c)&&(h=c);if(f=[],h.length){for(i=b.value,j={},e=0;e<d.length;e++)j[i(d[e])]=e;for(e=0;e<h.length;e++)"undefined"!=typeof j[h[e]]?(d[j[h[e]]].$unit=h[e],f.push(d[j[h[e]]])):f.push({$unit:h[e]})}return f}return d},series_setter:function(a){if("object"!=typeof a);else{this.e(a.length?a[0]:a),this.go=[this.s];for(var b=1;b<a.length;b++)this.addSeries(a[b])}return a},value_setter:webix.template,xValue_setter:webix.template,yValue_setter:function(a){this.define("value",a)},alpha_setter:webix.template,label_setter:webix.template,lineColor_setter:webix.template,borderColor_setter:webix.template,pieInnerText_setter:webix.template,gradient_setter:function(a){return"function"!=typeof a&&a&&a===!0&&(a="light"),a},colormap:{RAINBOW:function(a){var b=Math.floor(this.getIndexById(a.id)/this.count()*1536);return 1536==b&&(b-=1),this.qo[Math.floor(b/256)](b%256)}},color_setter:function(a){return this.colormap[a]||webix.template(a)},fill_setter:function(a){return a&&"0"!=a?webix.template(a):!1},io:function(a){this.define("preset",a.preset),delete a.preset},preset_setter:function(a){var b,c,d;if(this.defaults=webix.extend({},this.defaults),d=this.presets[a],"object"==typeof d){for(b in d)if("object"==typeof d[b])if(this.defaults[b]&&"object"==typeof this.defaults[b]){this.defaults[b]=webix.extend({},this.defaults[b]);for(c in d[b])this.defaults[b][c]=d[b][c]}else this.defaults[b]=webix.extend({},d[b]);else this.defaults[b]=d[b];return a}return!1},legend_setter:function(a){return a?("object"!=typeof a&&(a={template:a}),this.E(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this.s.type.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),a.template=webix.template(a.template),a):(this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),!1)},item_setter:function(a){"object"!=typeof a&&(a={color:a,borderColor:a}),this.E(a,webix.extend({},this.defaults.item));var b=["alpha","borderColor","color","radius"];return this.ro(b,a),a},line_setter:function(a){return"object"!=typeof a&&(a={color:a}),a=webix.extend(a,this.defaults.line),a.color=webix.template(a.color),a},padding_setter:function(a){return"object"!=typeof a&&(a={left:a,right:a,top:a,bottom:a}),this.E(a,{left:50,right:20,top:35,bottom:40}),a},xAxis_setter:function(a){if(!a)return!1;"object"!=typeof a&&(a={template:a}),this.E(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0});var b=["lineColor","template","lines"];return this.ro(b,a),this.so=webix.extend({},a),a},yAxis_setter:function(a){this.E(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});var b=["lineColor","template","lines","bg"];return this.ro(b,a),this.to=webix.extend({},a),a},ro:function(a,b){for(var c=0;c<a.length;c++)b[a[c]]=webix.template(b[a[c]])},lo:function(a,b,c){return new webix.Canvas({container:c||this.w,name:a,style:b||"",width:this.bc,height:this.dc})},uo:function(a,b,c,d,e,f){var g=0;return this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),g=this.vo(this.canvases.y.getCanvas(),a,b,c,d,e)),this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),this.wo(this.canvases.x.getCanvas(),a,b,c,f,g)),g},wo:function(a,b,c,d,e,f){for(var g,h=c.x-.5,i=parseInt(f?f:d.y,10)+.5,j=d.x,k=!0,l=0;l<b.length;l++){this.s.offset===!0?g=h+e/2+l*e:(g=l==b.length-1?d.x:h+l*e,k=!!l),g=Math.ceil(g)-.5;var m="auto"!=this.s.origin&&"bar"==this.s.type&&parseFloat(this.s.value(b[l]))<this.s.origin;this.xo(g,i,b[l],k,m),(this.s.offset||l)&&this.s.xAxis.lines.call(this,b[l])&&this.yo(a,g,d.y,c.y,b[l])}this.canvases.x.renderTextAt(!0,!1,h,d.y+this.s.padding.bottom-3,this.s.xAxis.title,"webix_axis_title_x",d.x-c.x),this.zo(a,h,i,j,i,this.s.xAxis.color,1),this.s.xAxis.lines.call(this,{})&&this.s.offset&&this.zo(a,j+.5,d.y,j+.5,c.y+.5,this.s.xAxis.color,.2)},vo:function(a,b,c,d,e,f){var g,h={};if(this.s.yAxis){var i=c.x-.5,j=d.y,k=c.y,l=d.y;if(this.s.yAxis.step&&(g=parseFloat(this.s.yAxis.step)),"undefined"==typeof this.to.step||"undefined"==typeof this.to.start||"undefined"==typeof this.to.end?(h=this.Ao(e,f),e=h.start,f=h.end,g=h.step,this.s.yAxis.end=f,this.s.yAxis.start=e):"logarithmic"==this.config.scale&&(this.Bo=!0),this.Co(c,d),0!==g){if(f==e)return j;for(var m=(j-k)*g/(f-e),n=0,o=e;f>=o;o+=g){var p=this.Bo?Math.pow(10,o):o;h.fixNum&&(p=parseFloat(p).toFixed(h.fixNum));var q=Math.floor(j-n*m)+.5;if(o==e&&"auto"==this.s.origin||!this.s.yAxis.lines.call(this,o)||this.zo(a,i,q,d.x,q,this.s.yAxis.lineColor.call(this,o),1),o==this.s.origin&&(l=q),1>g&&!this.Bo){var r=Math.min(Math.floor(this.Do(g)),0>=e?0:Math.floor(this.Do(e))),s=Math.pow(10,-r);p=Math.round(p*s)/s,o=p}this.canvases.y.renderText(0,q-5,this.s.yAxis.template(p.toString()),"webix_axis_item_y",c.x-5),n++}return this.zo(a,i,j+1,i,k,this.s.yAxis.color,1),l}}},Co:function(a,b){var c="webix_axis_title_y"+(webix.Eo&&9!=webix.Eo?" webix_ie_filter":""),d=this.canvases.y.renderTextAt("middle",!1,0,parseInt((b.y-a.y)/2+a.y,10),this.s.yAxis.title,c);d&&(d.style.left=(webix.env.transform?(d.offsetHeight-d.offsetWidth)/2:0)+"px")},Fo:function(a,b){var c=Math.floor(this.Do(a)),d=Math.ceil(this.Do(b));return{start:c,step:1,end:d}},Ao:function(a,b){if(this.Bo=!1,"logarithmic"==this.s.scale){var c=Math.floor(this.Do(a)),d=Math.ceil(this.Do(b));if(a>0&&b>0&&d-c>1)return this.Bo=!0,this.Fo(a,b)}"auto"!=this.s.origin&&this.s.origin<a&&(a=this.s.origin);var e,f,g;e=(b-a)/8||1;var h=Math.floor(this.Do(e)),i=Math.pow(10,h),j=e/i;if(j=j>5?10:5,e=parseInt(j,10)*i,e>Math.abs(a))f=0>a?-e:0;else{var k=Math.abs(a),l=Math.floor(this.Do(k)),m=k/Math.pow(10,l);for(f=Math.ceil(10*m)/10*Math.pow(10,l)-e,k>1&&e>.1&&(f=Math.ceil(f));0>a?a>=f:f>=a;)f-=e;0>a&&(f=-f-2*e)}for(g=f;b>g;)g+=e,g=parseFloat((1*g).toFixed(Math.abs(h)));return{start:f,end:g,step:e,fixNum:0>h?Math.abs(h):0}},Go:function(a,b){var c,d,e=this.data.Df(),f=arguments.length&&"h"==a?this.so:this.to;if(b=b||"value",f&&"undefined"!=typeof f.end&&"undefined"!=typeof f.start&&f.step)c=parseFloat(f.end),d=parseFloat(f.start);else if(c=webix.GroupMethods.max(this.go[0][b],e),d=f&&"undefined"!=typeof f.start?parseFloat(f.start):webix.GroupMethods.min(this.go[0][b],e),this.go.length>1)for(var g=1;g<this.go.length;g++){var h=webix.GroupMethods.max(this.go[g][b],e),i=webix.GroupMethods.min(this.go[g][b],e);h>c&&(c=h),d>i&&(d=i)}return{max:c,min:d}},Do:function(a){var b="log";return Math[b](a)/Math.LN10},xo:function(a,b,c,d,e){if(this.s.xAxis){var f=this.canvases.x.renderTextAt(e,d,a,b-(e?2:0),this.s.xAxis.template(c));f&&(f.className+=" webix_axis_item_x")}},yo:function(a,b,c,d,e){this.s.xAxis&&this.s.xAxis.lines&&this.zo(a,b,c,b,d,this.s.xAxis.lineColor.call(this,e),1)},zo:function(a,b,c,d,e,f,g){a.strokeStyle=f,a.lineWidth=g,a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke(),a.lineWidth=1},Ho:function(a,b){var c,d=1;return c=b!=a?b-a:a,[c,d]},qo:[function(a){return"#FF"+webix.color.toHex(a/2,2)+"00"},function(a){return"#FF"+webix.color.toHex(a/2+128,2)+"00"},function(a){return"#"+webix.color.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+webix.color.toHex(a,2)},function(a){return"#00"+webix.color.toHex(255-a,2)+"FF"},function(a){return"#"+webix.color.toHex(a,2)+"00FF"}],addSeries:function(a){var b=webix.extend({},this.s);this.s=webix.extend({},b),this.e(a,{}),this.go.push(this.s),this.s=b},tA:function(a,b,c){var d;if(c.getAttribute("userdata")&&(this.Io=1==this.go.length?c.getAttribute("userdata"):this.uA(b),this.go[this.Io])){for(var e=0;e<this.go.length;e++)d=this.go[e].tooltip,d&&d.disable();c.getAttribute("disabled")||(d=this.go[this.Io].tooltip,d&&d.enable())}},uA:function(a){var b,c,d,e,f,g,h,i;for(c=this.eo.sA,e=webix.html.offset(this.w.t),f=webix.html.pos(a),h=f.x-e.x,i=f.y-e.y,d=0;d<c.length;d++)b=c[d].points,h<=b[2]&&h>=b[0]&&i<=b[3]&&i>=b[1]&&(g?c[d].index>g.index&&(g=c[d]):g=c[d]);return g?g.index:0},hideSeries:function(a){this.canvases[a].hideCanvas(),this.s.legend.values&&this.s.legend.values[a]&&(this.s.legend.values[a].$hidden=!0),this.mo()},showSeries:function(a){this.canvases[a].showCanvas(),this.s.legend.values&&this.s.legend.values[a]&&delete this.s.legend.values[a].$hidden,this.mo()},mo:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=0,o=0;if(a=a||[],b=b||this.bc,j=this.canvases.legend.getCanvas(),d=this.s.legend,i="x"!=this.s.legend.layout?"width:"+d.width+"px":"",this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko)),this.canvases.legend.clearCanvas(!0),e=webix.html.create("DIV",{"class":"webix_chart_legend",style:"left:"+n+"px; top:"+o+"px;"+i},""),d.padding&&(e.style.padding=d.padding+"px"),this.ko=e,this.w.appendChild(e),g=[],d.values)for(c=0;c<d.values.length;c++)g.push(this.Jo(e,d.values[c].text,"undefined"!=typeof d.values[c].id?typeof d.values[c].id:c,d.values[c].$hidden));else for(c=0;c<a.length;c++)g.push(this.Jo(e,d.template(a[c])));for(0===e.offsetWidth&&(e.style.width="auto"),h=e.offsetWidth,f=e.offsetHeight,b>h&&("x"==d.layout&&"center"==d.align&&(n=(b-h)/2),"right"==d.align&&(n=b-h),d.margin&&"center"!=d.align&&(n+=("left"==d.align?1:-1)*d.margin)),f<this.dc&&("middle"==d.valign&&"center"!=d.align&&"x"!=d.layout?o=(this.dc-f)/2:"bottom"==d.valign&&(o=this.dc-f),d.margin&&"middle"!=d.valign&&(o+=("top"==d.valign?1:-1)*d.margin)),e.style.left=n+"px",e.style.top=o+"px",j.save(),c=0;c<g.length;c++)m=g[c],d.values&&d.values[c].$hidden?(l=!0,k=d.values[c].disableColor?d.values[c].disableColor:"#d9d9d9"):(l=!1,k=d.values?d.values[c].color:this.s.color.call(this,a[c])),this.Ko(j,m.offsetLeft+n,m.offsetTop+o,k,m.offsetHeight,l,c);j.restore(),g=null},Jo:function(a,b,c,d){var e="";"x"==this.s.legend.layout&&(e="float:left;");var f=webix.html.create("DIV",{style:e+"padding-left:"+(10+this.s.legend.marker.width)+"px","class":"webix_chart_legend_item"+(d?" hidden":"")},b);return arguments.length>2&&f.setAttribute("series_id",c),a.appendChild(f),f},Ko:function(a,b,c,d,e,f,g){var h=[],i=this.s.legend.marker,j=this.s.legend.values,k=j&&j[g].markerType?j[g].markerType:i.type;if(d&&(a.strokeStyle=a.fillStyle=d),"round"!=k&&i.radius)if("item"==k){if(this.s.line&&"scatter"!=this.s.type&&!this.s.disableLines){a.beginPath(),a.lineWidth=this.go[g].line.width,a.strokeStyle=f?d:this.go[g].line.color.call(this,{});var l=b+5,m=c+e/2;a.moveTo(l,m);var n=l+i.width;a.lineTo(n,m),a.stroke()}var o=this.go[g].item,p=parseInt(o.radius.call(this,{}),10)||0;p&&(a.beginPath(),f?(a.lineWidth=o.borderWidth,a.strokeStyle=d,a.fillStyle=d):(a.lineWidth=o.borderWidth,a.fillStyle=o.color.call(this,{}),a.strokeStyle=o.borderColor.call(this,{}),a.globalAlpha=o.alpha.call(this,{})),a.beginPath(),b+=i.width/2+5,c+=e/2,this.Lo(a,b,c,p+1,o.type),a.fill(),a.stroke()),a.globalAlpha=1}else a.beginPath(),a.lineWidth=1,b+=5,c+=e/2-i.height/2,h=[[b+i.radius,c+i.radius,i.radius,Math.PI,3*Math.PI/2,!1],[b+i.width-i.radius,c],[b+i.width-i.radius,c+i.radius,i.radius,-Math.PI/2,0,!1],[b+i.width,c+i.height-i.radius],[b+i.width-i.radius,c+i.height-i.radius,i.radius,0,Math.PI/2,!1],[b+i.radius,c+i.height],[b+i.radius,c+i.height-i.radius,i.radius,Math.PI/2,Math.PI,!1],[b,c+i.radius]],this.Mo(a,h),a.stroke(),a.fill();else{a.beginPath(),a.lineWidth=i.height,a.lineCap=i.type,b+=a.lineWidth/2+5,c+=e/2,a.moveTo(b,c);var n=b+i.width-i.height+1;a.lineTo(n,c),a.stroke(),a.fill()}},no:function(a,b){var c,d,e,f;if(c=this.s.padding.left,d=this.s.padding.top,e=a-this.s.padding.right,f=b-this.s.padding.bottom,this.s.legend){var g=this.s.legend,h=this.s.legend.width,i=this.s.legend.height;"x"==g.layout?"center"==g.valign?"right"==g.align?e-=h:"left"==g.align&&(c+=h):"bottom"==g.valign?f-=i:d+=i:"right"==g.align?e-=h:"left"==g.align&&(c+=h)}return{start:{x:c,y:d},end:{x:e,y:f}}},No:function(a){var b,c,d,e,f;if(this.s.yAxis&&"undefined"!=typeof this.s.yAxis.end&&"undefined"!=typeof this.s.yAxis.start&&this.s.yAxis.step)d=parseFloat(this.s.yAxis.end),e=parseFloat(this.s.yAxis.start);else{for(b=0;b<a.length;b++)for(a[b].$sum=0,a[b].$min=1/0,c=0;c<this.go.length;c++)f=parseFloat(this.go[c].value(a[b])||0),isNaN(f)||(-1!=this.go[c].type.toLowerCase().indexOf("stacked")&&(a[b].$sum+=f),f<a[b].$min&&(a[b].$min=f));for(d=-1/0,e=1/0,b=0;b<a.length;b++)a[b].$sum>d&&(d=a[b].$sum),a[b].$min<e&&(e=a[b].$min);e>0&&(e=0)}return{max:d,min:e}},Oo:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n;return"light"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),n=[[0,"#FFFFFF"],[.9,g],[1,g]],j=2):"falling"==f||"rising"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),k=webix.color.toRgb(g),l=webix.color.rgbToHsv(k[0],k[1],k[2]),l[1]*=.5,m="rgb("+webix.color.hsvToRgb(l[0],l[1],l[2])+")","falling"==f?n=[[0,m],[.7,g],[1,g]]:"rising"==f&&(n=[[0,g],[.3,g],[1,m]]),j=0):(a.globalAlpha=.37,j=0,i="x"==h?a.createLinearGradient(b,e,b,c):a.createLinearGradient(b,c,d,c),n=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this.Po(i,n),{gradient:i,offset:j}},Qo:function(a,b,c,d){return a*=-1,b+=Math.cos(a)*d,c-=Math.sin(a)*d,{x:b,y:c}},Po:function(a,b){for(var c=0;c<b.length;c++)a.addColorStop(b[c][0],b[c][1])},Mo:function(a,b){var c,d;for(c=0;c<b.length;c++)d=c?"lineTo":"moveTo",b[c].length>2&&(d="arc"),a[d].apply(a,b[c])},Ro:function(a,b,c,d,e){a.addRect(b,[c[0].x-d.x,c[0].y-d.y,c[1].x-d.x,c[1].y-d.y],e)}},webix.Group,webix.AutoTooltip,webix.DataLoader,webix.MouseEvents,webix.EventSystem,webix.ui.view),webix.extend(webix.ui.chart,{$render_pie:function(a,b,c,d,e,f){this.So(a,b,c,d,1,f,e)},So:function(a,b,c,d,e,f,g){if(b.length){var h=this.To(c,d),i=this.s.radius?this.s.radius:h.radius;if(!(0>i)){var j=this.Uo(b),k=this.Vo(j),l=this.Wo(j,k),m=this.s.x?this.s.x:h.x,n=this.s.y?this.s.y:h.y;1==e&&this.s.shadow&&this.Xo(a,m,n,i),n/=e;var o=-Math.PI/2,p=[];if(a.scale(1,e),this.s.gradient){var q=1!=e?m+i/3:m,r=1!=e?n+i/3:n;this.Yo(a,m,n,i,q,r)}for(var s=0;s<b.length;s++)if(j[s]){a.strokeStyle=this.s.lineColor.call(this,b[s]),a.beginPath(),a.moveTo(m,n),p.push(o);var t=-Math.PI/2+l[s]-1e-4;a.arc(m,n,i,o,t,!1),a.lineTo(m,n);var u=this.s.color.call(this,b[s]);a.fillStyle=u,a.fill(),this.s.pieInnerText&&this.Zo(m,n,5*i/6,o,t,e,this.s.pieInnerText(b[s],k),!0),this.s.label&&this.Zo(m,n,i+this.s.labelOffset,o,t,e,this.s.label(b[s])),1!=e&&(this.$o(a,m,n,o,t,i,!0),a.fillStyle="#000000",a.globalAlpha=.2,this.$o(a,m,n,o,t,i,!1),a.globalAlpha=1,a.fillStyle=u),f.addSector(b[s].id,o,t,m-c.x,n-c.y/e,i,e,g),o=t}a.globalAlpha=.8;var v;for(s=0;s<p.length;s++)v=this.Qo(p[s],m,n,i),this.zo(a,m,n,v.x,v.y,this.s.lineColor.call(this,b[s]),2);1==e&&(a.lineWidth=2,a.strokeStyle="#ffffff",a.beginPath(),a.arc(m,n,i+1,0,2*Math.PI,!1),a.stroke()),a.globalAlpha=1,a.scale(1,1/e)}}},Uo:function(a){for(var b=[],c=0;c<a.length;c++)b.push(parseFloat(this.s.value(a[c])||0));return b},Vo:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},Wo:function(a,b){var c,d=[],e=0;b=b||this.Vo(a);for(var f=0;f<a.length;f++)c=a[f],d[f]=2*Math.PI*(b?(c+e)/b:1/a.length),e+=c;return d},To:function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.x+c/2,f=a.y+d/2,g=Math.min(c/2,d/2);return{x:e,y:f,radius:g}},$o:function(a,b,c,d,e,f,g){if(a.lineWidth=1,0>=d&&e>=0||d>=0&&e<=Math.PI||Math.abs(d-Math.PI)>.003&&d<=Math.PI&&e>=Math.PI){0>=d&&e>=0&&(d=0,g=!1,this._o(a,b,c,f,d,e)),d<=Math.PI&&e>=Math.PI&&(e=Math.PI,g=!1,this._o(a,b,c,f,d,e));var h=(this.s.pieHeight||Math.floor(f/4))/this.s.cant;
a.beginPath(),a.arc(b,c,f,d,e,!1),a.lineTo(b+f*Math.cos(e),c+f*Math.sin(e)+h),a.arc(b,c+h,f,e,d,!0),a.lineTo(b+f*Math.cos(d),c+f*Math.sin(d)),a.fill(),g&&a.stroke()}},_o:function(a,b,c,d,e,f){a.beginPath(),a.arc(b,c,d,e,f,!1),a.stroke()},Xo:function(a,b,c,d){a.globalAlpha=.5;for(var e=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],f=e.length-1;f>-1;f--)a.beginPath(),a.fillStyle=e[f],a.arc(b+1,c+1,d+f,0,2*Math.PI,!0),a.fill();a.globalAlpha=1},ap:function(a){return a.addColorStop(0,"#ffffff"),a.addColorStop(.7,"#7a7a7a"),a.addColorStop(1,"#000000"),a},Yo:function(a,b,c,d,e,f){a.beginPath();var g;"function"!=typeof this.s.gradient?(g=a.createRadialGradient(e,f,d/4,b,c,d),g=this.ap(g)):g=this.s.gradient(g),a.fillStyle=g,a.arc(b,c,d,0,2*Math.PI,!0),a.fill(),a.globalAlpha=.7},Zo:function(a,b,c,d,e,f,g,h){var i=this.canvases[0].renderText(0,0,g,0,1);if(i){var j=i.scrollWidth;i.style.width=j+"px",j>a&&(j=a);var k=.2>e-d?4:8;h&&(k=j/1.8);var l=d+(e-d)/2;c-=(k-8)/2;var m=-k,n=-8,o="right";(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(m=-j-m+1,o="left");var p=0;!h&&1>f&&l>0&&l<Math.PI&&(p=(this.s.height||Math.floor(c/4))/f);var q=(b+Math.floor((c+p)*Math.sin(l)))*f+n,r=a+Math.floor((c+k/2)*Math.cos(l))+m,s=e<Math.PI/2+.01,t=d<Math.PI/2;t&&s?r=Math.max(r,a+3):t||s?!h&&(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(r+=j/3):r=Math.min(r,a-j),i.style.top=q+"px",i.style.left=r+"px",i.style.width=j+"px",i.style.textAlign=o,i.style.whiteSpace="nowrap"}},$render_pie3D:function(a,b,c,d,e,f){this.So(a,b,c,d,this.s.cant,f)},$render_donut:function(a,b,c,d,e,f){if(b.length){this.So(a,b,c,d,1,f,e);var g=this.s,h=this.To(c,d),i=g.radius?g.radius:h.radius,j=g.innerRadius&&g.innerRadius<i?g.innerRadius:i/3,k=g.x?g.x:h.x,l=g.y?g.y:h.y;a.fillStyle="#ffffff",a.beginPath(),a.arc(k,l,j,0,2*Math.PI,!0),a.fill()}}}),webix.extend(webix.ui.chart,{$render_bar:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t=d.y-c.y;s=!!this.s.yAxis,r=!!this.s.xAxis,j=this.Go(),k=j.max,l=j.min,h=(d.x-c.x)/b.length,e||"auto"!=this.s.origin&&!s||this.uo(b,c,d,l,k,h),s&&(k=parseFloat(this.s.yAxis.end),l=parseFloat(this.s.yAxis.start)),o=this.Ho(l,k),m=o[0],n=o[1],q=m?t/m:m,s||"auto"!=this.s.origin&&r||(p=10,q=m?(t-p)/m:p),!e&&"auto"!=this.s.origin&&!s&&this.s.origin>l&&this.wo(a,b,c,d,h,d.y-q*(this.s.origin-l)),g=parseInt(this.s.barWidth,10);var u=0,v=0;for(i=0;i<this.go.length;i++)i==e&&(v=u),"bar"==this.go[i].type&&u++;this.go&&g*u+4>h&&(g=parseInt(h/u-4,10));var w=(h-g*u)/2,x="undefined"!=typeof this.s.radius?parseInt(this.s.radius,10):Math.round(g/5),y=!1,z=this.s.gradient;for(z&&"function"!=typeof z?(y=z,z=!1):z&&(z=a.createLinearGradient(0,d.y,0,c.y),this.s.gradient(z)),r||this.zo(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1),i=0;i<b.length;i++){var A=parseFloat(this.s.value(b[i])||0);if(this.Bo&&(A=this.Do(A)),!isNaN(A)){A>k&&(A=k),A-=l,A*=n;var B=c.x+w+i*h+(g+1)*v,C=d.y;if(0>A||this.s.yAxis&&0===A&&!("auto"!=this.s.origin&&this.s.origin>l))this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),C,this.s.label(b[i]));else{s||"auto"!=this.s.origin&&r||(A+=p/q);var D=z||this.s.color.call(this,b[i]);a.globalAlpha=this.s.alpha.call(this,b[i]);var E=this.bp(a,c,B,C,g,l,x,q,A,D,z,y);y&&this.cp(a,B,C,g,l,x,q,A,D,y),this.s.border&&this.dp(a,B,C,g,l,x,q,A,D),a.globalAlpha=1,E[0]!=B?this.canvases[e].renderTextAt(!1,!0,B+Math.floor(g/2),E[1],this.s.label(b[i])):this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),E[3],this.s.label(b[i])),f.addRect(b[i].id,[B-c.x,E[3]-c.y,E[2]-c.x,E[1]-c.y],e)}}}},ep:function(a,b,c,d,e,f,g){var h=this.s.xAxis,i=c;return h&&"auto"!=this.s.origin&&this.s.origin>g&&(c-=(this.s.origin-g)*e,i=c,d-=this.s.origin-g,0>d&&(d*=-1,a.translate(b+f,c),a.rotate(Math.PI),b=0,c=0),c-=.5),{value:d,x0:b,y0:c,start:i}},bp:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save(),a.fillStyle=j;var m=this.ep(a,c,d,i,h,e,f),n=this.fp(a,m.x0,m.y0,e,g,h,m.value,this.s.border?1:0);k&&!l&&a.lineTo(m.x0+(this.s.border?1:0),b.y),a.fill(),a.restore();var o=m.x0,p=m.x0!=c?c+n[0]:n[0],q=m.x0!=c?m.start-n[1]-m.y0:m.y0,r=m.x0!=c?m.start-m.y0:n[1];return[o,q,p,r]},gp:function(a,b){var c,d;d=webix.color.toRgb(b),c=webix.color.rgbToHsv(d[0],d[1],d[2]),c[2]/=1.4,b="rgb("+webix.color.hsvToRgb(c[0],c[1],c[2])+")",a.strokeStyle=b,1==a.globalAlpha&&(a.globalAlpha=.9)},dp:function(a,b,c,d,e,f,g,h,i){var j;a.save(),j=this.ep(a,b,c,h,g,d,e),this.gp(a,i),this.fp(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},cp:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this.ep(a,b,c,h,g,d,e),l=this.Oo(a,k.x0,k.y0,k.x0+d,k.y0-g*k.value+2,j,i,"y"),m=this.s.border?1:0;a.fillStyle=l.gradient,this.fp(a,k.x0+l.offset,k.y0,d-2*l.offset,f,g,k.value,l.offset+m),a.fill(),a.restore()},fp:function(a,b,c,d,e,f,g,h,i){a.beginPath();var j=0;if(e>f*g){var k=(e-f*g)/e;1>=k&&k>=-1&&(j=-Math.acos(k)+Math.PI/2)}a.moveTo(b+h,c);var l=c-Math.floor(f*g)+e+(e?0:h);f*g>e&&a.lineTo(b+h,l);var m=b+e;e&&e>0&&a.arc(m,l,e-h,-Math.PI+j,-Math.PI/2,!1);var n=b+d-e-h,o=l-e+(e?h:0);a.lineTo(n,o),e&&e>0&&a.arc(n+h,l,e-h,-Math.PI/2,0-j,!1);var p=b+d-h;return a.lineTo(p,c),i||a.lineTo(b+h,c),[p,o]}}),webix.extend(webix.ui.chart,{$render_line:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(j=this.hp(a,b,c,d,e),g=this.s,b.length){for(k=g.offset?c.x+.5*j.cellWidth:c.x,i=[],h=0;h<b.length;h++)if(r=this.ip(b[h],c,d,j)){if(m=h?j.cellWidth*h-.5+k:k,o="object"==typeof r?r.y0:r,h&&this.s.fixOverflow){if(q=this.ip(b[h-1],c,d,j),q.out&&q.out==r.out)continue;l=j.cellWidth*(h-1)-.5+k,n="object"==typeof q?q.y0:q,q.out&&(p="min"==q.out?d.y:c.y,i.push({x:this.jp(l,m,n,o,p),y:p})),r.out&&(p="min"==r.out?d.y:c.y,i.push({x:this.jp(l,m,n,o,p),y:p}))}r.out||i.push({x:m,y:r,index:h})}for(this.kp=c,h=1;h<=i.length;h++)l=i[h-1].x,n=i[h-1].y,h<i.length&&(m=i[h].x,o=i[h].y,this.zo(a,l,n,m,o,g.line.color.call(this,b[h-1]),g.line.width),g.line&&g.line.shadow&&(a.globalAlpha=.3,this.zo(a,l+2,n+g.line.width+8,m+2,o+g.line.width+8,"#eeeeee",g.line.width+3),a.globalAlpha=1)),"undefined"!=typeof i[h-1].index&&this.lp(a,l,n,b[i[h-1].index],g.label(b[i[h-1].index]),e,f,c)}},jp:function(a,b,c,d,e){return a+(e-c)*(b-a)/(d-c)},lp:function(a,b,c,d,e,f,g){var h=this.s.item,i=parseInt(h.radius.call(this,d),10)||0,j=this.kp;if(i){if(a.save(),h.shadow){a.lineWidth=1,a.strokeStyle="#bdbdbd",a.fillStyle="#bdbdbd";for(var k=[.1,.2,.3],l=k.length-1;l>=0;l--)a.globalAlpha=k[l],a.strokeStyle="#d0d0d0",a.beginPath(),this.Lo(a,b,c+2*i/3,i+l+1,h.type),a.stroke();a.beginPath(),a.globalAlpha=.3,a.fillStyle="#bdbdbd",this.Lo(a,b,c+2*i/3,i+1,h.type),a.fill()}a.restore(),a.lineWidth=h.borderWidth,a.fillStyle=h.color.call(this,d),a.strokeStyle=h.borderColor.call(this,d),a.globalAlpha=h.alpha.call(this,d),a.beginPath(),this.Lo(a,b,c,i+1,h.type),a.fill(),a.stroke(),a.globalAlpha=1}if(e&&this.canvases[f].renderTextAt(!1,!0,b,c-i-this.s.labelOffset,this.s.label.call(this,d)),g){var m=this.s.eventRadius||i+1;g.addRect(d.id,[b-m-j.x,c-m-j.y,b+m-j.x,c+m-j.y],f)}},Lo:function(a,b,c,d,e){var f=[];if(!e||"square"!=e&&"s"!=e)if(!e||"diamond"!=e&&"d"!=e)f=!e||"triangle"!=e&&"t"!=e?[[b,c,d,0,2*Math.PI,!0]]:[[b,c-d],[b+Math.sqrt(3)*d/2,c+d/2],[b-Math.sqrt(3)*d/2,c+d/2],[b,c-d]];else{var g=a.lineWidth>1?a.lineWidth*Math.sqrt(2)/4:0;f=[[b,c-d],[b+d,c],[b,c+d],[b-d,c],[b+g,c-d-g]]}else d*=Math.sqrt(2)/2,f=[[b-d-a.lineWidth/2,c-d],[b+d,c-d],[b+d,c+d],[b-d,c+d],[b-d,c-d]];this.Mo(a,f)},ip:function(a,b,c,d){var e=d.minValue,f=d.maxValue,g=d.unit,h=d.valueFactor,i=this.s.value(a);this.Bo&&(i=this.Do(i));var j=(parseFloat(i||0)-e)*h;this.s.yAxis||(j+=d.startValue/g);var k=c.y-g*j;return!this.s.fixOverflow||"line"!=this.s.type&&"area"!=this.s.type?(i>f&&(k=b.y),(0>j||e>i)&&(k=c.y)):i>f?k={y:b.y,y0:k,out:"max"}:(0>j||e>i)&&(k={y:c.y,y0:k,out:"min"}),k},hp:function(a,b,c,d,e){var f,g={};g.totalHeight=d.y-c.y,g.cellWidth=(d.x-c.x)/(this.s.offset?b.length:b.length-1);var h=!!this.s.yAxis,i=-1!=this.s.type.indexOf("stacked")?this.No(b):this.Go();g.maxValue=i.max,g.minValue=i.min,e||this.uo(b,c,d,g.minValue,g.maxValue,g.cellWidth),h&&(g.maxValue=parseFloat(this.s.yAxis.end),g.minValue=parseFloat(this.s.yAxis.start));var j=this.Ho(g.minValue,g.maxValue);return f=j[0],g.valueFactor=j[1],g.unit=f?g.totalHeight/f:10,g.startValue=0,h||(g.startValue=10,g.unit!=g.totalHeight&&(g.unit=f?(g.totalHeight-g.startValue)/f:10)),g}}),webix.extend(webix.ui.chart,{$render_barH:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(i=(d.y-c.y)/b.length,m=this.Go("h"),n=m.max,o=m.min,v=d.x-c.x,A=!!this.s.yAxis,e||this.mp(a,b,c,d,o,n,i),A&&(n=parseFloat(this.s.xAxis.end),o=parseFloat(this.s.xAxis.start)),t=this.Ho(o,n),r=t[0],q=t[1],x=r?v/r:10,A||(u=10,x=r?(v-u)/r:10),h=parseInt(this.s.barWidth,10),h*this.go.length+4>i&&(h=i/this.go.length-4),g=Math.floor((i-h*this.go.length)/2),s="undefined"!=typeof this.s.radius?parseInt(this.s.radius,10):Math.round(h/5),p=!1,k=this.s.gradient,k&&"function"!=typeof k?(p=k,k=!1):k&&(k=a.createLinearGradient(c.x,c.y,d.x,c.y),this.s.gradient(k)),A||this.zo(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1),l=0;l<b.length;l++)if(w=parseFloat(this.s.value(b[l]||0)),this.Bo&&(w=this.Do(w)),w>n&&(w=n),w-=o,w*=q,y=c.x,z=c.y+g+l*i+(h+1)*e,0>w&&"auto"==this.s.origin||this.s.xAxis&&0===w&&!("auto"!=this.s.origin&&this.s.origin>o))this.canvases[e].renderTextAt("middle","right",y+10,z+h/2+g,this.s.label(b[l]));else{0>w&&"auto"!=this.s.origin&&this.s.origin>o&&(w=0),A||(w+=u/x),j=k||this.s.color.call(this,b[l]),this.s.border&&this.np(a,y,z,h,o,s,x,w,j),a.globalAlpha=this.s.alpha.call(this,b[l]);var B=this.op(a,d,y,z,h,o,s,x,w,j,k,p);p&&this.pp(a,y,z,h,o,s,x,w,j,p),a.globalAlpha=1,B[3]==z?(this.canvases[e].renderTextAt("middle","left",B[0]-5,B[3]+Math.floor(h/2),this.s.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,B[3]-c.y,B[2]-c.x,B[3]+h-c.y],e)):(this.canvases[e].renderTextAt("middle",!1,B[2]+5,B[1]+Math.floor(h/2),this.s.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,z-c.y,B[2]-c.x,B[3]-c.y],e))}},qp:function(a,b,c,d,e,f,g,h,i){var j=0;if(e>f*g){var k=(e-f*g)/e;j=-Math.asin(k)+Math.PI/2}a.moveTo(b,c+h);var l=b+f*g-e-(e?0:h);f*g>e&&a.lineTo(l,c+h);var m=c+e;e&&e>0&&a.arc(l,m,e-h,-Math.PI/2+j,0,!1);var n=c+d-e-(e?0:h),o=l+e-(e?h:0);a.lineTo(o,n),e&&e>0&&a.arc(l,n,e-h,0,Math.PI/2-j,!1);var p=c+d-h;return a.lineTo(b,p),i||a.lineTo(b,c+h),[o,p]},mp:function(a,b,c,d,e,f,g){var h=0;this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),h=this.rp(this.canvases.x.getCanvas(),b,c,d,e,f)),this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.sp(this.canvases.y.getCanvas(),b,c,d,g,h))},sp:function(a,b,c,d,e,f){if(this.s.yAxis){var g,h=parseInt(f?f:c.x,10)-.5,i=d.y+.5,j=c.y;this.zo(a,h,i,h,j,this.s.yAxis.color,1);for(var k=0;k<b.length;k++){var l="auto"!=this.s.origin&&"barH"==this.s.type&&parseFloat(this.s.value(b[k]))<this.s.origin;g=j+e/2+k*e,this.canvases.y.renderTextAt("middle",l?!1:"left",l?h+5:h-5,g,this.s.yAxis.template(b[k]),"webix_axis_item_y",l?0:h-10),this.s.yAxis.lines.call(this,b[k])&&this.zo(a,c.x,g,d.x,g,this.s.yAxis.lineColor.call(this,b[k]),1)}this.zo(a,c.x+.5,j+.5,d.x,j+.5,this.s.yAxis.lineColor.call(this,{}),1),this.Co(c,d)}},rp:function(a,b,c,d,e,f){var g,h={},i=this.s.xAxis;if(i){var j=d.y+.5,k=c.x-.5,l=d.x-.5,m=c.x;if(this.zo(a,k,j,l,j,i.color,1),i.step&&(g=parseFloat(i.step)),("undefined"==typeof this.so.step||"undefined"==typeof this.so.start||"undefined"==typeof this.so.end)&&(h=this.Ao(e,f),e=h.start,f=h.end,g=h.step,this.s.xAxis.end=f,this.s.xAxis.start=e,this.s.xAxis.step=g),0!==g){for(var n=(l-k)*g/(f-e),o=0,p=e;f>=p;p+=g){var q=this.Bo?Math.pow(10,p):p;h.fixNum&&(q=parseFloat(q).toFixed(h.fixNum));var r=Math.floor(k+o*n)+.5;if(p==e&&"auto"==this.s.origin||!i.lines.call(this,p)||this.zo(a,r,j,r,c.y,this.s.xAxis.lineColor.call(this,p),1),p==this.s.origin&&(m=r+1),1>g&&!this.Bo){var s=Math.min(Math.floor(this.Do(g)),0>=e?0:Math.floor(this.Do(e))),t=Math.pow(10,-s);q=Math.round(q*t)/t,p=q}this.canvases.x.renderTextAt(!1,!0,r,j+2,i.template(q.toString()),"webix_axis_item_x"),o++}return this.canvases.x.renderTextAt(!0,!1,k,d.y+this.s.padding.bottom-3,this.s.xAxis.title,"webix_axis_title_x",d.x-c.x),i.lines.call(this,{})||this.zo(a,k,c.y-.5,l,c.y-.5,this.s.xAxis.color,.2),m}}},tp:function(a,b,c,d,e,f,g){var h=this.s.yAxis,i=b;return h&&"auto"!=this.s.origin&&this.s.origin>g&&(b+=(this.s.origin-g)*e,i=b,d-=this.s.origin-g,0>d&&(d*=-1,a.translate(b,c+f),a.rotate(Math.PI),b=.5,c=0),b+=.5),{value:d,x0:b,y0:c,start:i}},op:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save();var m=this.tp(a,c,d,i,h,e,f);a.fillStyle=j,a.beginPath();var n=this.qp(a,m.x0,m.y0,e,g,h,m.value,this.s.border?1:0);k&&!l&&a.lineTo(b.x,m.y0+(this.s.border?1:0)),a.fill(),a.restore();var o=m.y0,p=m.y0!=d?d:n[1],q=m.y0!=d?m.start-n[0]:m.start,r=m.y0!=d?m.start:n[0];return[q,o,r,p]},np:function(a,b,c,d,e,f,g,h,i){a.save();var j=this.tp(a,b,c,h,g,d,e);a.beginPath(),this.gp(a,i),a.globalAlpha=.9,this.qp(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},pp:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this.tp(a,b,c,h,g,d,e),l=this.Oo(a,k.x0,k.y0+d,k.x0+g*k.value,k.y0,j,i,"x");a.fillStyle=l.gradient,a.beginPath(),this.qp(a,k.x0,k.y0+l.offset,d-2*l.offset,f,g,k.value,l.offset),a.fill(),a.globalAlpha=1,a.restore()}}),webix.extend(webix.ui.chart,{$render_stackedBar:function(a,b,c,d,e,f){var g,h,i,j,k=d.y-c.y,l=!!this.s.yAxis,m=!!this.s.xAxis,n=this.No(b);g=n.max,h=n.min;var o=Math.floor((d.x-c.x)/b.length);e||this.uo(b,c,d,h,g,o),l&&(g=parseFloat(this.s.yAxis.end),h=parseFloat(this.s.yAxis.start));var p=this.Ho(h,g);j=p[0],i=p[1];var q=j?k/j:10,r=parseInt(this.s.barWidth,10);r+4>o&&(r=o-4);var s=Math.floor((o-r)/2),t=this.s.gradient?this.s.gradient:!1;m||this.zo(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1);for(var u=0;u<b.length;u++){var v=parseFloat(this.s.value(b[u]||0));if(this.Bo&&(v=this.Do(v)),v){e||(v-=h),v*=i;var w=c.x+s+u*o,x=d.y;if(e?x=b[u].$startY:b[u].$startY=x,!(x<c.y+1))if(0>v||this.s.yAxis&&0===v)this.canvases.y.renderTextAt(!0,!0,w+Math.floor(r/2),x,this.s.label(b[u]));else{var y=this.s.color.call(this,b[u]);a.globalAlpha=this.s.alpha.call(this,b[u]),a.fillStyle=this.s.color.call(this,b[u]),a.beginPath();var z=this.up(a,w-(this.s.border?.5:0),x,r+(this.s.border?.5:0),q,v,0,c.y);if(a.fill(),t){a.save();var A=this.Oo(a,w,x,w+r,z[1],t,y,"y");a.fillStyle=A.gradient,a.beginPath(),z=this.up(a,w+A.offset,x,r-2*A.offset,q,v,this.s.border?1:0,c.y),a.fill(),a.restore()}this.s.border&&(a.save(),this.gp(a,y),a.beginPath(),this.up(a,w-.5,x,r+1,q,v,0,c.y,1),a.stroke(),a.restore()),a.globalAlpha=1,this.canvases[e].renderTextAt(!1,!0,w+Math.floor(r/2),z[1]+(x-z[1])/2-7,this.s.label(b[u])),f.addRect(b[u].id,[w-c.x,z[1]-c.y,z[0]-c.x,(b[u].$startY||x)-c.y],e),b[u].$startY=z[1]}}else e&&b[u].$startY||(b[u].$startY=d.y)}},up:function(a,b,c,d,e,f,g,h,i){a.moveTo(b,c);var j=c-e*f+g;h>j&&(j=h),a.lineTo(b,j);var k=b+d,l=j;a.lineTo(k,l);var m=b+d;return a.lineTo(m,c),i||a.lineTo(b,c),[m,l-2*g]}}),webix.extend(webix.ui.chart,{$render_stackedBarH:function(a,b,c,d,e,f){var g,h,i,j,k=d.x-c.x,l=!!this.s.yAxis,m=this.No(b);g=m.max,h=m.min;var n=Math.floor((d.y-c.y)/b.length);e||this.mp(a,b,c,d,h,g,n),l&&(g=parseFloat(this.s.xAxis.end),h=parseFloat(this.s.xAxis.start));var o=this.Ho(h,g);j=o[0],i=o[1];var p=j?k/j:10,q=0;l||(q=10,p=j?(k-q)/j:10);var r=parseInt(this.s.barWidth,10);r+4>n&&(r=n-4);var s=(n-r)/2,t=0,u=!1,v=this.s.gradient;v&&(u=!0),l||this.zo(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1);var w=0,x=0;for(y=0;y<this.go.length;y++)y==e&&(x=w),"stackedBarH"==this.go[y].type&&w++;for(var y=0;y<b.length;y++){x||(b[y].$startX=c.x);var z=parseFloat(this.s.value(b[y]||0));z>g&&(z=g),z-=h,z*=i;var A=c.x,B=c.y+s+y*n;if(x?A=b[y].$startX:b[y].$startX=A,0>z||this.s.yAxis&&0===z)this.canvases.y.renderTextAt("middle",!0,A+10,B+r/2,this.s.label(b[y]));else{l||(z+=q/p);var C=this.s.color.call(this,b[y]);a.globalAlpha=this.s.alpha.call(this,b[y]),a.fillStyle=this.s.color.call(this,b[y]),a.beginPath();var D=this.qp(a,A,B,r,t,p,z,0);if(v&&!u&&a.lineTo(c.x+k,B+(this.s.border?1:0)),a.fill(),u){var E=this.Oo(a,A,B+r,A,B,u,C,"x");a.fillStyle=E.gradient,a.beginPath(),D=this.qp(a,A,B,r,t,p,z,0),a.fill()}this.s.border&&this.np(a,A,B,r,h,t,p,z,C),a.globalAlpha=1,this.canvases[e].renderTextAt("middle",!0,b[y].$startX+(D[0]-b[y].$startX)/2-1,B+(D[1]-B)/2,this.s.label(b[y])),f.addRect(b[y].id,[b[y].$startX-c.x,B-c.y,D[0]-c.x,D[1]-c.y],e),b[y].$startX=D[0]}}}}),webix.extend(webix.ui.chart,{$render_spline:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(k=this.hp(a,b,c,d,e),g=this.s,this.kp=c,i=[],b.length){for(n=g.offset?c.x+.5*k.cellWidth:c.x,h=0;h<b.length;h++)q=this.ip(b[h],c,d,k),q&&(m=h?k.cellWidth*h-.5+n:n,i.push({x:m,y:q,index:h}));for(l=this.vp(i),h=0;h<i.length;h++){if(o=i[h].x,r=i[h].y,h<i.length-1){for(p=i[h+1].x,s=i[h+1].y,j=o;p>j;j++){var t=this.wp(j,o,h,l.a,l.b,l.c,l.d);t<c.y&&(t=c.y),t>d.y&&(t=d.y);var u=this.wp(j+1,o,h,l.a,l.b,l.c,l.d);u<c.y&&(u=c.y),u>d.y&&(u=d.y),this.zo(a,j,t,j+1,u,g.line.color(b[h]),g.line.width)}this.zo(a,p-1,this.wp(j,o,h,l.a,l.b,l.c,l.d),p,s,g.line.color(b[h]),g.line.width)}this.lp(a,o,r,b[i[h].index],g.label(b[i[h].index]),e,f)}}},vp:function(a){var b,c,d,e,f,g,h,i,j=[],k=[],l=a.length;for(f=0;l-1>f;f++)j[f]=a[f+1].x-a[f].x,k[f]=(a[f+1].y-a[f].y)/j[f];for(h=[],i=[],h[0]=0,h[1]=2*(j[0]+j[1]),i[0]=0,i[1]=6*(k[1]-k[0]),f=2;l-1>f;f++)h[f]=2*(j[f-1]+j[f])-j[f-1]*j[f-1]/h[f-1],i[f]=6*(k[f]-k[f-1])-j[f-1]*i[f-1]/h[f-1];for(g=[],g[l-1]=g[0]=0,f=l-2;f>=1;f--)g[f]=(i[f]-j[f]*g[f+1])/h[f];for(b=[],c=[],d=[],e=[],f=0;l-1>f;f++)b[f]=a[f].y,c[f]=-j[f]*g[f+1]/6-j[f]*g[f]/3+(a[f+1].y-a[f].y)/j[f],d[f]=g[f]/2,e[f]=(g[f+1]-g[f])/(6*j[f]);return{a:b,b:c,c:d,d:e}},wp:function(a,b,c,d,e,f,g){return d[c]+(a-b)*(e[c]+(a-b)*(f[c]+(a-b)*g[c]))}}),webix.extend(webix.ui.chart,{$render_area:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(l=this.hp(a,b,c,d,e),h=this.s,j=h.eventRadius||Math.floor(l.cellWidth/2),b.length){for(m=[],p=h.offset?c.x+.5*l.cellWidth:c.x,i=0;i<b.length;i++)if(k=b[i],o=this.ip(k,c,d,l),s=p+l.cellWidth*i,o){if(t="object"==typeof o?o.y0:o,i&&this.s.fixOverflow){if(n=this.ip(b[i-1],c,d,l),n.out&&n.out==o.out)continue;q=l.cellWidth*(i-1)-.5+p,r="object"==typeof n?n.y0:n,n.out&&(u="min"==n.out?d.y:c.y,m.push([this.jp(q,s,r,t,u),u])),o.out&&(u="min"==o.out?d.y:c.y,m.push([this.jp(q,s,r,t,u),u]),i==b.length-1&&u==c.y&&m.push([s,c.y]))}o.out||(m.push([s,t]),f.addRect(k.id,[s-j-c.x,t-j-c.y,s+j-c.x,t+j-c.y],e)),h.yAxis||(g=h.offset||i!=b.length-1?"center":"left",this.canvases[e].renderTextAt(!1,g,s,t-h.labelOffset,h.label(k)))}m.length&&(m.push([s,d.y]),m.push([m[0][0],d.y])),a.globalAlpha=this.s.alpha.call(this,b[0]),a.fillStyle=this.s.color.call(this,b[0]),a.beginPath(),this.Mo(a,m),a.fill(),h.border&&(a.lineWidth=h.borderWidth||1,h.borderColor?a.strokeStyle=h.borderColor.call(this,b[0]):this.gp(a,a.fillStyle),a.beginPath(),this.Mo(a,m),a.stroke()),a.lineWidth=1,a.globalAlpha=1}},$render_stackedArea:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(p=this.hp(a,b,c,d,e),j=this.s,n=j.eventRadius||Math.floor(p.cellWidth/2),b.length){q=[],t=[],r=j.offset?c.x+.5*p.cellWidth:c.x;var u=function(a,c){return e?b[a].$startY?c-d.y+b[a].$startY:0:c},v=function(a,b,c){var d=(c.y-b.y)/(c.x-b.x);return d*a+b.y-d*b.x};for(k=0;k<b.length;k++)o=b[k],k?r+=p.cellWidth:(s=u(k,d.y),q.push([r,s])),s=u(k,this.ip(o,c,d,p)),t.push(isNaN(s)&&!k?b[k].$startY||d.y:s),s&&(q.push([r,s]),f.addRect(o.id,[r-n-c.x,s-n-c.y,r+n-c.x,s+n-c.y],e),j.yAxis||(i=!j.offset&&m?"left":"center",this.canvases[e].renderTextAt(!1,i,r,s-j.labelOffset,j.label(o))));if(q.push([r,u(k-1,d.y)]),e)for(k=b.length-2;k>0;k--)r-=p.cellWidth,s=b[k].$startY,s&&q.push([r,s]);for(q.push([q[0][0],q[0][1]]),a.globalAlpha=this.s.alpha.call(this,b[0]),a.fillStyle=this.s.color.call(this,b[0]),a.beginPath(),this.Mo(a,q),a.fill(),k=0;k<b.length;k++){if(s=t[k],!s)for(k==b.length-1&&(s=b[k].$startY),l=k+1;l<b.length;l++)if(t[l]){g={x:c.x,y:t[0]},h={x:c.x+p.cellWidth*l,y:t[l]},s=v(c.x+p.cellWidth*k,g,h);break}b[k].$startY=s}}}}),webix.extend(webix.ui.chart,{$render_radar:function(a,b,c,d,e,f){this.xp(a,b,c,d,e,f)},xp:function(a,b,c,d,e,f){if(b.length){for(var g=this.To(c,d),h=this.s.radius?this.s.radius:g.radius,i=this.s.x?this.s.x:g.x,j=this.s.y?this.s.y:g.y,k=[],l=0;l<b.length;l++)k.push(1);var m=this.Wo(k,b.length);this.kp=c,e||this.yp(m,i,j,h,b),this.zp(a,m,i,j,h,b,e,f)}},zp:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(k=this.s,m=k.yAxis.start,n=k.yAxis.end,A=this.Ho(m,n),t=A[0],z=t?e/t:e/2,y=A[1],u=-Math.PI/2,i=j=u,q=[],p=0,l=0;l<f.length;l++)x?w=x:(v=k.value(f[l]),this.Bo&&(v=this.Do(v)),w=(parseFloat(v||0)-m)*y),r=Math.floor(z*w),v=k.value(l!=f.length-1?f[l+1]:f[0]),this.Bo&&(v=this.Do(v)),x=(parseFloat(v||0)-m)*y,s=Math.floor(z*x),i=j,j=l!=f.length-1?u+b[l]-1e-4:u,o=p||this.Qo(i,c,d,r),p=this.Qo(j,c,d,s),q.push(o);k.fill&&this.Ap(a,q,f),!k.disableLines&&f.length>2&&this.Bp(a,q,f),(!k.disableItems||f.length<3)&&this.Cp(a,q,f,g,h),q=null},Cp:function(a,b,c,d,e){for(var f=0;f<b.length;f++)this.lp(a,b[f].x,b[f].y,c[f],this.s.label.call(this,c),d,e)},Ap:function(a,b,c){var d,e;a.globalAlpha=this.s.alpha.call(this,{}),a.beginPath();for(var f=0;f<b.length;f++)a.fillStyle=this.s.fill.call(this,c[f]),d=b[f],e=b[f+1]||b[0],f||a.moveTo(d.x,d.y),a.lineTo(e.x,e.y);a.fill(),a.globalAlpha=1},Bp:function(a,b,c){for(var d,e,f=0;f<b.length;f++)d=b[f],e=b[f+1]||b[0],this.zo(a,d.x,d.y,e.x,e.y,this.s.line.color.call(this,c[f]),this.s.line.width)},yp:function(a,b,c,d,e){var f=this.s.yAxis,g=this.s.xAxis,h=f.start,i=f.end,j=f.step,k={},l=this.to;if("undefined"==typeof l.step||"undefined"==typeof l.start||"undefined"==typeof l.end){var m=this.Go();k=this.Ao(m.min,m.max),h=k.start,i=k.end,j=k.step,f.end=i,f.start=h}var n,o,p,q,r,s=[],t=0,u=d*j/(i-h);1>j&&(q=Math.min(this.Do(j),0>=h?0:this.Do(h)),r=Math.pow(10,-q));var v=[];this.canvases.scale||(this.canvases.scale=this.lo("radar_scale"));var w=this.canvases.scale.getCanvas();for(n=i;n>=h;n-=j){var x=this.Bo?Math.pow(10,n):n;k.fixNum&&(x=parseFloat(n).toFixed(k.fixNum)),s.push(Math.floor(t*u)+.5),r&&!this.Bo&&(x=Math.round(x*r)/r,n=x);var y=c-d+s[s.length-1];if(this.canvases.scale.renderTextAt("middle","left",b,y,f.template(x.toString()),"webix_axis_item_y webix_radar"),a.length<2)return void this.Dp(w,"arc",b,c,d-s[s.length-1],-Math.PI/2,3*Math.PI/2,n);var z,A=-Math.PI/2,B=A;for(o=0;o<a.length;o++)t||v.push(B),z=A+a[o]-1e-4,this.Dp(w,a.length>2?l.lineShape||"line":"arc",b,c,d-s[s.length-1],B,z,n,o,e[n]),B=z;t++}for(n=0;n<v.length;n++)p=this.Qo(v[n],b,c,d),g.lines.call(this,e[n],n)&&this.zo(w,b,c,p.x,p.y,g?g.lineColor.call(this,e[n]):"#cfcfcf",1),this.Ep(w,b,c,d,v[n],g?g.template.call(this,e[n]):"&nbsp;")},Dp:function(a,b,c,d,e,f,g,h,i){var j,k;if(0>e)return!1;j=this.Qo(f,c,d,e),k=this.Qo(g,c,d,e);var l=this.s.yAxis;l.bg&&(a.beginPath(),a.moveTo(c,d),"arc"==b?a.arc(c,d,e,f,g,!1):(a.lineTo(j.x,j.y),a.lineTo(k.x,k.y)),a.fillStyle=l.bg(h,i),a.moveTo(c,d),a.fill(),a.closePath()),l.lines.call(this,h)&&(a.lineWidth=1,a.beginPath(),"arc"==b?a.arc(c,d,e,f,g,!1):(a.moveTo(j.x,j.y),a.lineTo(k.x,k.y)),a.strokeStyle=l.lineColor.call(this,h),a.stroke())},Ep:function(a,b,c,d,e,f){var g=this.canvases.scale.renderText(0,0,f,"webix_axis_radar_title",1),h=g.scrollWidth,i=g.offsetHeight,j=.001,k=this.Qo(e,b,c,d+5),l=0,m=0;(0>e||e>Math.PI)&&(m=-i),e>Math.PI/2&&(l=-h),Math.abs(e+Math.PI/2)<j||Math.abs(e-Math.PI/2)<j?l=-h/2:(Math.abs(e)<j||Math.abs(e-Math.PI)<j)&&(m=-i/2),g.style.top=k.y+m+"px",g.style.left=k.x+l+"px",g.style.width=h+"px",g.style.whiteSpace="nowrap"}}),webix.extend(webix.ui.chart,{$render_scatter:function(a,b,c,d,e,f){if(!this.s.xValue)return!1;var g=this.Go(),h=this.Go("h","xValue");e||(this.canvases.x||(this.canvases.x=this.lo("axis_x")),this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.vo(this.canvases.y.getCanvas(),b,c,d,g.min,g.max),this.rp(this.canvases.x.getCanvas(),b,c,d,h.min,h.max)),g={min:this.s.yAxis.start,max:this.s.yAxis.end},h={min:this.s.xAxis.start,max:this.s.xAxis.end};var i=this.Fp(a,b,c,d,h,g);this.kp=c;for(var j=0;j<b.length;j++)this.Gp(a,f,c,d,i,h,g,b[j],e)},Fp:function(a,b,c,d,e,f){var g={};return g.totalHeight=d.y-c.y,g.totalWidth=d.x-c.x,this.Hp(g,e.min,e.max,g.totalWidth,"X"),this.Hp(g,f.min,f.max,g.totalHeight,"Y"),g},Gp:function(a,b,c,d,e,f,g,h,i){var j=this.Ip(e,d,c,f,h,"X"),k=this.Ip(e,c,d,g,h,"Y");this.lp(a,j,k,h,this.s.label.call(this,h),i,b)},Ip:function(a,b,c,d,e,f){var g=this.s["X"==f?"xValue":"value"].call(this,e),h=a["valueFactor"+f],i=(parseFloat(g||0)-d.min)*h,j=a["unit"+f],k=c[f.toLowerCase()]-("X"==f?-1:1)*Math.floor(j*i);return 0>i&&(k=c[f.toLowerCase()]),g>d.max&&(k=b[f.toLowerCase()]),g<d.min&&(k=c[f.toLowerCase()]),k},Hp:function(a,b,c,d,e){var f=this.Ho(b,c);e=e||"",a["relValue"+e]=f[0],a["valueFactor"+e]=f[1],a["unit"+e]=a["relValue"+e]?d/a["relValue"+e]:10}}),webix.extend(webix.ui.chart,{presets:{simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,barWidth:45,radius:0,alpha:1,border:!0},stick:{barWidth:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",barWidth:70,gradient:"falling",radius:0,alpha:.5,border:!0}}}),webix.protoUI({name:"calendar",defaults:{date:new Date,select:!1,navigation:!0,monthSelect:!0,weekHeader:!0,weekNumber:!1,skipEmptyWeeks:!1,calendarHeader:"%F %Y",calendarWeekHeader:"W#",events:webix.Date.isHoliday,minuteStep:5,icons:!1,timepickerHeight:30,headerHeight:70,dayTemplate:function(a){return a.getDate()},width:259,height:250},dayTemplate_setter:webix.template,calendarHeader_setter:webix.Date.dateToStr,calendarWeekHeader_setter:webix.Date.dateToStr,calendarTime_setter:function(a){return this._w=a,webix.Date.dateToStr(a)},date_setter:function(a){return this.Jp(a)},maxDate_setter:function(a){return this.Jp(a)},minDate_setter:function(a){return this.Jp(a)},minTime_setter:function(a){return"string"==typeof a&&(a=webix.i18n.parseTimeFormatDate(a),a=[a.getHours(),a.getMinutes()]),a},maxTime_setter:function(a){return"string"==typeof a&&(a=webix.i18n.parseTimeFormatDate(a),a=[a.getHours(),a.getMinutes()]),a},$init:function(){this.x.className+=" webix_calendar",this.Kp={},this.Lp=this.Mp=null,this.Np=0},type_setter:function(a){return"time"==a&&(this.jq=!0,this.Np=-1),a},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},$getSize:function(a,b){if(this.s.cellHeight){var c=this.Op(this.s.date);this.s.height=this.s.cellHeight*c.Sp+(webix.skin.$active.calendarHeight||70)}return webix.ui.view.prototype.$getSize.call(this,a,b)},Op:function(a,b){if(!this.Pp||b){var c=a.getMonth(),d=a.getFullYear(),e=new Date(d,c+1,1),f=webix.Date.weekStart(new Date(d,c,1)),g=Math.round((e.valueOf()-f.valueOf())/864e5),h=this.s.skipEmptyWeeks?Math.ceil(g/7):6;this.Pp={Qp:c,Rp:f,zc:e,Sp:h}}return this.Pp},$skin:function(){webix.skin.$active.calendar&&(webix.skin.$active.calendar.width&&(this.defaults.width=webix.skin.$active.calendar.width),webix.skin.$active.calendar.height&&(this.defaults.height=webix.skin.$active.calendar.height),webix.skin.$active.calendar.headerHeight&&(this.defaults.headerHeight=webix.skin.$active.calendar.headerHeight),webix.skin.$active.calendar.timepickerHeight&&(this.defaults.timepickerHeight=webix.skin.$active.calendar.timepickerHeight))},Tp:function(a){for(var b=this.Op(a),c=this.s,d=[],e=[],f=this.bc-36,g=this.dc-this.s.headerHeight-10-(this.s.timepicker||this.ax?this.s.timepickerHeight:0),h=c.weekNumber?8:7,i=0;h>i;i++)e[i]=Math.ceil(f/(h-i)),f-=e[i];for(var j=b.Sp,k=0;j>k;k++)d[k]=Math.ceil(g/(j-k)),g-=d[k];return[e,d]},icons_setter:function(a){this.ax=a?"object"==typeof a?a:this.Sx:null},ax:[],Sx:[{template:function(){return"<span class='webix_cal_icon_today webix_cal_icon'>"+webix.i18n.calendar.today+"</span>"},on_click:{webix_cal_icon_today:function(){this.setValue(new Date),this.callEvent("onTodaySet",[this.getSelectedDate()])}}},{template:function(){return"<span class='webix_cal_icon_clear webix_cal_icon'>"+webix.i18n.calendar.clear+"</span>"},on_click:{webix_cal_icon_clear:function(){this.setValue(""),this.callEvent("onDateClear",[this.getSelectedDate()])}}}],refresh:function(){this.render()},render:function(){this.Np=0,this.Up=!1;var a=this.s;if(this.isVisible(a.id)){this.Vp=webix.Date.datePart(new Date),this.callEvent("onBeforeRender",[]);var b=this.s.date,c=this.Op(b,!0),d=this.Tp(b),e=d[0],f=d[1],g="<div class='webix_cal_month'><span class='webix_cal_month_name"+(this.s.monthSelect?"":" webix_readonly")+"'>"+a.calendarHeader(b)+"</span>";if(a.navigation&&(g+="<div class='webix_cal_prev_button'></div><div class='webix_cal_next_button'></div>"),g+="</div>",a.weekHeader&&(g+="<div class='webix_cal_header'>"+this.Wp(e)+"</div>"),g+="<div class='webix_cal_body'>"+this.Xp(e,f,c)+"</div>",(this.s.timepicker||this.ax)&&(g+="<div class='webix_cal_footer'>",this.s.timepicker&&(g+=this.Yp(b)),this.ax&&(g+=this.bx()),g+="</div>"),this.w.innerHTML=g,"time"==this.s.type){var h=this.s.date;h&&("string"==typeof h?b=webix.i18n.parseTimeFormatDate(h):webix.isArray(h)&&(b.setHours(h[0]),b.setMinutes(h[1]))),this.yt(-1,b)}this.callEvent("onAfterRender",[])}},bx:function(a){for(var b="<div class='webix_cal_icons'>",c=this.ax,d=0;d<c.length;d++){if(c[d].template){var e="function"==typeof c[d].template?c[d].template:webix.template(c[d].template);b+=e.call(this,a)}c[d].on_click&&webix.extend(this.on_click,c[d].on_click)}return b+="</div>"},Yp:function(a){var b=this.s.calendarTime||webix.i18n.timeFormatStr;return"<div class='webix_cal_time"+(this.ax?" webix_cal_time_icons":"")+"'><span class='webix_icon fa-clock-o'></span> "+b(a)+"</div>"},Wp:function(a){var b=this.s,c="",d=0;b.weekNumber&&(d=1,c+="<div class='webix_cal_week_header' style='width: "+a[0]+"px;' >"+b.calendarWeekHeader()+"</div>");for(var e=webix.Date.startOnMonday?1:0,f=0;7>f;f++){var g=(e+f)%7,h=webix.i18n.calendar.dayShort[g];c+="<div day='"+g+"' style='width: "+a[f+d]+"px;' >"+h+"</div>"}return c},blockDates_setter:function(a){return webix.toFunctor(a,this.$scope)},Zp:function(a,b){var c="webix_cal_day";return webix.Date.equal(a,this.Vp)&&(c+=" webix_cal_today"),webix.Date.equal(a,this.Lp)&&(c+=" webix_cal_select"),a.getMonth()!=b.Qp&&(c+=" webix_cal_outside"),this.sz(a)||(c+=" webix_cal_day_disabled"),this.s.events&&(c+=" "+this.s.events(a)),c},Xp:function(a,b,c){for(var d=this.s,e="",f=webix.Date.datePart(webix.Date.copy(c.Rp)),g=d.weekNumber?1:0,h=webix.Date.getISOWeek(webix.Date.add(f,2,"day",!0)),i=(this.s.minDate||new Date(1,1,1),this.s.maxDate||new Date(9999,1,1),0);i<b.length;i++){e+="<div class='webix_cal_row' style='height:"+b[i]+"px;line-height:"+b[i]+"px'>",g&&(!f.getMonth()&&f.getDate()<7&&(h=webix.Date.getISOWeek(webix.Date.add(f,2,"day",!0))),e+="<div class='webix_cal_week_num' style='width:"+a[0]+"px'>"+h+"</div>");for(var j=g;j<a.length;j++){var k=this.Zp(f,c),l=this.s.dayTemplate.call(this,f);e+="<div day='"+j+"' class='"+k+"' style='width:"+a[j]+"px'><span class='webix_cal_day_inner'>"+l+"</span></div>",f=webix.Date.add(f,1,"day"),f.getHours()&&(f=webix.Date.datePart(f))}e+="</div>",h++}
return e},$p:function(a,b){var c=this.s.date;b||(b=this.aq[this.Np]._p),this.Np||(c=webix.Date.copy(c),c.setDate(1));var d=webix.Date.add(c,a*b,"month",!0);this.bq(c,d)},bq:function(a,b){this.callEvent("onBeforeMonthChange",[a,b])&&(this.Np?this.cq(b):this.showCalendar(b),this.callEvent("onAfterMonthChange",[b,a]))},aq:{"-2":{lz:function(a){var b=this.s,c=b.date,d=!1,e=b.minTime?b.minTime[0]:0,f=b.maxTime?b.maxTime[0]+(b.maxTime[1]?1:0):24,g=b.minTime&&c.getHours()==e?b.minTime[1]:0,h=b.maxTime&&b.maxTime[1]&&c.getHours()==f-1?b.maxTime[1]:60;if(this.s.blockTime){var i=webix.Date.copy(c);i.setMinutes(a),d=this.s.blockTime(i)}return g>a||a>=h||d},dq:function(a,b){a.setMinutes(b)}},"-1":{lz:function(a){var b=this.s,c=b.date,d=b.minTime?b.minTime[0]:0,e=b.maxTime?b.maxTime[0]+(b.maxTime[1]?1:0):24;if(d>a||a>=e)return!0;if(b.blockTime){var f=webix.Date.copy(c);f.setHours(a);for(var g=b.minTime&&a==d?b.minTime[1]:0,h=b.maxTime&&b.maxTime[1]&&a==e-1?b.maxTime[1]:60,i=g;h>i;i+=b.minuteStep)if(f.setMinutes(i),!b.blockTime(f))return!1;return!0}},dq:function(a,b){a.setHours(b)}},0:{_p:1},1:{eq:function(a){return a.getFullYear()},fq:function(a){return webix.i18n.calendar.monthShort[a]},dq:function(a,b){b!=a.getMonth()&&a.setDate(1),a.setMonth(b)},_p:12},2:{eq:function(a){var b=a.getFullYear();return this.gq=b=b-b%10-1,b+" - "+(b+10)},fq:function(a){return this.gq+a},dq:function(a,b){a.setFullYear(this.gq+b)},_p:120}},mz:function(){var a,b,c;if(b=this.aq[-1].lz.call(this,this.s.date.getHours()))for(a=0;24>a;a++)if(!this.aq[-1].lz.call(this,a)){this.s.date.setHours(a);break}if(c=this.aq[-2].lz.call(this,this.s.date.getMinutes()))for(a=0;60>a;a+=this.s.minuteStep)if(!this.aq[-2].lz.call(this,a)){this.s.date.setMinutes(a);break}},cq:function(a){var b,c,d,e,f,g="",h=this.s.weekHeader?2:1,i=this.aq[this.Np],j=this.w.childNodes;if(a){if(!this.sz(a))return;this.s.date=a}if(this.Up||(this.hq=this.w.offsetHeight-this.s.headerHeight-this.s.timepickerHeight,this.iq=j[h].offsetWidth,this.Up=1),this.jq){c=this.hq/6;var k=6,l=this._w||webix.i18n.timeFormat,m=l.match(/%([a,A])/);for(m&&k++,f=parseInt((this.iq-3)/k,10),g+="<div class='webix_time_header'>"+this.kq(f,m)+"</div>",g+="<div  class='webix_cal_body' style='height:"+this.hq+"px'>",this.mz(),g+="<div class='webix_hours'>",e=this.s.date.getHours(),d=0;24>d;d++){if(b="",m&&d%4===0){var n=d?12==d?"pm":"":"am";g+="<div class='webix_cal_block_empty"+b+"' style='"+this.lq(f,c)+"clear:both;'>"+n+"</div>"}this.aq[-1].lz.call(this,d)?b+=" webix_cal_day_disabled":e==d&&(b+=" webix_selected");var o=webix.Date.toFixed(m&&d>12?d-12:d);g+="<div class='webix_cal_block"+b+"' data-value='"+d+"' style='"+this.lq(f,c)+(d%4!==0||m?"":"clear:both;")+"'>"+o+"</div>"}for(g+="</div>",g+="<div class='webix_minutes'>",e=this.s.date.getMinutes(),d=0;60>d;d+=this.s.minuteStep)b="",this.aq[-2].lz.call(this,d)?b=" webix_cal_day_disabled":e==d&&(b=" webix_selected"),g+="<div class='webix_cal_block webix_cal_block_min"+b+"' data-value='"+d+"' style='"+this.lq(f,c)+(d%2===0?"clear:both;":"")+"'>"+webix.Date.toFixed(d)+"</div>";g+="</div>",g+="</div>",g+="<div  class='webix_time_footer'>"+this.mq()+"</div>",this.w.innerHTML=g}else{for(j[0].firstChild.innerHTML=i.eq(this.s.date),c=this.hq/3,f=this.iq/4,e=1==this.Np?this.s.date.getMonth():this.s.date.getFullYear(),d=0;12>d;d++)b=e==(1==this.Np?d:i.fq(d))?" webix_selected":"",g+="<div class='webix_cal_block"+b+"' data-value='"+d+"' style='"+this.lq(f,c)+"'>"+i.fq(d)+"</div>";h-1&&(j[h-1].style.display="none"),j[h].innerHTML=g,j[h+1]?j[h+1].innerHTML=this.mq():this.w.innerHTML+="<div  class='webix_time_footer'>"+this.mq()+"</div>",j[h].style.height=this.hq+"px"}},lq:function(a,b){return"width:"+a+"px; height:"+b+"px; line-height:"+b+"px;"},mq:function(){return"<input type='button' style='width:100%' class='webix_cal_done' value='"+webix.i18n.calendar.done+"'>"},kq:function(a,b){var c=a*(b?5:4),d=2*a;return"<div class='webix_cal_hours' style='width:"+c+"px'>"+webix.i18n.calendar.hours+"</div><div class='webix_cal_minutes' style='width:"+d+"px'>"+webix.i18n.calendar.minutes+"</div>"},yt:function(a,b){this.callEvent("onBeforeZoom",[a])&&(this.Np=a,a?this.cq(b):this.showCalendar(b),this.callEvent("onAfterZoom",[a]))},nq:function(a){var b=this.s.date,c=webix.Date.copy(b);this.aq[this.Np].dq(c,a);var d=this.Np-1;this.yt(d,c)},zt:function(a){this.callEvent("onBeforeDateSelect",[a])&&(this.selectDate(a,!0),this.callEvent("onDateSelect",[a]),this.callEvent("onAfterDateSelect",[a]))},on_click:{webix_cal_prev_button:function(){this.$p(-1)},webix_cal_next_button:function(){this.$p(1)},webix_cal_day:function(a,b,c){if(-1!==c.className.indexOf("webix_cal_day_disabled"))return!1;var d=webix.html.index(c)-(this.s.weekNumber?1:0),e=webix.html.index(c.parentNode),f=webix.Date.add(this.Op().Rp,d+7*e,"day",!0);this.s.timepicker&&(f.setHours(this.s.date.getHours()),f.setMinutes(this.s.date.getMinutes())),this.zt(f)},webix_cal_time:function(){if(this.aq[this.Np-1]){this.jq=!0;var a=this.Np-1;this.yt(a)}},webix_cal_done:function(){this.sz(this.s.date)&&this.zt(this.s.date)},webix_cal_month_name:function(){if(this.jq=!1,2!=this.Np&&this.s.monthSelect){var a=Math.max(this.Np,0)+1;this.yt(a)}},webix_cal_block:function(a,b,c){if(this.jq){if(-1!==c.className.indexOf("webix_cal_day_disabled"))return!1;var d=-1!=c.className.indexOf("webix_cal_block_min")?this.Np-1:this.Np,e=this.s.date,f=webix.Date.copy(e);this.aq[d].dq(f,1*c.getAttribute("data-value")),this.cq(f)}else this.nq(1*c.getAttribute("data-value"))}},Jp:function(a,b){return a?("string"==typeof a&&(a=b?webix.Date.strToDate(b)(a):webix.i18n.parseFormatDate(a)),a):webix.Date.datePart(new Date)},sz:function(a){var b=this.s.blockDates&&this.s.blockDates.call(this,a),c=a<this.s.minDate||a>this.s.maxDate;return!b&&!c},showCalendar:function(a){a=this.Jp(a),this.s.date=a,this.render(),this.resize()},getSelectedDate:function(){return this.Mp?webix.Date.copy(this.Mp):this.Mp},getVisibleDate:function(){return webix.Date.copy(this.s.date)},setValue:function(a){this.selectDate(a,!0)},getValue:function(a){var b=this.getSelectedDate();return a&&(b=webix.Date.dateToStr(a)(b)),b},selectDate:function(a,b){a?(a=this.Jp(a),this.Mp=a,this.Lp=webix.Date.datePart(webix.Date.copy(a))):(this.Mp=null,this.Lp=null,this.s.date&&webix.Date.datePart(this.s.date)),b?this.showCalendar(a):this.render(),this.callEvent("onChange",[a])},locate:function(){return null}},webix.MouseEvents,webix.ui.view,webix.EventSystem),webix.protoUI({name:"property",$init:function(){this.w.className+=" webix_property",this.Ns=[]},defaults:{nameWidth:100,editable:!0},on_render:{checkbox:function(a){return"<input type='checkbox' class='webix_property_check' "+(a?"checked":"")+">"},color:function(a){return'<div class="webix_property_col_val"><div class=\'webix_property_col_ind\' style="background-color:'+(a||"#FFFFFF")+';"></div><span>'+a+"</span></div>"}},on_edit:{label:!1},ad:"webix_f_id",on_click:{webix_property_check:function(a){var b=this.locate(a);return this.getItem(b).value=!this.getItem(b).value,this.callEvent("onCheck",[b,this.getItem(b).value]),!1}},on_dblclick:{},registerType:function(a,b){if(b.template&&(this.on_render[a]=b.template),b.editor&&(this.on_edit[a]=b.editor),b.click)for(var c in b.click)this.on_click[c]=b.click[c]},elements_setter:function(a){this.oq={};for(var b=0;b<a.length;b++){var c=a[b];"multiselect"==c.type&&(c.optionslist=!0),c.id=c.id||webix.uid(),c.label=c.label||"",c.value=c.value||"",this.oq[c.id]=b,this.template=this.Et(a[b])}return a},showItem:function(a){webix.RenderStack.showItem.call(this,a)},locate:function(){return webix.html.locate(arguments[0],this.ad)},getItemNode:function(a){return this.y.childNodes[this.oq[a]]},getItem:function(a){return this.s.elements[this.oq[a]]},ii:function(a){var b=this.getItem(a).type;if("checkbox"==b)return"inline-checkbox";var c=this.on_edit[b];return c===!1?!1:c||b},li:function(a){return this.getItem(a)},ui:function(a,b,c){var d=this.oq[a.id],e=this.s.elements;if(c){for(var f=d+1;f<e.length;f++)if(b.call(this,e[f].id))return e[f].id}else for(var f=d-1;f>=0;f--)if(b.call(this,e[f].id))return e[f].id;return null},updateItem:function(){this.refresh()},ug:function(a){var b=this.getItemNode(a);return{left:b.offsetLeft+this.s.nameWidth,top:b.offsetTop,height:b.firstChild.offsetHeight,width:this.pq,parent:this.w}},setValues:function(a,b){this.s.complexData&&(a=webix.CodeParser.collapseNames(a)),b||this.qq();for(var c in a){var d=this.getItem(c);d&&(d.value=a[c])}this.rq=a,this.refresh()},qq:function(){for(var a=this.s.elements,b=0;b<a.length;b++)a[b].value=""},getValues:function(){for(var a=webix.clone(this.rq||{}),b=0;b<this.s.elements.length;b++){var c=this.s.elements[b];"label"!=c.type&&(a[c.id]=c.value)}return this.s.complexData&&(a=webix.CodeParser.expandNames(a)),a},refresh:function(){this.render()},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&(this.pq=this.bc-this.s.nameWidth,this.render())},$getSize:function(a,b){if(this.s.autoheight){var c=this.s.elements.length;this.s.height=Math.max(this.type.height*c,this.s.minHeight||0)}return webix.ui.view.prototype.$getSize.call(this,a,b)},jb:function(){var a=[],b=this.s.elements;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.css&&"object"==typeof d.css&&(d.css=webix.html.createCss(d.css));var e='<div webix_f_id="'+d.id+'" class="webix_property_line '+(d.css||"")+'">';if("label"==d.type)a[c]=e+"<div class='webix_property_label_line'>"+d.label+"</div></div>";else{var f,g=this.on_render[d.type],h="<div class='webix_property_label' style='width:"+this.s.nameWidth+"px'>"+d.label+"</div><div class='webix_property_value' style='width:"+this.pq+"px'>";f=d.collection||d.options?d.template(d,d.value):d.format?d.format(d.value):d.value,g&&(f=g.call(this,d.value,d)),a[c]=e+h+f+"</div></div>"}}return a.join("")},type:{height:24,templateStart:webix.template(""),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.propertyItemHeight||24}},webix.AutoTooltip,webix.EditAbility,webix.MapCollection,webix.MouseEvents,webix.Scrollable,webix.SingleRender,webix.AtomDataLoader,webix.EventSystem,webix.ui.view),webix.protoUI({name:"colorboard",defaults:{template:'<div style="width:100%;height:100%;background-color:{obj.val}"></div>',palette:null,height:220,width:220,cols:12,rows:10,minLightness:.15,maxLightness:1},$init:function(){webix.event(this.x,"click",webix.bind(function(a){var b=webix.html.locate(a,"webix_val");this.setValue(b),this.callEvent("onSelect",[this.s.value,a])},this))},sq:function(a){var b=this.s.palette;a=a.toUpperCase();for(var c=0,d=b.length;d>c;c++)for(var e=0,f=b[c].length;f>e;e++)if(b[c][e].toUpperCase()==a)return{row:c,col:e};return null},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},getValue:function(){return this.s.value},re:function(){return this.x.firstChild},setValue:function(a){return a?("#"!=a.charAt(0)&&(a="#"+a),this.s.value=a,this.tq(a),a):void 0},uq:null,vq:function(){if(this.uq&&this.uq.parentNode)return this.uq;var a=this.uq=document.createElement("div");return a.className="webix_color_selector",this.x.lastChild.appendChild(a),a},tq:function(a,b){if(this.isVisible()){var c=0,d=0;if(!b){var e=this.sq(a);e&&(b=this.x.lastChild.childNodes[e.row].childNodes[e.col])}if(!(b&&b.parentNode&&b.parentNode.parentNode))return void(this.uq&&(this.uq.style.left="-100px"));var f=b.parentNode;c=b.offsetLeft-f.offsetLeft,d=-(this.$height-(b.offsetTop-f.parentNode.offsetTop));var g=this.vq(),h=["left:"+c+"px","top:"+d+"px","width:"+b.style.width,"height:"+b.style.height].join(";");"undefined"!=typeof g.style.cssText?g.style.cssText=h:g.setAttribute("style",h)}},wq:function(a){function b(a){return webix.color.toHex(a,2)}function c(a,c,d){return"#"+b(Math.floor(a))+b(Math.floor(c))+b(Math.floor(d))}function d(a,b,c){var d,f,g;if(b){var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;d=e(i,h,a+1/3),f=e(i,h,a),g=e(i,h,a-1/3)}else d=f=g=c;return{r:255*d,g:255*f,b:255*g}}function e(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>=c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}function f(a){for(var b=[],d=255,e=d/a,f=0;a>f;f++)d=Math.round(d>0?d:0),b.push(c(d,d,d)),d-=e;return b[b.length-1]="#000000",b}var g=[],h=a.rows-1,i=1/a.cols,j=(a.maxLightness-a.minLightness)/h,k=null;g.push(f(a.cols));for(var l=0,m=a.minLightness;h>l;l++){k=[];for(var n=0,o=0;n<a.cols;n++){var p=d(o,1,m);k.push(c(p.r,p.g,p.b)),o+=i}g.push(k),m+=j}this.s.palette=g},render:function(){function a(a,b,c){for(var f='<div class="webix_color_row">',g=0;g<a.length;g++)e.width=b[g],e.height=c,e.val=a[g],f+=d(e);return f+="</div>"}if(this.isVisible(this.s.id)){this.s.palette||this.wq(this.s);var b=this.s.palette;this.callEvent("onBeforeRender",[]);for(var c=this.s,d=webix.template('<div style="width:{obj.width}px;height:{obj.height}px;" webix_val="{obj.val}">'+(c.template||"")+"</div>"),e={width:0,height:0,val:0},f=this.$width,g=this.$height,h=[],i='<div class="webix_color_palette">',j="object"==typeof b[0]?b[0]:b,k=0;k<j.length;k++)h[k]=Math.floor(f/(j.length-k)),f-=h[k];if("object"==typeof b[0])for(var l=0;l<b.length;l++){var m=Math.floor(g/(b.length-l));g-=m;var n=b[l];i+=a(n,h,m)}else i+=a(b,h,g);i+="</div>",this.x.innerHTML=i,this.uq=null,this.callEvent("onAfterRender",[])}},refresh:function(){this.render()}},webix.ui.view,webix.EventSystem),webix.protoUI({name:"resizer",defaults:{width:7,height:7},$init:function(a){this.x.className+=" webix_resizer";var b=this.getParentView().Cc;webix.event(this.x,webix.env.mouse.down,this.xq,this),webix.event(document.body,webix.env.mouse.up,this.yq,this);var c=this.zq();this.Aq=!1,this.Bq=c,this.Cq="x"==c?"width":"height","x"==c?a.height=0:a.width=0,b>0?(this.x.className+=" webix_resizer_v"+c,this.x.style.marginRight="-"+b+"px","x"==c?a.width=b:a.height=b,this.$nospace=!0):this.x.className+=" webix_resizer_"+c,this.x.innerHTML="<div class='webix_resizer_content'></div>","y"==c&&b>0&&(this.x.style.marginBottom="-"+(a.height||this.defaults.height)+"px")},xq:function(a){var b=this.Dq();b&&!this.s.disabled&&(a=a||event,this.Aq=!0,this.Pl=webix.html.pos(a),this.Eq=[],this.Fq(a,b[0]))},yq:function(){this.Aq=!1,this.Pl=!1},Fq:function(a,b){var c,d,e,f,g;a=a||event,c=this.Bq,this.getParentView().x.style.position="relative",e=webix.html.offset(this.x),f=webix.html.offset(this.getParentView().x),g=e[c]-f[c],d=webix.html.offset(b.$view)[c]-webix.html.offset(this.getParentView().$view)[c],this.Rl=[c,b,g,d],this.Gq=new webix.ui.resizearea({container:this.getParentView().x,dir:c,eventPos:this.Pl[c],start:g-1,height:this.$height,width:this.$width,border:1,margin:this.getParentView()["_padding"+c.toUpperCase()]}),this.Gq.attachEvent("onResizeEnd",webix.bind(this.Hq,this)),this.Gq.attachEvent("onResize",webix.bind(this.Iq,this)),webix.html.addCss(document.body,"webix_noselect",1)},zq:function(){return this.getParentView().mc?"y":"x"},Iq:function(){var a,b,c,d,e,f,g,h,i,j;if(this.Rl)for(a=this.Dq(),e=this.Rl[0],d=this.Gq.Jl-this.Rl[2],i=this.Jq(a,e,d),j=a[0]["$"+this.Cq]+a[1]["$"+this.Cq],g="y"==e?["minHeight","maxHeight"]:["minWidth","maxWidth"],f=0;2>f;f++){b=a[f].s,c=f?-d:d;var k=b[g[0]],l=b[g[1]];if(c>0&&l&&l<=i[f]||0>c&&(k||3)>=i[f])return this.Eq[f]=c>0?l:k||3,h=this.Kq(a,e),void(this.Gq.Dl.style["y"==e?"top":"left"]=this.Rl[3]+h[0]+"px");i[f]<3?this.Gq.Dl.style["y"==e?"top":"left"]=this.Rl[3]+f*j+1+"px":this.Eq[f]=null}},Dq:function(){var a,b;for(a=this.getParentView().q,b=0;b<a.length;b++)if(a[b]==this)return!a[b-1]||a[b-1].s.$noresize?null:!a[b+1]||a[b+1].s.$noresize?null:[a[b-1],a[b+1]]},Hq:function(a){if("undefined"!=typeof a){var b,c,d,e,f,g=this.getParentView().mc;if(this.Lq=null,this.Rl){if(c=this.Rl[0],d=a-this.Rl[2],b=this.Dq(),b[0]&&b[1]){f=this.Mq(b,c,d);for(var e=0;2>e;e++){var h=b[e].$getSize(0,0);if(g?h[2]==h[3]:Math.abs(h[1]-h[0])<3)b[e].s[this.Cq]=f[e],b[e].tc&&b[e].tc(this.Cq,f[e],g);else{var i=b[e].$view[g?"offsetHeight":"offsetWidth"];b[e].s.gravity=f[e]/i*b[e].s.gravity}}b[0].resize();for(var e=0;2>e;e++)b[e].callEvent&&b[e].callEvent("onViewResize",[]);webix.callEvent("onLayoutResize",[b])}this.Rl=!1}this.Rl=!1,this.Aq=!1,this.Eq=null,webix.html.removeCss(document.body,"webix_noselect")}},Kq:function(a){var b,c,d;return d=a[0]["$"+this.Cq]+a[1]["$"+this.Cq],this.Eq[0]?(b=this.Eq[0],c=d-b):this.Eq[1]&&(c=this.Eq[1],b=d-c),[b,c]},Jq:function(a,b,c){for(var d=[],e="height"==this.Cq?"offsetHeight":"offsetWidth",f=0;2>f;f++)d[f]=a[f].$view[e]+(f?-1:1)*c;return d},Mq:function(a,b,c){var d,e,f;if(this.Eq[0]||this.Eq[1])e=this.Kq(a,b);else for(e=this.Jq(a,b,c),d=0;2>d;d++)e[d]<0&&(f=e[0]+e[1],e[d]=1,e[1-d]=f-1);return e}},webix.MouseEvents,webix.ui.view),webix.protoUI({name:"multiview",defaults:{animate:{}},setValue:function(a){webix.$$(a).show()},getValue:function(){return this.getActiveId()},$init:function(){this.Mh=0,this.mc=1,this.x.style.position="relative",this.x.className+=" webix_multiview",this.Nq=[]},Oq:function(a,b){var c=webix.$$(a);c.Pq||(c.Qq=[],c.Pq={}),c.Pq[b]||(c.Pq[b]=!0,c.Qq.push(b))},Rq:function(a){var b=webix.$$(a);if(this.s.keepViews&&(b.x.style.display=""),this.Nq[this.Nq.length-2]!=a?(10==this.Nq.length&&this.Nq.splice(0,1),this.Nq.push(a)):this.Nq.splice(this.Nq.length-1,1),b.Pq){for(var c=0;c<b.Qq.length;c++)webix.$$(b.Qq[c]).render();b.Qq=[],b.Pq={}}},addView:function(){var a=webix.ui.baselayout.prototype.addView.apply(this,arguments);return webix.html.remove(webix.$$(a).$view),a},Vx:function(a){if(a==this.Mh){var b=Math.max(a-1,1);this.q[b]&&this.fc(this.q[b],!1)}a<this.Mh&&this.Mh--},Fb:function(){},kc:function(a){a=a||this.nc;for(var b=0;b<a.length;b++)a[b].Ob=this.s.borderless?{top:1,left:1,right:1,bottom:1}:this.s.Ob||{};webix.ui.baselayout.prototype.kc.call(this,a);for(var b=1;b<this.q.length;b++)this.s.keepViews?this.q[b].x.style.display="none":webix.html.remove(this.q[b].x);for(var b=0;b<a.length;b++){var c=this.q[b];if(!c.q||c.Gc){var d=c.s.Ob;d.top&&(c.x.style.borderTopWidth="0px"),d.left&&(c.x.style.borderLeftWidth="0px"),d.right&&(c.x.style.borderRightWidth="0px"),d.bottom&&(c.x.style.borderBottomWidth="0px")}}this.Rq(this.getActiveId())},cells_setter:function(a){this.nc=a},Sq:function(a,b){var c=(this.s.animate||{}).direction,d="top"==c||"bottom"==c;return b>a?d?"bottom":"right":d?"top":"left"},fc:function(a,b){var c=this.getParentView();if(c&&c.getTabbar&&c.getTabbar().setValue(a.s.$id||a.s.id),this.Wh)return webix.delay(this.fc,this,[a,b],100);for(var d=-1,e=0;e<this.q.length;e++)if(this.q[e]==a){d=e;break}if(!(0>d||d==this.Mh)){var f=this.q[this.Mh],g=this.q[d];if(f.$getSize(0,0),(b||"undefined"==typeof b)&&webix.animate.isSupported()&&this.s.animate){var h=webix.extend({},this.s.animate);this.s.keepViews&&(h.keepViews=!0),h.direction=this.Sq(d,this.Mh),h=webix.Settings.E(b||{},h);var i=webix.animate.formLine(g.x,f.x,h);g.$getSize(0,0),g.$setSize(this.bc,this.dc);var j=h.callback;h.callback=function(){webix.animate.breakLine(i,this.s.keepViews),this.Wh=!1,j&&j.call(this),j=h.master=h.callback=null,this.resize()},h.master=this,this.Mh=d,this.Rq(this.getActiveId()),webix.animate(i,h),this.Wh=!0}else this.s.keepViews?f.x.style.display="none":(webix.html.remove(f.x),this.x.appendChild(this.q[e].x)),this.Mh=d,f.resize(),this.Rq(this.getActiveId());g.callEvent&&(g.callEvent("onViewShow",[]),webix.ui.each(g,this.Lw)),this.callEvent("onViewChange",[f.s.id,g.s.id])}},$getSize:function(a,b){var c=this.q[this.Mh].$getSize(0,0);if(this.s.fitBiggest)for(var d=0;d<this.q.length;d++)if(d!=this.Mh)for(var e=this.q[d].$getSize(0,0),f=0;4>f;f++)c[f]=Math.max(c[f],e[f]);var g=webix.ui.baseview.prototype.$getSize.call(this,0,0);return g[1]>=1e5&&(g[1]=0),g[3]>=1e5&&(g[3]=0),g[0]=(g[0]||c[0])+a,g[1]=(g[1]||c[1])+a,g[2]=(g[2]||c[2])+b,g[3]=(g[3]||c[3])+b,g},$setSize:function(a,b){this.lc=[a,b],webix.ui.baseview.prototype.$setSize.call(this,a,b),this.q[this.Mh].$setSize(a,b)},isVisible:function(a,b){return b&&b!=this.getActiveId()?(a&&this.Oq(b,a),!1):webix.ui.view.prototype.isVisible.call(this,a,this.s.id)},getActiveId:function(){return this.q.length?this.q[this.Mh].s.id:null},back:function(a){if(a=a||1,this.callEvent("onBeforeBack",[this.getActiveId(),a])){if(this.Nq.length>a){var b=this.Nq[this.Nq.length-a-1];return webix.$$(b).show(),b}return null}return null}},webix.ui.baselayout),webix.protoUI({name:"form",defaults:{type:"form",autoheight:!0},Tq:-1,_f:"webix_form",ag:!0,$getSize:function(a,b){this.cc&&!this.s.width&&(a+=webix.ui.scrollSize);var c=webix.ui.layout.prototype.$getSize.call(this,a,b);return(this.s.scroll||!this.s.autoheight)&&(c[2]=this.s.height||this.s.minHeight||0,c[3]+=1e5),c}},webix.ui.toolbar),webix.protoUI({name:"multiselect",$cssName:"richselect",defaults:{separator:","},Kt:function(a){var b=!webix.isArray(a)&&"object"==typeof a&&!a.name,c={view:"checksuggest",separator:this.config.separator,buttonText:this.config.buttonText,button:this.config.button};this.s.optionWidth?c.width=this.s.optionWidth:c.fitMaster=!0,b&&webix.extend(c,a,!0);var d=webix.ui(c),e=d.getList();return"string"==typeof a?e.load(a):b||e.parse(a),d.attachEvent("onShow",function(){d.setValue(webix.$$(d.s.master).config.value)}),d},$setValue:function(a){if(this.se){var b=this.getPopup(),c="";b&&(c=b.setValue(a),"object"==typeof c&&(c=c.join(this.config.separator+" "))),this.getInputNode().innerHTML=c}},getValue:function(){return this.s.value||""}},webix.ui.richselect),webix.editors.multiselect=webix.extend({popupType:"multiselect"},webix.editors.richselect),webix.type(webix.ui.list,{name:"multilist",templateStart:webix.template('<div webix_l_id="#!id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;">')},"default"),webix.type(webix.ui.list,{name:"checklist",templateStart:webix.template('<div webix_l_id="#!id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden; white-space:nowrap;">{common.checkbox()}'),checkbox:function(a){var b=a.$checked?"fa-check-square":"fa-square-o";return"<span class='webix_icon "+b+"'></span>"},template:webix.template("#value#")},"default"),webix.protoUI({name:"multisuggest",defaults:{separator:",",type:"layout",button:!0,width:0,filter:function(a,b){var c=this.getItemText(a.id);return c.toString().toLowerCase().indexOf(b.toLowerCase())>-1},body:{rows:[{view:"list",type:"multilist",borderless:!0,autoheight:!0,yCount:5,multiselect:"touch",select:!0,on:{onItemClick:function(a){var b=this.getParentView().getParentView();webix.delay(function(){b._y(a)})}}},{view:"button",click:function(){var a=this.getParentView().getParentView();a.setMasterValue({id:a.getValue()}),a.hide()}}]}},_y:function(a){var b=this.getValue(),c=webix.toArray(b?this.getValue().split(this.s.separator):[]);c.find(a)<0?c.push(a):c.remove(a);var d=webix.$$(this.s.master);d?d.setValue(c.join(this.s.separator)):this.setValue(c)},Jt:function(a){return a.rows[0]},_d:function(){var a=this.getButton(),b=this.s.button?this.s.buttonText||webix.i18n.controls.select:0;a&&(b?(a.s.value=b,a.refresh()):a.hide())},getButton:function(){return this.getBody().getChildViews()[1]},getList:function(){return this.getBody().getChildViews()[0]},setValue:function(a){var b=[],c=this.getList();if(c.unselect(),a&&("string"==typeof a&&(a=a.split(this.config.separator)),a[0]))for(var d=0;d<a.length;d++)c.exists(a[d])&&(c.select(a[d],!0),b.push(this.getItemText(a[d])));return this.s.value=a?a.join(this.config.separator):"",b},getValue:function(){return this.s.value}},webix.ui.suggest),webix.protoUI({name:"checksuggest",defaults:{button:!1,body:{rows:[{view:"list",css:"webix_multilist",borderless:!0,autoheight:!0,yCount:5,select:!0,type:"checklist",on:{onItemClick:function(a){var b=this.getItem(a);b.$checked=b.$checked?0:1,this.refresh(a);var c=this.getParentView().getParentView();c._y(a)}}},{view:"button",click:function(){var a=this.getParentView().getParentView();a.setMasterValue({id:a.getValue()}),a.hide()}}]}},ge:function(a,b){if(b.count&&b.count())if(a.isVisible()){var c=b.getSelectedId(!1,!0);c&&this._y(c),a.hide(!0)}else a.show(this.ae);else a.isVisible()&&a.hide(!0)},setValue:function(a){var b,c=this.getList(),d=[],e={},f=[];for(a=a||[],"string"==typeof a&&(a=a.split(this.config.separator)),b=0;b<a.length;b++)e[a[b]]=1,c.exists(a[b])&&d.push(this.getItemText(a[b]));for(c.data.each(function(a){a.$checked?e[a.id]||(a.$checked=0,f.push(a.id)):e[a.id]&&(a.$checked=1,f.push(a.id))},this,!0),b=0;b<f.length;b++)c.refresh(f[b]);return this.s.value=a.length?a.join(this.config.separator):"",d},getValue:function(){return this.s.value},Rs:function(){}},webix.ui.multisuggest),webix.protoUI({name:"multicombo",$cssName:"text",defaults:{separator:",",icon:!1,iconWidth:0,tagMode:!0,tagTemplate:function(a){return a.length?a.length+" item(s)":""},template:function(a,b){return b.yy(a,b)}},$init:function(){this.$view.className+=" webix_multicombo",this.attachEvent("onBlur",webix.bind(function(){var a=this.getInputNode().value;a&&this.s.newValues&&this.HA(a),this.xy="",this.refresh()},this)),this.attachEvent("onBeforeRender",function(){return this.zy||(this.zy=webix.skin.$active.inputHeight),!0}),this.attachEvent("onAfterRender",function(){this.ac=null}),this.IA=0},on_click:{webix_multicombo_delete:function(a,b,c){var d;return c&&(d=c.parentNode.getAttribute("value"))&&this.Ay(d),!1}},Ay:function(a){var b=this.s.value;"string"==typeof b&&(b=b.split(this.s.separator)),b=webix.toArray(b),b.remove(a),this.setValue(b.join(this.s.separator))},az:function(a){var b=webix.$$(this.config.suggest),c=b.getList(),d=c.getItem(a);if(d){var e=b.getValue();e=webix.toArray(e?e.split(b.config.separator):[]),e.find(a)<0&&(e.push(a),b.setValue(e),this.setValue(b.getValue()))}},HA:function(a){var b=webix.$$(this.config.suggest),c=b.getList();!c.exists(a)&&a.replace(/^\s+|\s+$/g,"")&&c.add({id:a,value:a}),this.az(a)},Kt:function(a){var b=!webix.isArray(a)&&"object"==typeof a&&!a.name,c={view:"checksuggest",separator:this.config.separator,buttonText:this.config.buttonText,button:this.config.button},d=this;this.s.optionWidth&&(c.width=this.s.optionWidth),b&&webix.extend(c,a,!0);var e=webix.ui(c);this.s.optionWidth||(e.$customWidth=function(){this.config.width=d.Ee(d.s)}),e.attachEvent("onBeforeShow",function(a,b,c){return this.s.master&&(this.setValue(webix.$$(this.s.master).config.value),webix.$$(this.s.master).getInputNode().value?(this.getList().refresh(),this.je=!0):this.getList().filter(),a.tagName&&"input"==a.tagName.toLowerCase())?(webix.ui.popup.prototype.show.apply(this,[a.parentNode,b,c]),!1):void 0});var f=e.getList();return"string"==typeof a?f.load(a):b||f.parse(a),e},yy:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o="",p="",q="top"==this.s.labelPosition;return q="top"==this.s.labelPosition,c=a.id||webix.uid(),n=b.Ee(a),e=a.inputAlign||"left",h=this.zy-2*webix.skin.$active.inputPadding-2,f=b.xy||"",k="<ul class='webix_multicombo_listbox' style='line-height:"+h+"px'></ul>",g=Math.min(n,b.By||7),!a.placeholder||a.value||b.xy||(p=a.placeholder||"",g=n),d="<input type='text' placeholder='"+p+"' class='webix_multicombo_input' style='width: "+g+"px;height:"+h+"px;max-width:"+(n-20)+"px' value='"+f+"'/>",i="<div class='webix_inp_static' tabindex='0' onclick='' style='line-height:"+h+"px;width: "+n+"px;  text-align: "+e+";height:auto' >"+k+d+"</div>",j=b.$renderLabel(a,c),m=this.s.awidth-n-2*webix.skin.$active.inputPadding,l=(a.invalid?a.invalidMessage:"")||a.bottomLabel,l&&(o="<div class='webix_inp_bottom_label' style='width:"+n+"px;margin-left:"+Math.max(m,webix.skin.$active.inputPadding)+"px;'>"+l+"</div>"),q?j+"<div class='webix_el_box' style='width:"+this.s.awidth+"px; '>"+i+o+"</div>":"<div class='webix_el_box' style='width:"+this.s.awidth+"px; min-height:"+this.s.aheight+"px;'>"+j+i+o+"</div>"},Cy:function(){return this.re().getElementsByTagName("UL")[0]},oe:function(){var a=this.getPopup();if(a){var b=a?a.setValue(this.s.value):null,c="",d=this.Cy(),e=b&&b.length;if(e){var f=this.zy-2*webix.skin.$active.inputPadding-8,g=this.s.value.split(this.s.separator);if(this.s.tagMode)for(var h=0;h<b.length;h++){var i="<span>"+b[h]+"</span><span class='webix_multicombo_delete'>x</span>";c+="<li class='webix_multicombo_value' style='line-height:"+f+"px;' value='"+g[h]+"'>"+i+"</li>"}else c+="<li class='webix_multicombo_tag' style='line-height:"+f+"px;'>"+this.s.tagTemplate(g)+"</li>"}d.innerHTML=c,this.s.placeholder&&e&&(this.getInputNode().placeholder="",!this.getInputNode().value&&this.getInputNode().offsetWidth>20&&(this.getInputNode().style.width="20px"))}this.Dy()},Ey:function(a){if(a=a||this.getInputNode())if(a.value.length){if(a.createTextRange){var b=a.createTextRange();b.moveStart("character",a.value.length),b.collapse(),b.select()}else if(a.selectionStart||"0"==a.selectionStart){var c=a.value.length;a.selectionStart=c,a.selectionEnd=c,a.focus()}}else a.focus()},Dy:function(){var a="top"==this.s.labelPosition,b=this.JA(),c=Math.max(b.offsetHeight+2*webix.skin.$active.inputPadding,this.zy);a&&(c+=this.le),c+=this.s.bottomPadding||0;var d=this.$getSize(0,0);if(c!=d[2]){var e=b.offsetHeight+(a?this.le:0);if(e==this.Fy?this.IA++:this.IA=0,this.IA>10)return!1;this.Fy=e;var f=this.getTopParentView();clearTimeout(f.kg),f.kg=webix.delay(function(){this.config.height=this.Fy+2*webix.skin.$active.inputPadding,this.resize(),this.Hy&&(this.Ey(this.getInputNode()),this.Hy=!1),this.bz&&(this.getInputNode().select(),this.bz=!1),(this.getPopup().isVisible()||this.Hy)&&this.getPopup().show(this.JA())},this)}this.bz&&this.getInputNode().select()},JA:function(){for(var a=this.re(),b=a.childNodes,c=0;c<b.length;c++)if(b[c].className&&-1!=b[c].className.indexOf("webix_inp_static"))return b[c];return a},getInputNode:function(){return this.re().getElementsByTagName("INPUT")[0]},$setValue:function(){this.oe()},getValue:function(){return this.s.value},$setSize:function(a,b){var c=this.s;if(webix.ui.view.prototype.$setSize.call(this,a,b)){if(!a||!b)return;"top"==c.labelPosition&&(c.labelWidth=0),this.render()}},Iy:function(a){var b=document.createElement("span");b.className="webix_multicombo_input",b.style.visibility="visible",b.style.height="0px",b.innerHTML=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),document.body.appendChild(b);var c=b.offsetWidth+10;return document.body.removeChild(b),c},De:function(){webix.event(this.re(),"click",function(){this.getInputNode().focus()},this),webix.event(this.getInputNode(),"focus",function(){-1==this.re().className.indexOf("webix_focused")&&(this.re().className+=" webix_focused")},this),webix.event(this.getInputNode(),"blur",function(){this.re().className=this.re().className.replace(" webix_focused","")},this),webix.event(this.getInputNode(),"input",function(){!this.getInputNode().value&&this.xy&&(this.getInputNode().style.width="20px",this.By=20,this.xy="",this.Hy=!0,this.getPopup().show(this.JA()),this.Dy())},this),webix.event(this.getInputNode(),"keyup",function(){var a,b=this.getInputNode();a=!this.s.placeholder||this.s.value||b.value?this.Iy(b.value)+10:this.Ee(this.s),b.style.width=a+"px",a!=this.By?(this.By=a,this.xy=b.value,this.Hy=!0,this.getPopup().show(this.JA()),this.Dy()):this.vA!=this.getPopup().$height&&this.getPopup().show(this.JA())},this),webix.event(this.getInputNode(),"keydown",function(a){if(this.bz=!1,this.isVisible()){a=a||event;var b=this.Cy().lastChild;if(this.vA=this.getPopup().$height,8==a.keyCode&&b&&(!this.getInputNode().value&&(new Date).valueOf()-(this.Jy||0)>800?(this.Hy=!0,this.Ay(b.getAttribute("value"))):this.Jy=(new Date).valueOf()),13==a.keyCode||9==a.keyCode){var c=this.getInputNode(),d="",e=webix.$$(this.s.suggest),f=e.getList();f.getSelectedId()||(c.value&&(d=e.getSuggestion()),this.s.newValues?this.HA(c.value):d&&(9==a.keyCode?(this.Hy=!1,this.xy="",this.By=10,c.value="",this.az(d)):(this.bz=!0,this.az(d)))),13==a.keyCode&&(this.bz=!0,this.Hy=!0)}}},this),webix.$$(this.s.suggest).linkInput(this)}},webix.ui.richselect),webix.protoUI({name:"menu",
Oh:"webix_menu",$init:function(a){a.autowidth&&(this.KA=!0,delete a.autowidth),this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.Uq()},this)),this.attachEvent("onMouseMove",this.Vq),this.attachEvent("onMouseOut",function(){this.Wq()&&"click"==this.s.openAction||this.Xq||this.Uq()}),this.attachEvent("onItemClick",function(a,b,c){var d=this.getItem(a);if(d){if(d.$template)return;var e=this.getTopMenu();if(!this.data.getMark(a,"webix_disabled")){if(!e.callEvent("onMenuItemClick",[a,b,c]))return void(b.showpopup=!0);this!=e&&e.Le(a,b,c),d.submenu?(this!==e&&!webix.env.touch||"click"!=e.s.openAction||this.Yq(a,c),b.showpopup=!0):(e.Uq(!0),e.$q&&e.hide())}}}),this.data.attachEvent("onClearAll",function(){this._q=[]}),this.data._q=[]},sizeToContent:function(){if("y"==this.s.layout){var a=[];this.data.each(function(b){a.push(this.jb(b))},this),this.config.width=webix.html.getTextSize(a,this.$view.className).width+20,this.resize()}},getTopMenu:function(){for(var a=this;a.ar;)a=webix.$$(a.ar);return a},Rh:function(a){this.s.autoheight&&(a=this.count());for(var b=0,c=0;a>c;c++){var d=this.data.pull[this.data.order[c]];b+=d&&"Separator"==d.$template?4:this.type.height}return b},on_mouse_move:{},type:{css:"menu",width:"auto",templateStart:function(a,b,c){if("Separator"===a.$template||"Spacer"===a.$template)return'<div webix_l_id="#id#" class="webix_context_'+a.$template.toLowerCase()+'">';var d=(a.href?" href='"+a.href+"' ":"")+(a.target?" target='"+a.target+"' ":"");return webix.ui.list.prototype.type.templateStart(a,b,c).replace(/^<div/,"<a "+d)+(a.submenu&&b.subsign?"<div class='webix_submenu_icon'></div>":"")},templateEnd:function(a){return"Separator"===a.$template||"Spacer"===a.$template?"</div>":"</a>"},templateSeparator:webix.template("<div class='sep_line'></div>"),templateSpacer:webix.template("<div></div>")},getMenu:function(a){if(this.data.pull[a])return this;for(var b in this.data.pull){var c=this.getItem(b);if(c.submenu){var d=this.br(c).getMenu(a);if(d)return d}}},getSubMenu:function(a){var b=this.getMenu(a),c=b.getItem(a);return c.submenu?b.br(c):null},getMenuItem:function(a){return this.getMenu(a).getItem(a)},br:function(a){var b=webix.$$(a.submenu);return b||(a.submenu=this.cr(a),b=webix.$$(a.submenu)),b},Vq:function(a,b,c){this.Wq()&&this.Yq(a,c)},Wq:function(){var a=this.getTopMenu();if("click"==a.s.openAction){if(webix.env.touch)return!1;var b=a.dr;return b&&webix.$$(b).isVisible()?!0:!1}return!0},Yq:function(a,b){var c=this.getItem(a);if(c&&(this.Xq=null,this.dr&&c.submenu!=this.dr&&this.Uq(!0),c.submenu&&!this.config.hidden)){var d=this.br(c);if(this.data.getMark(a,"webix_disabled"))return;this.getTopMenu().KA&&d.sizeToContent&&!d.isVisible()&&d.sizeToContent(),d.show(b,{pos:this.s.subMenuPos}),d.ar=this.s.id,this.dr=c.submenu}},disableItem:function(a){this.getMenu(a).addCss(a,"webix_disabled")},enableItem:function(a){this.getMenu(a).removeCss(a,"webix_disabled")},er:function(a,b){var c=this.data;c._q[a]!=b&&(c._q[a]=b,c.filter(function(a){return!c._q[a.id]}),this.resize())},hideItem:function(a){var b=this.getMenu(a);b&&b.er(a,!0)},showItem:function(a){var b=this.getMenu(a);return b?(b.er(a,!1),webix.ui.list.prototype.showItem.call(b,a)):void 0},Uq:function(a){if(this.dr){var b=webix.$$(this.dr);b.Uq&&b.Uq(a),(a||!b.gr)&&(b.hide(),this.dr=null)}},cr:function(a){var b={view:"submenu",data:a.submenu},c=this.getTopMenu().s.submenuConfig;c&&webix.extend(b,c,!0);var d=this.getMenuItem(a.id);d&&d.config&&webix.extend(b,d.config,!0);var e=webix.ui(b);return e.s.id},$skin:function(){webix.ui.list.prototype.$skin.call(this),this.type.height=webix.skin.$active.menuHeight},defaults:{scroll:"",layout:"x",mouseEventDelay:100,subMenuPos:"bottom"}},webix.ui.list),webix.protoUI({name:"submenu",$init:function(){this.gd=webix.clone(this.hr),this.gd.A=this,this.attachEvent("onMouseOut",function(){"click"!=this.getTopMenu().s.openAction&&(this.Xq||this.gr||this.hide())}),this.attachEvent("onMouseMoving",function(){this.ar&&(webix.$$(this.ar).Xq=!0)})},$skin:function(){webix.ui.menu.prototype.$skin.call(this),webix.ui.popup.prototype.$skin.call(this),this.type.height=webix.skin.$active.menuHeight},hr:{$getSize:function(a,b){var c=1*this.A.s.height,d=1*this.A.s.width,e=webix.ui.menu.prototype.$getSize.call(this.A,a,b);return this.A.s.height=c,this.A.s.width=d,e},$setSize:function(a,b){this.A.s.scroll&&(this.A.ed.style.height=b+"px")},destructor:function(){this.A=null}},body_setter:function(){},defaults:{width:150,subMenuPos:"right",layout:"y",autoheight:!0},type:{height:webix.skin.menuHeight,subsign:!0}},webix.ui.menu,webix.ui.popup),webix.ContextHelper={defaults:{padding:"4",hidden:!0},body_setter:function(a){return a=webix.ui.window.prototype.body_setter.call(this,a),this.gd.x.style.borderWidth="0px",a},attachTo:function(a){a.on_context?a.attachEvent("onAfterContextMenu",webix.bind(this.ir,this)):webix.event(a,"contextmenu",this.jr,this)},getContext:function(){return this.nh},jr:function(a){return this.nh=webix.toNode(a||event),this.kr(a)},ir:function(a,b){return this.nh={obj:webix.$$(b),id:a},this.kr(b)},kr:function(a){var b=this.show(a,null,!0);return b===!1?b:(webix.callEvent("onClick",[]),webix.html.preventEvent(a))},gr:!0,master_setter:function(a){return this.attachTo(a),null}},webix.protoUI({name:"context"},webix.ContextHelper,webix.ui.popup),webix.protoUI({name:"contextmenu",$q:!0,$init:function(a){a.submenuConfig&&webix.extend(a,a.submenuConfig)}},webix.ContextHelper,webix.ui.submenu),webix.protoUI({name:"tabbar",$skin:function(){var a=webix.skin.$active,b=this.defaults;b.topOffset=a.tabTopOffset||0,b.tabOffset="undefined"!=typeof a.tabOffset?a.tabOffset:10,b.bottomOffset=a.tabBottomOffset||0,b.height=a.tabbarHeight,b.tabMargin=a.tabMargin,b.inputPadding=a.inputPadding,b.tabMinWidth=a.tabMinWidth||100,b.tabMoreWidth=a.tabMoreWidth||40},ut:function(){var a,b=this.config,c=b.options.length,d=this.we-2*b.tabOffset,e=b.optionWidth||b.tabMinWidth;if(e>d/c)return{max:parseInt(d/e,10)||1};if(!b.optionWidth)for(a=0;a<b.options.length;a++)b.options[a].width&&(d-=b.options[a].width+(a||b.type?0:b.tabMargin),c--);return{width:c?d/c:b.tabMinWidth}},Je:function(){var a=this.s;if(!a.tabbarPopup){var b={view:"popup",width:a.popupWidth||200,body:{view:"list",borderless:!0,select:!0,css:"webix_tab_list",autoheight:!0,yCount:a.yCount,type:{template:a.popupTemplate}}},c=webix.ui(b);c.getBody().attachEvent("onBeforeSelect",webix.bind(function(a){return a&&this.callEvent("onBeforeTabClick",[a])?(this.setValue(a),webix.$$(this.s.tabbarPopup).hide(),this.callEvent("onAfterTabClick",[a]),!0):void 0},this)),a.tabbarPopup=c.s.id,this.Ns.push(c)}this.Je=function(){}},getPopup:function(){return this.Je(),webix.$$(this.s.tabbarPopup)},moreTemplate_setter:webix.template,popupTemplate_setter:webix.template,defaults:{popupWidth:200,popupTemplate:"#value#",yCount:7,moreTemplate:'<span class="webix_icon fa-ellipsis-h"></span>',template:function(a,b){var c,d,e,f,g,h,i,j,k,l=a.options;if(l.length){b.Be(l),!a.value&&l.length&&(a.value=l[0].id),l=webix.copy(l),d="",a.tabOffset&&(d+="<div class='webix_tab_filler' style='width:"+a.tabOffset+"px;'>&nbsp;</div>"),c=b.we-2*a.tabOffset-(a.type?0:a.tabMargin*(l.length-1)),j=a.topOffset+a.bottomOffset;var m=b.ut();if(m.max&&m.max<l.length){var n=b.getPopup();n.hide();var o=n.getBody()||null;if(o)if(m.max){var p=!1;for(e=0;e<l.length&&!p;e++)if(l[e].id==a.value&&(p=!0,e+1>m.max)){var q=l.splice(e+1-m.max,m.max);l=q.concat(l)}o.clearAll(),o.parse(l.slice(m.max))}else o.clearAll()}else b.s.tabbarPopup&&webix.$$(b.s.tabbarPopup).hide();i=a.tabOffset;var r=!1;for(e=0;e<l.length&&!r;e++)m&&m.max?(m.max==e+1&&(r=!0),c=b.we-2*a.tabOffset-(!a.type&&m.max>1?a.tabMargin*(m.max-1):0),k=(c-a.tabMoreWidth)/m.max):k=m.width,k=l[e].width||a.optionWidth||k,i+=k+(e&&!a.type?a.tabMargin:0),a.tabMargin>0&&e&&!a.type&&(d+="<div class='webix_tab_filler' style='width:"+a.tabMargin+"px;'></div>"),d+=b.vt(l[e],k),r&&(b.dc-(a.type?0:j),d+='<div class="webix_tab_more_icon" style="width:'+a.tabMoreWidth+'px;">'+a.moreTemplate(a,b)+"</div>",i+=a.tabMoreWidth);f=b.bc-i,f>0&&!a.type&&(d+="<div class='webix_tab_filler' style='width:"+f+"px;'>&nbsp;</div>")}else d="<div class='webix_tab_filler' style='width:"+b.we+"px; border-right:0px;'></div>";return g="",h=j&&!a.type?"height:"+(b.dc-j)+"px":"",a.topOffset&&!a.type&&(g+="<div class='webix_before_all_tabs' style='width:100%;height:"+a.topOffset+"px'></div>"),g+="<div style='"+h+"' class='webix_all_tabs "+(a.type?"webixtype_"+a.type:"")+"'>"+d+"</div>",a.bottomOffset&&!a.type&&(g+="<div class='webix_after_all_tabs' style='width:100%;height:"+a.bottomOffset+"px'></div>"),g}},vt:function(a,b){var c,d="",e=this.config;if(a.id==e.value&&(d=" webix_selected"),a.css&&(d+=" "+a.css),b=a.width||b,c='<div class="webix_item_tab'+d+'" button_id="'+a.id+'" style="width:'+b+'px;">',this.lr){var f=this.dc-2*e.inputPadding-2,g=this.dc-2,h=webix.extend({cheight:f,aheight:g},a);c+=this.lr(h)}else{var i=a.icon?"<span class='webix_icon fa-"+a.icon+"'></span> ":"";c+=i+a.value}return(a.close||e.close)&&(c+="<span class='webix_tab_close webix_icon fa-times'></span>"),c+="</div>"},ne:{image:"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>",icon:"<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",iconTop:"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#value#</div></div>"},type_setter:function(a){return this.s.tabOffset=0,this.ne[a]&&(this.lr=webix.template(this.ne[a])),a}},webix.ui.segmented),webix.protoUI({name:"tabview",defaults:{type:"clean"},setValue:function(a){this.q[0].setValue(a)},getValue:function(){return this.q[0].getValue()},getTabbar:function(){return this.q[0]},getMultiview:function(){return this.q[1]},addView:function(a){var b=a.body.id=a.body.id||webix.uid();this.getMultiview().addView(a.body),a.id=a.body.id,a.value=a.header,delete a.body,delete a.header;var c=this.getTabbar();return c.addOption(a),c.refresh(),b},removeView:function(a){var b=this.getTabbar();b.removeOption(a),b.refresh()},$init:function(a){this.$ready.push(this.Nv);for(var b=a.cells,c=[],d=b.length-1;d>=0;d--){var e=b[d].body||b[d];e.id||(e.id="view"+webix.uid()),c[d]={value:b[d].header,id:e.id,close:b[d].close,width:b[d].width},b[d]=e}var f={view:"tabbar",multiview:!0},g={view:"multiview",cells:b,animate:!!a.animate};a.value&&(f.value=a.value),a.tabbar&&webix.extend(f,a.tabbar,!0),a.multiview&&webix.extend(g,a.multiview,!0),f.options=f.options||c,a.rows=[f,g],delete a.cells,delete a.tabs},Nv:function(){this.getTabbar().attachEvent("onOptionRemove",function(a){var b=webix.$$(a);b&&b.destructor()})}},webix.ui.layout),webix.protoUI({name:"htmlform",mr:null,$init:function(a){this.elements=null,a.content&&(a.container==a.content||!a.container&&a.content==document.body)&&(this.nr=!0)},content_setter:function(a){if(a=webix.toNode(a),this.nr)for(;a.childNodes.length>1;)this.x.childNodes[0].appendChild(a.childNodes[0]);else this.x.childNodes[0].appendChild(a);return!0},render:function(){this.mr||(webix.ui.template.prototype.render.apply(this,arguments),this.mr=this.getValues())},pc:function(){return this.elements||(this.elements=this.x.querySelectorAll("[name]")),this.elements},getValues:function(){for(var a=this.$f?webix.clone(this.$f):{},b=this.pc(),c=0;c<b.length;c++)("input"!==this.or(b[c])||"radio"!==this.pr(b[c],"type")||b[c].checked!==!1)&&(a[b[c].name]=this.qr(b[c]));return a},setValues:function(a,b){b||this.clear(!0),this.render(),this.$f=webix.clone(a);for(var c=this.pc(),d=0;d<c.length;d++)webix.isUndefined(a[c[d].name])||this.rr(c[d],a[c[d].name]);this.callEvent("onChange",[])},blur:function(){var a=document.activeElement;a&&a.blur()},focus:function(a){var b=document.activeElement;if(!b||!this.x.contains(b)){var c;c=webix.isUndefined(a)?this.pc()[0]:this.x.querySelector('[name="'+a+'"]'),webix.isUndefined(c)||c.focus()}},clear:function(a){this.render();for(var b=this.pc(),c=0;c<b.length;c++){var d=a?"":this.mr[b[c].name]||"";this.rr(b[c],d)}},or:function(a){return a.tagName?a.tagName.toLowerCase():null},pr:function(a,b){if(!a.getAttribute)return null;var c=a.getAttribute(b);return c.toLowerCase?c.toLowerCase():null},qr:function(a){var b=this.or(a);return this.sr[b]?this.sr[b].call(this,a):this.sr.other.call(this,a)},sr:{input:function(a){var b=this.pr(a,"type");return"checkbox"===b?a.checked:a.value},textarea:function(a){return a.value},select:function(a){var b=a.selectedIndex;return a.options[b].value},other:function(a){return a.innerHTML}},rr:function(a,b){var c=this.or(a);return this.tr[c]?this.tr[c].call(this,a,b):this.tr.other.call(this,a,b)},tr:{input:function(a,b){var c=this.pr(a,"type");"checkbox"===c?a.checked=b?!0:!1:"radio"===c?a.checked=a.value===b?!0:!1:a.value=b},textarea:function(a,b){a.value=b},select:function(a,b){a.value=b?b:a.firstElementChild.value||b},other:function(a,b){a.innerHTML=b}},Te:function(a,b){this.Qe(a,b);var c=this.x.querySelector('[name="'+a+'"]');c&&webix.html.addCss(c,"invalid")},Qe:function(a){var b=this.x.querySelector('[name="'+a+'"]');b&&webix.html.removeCss(b,"invalid")}},webix.ui.template,webix.Values),webix.dp=function(a,b){if("object"==typeof a&&a.s&&(a=a.s.id),webix.dp.ur[a]||b)return webix.dp.ur[a];("string"==typeof a||"number"==typeof a)&&(a={master:webix.$$(a)});var c=new webix.DataProcessor(a),d=c.s.master.s.id;return webix.dp.ur[d]=c,webix.$$(d).attachEvent("onDestruct",function(){webix.dp.ur[this.s.id]=null,delete webix.dp.ur[this.s.id]}),c},webix.dp.ur={},webix.dp.$$=function(a){return webix.dp.ur[a]},webix.DataProcessor=webix.proto({defaults:{autoupdate:!0,updateFromResponse:!1,mode:"post",operationName:"webix_operation",trackMove:!1},$init:function(){this.reset(),this.vr=!1,this.name="DataProcessor",this.$ready.push(this.Mi)},reset:function(){this.zr=[]},url_setter:function(a){var b="";if("string"==typeof a){var c=a.split("->");c.length>1&&(a=c[1],b=c[0])}else a&&a.mode&&(b=a.mode,a=a.url);return b?webix.proxy(b,a):a},master_setter:function(a){var b=a;return"DataStore"!=a.name&&(b=a.data),this.s.store=b,a},Mi:function(){this.s.store.attachEvent("onStoreUpdated",webix.bind(this.Ar,this)),this.s.store.attachEvent("onDataMove",webix.bind(this.Br,this))},ignore:function(a,b){var c=this.vr;this.vr=!0,a.call(b||this),this.vr=c},off:function(){this.vr=!0},on:function(){this.vr=!1},Cr:function(a){var b={};for(var c in a)0!==c.indexOf("$")&&(b[c]=a[c]);return b},save:function(a,b,c){b=b||"update",this.Dr(a,c||this.s.store.getItem(a),b)},Dr:function(a,b,c){if("object"==typeof a&&(a=a.toString()),!a||this.vr===!0||!c||"paint"==c)return!0;var d=this.s.store;d&&d.vf&&(b=d.vf(b));var e={id:a,data:this.Cr(b),operation:c};if(webix.isUndefined(b.$parent)||(e.data.parent=b.$parent),"delete"!=e.operation){var f=this.s.master;f&&f.data&&f.data.getMark&&f.data.getMark(a,"webix_invalid")&&(e.Er=!0),this.validate(null,e.data)||(e.Er=!0)}return this.Fr(e)&&this.zr.push(e),this.s.autoupdate&&this.send(),!0},Br:function(a,b,c,d){if(this.s.trackMove){var e=webix.copy(this.s.store.getItem(a));this.s.store.order,e.webix_move_index=b,e.webix_move_id=d,e.webix_move_parent=c,this.Dr(a,e,"order")}},Ar:function(a,b,c){switch(c){case"save":c="update";break;case"update":c="update";break;case"add":c="insert";break;case"delete":c="delete";break;default:return!0}return this.Dr(a,b,c)},Fr:function(a){for(var b=0;b<this.zr.length;b++){var c=this.zr[b];if(c.id==a.id)return"delete"==a.operation&&("insert"==c.operation?this.zr.splice(b,1):c.operation="delete"),c.data=a.data,c.Er=a.Er,!1}return!0},send:function(){this.Gr()},Gr:function(){if(this.s.url){for(var a=this.zr,b=[],c=this.s.url,d=0;d<a.length;d++){var e=a[d];if(!e.Hr&&!e.Er){var f=e.id,g=e.operation,h="object"!=typeof c||c.$proxy?c:c[g],i=h&&(h.$proxy||"function"==typeof h);if(h&&(this.s.store.uf&&this.s.store.uf(e.data),this.callEvent("onBefore"+g,[f,e]))){if(e.Hr=!0,!this.callEvent("onBeforeDataSend",[e]))return;e.data=this.Ir(e.data);var j=this.at({id:e.id,status:e.operation});h.$proxy?h.save?h.save(this.config.master,e,this,j):b.push(e):("insert"==g&&delete e.data.id,i?h(e.id,e.operation,e.data).then(function(a){a&&"function"==typeof a.json&&(a=a.json()),j.success("",a,-1)},function(a){j.error("",null,a)}):(e.data[this.s.operationName]=g,this.G(h,e.data,this.s.mode,g,j))),this.callEvent("onAfterDataSend",[e])}}}c.$proxy&&c.saveAll&&b.length&&c.saveAll(this.config.master,b,this,this.at({}))}},Ir:function(a){var b={};for(var c in a)0!==c.indexOf("$")&&(b[c]=a[c]);return b},G:function(a,b,c,d,e){return"function"==typeof a?a(b,d,e):void webix.ajax()[c](a,b,e)},at:function(a){var b=this;return{success:function(c,d,e){return b.xr(a,c,d,e)},error:function(c,d,e){return b.yr(a,c,d,e)}}},attachProgress:function(a,b,c){this.attachEvent("onBeforeDataSend",a),this.attachEvent("onAfterSync",b),this.attachEvent("onAfterSaveError",c),this.attachEvent("onLoadError",c)},yr:function(a,b,c,d){a?this.Jr(!0,a.id,!1,a.status,!1,{text:b,data:c,loader:d}):(this.callEvent("onLoadError",arguments),webix.callEvent("onLoadError",[b,c,d,this]))},Jr:function(a,b,c,d,e,f){var g=this.getItemState(b);if(g.Hr=!1,a){if(this.callEvent("onBeforeSaveError",[b,d,e,f]))return g.Er=!0,void this.callEvent("onAfterSaveError",[b,d,e,f])}else this.setItemState(b,!1);e&&"delete"!=d&&this.s.updateFromResponse&&this.ignore(function(){this.s.store.updateItem(b,e)}),c&&b!=c&&this.s.store.changeId(b,c),this.callEvent("onAfterSave",[e,b,f]),this.callEvent("onAfter"+d,[e,b,f])},processResult:function(a,b,c){var d=b&&("error"==b.status||"invalid"==b.status),e=b?b.newid||b.id:!1;this.Jr(d,a.id,e,a.status,b,c)},xr:function(a,b,c,d){if(this.callEvent("onBeforeSync",[a,b,c,d]),-1===d)this.processResult(a,c,{});else{var e=this.s.url;if(e.$proxy&&e.result)e.result(a,this.s.master,this,b,c,d);else{var f;b&&(f=c.json(),b&&"undefined"==typeof f&&(f={status:"error"})),this.processResult(a,f,{text:b,data:c,loader:d})}}this.callEvent("onAfterSync",[a,b,c,d])},escape:function(a){return this.s.escape?this.s.escape(a):encodeURIComponent(a)},getState:function(){if(!this.zr.length)return!1;for(var a=this.zr.length-1;a>=0;a--)if(this.zr[a].Hr)return"saving";return!0},getItemState:function(a){var b=this.bt(a);return this.zr[b]||null},setItemState:function(a,b){if(b)this.save(a,b);else{var c=this.bt(a);c>-1&&this.zr.splice(c,1)}},bt:function(a){for(var b=-1,c=0;c<this.zr.length;c++)if(this.zr[c].id==a){b=c;break}return b}},webix.Settings,webix.EventSystem,webix.ValidateData),webix.jsonp=function(a,b,c,d){var e="webix_jsonp_"+webix.uid(),f=document.createElement("script");f.id=e,f.type="text/javascript";var g=document.getElementsByTagName("head")[0];"function"==typeof b&&(d=c,c=b,b={}),b||(b={}),b.jsonp="webix.jsonp."+e,webix.jsonp[e]=function(){c.apply(d||window,arguments),f.parentNode.removeChild(f),c=g=d=f=null,delete webix.jsonp[e]};var h=[];for(var i in b)h.push(i+"="+encodeURIComponent(b[i]));a+=(-1==a.indexOf("?")?"?":"&")+h.join("&"),f.src=a,g.appendChild(f)},webix.markup={namespace:"x",attribute:"data-",dataTag:"li",Ys:/-([a-z])/g,Zs:function(a){return a[1].toUpperCase()},Lr:{width:!0,height:!0,gravity:!0,margin:!0,padding:!0,paddingX:!0,paddingY:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0,headerRowHeight:!0},AA:{disabled:!0,hidden:!0},Mr:function(a,b){return webix.ui.hasMethod(a,b)},init:function(a,b,c){a=a||document.body;for(var d=[],e=this.Nr(a),f=e.html,g=null,h=e.length-1;h>=0;h--)d[h]=e[h];for(var h=0;h<d.length;h++){var i;i=this.Or(d[h],f),i.$scope=c,g=this.Pr(i,d[h],f,b)}return g},parse:function(a,b){"string"==typeof a&&(a=webix.DataDriver[b||"xml"].toObject(a,a));var c=this.Nr(a,b);return this.Or(c[0],c.html)},Pr:function(a,b,c,d){return d?a.container=d:(a.container=b.parentNode,webix.html.remove(b)),this.Mr(a.view,"setPosition")&&delete a.container,webix.ui(a)},Nr:function(a){this.Qr=this.namespace?this.namespace+":":"",this.Rr=this.Qr+"ui";var b=a.getElementsByTagName(this.Rr);return!b.length&&a.documentElement&&a.documentElement.tagName==this.Rr&&(b=[a.documentElement]),!b.length&&this.namespace&&(b=a.getElementsByTagName("ui"),!b.length&&a.documentElement&&"ui"==a.documentElement.tagName&&(b=[a.documentElement])),b.length||(b=this.Sr(a),b.html=!0),b},Sr:function(a){if(a.getAttribute&&a.getAttribute(this.attribute+"view"))return[a];for(var b=a.querySelectorAll("["+this.attribute+"view]"),c=[],d=0;d<b.length;d++)b[d].parentNode.getAttribute(this.attribute+"view")||c.push(b[d]);return c},Or:function(a,b,c){var d=!1;if(!c){var e=this.Tr(a,b);if("ui"==e)for(var f=a.childNodes,g=0;g<f.length;g++)if(1==f[g].nodeType)return this.Or(f[g],b);c={view:e},b&&"table"==a.tagName.toLowerCase()&&(c.data=a,c.datatype="htmltable",d=!0)}for(var h="cols"==c.view||"rows"==c.view||this.Mr(c.view,"addView"),i=[],j=0,k=!(b||a.style),l=a.firstChild;l;){if(1==l.nodeType){var e=this.Tr(l,b);if("data"==e){j=1;var m=l;l=l.nextSibling,c.data=this.Ur(m,b);continue}if("config"==e){this.Vr(l,c,b);var n=l;l=l.nextSibling,webix.html.remove(n);continue}if("column"==e){j=1;var o=this.Wr(l,b);o.header=o.header||o.value,o.width=1*o.width||"",c.columns=c.columns||[],c.columns.push(o)}else if(e||h&&b){var p=this.Or(l,b,{view:e});"head"==p.view?c.head=p.rows?p.rows[0]:p.template:"body"==p.view?this.Mr(c.view,"addView")?i.push({body:p.rows?p.rows[0]:p.value,header:p.header||""}):c.body=p.rows?1==p.rows.length?p.rows[0]:{rows:p.rows}:p.value:i.push(p)}else if(k){j=1;var q=l.tagName;b&&(q=q.toLowerCase().replace(this.Ys,this.Zs)),c[q]=webix.DataDriver.xml.tagToObject(l)}}l=l.nextSibling}if(this.Xr(a,c,b),i.length)c.stack?c[c.stack]=i:this.Mr(c.view,"setValues")?c.elements=i:"rows"==c.view?(c.view="layout",c.rows=i):"cols"==c.view?(c.view="layout",c.cols=i):this.Mr(c.view,"setValue")?c.cells=i:this.Mr(c.view,"getBody")?c.body=1==i.length?i[0]:{rows:i}:c.rows=i;else if(!d&&!j)if(!b||c.template||c.view&&"template"!=c.view){var r=this.Yr(a,b);if(r){var s="template";this.Mr(c.view,"setValue")&&(s="value"),c[s]=c[s]||r}}else c.view="template",c.content=a;return c},Zr:function(a){var b=a.replace(/\s+/gm,"");return b.length>0?!1:!0},$r:{body:1,head:1,data:1,rows:1,cols:1,cells:1,elements:1,ui:1,column:1,config:1},Vr:function(a,b,c){var d=this.Xr(a,{});d.name?(b[d.name]=d,delete d.name):d.stack?b[d.stack]=[]:b=d;for(var e=a.childNodes,f=0;f<e.length;f++){var g=null;g=1==e[f].nodeType&&"config"==e[f].tagName.toLowerCase()&&e[f].attributes.length?this.Vr(e[f],d,c):e[f].innerHTML,d.stack&&g&&b[d.stack].push(g)}return b},Tr:function(a,b){if(b)return a.getAttribute(this.attribute+"view")||("config"==a.tagName.toLowerCase()?"config":null);var c=a.tagName.toLowerCase();if(this.namespace){if(0===c.indexOf(this.Qr)||a.scopeName==this.namespace)return c.replace(this.Qr,"")}else if(webix.ui[c]||this.$r[c])return c;return 0},Ur:function(a,b){for(var c=[],d=a.getElementsByTagName(webix.markup.dataTag),e=0;e<d.length;e++){var f=d[e];if(f.parentNode.parentNode.tagName!=webix.markup.dataTag){var g=this.Wr(f,b);f.className&&(g.$css=f.className),c.push(g)}}return webix.html.remove(a),c},Yr:function(a){return a.style?a.innerHTML:a.firstChild?a.firstChild.wholeText||a.firstChild.data||"":""},Wr:function(a,b){if(!b)return webix.DataDriver.xml.tagToObject(a);var c=this.Xr(a,{},b);return!c.value&&a.childNodes.length&&(c.value=this.Yr(a,b)),c},Xr:function(a,b,c){for(var d=a.attributes,e=0;e<d.length;e++){var f=d[e].name;if(c){if(0!==f.indexOf(this.attribute))continue;f=f.replace(this.attribute,"").replace(this.Ys,this.Zs)}var g=d[e].value;-1!=g.indexOf("json://")&&(g=JSON.parse(g.replace("json://",""))),this.Lr[f]?g=parseInt(g,10):this.AA[f]&&(g=g&&"false"!==g&&"0"!=g),b[f]=g}return b}},function(){function a(a,b){var d=a.callback;c(!1),a.box.parentNode.removeChild(a.box),m=a.box=null,d&&d(b,a.details)}function b(b){if(m){b=b||event;var c=b.which||event.keyCode;if(webix.message.keyboard)return(13==c||32==c)&&a(m,!0),27==c&&a(m,!1),b.preventDefault&&b.preventDefault(),!(b.cancelBubble=!0)}}function c(a){c.cover&&c.cover.parentNode||(c.cover=document.createElement("DIV"),c.cover.onkeydown=b,c.cover.className="webix_modal_cover",document.body.appendChild(c.cover)),c.cover.style.display=a?"inline-block":"none"}function d(a,b,c){return"<div class='webix_popup_button"+(c?" "+c:"")+"' result='"+b+"' ><div>"+a+"</div></div>"}function e(a){n.area||(n.area=document.createElement("DIV"),n.area.className="webix_message_area",n.area.style[n.position]="5px",document.body.appendChild(n.area)),n.hide(a.id);var b=document.createElement("DIV");return b.innerHTML="<div>"+a.text+"</div>",b.className="webix_info webix_"+a.type,b.onclick=function(){n.hide(a.id),a=null},webix.$testmode&&(b.className+=" webix_no_transition"),"bottom"==n.position&&n.area.firstChild?n.area.insertBefore(b,n.area.firstChild):n.area.appendChild(b),a.expire>0&&(n.timers[a.id]=window.setTimeout(function(){n.hide(a.id)},a.expire)),b.style.height=b.offsetHeight-2+"px",n.pull[a.id]=b,b=null,a.id}function f(b,c,e){var f=document.createElement("DIV");f.className=" webix_modal_box webix_"+b.type,f.setAttribute("webixbox",1);var g="";if(b.width&&(f.style.width=b.width+(webix.rules.isNumber(b.width)?"px":"")),b.height&&(f.style.height=b.height+(webix.rules.isNumber(b.height)?"px":"")),b.title&&(g+='<div class="webix_popup_title">'+b.title+"</div>"),g+='<div class="webix_popup_text"><span>'+(b.content?"":b.text)+'</span></div><div  class="webix_popup_controls">',(c||b.ok)&&(g+=d(b.ok||"OK",!0,"confirm")),(e||b.cancel)&&(g+=d(b.cancel||"Cancel",!1)),b.buttons)for(var h=0;h<b.buttons.length;h++)g+=d(b.buttons[h],h);if(g+="</div>",f.innerHTML=g,b.content){var i=b.content;"string"==typeof i&&(i=document.getElementById(i)),"none"==i.style.display&&(i.style.display=""),f.childNodes[b.title?1:0].appendChild(i)}return f.onclick=function(c){c=c||event;var d=c.target||c.srcElement;if(d.className||(d=d.parentNode),-1!=d.className.indexOf("webix_popup_button")){var e=d.getAttribute("result");e="true"==e||("false"==e?!1:e),a(b,e)}c.cancelBubble=!0},b.box=f,(c||e||b.buttons)&&(m=b),f}function g(a,d,e){var g=a.tagName?a:f(a,d,e);a.hidden||c(!0),document.body.appendChild(g);var h=a.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-g.offsetWidth)/2)),i=a.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-g.offsetHeight)/2));return g.style.top="top"==a.position?"-3px":i+"px",g.style.left=h+"px",g.onkeydown=b,g.focus(),a.hidden&&webix.modalbox.hide(g),g}function h(a){return g(a,!0,!1)}function i(a){return g(a,!0,!0)}function j(a){return g(a)}function k(a,b,c){return"object"!=typeof a&&("function"==typeof b&&(c=b,b=""),a={text:a,type:b,callback:c}),a}function l(a,b,c,d){return"object"!=typeof a&&(a={text:a,type:b,expire:c,id:d}),a.id=a.id||n.uid(),a.expire=a.expire||n.expire,a}var m=null;document.attachEvent?document.attachEvent("onkeydown",b):document.addEventListener("keydown",b,!0),webix.alert=function(){var a=k.apply(this,arguments);return a.type=a.type||"confirm",h(a)},webix.confirm=function(){var a=k.apply(this,arguments);return a.type=a.type||"alert",i(a)},webix.modalbox=function(){var a=k.apply(this,arguments);return a.type=a.type||"alert",j(a)},webix.modalbox.hide=function(a){if(a){for(;a&&a.getAttribute&&!a.getAttribute("webixbox");)a=a.parentNode;a&&a.parentNode.removeChild(a)}c(!1),m=null};var n=webix.message=function(a){a=l.apply(this,arguments),a.type=a.type||"info";var b=a.type.split("-")[0];switch(b){case"alert":return h(a);case"confirm":return i(a);case"modalbox":return j(a);default:return e(a)}};n.seed=(new Date).valueOf(),n.uid=function(){return n.seed++},n.expire=4e3,n.keyboard=!0,n.position="top",n.pull={},n.timers={},n.hideAll=function(){for(var a in n.pull)n.hide(a)},n.hide=function(a){var b=n.pull[a];b&&b.parentNode&&(window.setTimeout(function(){b.parentNode.removeChild(b),b=null},2e3),b.style.height=0,b.className+=" hidden",n.timers[a]&&window.clearTimeout(n.timers[a]),delete n.pull[a])}}(),webix.protoUI({name:"carousel",defaults:{scrollSpeed:"300ms",type:"clean",navigation:{}},$init:function(){this.x.className+=" webix_carousel",this.Ft=null,this.y=null,this.Mh=0,this.$ready.unshift(this.Gt),this.$ready.push(this.Mi)},Gt:function(){this.Ft&&this.Ft.destructor&&this.Ft.destructor();var a="";this.config.cols?(a="cols",this.mc=0):(a="rows",this.mc=1);var b={borderless:!0,type:"clean"};b[a]=webix.copy(this.s[a]);for(var c=["type","margin","marginX","marginY","padding","paddingX","paddingY"],d={},e=0;e<c.length;e++)this.s[c[e]]&&(d[c[e]]=this.s[c[e]]);webix.extend(b,d,!0),this.Ft=webix.ui.A(b),this.Ft.Xb=this,this.x.appendChild(this.Ft.x),this.q=this.Ft.q,this.Ft.fc=webix.bind(webix.ui.carousel.prototype.fc,this),this.Ft.adjustScroll=webix.bind(webix.ui.carousel.prototype.adjustScroll,this),webix.attachEvent("onReconstruct",webix.bind(function(a){a==this.Ft&&this.Ht()},this)),this.w=this.x.firstChild},getChildViews:function(){return[this.Ft]},getLayout:function(){return this.Ft},Mi:function(){this.w.setAttribute("touch_scroll",this.mc?"y":"x"),this.Ft.attachEvent("onAfterScroll",webix.bind(function(){this.callEvent("onShow",[this.getActiveId()])},this))},adjustScroll:function(a){var b,c=this.mc?this.dc:this.bc;return this.mc?(b=Math.round(a.f/c),a.f=b*c):(b=Math.round(a.e/c),a.e=b*c),this.Mh=-b,this.s.navigation&&this.Eh(),!0},fc:function(a){var b,c,d,e,f,g;for(d=-1,c=this.Ft,b=0;b<c.q.length;b++)if(c.q[b]==a){d=b;break}0>d||d==this.Mh||(this.Mh=d,e=c.mc?this.dc:this.bc,f=-(c.mc?0:d*e),g=-(c.mc?d*e:0),this.scrollTo(f,g),this.callEvent("onShow",[c.q[this.Mh].s.id]),this.s.navigation&&this.Ch())},scrollTo:function(a,b){webix.Touch&&webix.animate.isSupported()?webix.Touch.Nf(this.w,a,b,this.s.scrollSpeed||"100ms"):(this.w.style.marginLeft=a+"px",this.w.style.marginTop=b+"px")},navigation_setter:function(a){return this.E(a,{type:"corner",buttons:!0,items:!0}),a},showNext:function(){this.Mh<this.Ft.q.length-1&&this.setActiveIndex(this.Mh+1)},showPrev:function(){this.Mh>0&&this.setActiveIndex(this.Mh-1)},setActiveIndex:function(a){var b=this.Ft.q[a].s.id;webix.$$(b).show()},getActiveIndex:function(){return this.Mh},$getSize:function(a,b){var c=this.Ft.$getSize(0,0),d=webix.ui.view.prototype.$getSize.call(this,a,b);return this.Ft.mc?(d[0]=Math.max(d[0],c[0]),d[1]=Math.min(d[1],c[1])):(d[2]=Math.max(d[2],c[2]),d[3]=Math.min(d[3],c[3])),d},$setSize:function(a,b){var c=this.Ft,d=c.q.length,e=webix.ui.view.prototype.$setSize.call(this,a,b),f=this.dc*(c.mc?d:1),g=this.bc*(c.mc?1:d);e?(this.w.style.height=f+"px",this.w.style.width=g+"px",c.$setSize(g,f),this.Ht()):c.$setSize(g,f)},Ht:function(){var a=this.Ft,b=this.Mh||0,c=a.mc?this.dc:this.bc,d=-(a.mc?0:b*c),e=-(a.mc?b*c:0);this.scrollTo(d,e),this.s.navigation&&this.Ch()},getActiveId:function(){var a=this.Ft.q[this.Mh];return a?a.s.id:null},setActive:function(a){webix.$$(a).show()}},webix.EventSystem,webix.NavigationButtons,webix.ui.view),webix.type(webix.ui.list,{name:"uploader",template:"#name#  {common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>",percent:function(a){return"transfer"==a.status?"<div style='width:60px; text-align:center; float:right'>"+a.percent+"%</div>":"<div class='webix_upload_"+a.status+"'><span class='"+("error"==a.status?"error_icon":"fa-ok webix_icon")+"'></span></div>"},removeIcon:function(){return"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>"},on_click:{webix_remove_upload:function(a,b){webix.$$(this.config.uploader).files.remove(b)}}}),webix.UploadDriver={flash:{$render:function(){window.swfobject||webix.require("legacy/swfobject.js",!0);var a=this.s;a.swfId=a.swfId||"webix_swf_"+webix.uid(),this.re().innerHTML+="<div class='webix_upload_flash'><div id='"+a.swfId+"'></div></div>",
this._r=this.re().lastChild,swfobject.embedSWF(webix.codebase+"/legacy/uploader.swf",a.swfId,"100%","100%","9",null,{uploaderId:a.id,ID:a.swfId,enableLogs:a.enableLogs?"1":"",paramName:a.inputName,multiple:a.multiple?"Y":""},{wmode:"transparent"}),swfobject.getFlashPlayerVersion(),webix.event(this.x,"click",webix.bind(function(){var a=new Date;a-(this.ds||0)>250&&this.fileDialog()},this)),this.files.attachEvent("onBeforeDelete",webix.bind(this.as,this))},$applyFlash:function(a,b){return this[a].apply(this,b)},getSwfObject:function(){return swfobject.getObjectById(this.s.swfId)},fileDialog:function(){this.getSwfObject()&&this.getSwfObject().showDialog()},send:function(a){if("function"==typeof a&&(this.fs=a,a=0),!a){var b=this.files.data.order,c=!0;if(b.length)for(var d=0;d<b.length;d++)c=this.send(b[d])&&c;return void(c&&this.gs())}var e=this.files.getItem(a);return"client"!==e.status?!1:(e.status="transfer",this.getSwfObject()&&this.getSwfObject().upload(a,this.s.upload,this.s.formData||{}),!0)},$beforeAddFileToQueue:function(a,b,c){var d=b.split(".").pop(),e=this.ks(c);return this.callEvent("onBeforeFileAdd",[{id:a,name:b,size:c,sizetext:e,type:d}])},$addFileToQueue:function(a,b,c){if(this.files.exists(a))return!1;this.s.multiple||this.files.clearAll();var d=b.split(".").pop(),e=this.ks(c),f={name:b,id:a,size:c,sizetext:e,type:d,status:"client"};this.files.add(f),this.callEvent("onAfterFileAdd",[f]),a&&this.s.autosend&&this.send(a)},stopUpload:function(a){this.as(a)},as:function(a){var b=this.files.getItem(a);this.getSwfObject().uploadStop(a),b.status="client"},$onUploadComplete:function(){this.s.autosend&&this.gs()},$onUploadSuccess:function(a,b,c){var d=this.files.getItem(a);d&&(d.status="server",d.progress=100,c.text&&"string"==typeof c.text&&(webix.DataDriver.json.toObject(c.text),webix.extend(d,c,!0)),this.callEvent("onFileUpload",[d,c]),this.callEvent("onChange",[]),this.files.updateItem(a))},$onUploadFail:function(a){var b=this.files.getItem(a);b.status="error",delete b.percent,this.files.updateItem(a),this.callEvent("onFileUploadError",[b,""])}},html5:{$render:function(){if(this._r)return void this.w.appendChild(this._r);this.files.attachEvent("onBeforeDelete",this.as);var a={type:"file","class":"webix_hidden_upload",tabindex:-1};this.s.accept&&(a.accept=this.s.accept),this.s.multiple&&(a.multiple="true");var b=webix.html.create("input",a);this._r=this.w.appendChild(b),webix.event(this.x,"drop",webix.bind(function(a){this.bs(a),webix.html.preventEvent(a)},this)),webix.event(b,"change",webix.bind(function(){if(this.cs(b.files),webix.env.isIE){var a=document.createElement("form");a.appendChild(this._r),a.reset(),this.w.appendChild(b)}else b.value=""},this)),webix.event(this.x,"click",webix.bind(function(){var a=new Date;a-(this.ds||0)>250&&this.fileDialog()},this)),webix.event(this.x,"dragenter",webix.html.preventEvent),webix.event(this.x,"dragexit",webix.html.preventEvent),webix.event(this.x,"dragover",webix.html.preventEvent)},bs:function(a){var b=a.dataTransfer.files;this.callEvent("onBeforeFileDrop",[b,a])&&this.cs(b),this.callEvent("onAfterFileDrop",[b,a])},fileDialog:function(a){this.ds=new Date,this.es=a;var b=this.x.getElementsByTagName("INPUT");b[b.length-1].click()},send:function(a,b){if("function"==typeof a&&(this.fs=a,a=0),!a){var c=this.files.data.order,d=!0;if(c.length)for(var e=0;e<c.length;e++)d=!this.send(c[e],b)&&d;return void(d&&this.gs())}var f=this.files.getItem(a);if("client"!==f.status)return!1;f.status="transfer";var g=new FormData;g.append(this.config.inputName,f.file);var h={};b=b||{};var i=new XMLHttpRequest;if(webix.callEvent("onBeforeAjax",["POST",this.s.upload,b,i,h,g])){for(var j in b)g.append(j,b[j]);f.xhr=i,i.upload.addEventListener("progress",webix.bind(function(b){this.$updateProgress(a,b.loaded/b.total*100)},this),!1),i.onload=webix.bind(function(){i.aborted||this.is(a)},this),i.open("POST",this.s.upload,!0);for(var j in h)i.setRequestHeader(j,h[j]);i.send(g)}return this.$updateProgress(a,0),!0},is:function(a){var b=this.files.getItem(a);if(b){var c=null;200==b.xhr.status&&(c=webix.DataDriver[this.s.datatype||"json"].toObject(b.xhr.responseText)),c&&"error"!=c.status?this.js(a,c):(b.status="error",delete b.percent,this.files.updateItem(a),this.callEvent("onFileUploadError",[b,c])),delete b.xhr}},stopUpload:function(a){webix.bind(this.as,this.files)(a)},as:function(a){var b=this.getItem(a);"undefined"!=typeof b.xhr&&(b.xhr.aborted=!0,b.xhr.abort()),delete b.xhr,b.status="client"}}},webix.protoUI({name:"uploader",defaults:{autosend:!0,multiple:!0,inputName:"upload"},$cssName:"button",Ce:!0,send:function(){},fileDialog:function(){},stopUpload:function(){},$init:function(){var a=webix.UploadDriver.html5;this.files=new webix.DataCollection,(webix.isUndefined(XMLHttpRequest)||webix.isUndefined((new XMLHttpRequest).upload))&&(a=webix.UploadDriver.flash),webix.extend(this,a,!0)},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&this.render()},apiOnly_setter:function(a){return webix.delay(this.render,this),this.$apiOnly=a},cs:function(a){for(var b=0;b<a.length;b++)this.addFile(a[b])},link_setter:function(a){return a&&webix.delay(function(){var a=webix.$$(this.s.link);a.sync&&a.filter?a.sync(this.files):a.setValues&&this.files.data.attachEvent("onStoreUpdated",function(){a.setValues(this)}),a.s.uploader=this.s.id},this),a},addFile:function(a,b,c){var d=null;"object"==typeof a&&(d=a,a=d.name,b=d.size);var e=this.ks(b);c=c||a.split(".").pop();var f={file:d,name:a,id:webix.uid(),size:b,sizetext:e,type:c,context:this.es,status:"client"};if(this.callEvent("onBeforeFileAdd",[f])){this.s.multiple||this.files.clearAll();var g=this.files.add(f);this.callEvent("onAfterFileAdd",[f]),g&&this.s.autosend&&this.send(g,this.s.formData)}},addDropZone:function(a){var b=webix.toNode(a);webix.event(b,"dragover",webix.html.preventEvent),webix.event(b,"dragover",function(){webix.html.addCss(b,"webix_drop_file")}),webix.event(b,"dragleave",function(){webix.html.removeCss(b,"webix_drop_file")}),webix.event(b,"drop",webix.bind(function(a){webix.html.removeCss(b,"webix_drop_file");var c=a.dataTransfer;if(c&&c.files.length)for(var d=0;d<c.files.length;d++)this.addFile(c.files[d]);return webix.html.preventEvent(a)},this))},ks:function(a){for(var b=0;a>1024;)b++,a/=1024;return Math.round(100*a)/100+" "+webix.i18n.fileSize[b]},js:function(a,b){if("error"!=b.status){var c=this.files.getItem(a);c.status="server",c.progress=100,webix.extend(c,b,!0),this.callEvent("onFileUpload",[c,b]),this.callEvent("onChange",[]),this.files.updateItem(a)}this.isUploaded()&&this.gs(b)},gs:function(a){this.callEvent("onUploadComplete",[a]),this.fs&&(this.fs.call(this,a),this.fs=0)},isUploaded:function(){for(var a=this.files.data.order,b=0;b<a.length;b++)if("server"!=this.files.getItem(a[b]).status)return!1;return!0},$onUploadComplete:function(){},$updateProgress:function(a,b){var c=this.files.getItem(a);c.percent=Math.round(b),this.files.updateItem(a)},setValue:function(a){"string"==typeof a&&(a={value:a,status:"server"}),this.files.clearAll(),a&&this.files.parse(a),this.callEvent("onChange",[])},getValue:function(){var a=[];return this.files.data.each(function(b){"server"==b.status&&a.push(b.value||b.name)}),a.join(",")}},webix.ui.button),webix.html.addMeta=function(a,b){document.getElementsByTagName("head").item(0).appendChild(webix.html.create("meta",{name:a,content:b}))},function(){var a=function(){var a=!!(window.orientation%180);webix.ui.orientation!==a&&(webix.ui.orientation=a,webix.callEvent("onRotate",[a]))};webix.env.touch&&(webix.ui.orientation=!!((webix.isUndefined(window.orientation)?90:window.orientation)%180),webix.event(window,"onorientationchange"in window?"orientationchange":"resize",a)),webix.env.isFF&&window.matchMedia&&(window.matchMedia("(orientation: portrait)").addListener(function(){webix.ui.orientation=!1}),window.matchMedia("(orientation: landscape)").addListener(function(){webix.ui.orientation=!0})),webix.ui.fullScreen=function(){if(webix.env.touch){webix.html.addMeta("apple-mobile-web-app-capable","yes"),webix.html.addMeta("viewport","initial-scale=1, maximum-scale=1, user-scalable=no");var b=document.body.offsetHeight||document.body.scrollHeight,c=-1!=navigator.userAgent.indexOf("iPhone"),d=(-1!=navigator.userAgent.indexOf("iPad"),navigator.userAgent.match(/iPhone OS (\d+)/)),e=d&&d[1]>=7,f=c&&(356==b||208==b||306==b||158==b||444==b),g=568==window.screen.height,h=function(){var a=0,b=0;if(c&&!e)webix.ui.orientation?(a=g?568:480,b=f?268:300):(a=320,b=g?f?504:548:f?416:460);else if(webix.env.isAndroid){if(!webix.env.isFF){document.body.style.width=document.body.style.height="1px",document.body.style.overflow="hidden";var d=window.outerWidth/window.innerWidth;a=window.outerWidth/d,b=window.outerHeight/d}}else webix.env.isIEMobile||(a=window.innerWidth,b=window.innerHeight);b&&(document.body.style.height=b+"px",document.body.style.width=a+"px"),webix.ui.$freeze=!1,webix.ui.resize()},i=function(){webix.ui.$freeze=!0,webix.env.isSafari?h():webix.delay(h,null,[],500)};webix.attachEvent("onRotate",i),a(),webix.delay(i)}}}(),function(){if(window.jQuery){var a=jQuery,b=[],c=function(a){return a&&a.getAttribute?a.getAttribute("view_id"):void 0},d=function(d){return function(e){if("string"!=typeof e){var f=[];return this.each(function(){var a,b,b=c(this)||c(this.firstChild);if(b&&(a=webix.$$(b)),!a){var g=e?e.data:0;g&&(e.data=null);var h=webix.copy(e||{autoheight:!0,autowidth:!0});if(h.view=d,g&&(e.data=h.data=g),"table"===this.tagName.toLowerCase()){var i=webix.html.create("div",{id:this.getAttribute("id")||"","class":this.getAttribute("class")||""},"");this.parentNode.insertBefore(i,this),h.container=i,a=webix.ui(h),a.parse(this,"htmltable")}else h.container=this,a=webix.ui(h)}f.push(a)}),1===f.length?f[0]:f}return b[e]?b[e].apply(this,[]):void a.error("Method "+e+" does not exist on jQuery.".name)}},e=function(){for(var b in webix.ui){var c="webix_"+b;a.fn[c]||(a.fn[c]=d(b))}};e(),a(e)}}(),webix.history={track:function(a,b){this.ls(a,b);var c=webix.$$(a),d=function(){webix.history.ms||c.getValue&&webix.history.push(a,c.getValue())};c.getActiveId?c.attachEvent("onViewChange",d):c.attachEvent("onChange",d)},ns:function(a,b){webix.history.ms=1,a=webix.$$(a),a.callEvent("onBeforeHistoryNav",[b])&&a.setValue&&a.setValue(b),webix.history.ms=0},push:function(a,b,c){a=webix.$$(a);var d="";b&&(d="#!/"+b),webix.isUndefined(c)&&(c=a.getValue?a.getValue():b),window.history.pushState({webix:!0,id:a.s.id,value:c},"",d)},ls:function(a,b){webix.event(window,"popstate",function(a){a.state&&a.state.webix&&webix.history.ns(a.state.id,a.state.value)});var c=window.location.hash;webix.noanimate=!0,c&&0===c.indexOf("#!/")?webix.history.ns(a,c.replace("#!/","")):b&&(webix.history.push(a,b),webix.history.ns(a,b)),webix.noanimate=!1,this.ls=function(){}}},webix.protoUI({name:"fieldset",defaults:{borderless:!0},$init:function(a){this.x.className+=" webix_fieldset",this.x.innerHTML="<fieldset><legend></legend><div></div></fieldset>"},label_setter:function(a){return this.x.firstChild.childNodes[0].innerHTML=a,a},getChildViews:function(){return[this.os]},body_setter:function(a){return this.os=webix.ui(a,this.x.firstChild.childNodes[1]),this.os.Xb=this,a},getBody:function(){return this.os},$getSize:function(a,b){a+=18,b+=30;var c=this.ps=this.os.$getSize(a,b);return c},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b)&&(b=Math.min(this.ps[3],b),a=Math.min(this.ps[1],a),this.os.$setSize(a-18,b-30))}},webix.ui.view),webix.protoUI({name:"slider",$touchCapture:!0,defaults:{min:0,max:100,value:50,step:1,title:!1,template:function(a,b){var c=b.qs="x"+(a.id||webix.uid()),d="<div class='webix_slider_title'></div><div class='webix_slider_box'><div class='webix_slider_left'>&nbsp;</div><div class='webix_slider_right'></div><div class='webix_slider_handle' id='"+c+"'>&nbsp;</div></div>";return b.$renderInput(a,d,c)}},type_setter:function(a){this.x.className+=" webix_slider_"+a},title_setter:function(a){return"string"==typeof a?webix.template(a):a},rs:function(){return document.getElementById(this.qs)},oe:function(){var a=this.rs(),b=this.s;if(a){var c=this.Ee(b),d=b.value%b.step?Math.round(b.value/b.step)*b.step:b.value;d=Math.max(Math.min(d,b.max),b.min);var e=b.max-b.min,f=Math.ceil((c-20)*(d-b.min)/e),g=c-20-f;a.style.left=10+f-8+"px",a.parentNode.style.width=c+"px",g=Math.min(Math.max(g,2),c-22),f=Math.min(Math.max(f,2),c-22);var h=a.previousSibling;h.style.width=g+"px";var i=h.previousSibling;i.style.width=f+"px",this.s.title&&(a.parentNode.previousSibling.innerHTML=this.s.title(this.s,this))}},refresh:function(){this.oe()},$setValue:function(){this.refresh()},$getValue:function(){return this.s.value},$init:function(){webix.env.touch?this.attachEvent("onTouchStart",webix.bind(this.ss,this)):webix.event(this.x,"mousedown",webix.bind(this.ss,this))},ss:function(a){var b=a.target||a.srcElement;this.Ky&&this.Ky(a);var c=this.s.value;return webix.isArray(c)&&(c=webix.copy(c)),-1!=b.className.indexOf("webix_slider_handle")?(this.$x=c,this.ts.apply(this,arguments)):void(-1!=b.className.indexOf("webix_slider")&&(this.$x=c,this.s.value=this.us.apply(this,arguments),this.ts(a)))},ts:function(){this.vs=webix.env.touch?[this.attachEvent("onTouchMove",webix.bind(this.ws,this)),this.attachEvent("onTouchEnd",webix.bind(this.xs,this))]:[webix.event(document.body,"mousemove",webix.bind(this.ws,this)),webix.event(window,"mouseup",webix.bind(this.xs,this))],webix.html.addCss(document.body,"webix_noselect")},xs:function(){this.vs&&(webix.env.touch?(webix.detachEvent(this.vs[0]),webix.detachEvent(this.vs[1])):(webix.eventRemove(this.vs[0]),webix.eventRemove(this.vs[1])),this.vs=[]),webix.html.removeCss(document.body,"webix_noselect");var a=this.s.value;webix.isArray(a)&&(a=webix.copy(a)),this.s.value=this.$x,this.setValue(a)},ws:function(){this.s.value=this.us.apply(this,arguments),this.refresh(),this.callEvent("onSliderDrag",[])},us:function(a,b){var c=0;return c=webix.env.touch?b?b.x:a.x:webix.html.pos(a).x,this.ys(c)},ys:function(a){var b=this.s,c=b.max-b.min,d=webix.html.offset(this.rs().parentNode).x+10,e=this.Ee(b)-20,f=e?(a-d)*c/e:0;return f=Math.round((f+b.min)/b.step)*b.step,Math.max(Math.min(f,b.max),b.min)},De:function(){}},webix.ui.text),webix.proxy.offline={$proxy:!0,storage:webix.storage.local,cache:!1,data:"",zs:function(){this.cache||webix.env.offline||(webix.call("onOfflineMode",[]),webix.env.offline=!0)},As:function(){!this.cache&&webix.env.offline&&(webix.env.offline=!1,webix.call("onOnlineMode",[]))},load:function(a,b){var c={error:function(){var c=this.getCache()||this.data,d={responseText:c},e=webix.ajax.prototype.J(d);this.zs(),webix.ajax.$callback(a,b,c,e,d)},success:function(c,d,e){this.As(),webix.ajax.$callback(a,b,c,d,e),this.setCache(c)}};this.cache&&this.getCache()?c.error.call(this):this.source.$proxy?this.source.load(this,c):webix.ajax(this.source,c,this)},getCache:function(){return this.storage.get(this.Bs())},clearCache:function(){this.storage.remove(this.Bs())},setCache:function(a){this.storage.put(this.Bs(),a)},Bs:function(){return this.source.$proxy?this.source.source+"_$proxy$_data":this.source+"_$proxy$_data"},saveAll:function(a,b,c,d){this.setCache(a.serialize()),webix.ajax.$callback(a,d,"",b)},result:function(a,b,c,d,e){for(var f=0;f<e.length;f++)c.processResult({id:e[f].id,status:e[f].operation},{},{})}},webix.proxy.cache={init:function(){webix.extend(this,webix.proxy.offline)},cache:!0},webix.proxy.local={init:function(){webix.extend(this,webix.proxy.offline)},cache:!0,data:[]},window.angular&&function(){function a(a){var b=a.attr("id");return b||(b=webix.uid(),a.attr("id",b)),b}function b(a,c,d,e){if(!(e>10)){var f=a[0].firstChild;f&&1==f.nodeType&&(c=f.getAttribute("view_id")||c);var g=webix.$$(c);g?g.options_setter?(g.define("options",d),g.refresh()):(g.clearAll&&g.clearAll(),g.parse(d)):webix.delay(b,this,[a,c,d],100,e+1)}}angular.module("webix",[]).directive("webixUi",["$parse",function(b){return{restrict:"A",scope:!1,link:function(c,d,e){var f=e.webixUi,g=e.webixReady,h=null;a(d),d.ready(function(){if(!h){if(g&&(g=b(g)),d.bind("$destroy",function(){h&&h.destructor()}),f){var a=function(){if(h&&h.destructor(),c[f]){var a=webix.copy(c[f]);a.$scope=c,d[0].innerHTML="",h=webix.ui(a,d[0]),g&&g(c,{root:h})}};c.$watch(f,a),a()}else{e.view||d.attr("view","rows");var i=webix.markup,j=i.attribute;i.attribute="",h="undefined"!=typeof e.webixRefresh?i.init(d[0],d[0],c):i.init(d[0],null,c),i.attribute=j,g&&g(c,{root:h})}c.$watch(function(){return d[0].offsetWidth+"."+d[0].offsetHeight},function(){h&&h.adjust()})}})}}}]).directive("webixShow",["$parse",function(b){return{restrict:"A",scope:!1,link:function(c,d,e){var f=b(e.webixShow),g=a(d);f(c)||d.attr("hidden","true"),c.$watch(e.webixShow,function(){var a=webix.$$(g);a&&(f(c)?(webix.$$(g).show(),d[0].removeAttribute("hidden")):webix.$$(g).hide())})}}}]).directive("webixEvent",["$parse",function(b){var c=function(a,c,d){var e=d.split("="),f=b(e[1]),g=e[0].trim();c.attachEvent(g,function(){return f(a,{id:arguments[0],details:arguments})})};return{restrict:"A",scope:!1,link:function(b,d,e){var f=e.webixEvent.split(";"),g=a(d);setTimeout(function(){var a=d[0].firstChild;a&&1==a.nodeType&&(g=a.getAttribute("view_id")||g);for(var e=webix.$$(g),h=0;h<f.length;h++)c(b,e,f[h])})}}}]).directive("webixElements",["$parse",function(){return{restrict:"A",scope:!1,link:function(b,c,d){var e=d.webixElements,f=a(c);b.$watchCollection&&b.$watchCollection(e,function(a){setTimeout(function(){var b=webix.$$(f);b&&(b.define("elements",a),b.refresh())},1)})}}}]).directive("webixData",["$parse",function(){return{restrict:"A",scope:!1,link:function(c,d,e){var f=e.webixData,g=a(d);c.$watchCollection&&c.$watchCollection(f,function(a){a&&setTimeout(function(){b(d,g,a,0)},1)})}}}])}(),window.Backbone&&function(){function a(a){a.Cs=!0,a.callEvent("onBeforeLoad",[]),a.blockEvent()}function b(a){a.unblockEvent(),a.Cs=!1,a.refresh()}var c={use_id:!1};webix.attachEvent("onUnSyncUnknown",function(a,b){for(var c=a.ab,d=a.It,e=0;e<c.length;e++)a.detachEvent(c[e]);for(var e=0;e<d.length;e++)b.off.apply(b,d[e])}),webix.attachEvent("onSyncUnknown",function(d,e,f){function g(a){if(c.use_id)return a;var b={};for(var d in a)"id"!=d&&(b[d]=a[d]);return b}function h(a){return c.use_id?a.id:a.cid}function i(a,b){for(var c=[],d=0;d<b.models.length;d++){var e=b.models[d],f=h(e),g=j(e);g.id=f,c.push(g)}a.clearAll(),a.df(c)}function j(a){if(c.get){for(var b={},d=0;d<c.get.length;d++){var e=c.get[d];b[e]=a.get(e)}return b}return a.toJSON()}f&&(c=f),c.get&&"string"==typeof c.get&&(c.get=c.get.split(","));for(var k=[["change",function(a){var b=h(a),c=d.pull[b]=j(a);c.id=b,d.pf&&d.pf(c),d.refresh(c.id)}],["remove",function(a){var b=h(a);d.pull[b]&&d.remove(b)}],["add",function(a){var b=h(a);if(!d.pull[b]){var c=j(a);c.id=b,d.qf&&d.qf(c),d.add(c)}}],["reset",function(){i(d,e)}],["request",function(b){b instanceof Backbone.Collection&&a(d)}],["sync",function(a){a instanceof Backbone.Collection&&b(d)}],["error",function(a){a instanceof Backbone.Collection&&b(d)}]],l=0;l<k.length;l++)e.bind.apply(e,k[l]);var m=[d.attachEvent("onAfterAdd",function(a){if(!e.get(a)){var b=g(d.getItem(a)),c=new e.model(b),f=h(c);f!=a&&this.changeId(a,f),e.add(c),e.trigger("webix:add",c)}return!0}),d.attachEvent("onDataUpdate",function(a){var b=e.get(a),c=g(d.getItem(a));return b.set(c),e.trigger("webix:change",b),!0}),d.attachEvent("onAfterDelete",function(a){var b=e.get(a);return b&&(e.trigger("webix:remove",b),e.remove(a)),!0})];d.Ts=e,d.ab=m,d.It=k,(e.length||d.count())&&i(d,e)}),window.WebixView=Backbone.View.extend({initialize:function(a){this.options=a||{}},render:function(){this.beforeRender&&this.beforeRender.apply(this,arguments);var a,b=this.config||this.options.config;b.view&&webix.ui.hasMethod(b.view,"setPosition")||(a=window.$?$(this.el)[0]:this.el,a&&!a.config&&(a.innerHTML=""));var c=webix.copy(b);return c.$scope=this,this.root=webix.ui(c,a),this.afterRender&&this.afterRender.apply(this,arguments),this},destroy:function(){this.root&&this.root.destructor()},getRoot:function(){return this.root},getChild:function(a){return this.root.$$(a)}})}(),webix.ActiveContent={$init:function(a){if(a.activeContent){this.$ready.push(this.Ds),this.Es={},this.Fs={},this.Gs={},this.Hs={};for(var b in a.activeContent)if(this[b]=this.Is(b),a.activeContent[b].earlyInit){var c=webix.Xb;webix.Xb=null,this[b].call(this,{},this,a.activeContent),webix.Xb=c}}},Ds:function(){if(webix.event(this.$view,"blur",function(a){var b=webix.$$(a);if(b!==this&&b.getValue&&b.setValue){b.getNode(a);var c=b.getValue();c!=b.s.value&&b.setValue(c)}},this,!0),this.filter){for(var a in this.s.activeContent)this.type[a]=this[a],this[a]=this.Js(a);this.type.masterUI=this}},Js:function(a){return function(b){for(var c=this.Hs[a],d=c.s.id,e=this.getItemNode(b).getElementsByTagName("DIV"),f=0;f<e.length;f++)if(e[f].getAttribute("view_id")==d){c.x=c.y=e[f];break}return c}},Ks:function(a,b,c){return function(d){if(d)for(var e=d.target||d.srcElement;e;){if(e.getAttribute&&e.getAttribute("view_id")){if(a.y=a.x=a.$view=e,c.locate){var f=c.locate(e.parentNode),g=c.Gs[b][f];a.s.value=g,a.s.$masterId=f}return e}e=e.parentNode}return a.x}},Ls:function(a,b){return function(c){var d=b.data;if(b.filter){var e=b.locate(this.x.parentNode);d=b.getItem(e),this.refresh(),b.Fs[a][e]=this.x.outerHTML||(new XMLSerializer).serializeToString(this.x),b.Gs[a][e]=c}d[a]=c}},Is:function(a){return function(b,c,d){var e=c.Es?c:c.masterUI;if(!e.Es[a]){var f=document.createElement("DIV");d=d||e.s.activeContent;var g=webix.ui(d[a],f);f.firstChild.setAttribute("onclick","event.processed = true; if (webix.env.isIE8) event.srcElement.w_view = '"+g.s.id+"';"),g.getNode=e.Ks(g,a,e),g.attachEvent("onChange",e.Ls(a,e)),e.Hs[a]=g,e.Es[a]=f.innerHTML,e.Fs[a]={},e.Gs[a]={}}if(e.filter&&b[a]!=e.Gs[a]&&!webix.isUndefined(b[a])){var g=e.Hs[a];g.blockEvent(),g.$view.firstChild||g.refresh(),g.setValue(b[a]),g.refresh(),g.unblockEvent(),e.Gs[a][b.id]=b[a],e.Fs[a][b.id]=g.x.outerHTML||(new XMLSerializer).serializeToString(g.x)}return e.Fs[a][b.id]||e.Es[a]}}},webix.ProgressBar={$init:function(){webix.isUndefined(this.cu)&&this.attachEvent&&(this.attachEvent("onBeforeLoad",this.showProgress),this.attachEvent("onAfterLoad",this.hideProgress),this.cu=null)},showProgress:function(a){if(!this.cu){a=webix.extend({position:0,delay:2e3,type:"icon",icon:"refresh",hide:!1},a||{},!0);var b="icon"==a.type?"fa-"+a.icon+" fa-spin":"";if(this.cu=webix.html.create("DIV",{"class":"webix_progress_"+a.type},"<div class='webix_progress_state "+b+"'></div>"),this.setPosition||(this.x.style.position="relative"),webix.html.insertBefore(this.cu,this.x.firstChild,this.x),!webix.Touch.$active&&this.getScrollState){var c=this.getScrollState();this.x.scrollWidth!=this.$width&&(this.cu.style.left=c.x+"px"),this.x.scrollHeight!=this.$height&&(this.cu.style.top="bottom"!=a.type?c.y+"px":c.y+this.$height-this.cu.offsetHeight+"px")}this.du=1}a&&"icon"!=a.type&&webix.delay(function(){if(this.cu){var b=a.position||1;if(this.cu.style[webix.env.transitionDuration]===webix.undefined&&a.delay){var c=0,d=0,e=b/a.delay*30,f=this;this.Oy&&(window.clearInterval(this.Oy),d=this.cu.firstChild.offsetWidth/this.cu.offsetWidth*100),this.Oy=window.setInterval(function(){30*c==a.delay?window.clearInterval(f.Oy):(f.cu&&f.cu.firstChild&&(f.cu.firstChild.style.width=d+c*e*b*100+"%"),c++)},30)}else this.cu.firstChild.style.width=100*b+"%",a.delay&&(this.cu.firstChild.style[webix.env.transitionDuration]=a.delay+"ms");a.hide&&webix.delay(this.hideProgress,this,[1],a.delay)}this.du=0},this)},hideProgress:function(a){this.du&&(a=!0),this.cu&&(a?(this.Oy&&window.clearInterval(this.Oy),webix.html.remove(this.cu),this.cu=null):this.showProgress({position:1.1,delay:300,hide:!0}))}},webix.protoUI({name:"video",$init:function(a){a.id||(a.id=webix.uid()),this.$ready.push(this.Ms)},Ms:function(){var a=this.s;if(this.w=webix.html.create("video",{"class":"webix_view_video",style:"width:100%;height:100%;",autobuffer:"autobuffer"},""),a.poster&&(this.w.poster=a.poster),a.src){"object"!=typeof a.src&&(a.src=[a.src]);for(var b=0;b<a.src.length;b++)this.w.innerHTML+=' <source src="'+a.src[b]+'">'}a.controls&&(this.w.controls=!0),a.autoplay&&(this.w.autoplay=!0),this.x.appendChild(this.w)},getVideo:function(){return this.w},defaults:{src:"",controls:!0}},webix.ui.view),webix.protoUI({name:"NonGPL",$init:function(){webix.message("GPL version does not support '"+this.name+"'","error",-1)}},webix.ui.view),webix.protoUI({name:"organogram"},webix.ui.NonGPL),webix.protoUI({name:"barcode"},webix.ui.NonGPL),webix.protoUI({name:"portlet"},webix.ui.NonGPL),webix.protoUI({name:"pdfviewer"},webix.ui.NonGPL),webix.protoUI({name:"pdfbar"},webix.ui.NonGPL),webix.protoUI({name:"excelviewer"},webix.ui.NonGPL),webix.protoUI({name:"excelbar"},webix.ui.NonGPL),webix.protoUI({name:"datasuggest"},webix.ui.NonGPL),webix.protoUI({name:"gridsuggest"},webix.ui.NonGPL),webix.protoUI({name:"multitext"},webix.ui.NonGPL),webix.protoUI({name:"sidemenu",defaults:{padding:0,animate:!0,position:"left",width:200,borderless:!0},$init:function(){this.$view.className+=" webix_sidemenu"},position_setter:function(a){var b=this.s.position;return b&&webix.html.removeCss(this.$view," webix_sidemenu_"+b),webix.html.addCss(this.$view," webix_sidemenu_"+a),a},$getSize:function(){var a=webix.ui.window.prototype.$getSize.apply(this,arguments);return this.MA=a,a},$setSize:function(a,b){webix.ui.view.prototype.$setSize.call(this,a,b),a=this.bc-2*this.s.padding,b=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.ed.style.height=b+"px",this.gd.$setSize(a,b)},show:function(){return this.callEvent("onBeforeShow",arguments)?(this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||webix.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null),this.x.style.display="block",this.Qd(),this.s.position&&this.Td(),this.Ww=1,webix.delay(function(){this.Ww=0},this,[],webix.env.touch?400:100),this.config.autofocus&&(this.Vd=webix.UIManager.getFocus(),webix.UIManager.setFocus(this)),-1==webix.ui.et.find(this)&&webix.ui.et.push(this),void this.callEvent("onShow",[])):!1},Td:function(a){var b,c,d,e,f,g=0,h=0,i={};this.$view.style.position="fixed",d=window.innerWidth||document.documentElement.offsetWidth,e=window.innerHeight||document.documentElement.offsetHeight,b=this.MA[0]||d,c=this.MA[2]||e,f=this.s.position,"top"==f?b=d:"right"==f?(c=e,g=d-b):"bottom"==f?(b=d,h=e-c):c=e,i={left:g,top:h,width:b,height:c,maxWidth:d,maxHeight:e},"function"==typeof this.s.state&&this.s.state.call(this,i),this.NA=i,this.$setSize(i.width,i.height),"undefined"==typeof a&&this.OA()?(webix.html.removeCss(this.$view,"webix_animate",!0),this.Qf[this.s.position].beforeShow.call(this,i),webix.delay(function(){webix.html.addCss(this.$view,"webix_animate",!0)},this,null,1),webix.delay(function(){this.Qf[this.s.position].show.call(this,i)},this,null,10)):this.setPosition(i.left,i.top)},OA:function(){return webix.animate.isSupported()&&this.s.animate&&!(webix.env.isIE&&-1!=navigator.appVersion.indexOf("MSIE 9"))},hidden_setter:function(a){return a?this.hide(!0):this.show(),!!a},Qf:{left:{beforeShow:function(a){this.$view.style.left=-a.width+"px",this.$view.style.top=a.top+"px"},show:function(){this.$view.style.left="0px"},hide:function(a){this.$view.style.left=-a.width+"px"}},right:{beforeShow:function(a){this.$view.style.left="auto",this.$view.style.right=-a.width+"px",this.$view.style.top=a.top+"px"},show:function(){this.$view.style.right="0px"},hide:function(a){this.$view.style.right=-a.width+"px"}},top:{beforeShow:function(a){this.setPosition(a.left,a.top),this.$view.style.height="0px",this.ed.style.height="0px"},show:function(a){this.$view.style.height=a.height+"px",this.ed.style.height=a.height+"px"},hide:function(){this.$view.style.height="0px",this.ed.style.height="0px"}},bottom:{beforeShow:function(a){this.$view.style.left=a.left+"px",this.$view.style.top="auto";var b=a.bottom!=webix.undefined?a.bottom:a.maxHeight-a.top-a.height;this.$view.style.bottom=b+"px",this.$view.style.height="0px"},show:function(a){this.$view.style.height=a.height+"px"},hide:function(){this.$view.style.height="0px"}}},hide:function(a){if(!this.$destructed){this.s.modal&&this.Md(!1);var b=window.innerWidth||document.documentElement.offsetWidth,c=window.innerHeight||document.documentElement.offsetHeight;if(!a&&this.OA()&&b==this.NA.maxWidth&&c==this.NA.maxHeight){this.Qf[this.s.position].hide.call(this,this.NA);var d=webix.event(this.$view,webix.env.transitionEnd,webix.bind(function(){this.Wd(),webix.eventRemove(d)},this))}else this.Wd();if(this.s.autofocus){var e=document.activeElement;e&&this.x&&this.x.contains(e)&&(webix.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}}},webix.ui.popup),function(){function a(a,b){var c=[],d=a.getColumnConfig,e=b.columns;if(!e)if(d)e=a.Aj;else{var e=webix.copy(a.data.pull[a.data.order[0]]);for(var f in e)e[f]=!0;delete e.id}b.id&&c.push({id:"id",template:function(a){return a.id}});for(var f in e){var g=e[f];d&&a.Aj[f]&&(g=webix.extend(webix.extend({},g),a.Aj[f]));var h={id:g.id,template:g.template||function(a){return function(b){return b[a]}}(f),width:8.43*(g.width||200)/70,header:g.header!==!1?g.header||f:""};"object"==typeof h.header&&(h.header=h.header[0].text),c.push(h)}return c}function b(a,b,c){for(var d=[],e=0;e<c.length;e++)d.push(c[e].header);var f=[d];return a.data.each(function(b){for(var d=[],e=0;e<c.length;e++)d.push(c[e].template(b,a.type));f.push(d)},a),f}function c(a){for(var b=[],c=0;c<a.length;c++)b.push({wch:a[c].width});return b}function d(a){return Math.round(25569+a/864e5)}function e(a,b){for(var e={},f={s:{c:1e7,r:1e7},e:{c:0,r:0}},h=0;h!=a.length;++h)for(var i=0;i!=a[h].length;++i){f.s.r>h&&(f.s.r=h),f.s.c>i&&(f.s.c=i),f.e.r<h&&(f.e.r=h),f.e.c<i&&(f.e.c=i);var j={v:a[h][i]};if(null!==j.v){var k=XLSX.utils.encode_cell({c:i,r:h});"number"==typeof j.v?j.t="n":"boolean"==typeof j.v?j.t="b":j.v instanceof Date?(j.t="n",j.z=XLSX.SSF[g][14],j.v=d(j.v)):j.t="s",e[k]=j}}return f.s.c<1e7&&(e["!ref"]=XLSX.utils.encode_range(f)),e["!cols"]=c(b),e}function f(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d!=a.length;++d)c[d]=255&a.charCodeAt(d);return b}webix.toPNG=function(a,b){webix.require("http://cdn.webix.com/extras/html2canvas.min.js",function(){var c=webix.$$(a),d=c?c.$view:webix.toHTML(a),e=(b||"chart")+".png";window.html2canvas(d).then(function(a){if(a.msToBlob){var b=a.msToBlob();window.navigator.msSaveBlob(b,e)}else{var c=document.createElement("a");c.href=a.toDataURL("image/png"),c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c),c.remove()}a.remove()})})},webix.toExcel=function(c,d){var g=webix.$$(c);webix.require("http://cdn.webix.com/extras/xlsx.core.min.js",function(){d=d||{};var c=a(g,d),h=b(g,d,c),i=e(h,c),j={SheetNames:[],Sheets:[]},k=d.name||"Data";j.SheetNames.push(k),j.Sheets[k]=i;var l=XLSX.write(j,{bookType:"xlsx",bookSST:!0,type:"binary"}),m=(d.filename||k)+".xlsx",n=new Blob([f(l)],{type:"application/xlsx"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,m);else{var o=new window.FileReader;o.readAsDataURL(n),o.onloadend=function(){var a=document.createElement("a");a.href=o.result,a.download=m,document.body.appendChild(a),a.click(),document.body.removeChild(a),a.remove()}}})};var g="_table"}(),webix.type(webix.ui.tree,{name:"menuTree",height:40,icon:function(a){for(var b="",c="",d=1;d<=a.$level;d++)if(d==a.$level&&a.$count){var e=a.open?"down":"right";b+="<span class='"+c+" webix_icon fa-angle-"+e+"'></span>"}return b},folder:function(a){return a.icon?"<span class='webix_icon icon fa-"+a.icon+"'></span>":""}}),webix.protoUI({name:"icon",$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},defaults:{template:function(a){var b="<button style='height:100%;width:100%;line-height:"+a.aheight+"px' class='webix_icon_button'>";
return b+="<span class='webix_icon fa-"+a.icon+"'></span>",a.value&&(b+="<span class='webix_icon_count'>"+a.value+"</span>"),b+="</button>"},width:33},_set_inner_size:function(){}},webix.ui.button),eval(function(a,b,c,d,e,f){if(e=function(a){return(b>a?"":e(parseInt(a/b)))+((a%=b)>35?String.fromCharCode(a+29):a.toString(36))},!"".replace(/^/,String)){for(;c--;)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}],e=function(){return"\\w+"},c=1}for(;c--;)d[c]&&(a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]));return a}('!12(a,b){"1X"==1f 7J&&"1X"==1f 7J.bQ?7J.bQ=a.3i?b(a,!0):12(a){18(!a.3i)52 1r 6Q("4Y dx a 6O eo a 3i");14 b(a)}:b(a)}("6N"!=1f 6O?6O:15,12(a,b){17 c=[],d=c.1x,e=c.4i,f=c.1m,g=c.1Q,h={},i=h.cd,j=h.7k,k={},l=a.3i,m="2.1.1",n=12(a,b){14 1r n.fn.4F(a,b)},o=/^[\\s\\bO\\bN]+|[\\s\\bO\\bN]+$/g,p=/^-7p-/,q=/-([\\da-z])/gi,r=12(a,b){14 b.6U()};n.fn=n.2I={4V:m,4c:n,28:"",19:0,eP:12(){14 d.1g(15)},1l:12(a){14 1a!=a?0>a?15[a+15.19]:15[a]:d.1g(15)},2F:12(a){17 b=n.2M(15.4c(),a);14 b.6I=15,b.2Y=15.2Y,b},1k:12(a,b){14 n.1k(15,a,b)},2k:12(a){14 15.2F(n.2k(15,12(b,c){14 a.1g(b,c,b)}))},1x:12(){14 15.2F(d.1y(15,1n))},3M:12(){14 15.eq(0)},4p:12(){14 15.eq(-1)},eq:12(a){17 b=15.19,c=+a+(0>a?b:0);14 15.2F(c>=0&&b>c?[15[c]]:[])},46:12(){14 15.6I||15.4c(1a)},1m:f,45:c.45,2N:c.2N},n.1p=n.fn.1p=12(){17 a,b,c,d,e,f,g=1n[0]||{},h=1,i=1n.19,j=!1;1c("44"==1f g&&(j=g,g=1n[h]||{},h++),"1X"==1f g||n.1z(g)||(g={}),h===i&&(g=15,h--);i>h;h++)18(1a!=(a=1n[h]))1c(b 1i a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.5L(d)||(e=n.2n(d)))?(e?(e=!1,f=c&&n.2n(c)?c:[]):f=c&&n.5L(c)?c:{},g[b]=n.1p(j,f,d)):1b 0!==d&&(g[b]=d));14 g},n.1p({2j:"4Y"+(m+3L.7f()).1w(/\\D/g,""),6F:!0,1T:12(a){52 1r 6Q(a)},dQ:12(){},1z:12(a){14"12"===n.1d(a)},2n:5K.2n,40:12(a){14 1a!=a&&a===a.6O},bI:12(a){14!n.2n(a)&&a-3Y(a)>=0},5L:12(a){14"1X"!==n.1d(a)||a.1e||n.40(a)?!1:a.4c&&!j.1g(a.4c.2I,"dR")?!1:!0},4L:12(a){17 b;1c(b 1i a)14!1;14!0},1d:12(a){14 1a==a?a+"":"1X"==1f a||"12"==1f a?h[i.1g(a)]||"1X":1f a},4O:12(a){17 b,c=es;a=n.4o(a),a&&(1===a.1Q("f2 fF")?(b=l.21("1O"),b.1K=a,l.bH.2d(b).1o.5J(b)):c(a))},3f:12(a){14 a.1w(p,"7p-").1w(q,r)},1v:12(a,b){14 a.1v&&a.1v.1s()===b.1s()},1k:12(a,b,c){17 d,e=0,f=a.19,g=s(a);18(c){18(g){1c(;f>e;e++)18(d=b.1y(a[e],c),d===!1)2a}1u 1c(e 1i a)18(d=b.1y(a[e],c),d===!1)2a}1u 18(g){1c(;f>e;e++)18(d=b.1g(a[e],e,a[e]),d===!1)2a}1u 1c(e 1i a)18(d=b.1g(a[e],e,a[e]),d===!1)2a;14 a},4o:12(a){14 1a==a?"":(a+"").1w(o,"")},4Z:12(a,b){17 c=b||[];14 1a!=a&&(s(6A(a))?n.2M(c,"1t"==1f a?[a]:a):f.1g(c,a)),c},4w:12(a,b,c){14 1a==b?-1:g.1g(b,a,c)},2M:12(a,b){1c(17 c=+b.19,d=0,e=a.19;c>d;d++)a[e++]=b[d];14 a.19=e,a},4A:12(a,b,c){1c(17 d,e=[],f=0,g=a.19,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.1m(a[f]);14 e},2k:12(a,b,c){17 d,f=0,g=a.19,h=s(a),i=[];18(h)1c(;g>f;f++)d=b(a[f],f,c),1a!=d&&i.1m(d);1u 1c(f 1i a)d=b(a[f],f,c),1a!=d&&i.1m(d);14 e.1y([],i)},1Z:1,f1:12(a,b){17 c,e,f;14"1t"==1f b&&(c=a[b],b=a,a=c),n.1z(a)?(e=d.1g(1n,2),f=12(){14 a.1y(b||15,e.4i(d.1g(1n)))},f.1Z=a.1Z=a.1Z||n.1Z++,f):1b 0},2C:7s.2C,bG:k}),n.1k("ce dq 6y dM 5K 7s 1I 6A 6Q".2m(" "),12(a,b){h["[1X "+b+"]"]=b.1s()});12 s(a){17 b=a.19,c=n.1d(a);14"12"===c||n.40(a)?!1:1===a.1e&&b?!0:"dU"===c||0===b||"5G"==1f b&&b>0&&b-1 1i a}17 t=12(a){17 b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="eu"+-1r 7s,v=a.3i,w=0,x=0,y=gb(),z=gb(),A=gb(),B=12(a,b){14 a===b&&(l=!0),0},C="6N",D=1<<31,E={}.7k,F=[],G=F.3X,H=F.1m,I=F.1m,J=F.1x,K=F.1Q||12(a){1c(17 b=0,c=15.19;c>b;b++)18(15[b]===a)14 b;14-1},L="2o|3c|4y|fH|fO|gj|bZ|2p|3s|cp|ct|8r|bF|dA|dB|dD",M="[\\\\dG\\\\t\\\\r\\\\n\\\\f]",N="(?:\\\\\\\\.|[\\\\w-]|[^\\\\dN-\\\\dP])+",O=N.1w("w","w#"),P="\\\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\"((?:\\\\\\\\.|[^\\\\\\\\\\"])*)\\"|("+O+"))|)"+M+"*\\\\]",Q=":("+N+")(?:\\\\(((\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\"((?:\\\\\\\\.|[^\\\\\\\\\\"])*)\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|"+P+")*)|.*)\\\\)|)",R=1r 1I("^"+M+"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)"+M+"+$","g"),S=1r 1I("^"+M+"*,"+M+"*"),T=1r 1I("^"+M+"*([>+~]|"+M+")"+M+"*"),U=1r 1I("="+M+"*([^\\\\]\'\\"]*?)"+M+"*\\\\]","g"),V=1r 1I(Q),W=1r 1I("^"+O+"$"),X={3R:1r 1I("^#("+N+")"),8w:1r 1I("^\\\\.("+N+")"),6r:1r 1I("^("+N.1w("w","w*")+")"),75:1r 1I("^"+P),7b:1r 1I("^"+Q),6p:1r 1I("^:(bE|3M|4p|4v|4v-4p)-(cs|bD-1d)(?:\\\\("+M+"*(6n|5D|(([+-]|)(\\\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\\\d+)|))"+M+"*\\\\)|)","i"),6k:1r 1I("^(?:"+L+")$","i"),4B:1r 1I("^"+M+"*[>+~]|:(6n|5D|eq|bC|bx|4v|3M|4p)(?:\\\\("+M+"*((?:-\\\\d)?\\\\d*)"+M+"*\\\\)|)(?=[^-]|$)","i")},Y=/^(?:1R|2B|4G|32)$/i,Z=/^h\\d$/i,$=/^[^{]+\\{\\s*\\[dT \\w/,3O=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ba=/[+~]/,bb=/\'|\\\\/g,cb=1r 1I("\\\\\\\\([\\\\da-f]{1,6}"+M+"?|("+M+")|.)","ev"),db=12(a,b,c){17 d="eX"+b-bv;14 d!==d||c?b:0>d?6y.bt(d+bv):6y.bt(d>>10|fr,ft&d|fD)};2q{I.1y(F=J.1g(v.3q),v.3q),F[v.3q.19].1e}2t(eb){I={1y:F.19?12(a,b){H.1y(a,J.1g(b))}:12(a,b){17 c=a.19,d=0;1h(a[c++]=b[d++]);a.19=c-1}}}12 fb(a,b,d,e){17 f,h,j,k,l,o,r,s,w,x;18((b?b.1E||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"1t"!=1f a)14 d;18(1!==(k=b.1e)&&9!==k)14[];18(p&&!e){18(f=3O.1Y(a))18(j=f[1]){18(9===k){18(h=b.5x(j),!h||!h.1o)14 d;18(h.3a===j)14 d.1m(h),d}1u 18(b.1E&&(h=b.1E.5x(j))&&t(b,h)&&h.3a===j)14 d.1m(h),d}1u{18(f[2])14 I.1y(d,b.2G(a)),d;18((j=f[3])&&c.3m&&b.3m)14 I.1y(d,b.3m(j)),d}18(c.b9&&(!q||!q.1j(a))){18(s=r=u,w=b,x=9===k&&a,1===k&&"1X"!==b.1v.1s()){o=g(a),(r=b.22("3a"))?s=r.1w(bb,"\\\\$&"):b.35("3a",s),s="[3a=\'"+s+"\'] ",l=o.19;1h(l--)o[l]=s+bd(o[l]);w=ba.1j(a)&&1W(b.1o)||b,x=o.3l(",")}18(x)2q{14 I.1y(d,w.2X(x)),d}2t(y){}b6{r||b.7Q("3a")}}}14 i(a.1w(R,"$1"),b,d,e)}12 gb(){17 a=[];12 b(c,e){14 a.1m(c+" ")>d.b3&&1U b[a.2U()],b[c+" "]=e}14 b}12 2s(a){14 a[u]=!0,a}12 1H(a){17 b=n.21("2w");2q{14!!a(b)}2t(c){14!1}b6{b.1o&&b.1o.5J(b),b=1a}}12 41(a,b){17 c=a.2m("|"),e=a.19;1h(e--)d.5w[c[e]]=b}12 5v(a,b){17 c=b&&a,d=c&&1===a.1e&&1===b.1e&&(~b.aZ||D)-(~a.aZ||D);18(d)14 d;18(c)1h(c=c.33)18(c===b)14-1;14 a?1:-1}12 66(a){14 12(b){17 c=b.1v.1s();14"1R"===c&&b.1d===a}}12 4q(a){14 12(b){17 c=b.1v.1s();14("1R"===c||"32"===c)&&b.1d===a}}12 2L(a){14 2s(12(b){14 b=+b,2s(12(c,d){17 e,f=a([],c.19,b),g=f.19;1h(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}12 1W(a){14 a&&1f a.2G!==C&&a}c=fb.bG={},f=fb.aU=12(a){17 b=a&&(a.1E||a).2K;14 b?"fZ"!==b.1v:!1},m=fb.g1=12(a){17 b,e=a?a.1E||a:v,g=e.62;14 e!==n&&9===e.1e&&e.2K?(n=e,o=e.2K,p=!f(e),g&&g!==g.1N&&(g.4d?g.4d("7w",12(){m()},!1):g.aR&&g.aR("cr",12(){m()})),c.5Z=1H(12(a){14 a.1L="i",!a.22("1L")}),c.2G=1H(12(a){14 a.2d(e.de("")),!a.2G("*").19}),c.3m=$.1j(e.3m)&&1H(12(a){14 a.3j="<2w 5Q=\'a\'></2w><2w 5Q=\'a i\'></2w>",a.2u.1L="i",2===a.3m("i").19}),c.7V=1H(12(a){14 o.2d(a).3a=u,!e.aQ||!e.aQ(u).19}),c.7V?(d.1M.3R=12(a,b){18(1f b.5x!==C&&p){17 c=b.5x(a);14 c&&c.1o?[c]:[]}},d.1P.3R=12(a){17 b=a.1w(cb,db);14 12(a){14 a.22("3a")===b}}):(1U d.1M.3R,d.1P.3R=12(a){17 b=a.1w(cb,db);14 12(a){17 c=1f a.6R!==C&&a.6R("3a");14 c&&c.1D===b}}),d.1M.6r=c.2G?12(a,b){14 1f b.2G!==C?b.2G(a):1b 0}:12(a,b){17 c,d=[],e=0,f=b.2G(a);18("*"===a){1h(c=f[e++])1===c.1e&&d.1m(c);14 d}14 f},d.1M.8w=c.3m&&12(a,b){14 1f b.3m!==C&&p?b.3m(a):1b 0},r=[],q=[],(c.b9=$.1j(e.2X))&&(1H(12(a){a.3j="<2B aJ=\'\'><3W 3c=\'\'></3W></2B>",a.2X("[aJ^=\'\']").19&&q.1m("[*^$]="+M+"*(?:\'\'|\\"\\")"),a.2X("[3c]").19||q.1m("\\\\["+M+"*(?:1D|"+L+")"),a.2X(":2o").19||q.1m(":2o")}),1H(12(a){17 b=e.21("1R");b.35("1d","3s"),a.2d(b).35("2Q","D"),a.2X("[2Q=d]").19&&q.1m("2Q"+M+"*[*^$|!~]?="),a.2X(":6X").19||q.1m(":6X",":2p"),a.2X("*,:x"),q.1m(",.*:")})),(c.5l=$.1j(s=o.3Q||o.e0||o.e5||o.e7||o.e8))&&1H(12(a){c.aE=s.1g(a,"2w"),s.1g(a,"[s!=\'\']:x"),r.1m("!=",Q)}),q=q.19&&1r 1I(q.3l("|")),r=r.19&&1r 1I(r.3l("|")),b=$.1j(o.3A),t=b||$.1j(o.2b)?12(a,b){17 c=9===a.1e?a.2K:a,d=b&&b.1o;14 a===d||!(!d||1!==d.1e||!(c.2b?c.2b(d):a.3A&&16&a.3A(d)))}:12(a,b){18(b)1h(b=b.1o)18(b===a)14!0;14!1},B=b?12(a,b){18(a===b)14 l=!0,0;17 d=!a.3A-!b.3A;14 d?d:(d=(a.1E||a)===(b.1E||b)?a.3A(b):1,1&d||!c.aC&&b.3A(a)===d?a===e||a.1E===v&&t(v,a)?-1:b===e||b.1E===v&&t(v,b)?1:k?K.1g(k,a)-K.1g(k,b):0:4&d?-1:1)}:12(a,b){18(a===b)14 l=!0,0;17 c,d=0,f=a.1o,g=b.1o,h=[a],i=[b];18(!f||!g)14 a===e?-1:b===e?1:f?-1:g?1:k?K.1g(k,a)-K.1g(k,b):0;18(f===g)14 5v(a,b);c=a;1h(c=c.1o)h.3d(c);c=b;1h(c=c.1o)i.3d(c);1h(h[d]===i[d])d++;14 d?5v(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.3Q=12(a,b){14 fb(a,1a,1a,b)},fb.5l=12(a,b){18((a.1E||a)!==n&&m(a),b=b.1w(U,"=\'$1\']"),!(!c.5l||!p||r&&r.1j(b)||q&&q.1j(b)))2q{17 d=s.1g(a,b);18(d||c.aE||a.3i&&11!==a.3i.1e)14 d}2t(e){}14 fb(b,n,1a,[a]).19>0},fb.2b=12(a,b){14(a.1E||a)!==n&&m(a),t(a,b)},fb.3v=12(a,b){(a.1E||a)!==n&&m(a);17 e=d.5w[b.1s()],f=e&&E.1g(d.5w,b.1s())?e(a,b,!p):1b 0;14 1b 0!==f?f:c.5Z||!p?a.22(b):(f=a.6R(b))&&f.aB?f.1D:1a},fb.1T=12(a){52 1r 6Q("fh 1T, fi fm: "+a)},fb.7A=12(a){17 b,d=[],e=0,f=0;18(l=!c.aA,k=!c.az&&a.1x(0),a.45(B),l){1h(b=a[f++])b===a[f]&&(e=d.1m(f));1h(e--)a.2N(d[e],1)}14 k=1a,a},e=fb.ax=12(a){17 b,c="",d=0,f=a.1e;18(f){18(1===f||9===f||11===f){18("1t"==1f a.3x)14 a.3x;1c(a=a.2u;a;a=a.33)c+=e(a)}1u 18(3===f||4===f)14 a.fM}1u 1h(b=a[d++])c+=e(b);14 c},d=fb.aw={b3:50,fX:2s,27:X,5w:{},1M:{},3H:{">":{2D:"1o",3M:!0}," ":{2D:"1o"},"+":{2D:"4x",3M:!0},"~":{2D:"4x"}},av:{75:12(a){14 a[1]=a[1].1w(cb,db),a[3]=(a[3]||a[4]||a[5]||"").1w(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.1x(0,4)},6p:12(a){14 a[1]=a[1].1s(),"4v"===a[1].1x(0,3)?(a[3]||fb.1T(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("6n"===a[3]||"5D"===a[3])),a[5]=+(a[7]+a[8]||"5D"===a[3])):a[3]&&fb.1T(a[0]),a},7b:12(a){17 b,c=!a[6]&&a[2];14 X.6p.1j(a[0])?1a:(a[3]?a[2]=a[4]||a[5]||"":c&&V.1j(c)&&(b=g(c,!0))&&(b=c.1Q(")",c.19-b)-c.19)&&(a[0]=a[0].1x(0,b),a[2]=c.1x(0,b)),a.1x(0,3))}},1P:{6r:12(a){17 b=a.1w(cb,db).1s();14"*"===a?12(){14!0}:12(a){14 a.1v&&a.1v.1s()===b}},8w:12(a){17 b=y[a+" "];14 b||(b=1r 1I("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,12(a){14 b.1j("1t"==1f a.1L&&a.1L||1f a.22!==C&&a.22("5Q")||"")})},75:12(a,b,c){14 12(d){17 e=fb.3v(d,a);14 1a==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.1Q(c):"*="===b?c&&e.1Q(c)>-1:"$="===b?c&&e.1x(-c.19)===c:"~="===b?(" "+e+" ").1Q(c)>-1:"|="===b?e===c||e.1x(0,c.19+1)===c+"-":!1):!0}},6p:12(a,b,c,d,e){17 f="4v"!==a.1x(0,3),g="4p"!==a.1x(-4),h="bD-1d"===b;14 1===d&&0===e?12(a){14!!a.1o}:12(b,c,i){17 j,k,l,m,n,o,p=f!==g?"33":"4x",q=b.1o,r=h&&b.1v.1s(),s=!i&&!h;18(q){18(f){1h(p){l=b;1h(l=l[p])18(h?l.1v.1s()===r:1===l.1e)14!1;o=p="bE"===a&&!o&&"33"}14!0}18(o=[g?q.2u:q.6v],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.3q[n];1h(l=++n&&l&&l[p]||(m=n=0)||o.3X())18(1===l.1e&&++m&&l===b){k[a]=[w,n,m];2a}}1u 18(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];1u 1h(l=++n&&l&&l[p]||(m=n=0)||o.3X())18((h?l.1v.1s()===r:1===l.1e)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))2a;14 m-=e,m===d||m%d===0&&m/d>=0}}},7b:12(a,b){17 c,e=d.3r[a]||d.8b[a.1s()]||fb.1T("au dp: "+a);14 e[u]?e(b):e.19>1?(c=[a,a,"",b],d.8b.7k(a.1s())?2s(12(a,c){17 d,f=e(a,b),g=f.19;1h(g--)d=K.1g(a,f[g]),a[d]=!(c[d]=f[g])}):12(a){14 e(a,0,c)}):e}},3r:{6t:2s(12(a){17 b=[],c=[],d=h(a.1w(R,"$1"));14 d[u]?2s(12(a,b,c,e){17 f,g=d(a,1a,e,[]),h=a.19;1h(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):12(a,e,f){14 b[0]=a,d(b,1a,f,c),!c.3X()}}),6l:2s(12(a){14 12(b){14 fb(a,b).19>0}}),2b:2s(12(a){14 12(b){14(b.3x||b.dz||e(b)).1Q(a)>-1}}),5h:2s(12(a){14 W.1j(a||"")||fb.1T("au 5h: "+a),a=a.1w(cb,db).1s(),12(b){17 c;do 18(c=p?b.5h:b.22("3o:5h")||b.22("5h"))14 c=c.1s(),c===a||0===c.1Q(a+"-");1h((b=b.1o)&&1===b.1e);14!1}}),2A:12(b){17 c=a.76&&a.76.dI;14 c&&c.1x(1)===b.3a},dJ:12(a){14 a===o},4H:12(a){14 a===n.at&&(!n.as||n.as())&&!!(a.1d||a.3C||~a.6e)},6X:12(a){14 a.2p===!1},2p:12(a){14 a.2p===!0},2o:12(a){17 b=a.1v.1s();14"1R"===b&&!!a.2o||"3W"===b&&!!a.3c},3c:12(a){14 a.1o&&a.1o.6d,a.3c===!0},2z:12(a){1c(a=a.2u;a;a=a.33)18(a.1e<6)14!1;14!0},7q:12(a){14!d.3r.2z(a)},dW:12(a){14 Z.1j(a.1v)},1R:12(a){14 Y.1j(a.1v)},32:12(a){17 b=a.1v.1s();14"1R"===b&&"32"===a.1d||"32"===b},1K:12(a){17 b;14"1R"===a.1v.1s()&&"1K"===a.1d&&(1a==(b=a.22("1d"))||"1K"===b.1s())},3M:2L(12(){14[0]}),4p:2L(12(a,b){14[b-1]}),eq:2L(12(a,b,c){14[0>c?c+b:c]}),6n:2L(12(a,b){1c(17 c=0;b>c;c+=2)a.1m(c);14 a}),5D:2L(12(a,b){1c(17 c=1;b>c;c+=2)a.1m(c);14 a}),bx:2L(12(a,b,c){1c(17 d=0>c?c+b:c;--d>=0;)a.1m(d);14 a}),bC:2L(12(a,b,c){1c(17 d=0>c?c+b:c;++d<b;)a.1m(d);14 a})}},d.3r.4v=d.3r.eq;1c(b 1i{4M:!0,5g:!0,7t:!0,ar:!0,am:!0})d.3r[b]=66(b);1c(b 1i{7y:!0,al:!0})d.3r[b]=4q(b);12 5e(){}5e.2I=d.5c=d.3r,d.8b=1r 5e,g=fb.eO=12(a,b){17 c,e,f,g,h,i,j,k=z[a+" "];18(k)14 b?0:k.1x(0);h=a,i=[],j=d.av;1h(h){(!c||(e=S.1Y(h)))&&(e&&(h=h.1x(e[0].19)||h),i.1m(f=[])),c=!1,(e=T.1Y(h))&&(c=e.2U(),f.1m({1D:c,1d:e[0].1w(R," ")}),h=h.1x(c.19));1c(g 1i d.1P)!(e=X[g].1Y(h))||j[g]&&!(e=j[g](e))||(c=e.2U(),f.1m({1D:c,1d:g,3Q:e}),h=h.1x(c.19));18(!c)2a}14 b?h.19:h?fb.1T(a):z(a,i).1x(0)};12 bd(a){1c(17 b=0,c=a.19,d="";c>b;b++)d+=a[b].1D;14 d}12 4f(a,b,c){17 d=b.2D,e=c&&"1o"===d,f=x++;14 b.3M?12(b,c,f){1h(b=b[d])18(1===b.1e||e)14 a(b,c,f)}:12(b,c,g){17 h,i,j=[w,f];18(g){1h(b=b[d])18((1===b.1e||e)&&a(b,c,g))14!0}1u 1h(b=b[d])18(1===b.1e||e){18(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)14 j[2]=h[2];18(i[d]=j,j[2]=a(b,c,g))14!0}}}12 4g(a){14 a.19>1?12(b,c,d){17 e=a.19;1h(e--)18(!a[e](b,c,d))14!1;14!0}:a[0]}12 4W(a,b,c){1c(17 d=0,e=b.19;e>d;d++)fb(a,b[d],c);14 c}12 be(a,b,c,d,e){1c(17 f,g=[],h=0,i=a.19,j=1a!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.1m(f),j&&b.1m(h));14 g}12 3E(a,b,c,d,e,f){14 d&&!d[u]&&(d=3E(d)),e&&!e[u]&&(e=3E(e,f)),2s(12(f,g,h,i){17 j,k,l,m=[],n=[],o=g.19,p=f||4W(b||"*",h.1e?[h]:h,[]),q=!a||!f&&b?p:be(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;18(c&&c(q,r,h,i),d){j=be(r,n),d(j,[],h,i),k=j.19;1h(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}18(f){18(e||a){18(e){j=[],k=r.19;1h(k--)(l=r[k])&&j.1m(q[k]=l);e(1a,r=[],j,i)}k=r.19;1h(k--)(l=r[k])&&(j=e?K.1g(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}1u r=be(r===g?r.2N(o,r.19):r),e?e(1a,g,r,i):I.1y(g,r)})}12 3e(a){1c(17 b,c,e,f=a.19,g=d.3H[a[0].1d],h=g||d.3H[" "],i=g?1:0,k=4f(12(a){14 a===b},h,!0),l=4f(12(a){14 K.1g(b,a)>-1},h,!0),m=[12(a,c,d){14!g&&(d||c!==j)||((b=c).1e?k(a,c,d):l(a,c,d))}];f>i;i++)18(c=d.3H[a[i].1d])m=[4f(4g(m),c)];1u{18(c=d.1P[a[i].1d].1y(1a,a[i].3Q),c[u]){1c(e=++i;f>e;e++)18(d.3H[a[e].1d])2a;14 3E(i>1&&4g(m),i>1&&bd(a.1x(0,i-1).4i({1D:" "===a[i-2].1d?"*":""})).1w(R,"$1"),c,e>i&&3e(a.1x(i,e)),f>e&&3e(a=a.1x(e)),f>e&&bd(a))}m.1m(c)}14 4g(m)}12 3F(a,b){17 c=b.19>0,e=a.19>0,f=12(f,g,h,i,k){17 l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.1M.6r("*",k),v=w+=1a==t?1:3L.7f()||.1,x=u.19;1c(k&&(j=g!==n&&g);q!==x&&1a!=(l=u[q]);q++){18(e&&l){m=0;1h(o=a[m++])18(o(l,g,h)){i.1m(l);2a}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.1m(l))}18(p+=q,c&&q!==p){m=0;1h(o=b[m++])o(r,s,g,h);18(f){18(p>0)1h(q--)r[q]||s[q]||(s[q]=G.1g(i));s=be(s)}I.1y(i,s),k&&!f&&s.19>0&&p+b.19>1&&fb.7A(i)}14 k&&(w=v,j=t),r};14 c?2s(f):f}14 h=fb.fj=12(a,b){17 c,d=[],e=[],f=A[a+" "];18(!f){b||(b=g(a)),c=b.19;1h(c--)f=3e(b[c]),f[u]?d.1m(f):e.1m(f);f=A(a,3F(e,d)),f.28=a}14 f},i=fb.2B=12(a,b,e,f){17 i,j,k,l,m,n="12"==1f a&&a,o=!f&&g(a=n.28||a);18(e=e||[],1===o.19){18(j=o[0]=o[0].1x(0),j.19>2&&"3R"===(k=j[0]).1d&&c.7V&&9===b.1e&&p&&d.3H[j[1].1d]){18(b=(d.1M.3R(k.3Q[0].1w(cb,db),b)||[])[0],!b)14 e;n&&(b=b.1o),a=a.1x(j.2U().1D.19)}i=X.4B.1j(a)?0:j.19;1h(i--){18(k=j[i],d.3H[l=k.1d])2a;18((m=d.1M[l])&&(f=m(k.3Q[0].1w(cb,db),ba.1j(j[0].1d)&&1W(b.1o)||b))){18(j.2N(i,1),a=f.19&&bd(j),!a)14 I.1y(e,f),e;2a}}}14(n||h(a,o))(f,b,!p,e,ba.1j(a)&&1W(b.1o)||b),e},c.az=u.2m("").45(B).3l("")===u,c.aA=!!l,m(),c.aC=1H(12(a){14 1&a.3A(n.21("2w"))}),1H(12(a){14 a.3j="<a 3C=\'#\'></a>","#"===a.2u.22("3C")})||41("1d|3C|3G|24",12(a,b,c){14 c?1b 0:a.22(b,"1d"===b.1s()?1:2)}),c.5Z&&1H(12(a){14 a.3j="<1R/>",a.2u.35("1D",""),""===a.2u.22("1D")})||41("1D",12(a,b,c){14 c||"1R"!==a.1v.1s()?1b 0:a.5U}),1H(12(a){14 1a==a.22("2p")})||41(L,12(a,b,c){17 d;14 c?1b 0:a[b]===!0?b.1s():(d=a.6R(b))&&d.aB?d.1D:1a}),fb}(a);n.1M=t,n.2v=t.aw,n.2v[":"]=n.2v.3r,n.4u=t.7A,n.1K=t.ax,n.5S=t.aU,n.2b=t.2b;17 u=n.2v.27.4B,v=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,w=/^.[^:#\\[\\.,]*$/;12 x(a,b,c){18(n.1z(b))14 n.4A(a,12(a,d){14!!b.1g(a,d,a)!==c});18(b.1e)14 n.4A(a,12(a){14 a===b!==c});18("1t"==1f b){18(w.1j(b))14 n.1P(b,a,c);b=n.1P(b,a)}14 n.4A(a,12(a){14 g.1g(b,a)>=0!==c})}n.1P=12(a,b,c){17 d=b[0];14 c&&(a=":6t("+a+")"),1===b.19&&1===d.1e?n.1M.5l(d,a)?[d]:[]:n.1M.3Q(a,n.4A(b,12(a){14 1===a.1e}))},n.fn.1p({1M:12(a){17 b,c=15.19,d=[],e=15;18("1t"!=1f a)14 15.2F(n(a).1P(12(){1c(b=0;c>b;b++)18(n.2b(e[b],15))14!0}));1c(b=0;c>b;b++)n.1M(a,e[b],d);14 d=15.2F(c>1?n.4u(d):d),d.28=15.28?15.28+" "+a:a,d},1P:12(a){14 15.2F(x(15,a||[],!1))},6t:12(a){14 15.2F(x(15,a||[],!0))},8d:12(a){14!!x(15,"1t"==1f a&&u.1j(a)?n(a):a||[],!1).19}});17 y,z=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,A=n.fn.4F=12(a,b){17 c,d;18(!a)14 15;18("1t"==1f a){18(c="<"===a[0]&&">"===a[a.19-1]&&a.19>=3?[1a,a,1a]:z.1Y(a),!c||!c[1]&&b)14!b||b.4V?(b||y).1M(a):15.4c(b).1M(a);18(c[1]){18(b=b aj n?b[0]:b,n.2M(15,n.8n(c[1],b&&b.1e?b.1E||b:l,!0)),v.1j(c[1])&&n.5L(b))1c(c 1i b)n.1z(15[c])?15[c](b[c]):15.3v(c,b[c]);14 15}14 d=l.5x(c[2]),d&&d.1o&&(15.19=1,15[0]=d),15.2Y=l,15.28=a,15}14 a.1e?(15.2Y=15[0]=a,15.19=1,15):n.1z(a)?"6N"!=1f y.2E?y.2E(a):a(n):(1b 0!==a.28&&(15.28=a.28,15.2Y=a.2Y),n.4Z(a,15))};A.2I=n.fn,y=n(l);17 B=/^(?:ai|8u(?:ah|bU))/,C={ag:!0,4z:!0,af:!0,8u:!0};n.1p({2D:12(a,b,c){17 d=[],e=1b 0!==c;1h((a=a[b])&&9!==a.1e)18(1===a.1e){18(e&&n(a).8d(c))2a;d.1m(a)}14 d},70:12(a,b){1c(17 c=[];a;a=a.33)1===a.1e&&a!==b&&c.1m(a);14 c}}),n.fn.1p({6l:12(a){17 b=n(a,15),c=b.19;14 15.1P(12(){1c(17 a=0;c>a;a++)18(n.2b(15,b[a]))14!0})},co:12(a,b){1c(17 c,d=0,e=15.19,f=[],g=u.1j(a)||"1t"!=1f a?n(a,b||15.2Y):0;e>d;d++)1c(c=15[d];c&&c!==b;c=c.1o)18(c.1e<11&&(g?g.73(c)>-1:1===c.1e&&n.1M.5l(c,a))){f.1m(c);2a}14 15.2F(f.19>1?n.4u(f):f)},73:12(a){14 a?"1t"==1f a?g.1g(n(a),15[0]):g.1g(15,a.4V?a[0]:a):15[0]&&15[0].1o?15.3M().ac().19:-1},2x:12(a,b){14 15.2F(n.4u(n.2M(15.1l(),n(a,b))))},aa:12(a){14 15.2x(1a==a?15.6I:15.6I.1P(a))}});12 D(a,b){1h((a=a[b])&&1!==a.1e);14 a}n.1k({7q:12(a){17 b=a.1o;14 b&&11!==b.1e?b:1a},ai:12(a){14 n.2D(a,"1o")},cK:12(a,b,c){14 n.2D(a,"1o",c)},af:12(a){14 D(a,"33")},8u:12(a){14 D(a,"4x")},cL:12(a){14 n.2D(a,"33")},ac:12(a){14 n.2D(a,"4x")},cP:12(a,b,c){14 n.2D(a,"33",c)},cQ:12(a,b,c){14 n.2D(a,"4x",c)},cR:12(a){14 n.70((a.1o||{}).2u,a)},ag:12(a){14 n.70(a.2u)},4z:12(a){14 a.a8||n.2M([],a.3q)}},12(a,b){n.fn[a]=12(c,d){17 e=n.2k(15,b,c);14"ah"!==a.1x(-5)&&(d=c),d&&"1t"==1f d&&(e=n.1P(d,e)),15.19>1&&(C[a]||n.4u(e),B.1j(a)&&e.dn()),15.2F(e)}});17 E=/\\S+/g,F={};12 G(a){17 b=F[a]={};14 n.1k(a.27(E)||[],12(a,c){b[c]=!0}),b}n.4D=12(a){a="1t"==1f a?F[a]||G(a):n.1p({},a);17 b,c,d,e,f,g,h=[],i=!a.57&&[],j=12(l){1c(b=a.4E&&l,c=!0,g=e||0,e=0,f=h.19,d=!0;h&&f>g;g++)18(h[g].1y(l[0],l[1])===!1&&a.dy){b=!1;2a}d=!1,h&&(i?i.19&&j(i.2U()):b?h=[]:k.68())},k={2x:12(){18(h){17 c=h.19;!12 g(b){n.1k(b,12(b,c){17 d=n.1d(c);"12"===d?a.4u&&k.6l(c)||h.1m(c):c&&c.19&&"1t"!==d&&g(c)})}(1n),d?f=h.19:b&&(e=c,j(b))}14 15},1S:12(){14 h&&n.1k(1n,12(a,b){17 c;1h((c=n.4w(b,h,c))>-1)h.2N(c,1),d&&(f>=c&&f--,g>=c&&g--)}),15},6l:12(a){14 a?n.4w(a,h)>-1:!(!h||!h.19)},2z:12(){14 h=[],f=0,15},68:12(){14 h=i=b=1b 0,15},2p:12(){14!h},a5:12(){14 i=1b 0,b||k.68(),15},dC:12(){14!i},5Y:12(a,b){14!h||c&&!i||(b=b||[],b=[a,b.1x?b.1x():b],d?i.1m(b):j(b)),15},56:12(){14 k.5Y(15,1n),15},dF:12(){14!!c}};14 k},n.1p({48:12(a){17 b=[["a4","2P",n.4D("57 4E"),"dL"],["7v","4b",n.4D("57 4E"),"gl"],["a1","55",n.4D("4E")]],c="dS",d={6x:12(){14 c},3h:12(){14 e.2P(1n).4b(1n),15},a0:12(){17 a=1n;14 n.48(12(c){n.1k(b,12(b,f){17 g=n.1z(a[b])&&a[b];e[f[1]](12(){17 a=g&&g.1y(15,1n);a&&n.1z(a.23)?a.23().2P(c.a4).4b(c.7v).55(c.a1):c[f[0]+"54"](15===d?c.23():15,g?[a]:1n)})}),a=1a}).23()},23:12(a){14 1a!=a?n.1p(a,d):d}},e={};14 d.e1=d.a0,n.1k(b,12(a,f){17 g=f[2],h=f[3];d[f[1]]=g.2x,h&&g.2x(12(){c=h},b[1^a][2].68,b[2][2].a5),e[f[0]]=12(){14 e[f[0]+"54"](15===e?d:15,1n),15},e[f[0]+"54"]=g.5Y}),d.23(e),a&&a.1g(e,e),e},e2:12(a){17 b=0,c=d.1g(1n),e=c.19,f=1!==e||a&&n.1z(a.23)?e:0,g=1===f?a:n.48(),h=12(a,b,c){14 12(e){b[a]=15,c[a]=1n.19>1?d.1g(1n):e,c===i?g.9Z(b,c):--f||g.4j(b,c)}},i,j,k;18(e>1)1c(i=1r 5K(e),j=1r 5K(e),k=1r 5K(e);e>b;b++)c[b]&&n.1z(c[b].23)?c[b].23().2P(h(b,k,c)).4b(g.7v).55(h(b,j,i)):--f;14 f||g.4j(k,c),g.23()}});17 H;n.fn.2E=12(a){14 n.2E.23().2P(a),15},n.1p({6F:!1,6z:1,e9:12(a){a?n.6z++:n.2E(!0)},2E:12(a){(a===!0?--n.6z:n.6F)||(n.6F=!0,a!==!0&&--n.6z>0||(H.4j(l,[n]),n.fn.7X&&(n(l).7X("2E"),n(l).3n("2E"))))}});12 I(){l.5r("9Y",I,!1),a.5r("4n",I,!1),n.2E()}n.2E.23=12(b){14 H||(H=n.48(),"3y"===l.5P?5X(n.2E):(l.4d("9Y",I,!1),a.4d("4n",I,!1))),H.23(b)},n.2E.23();17 J=n.2g=12(a,b,c,d,e,f,g){17 h=0,i=a.19,j=1a==c;18("1X"===n.1d(c)){e=!0;1c(h 1i c)n.2g(a,b,h,c[h],!0,f,g)}1u 18(1b 0!==d&&(e=!0,n.1z(d)||(g=!0),j&&(g?(b.1g(a,d),b=1a):(j=b,b=12(a,b,c){14 j.1g(n(a),c)})),b))1c(;i>h;h++)b(a[h],c,g?d:d.1g(a[h],h,b(a[h],c)));14 e?a:j?b.1g(a):i?b(a[0],c):f};n.53=12(a){14 1===a.1e||9===a.1e||!+a.1e};12 K(){6A.f8(15.29={},0,{1l:12(){14{}}}),15.2j=n.2j+3L.7f()}K.9X=1,K.4h=n.53,K.2I={4Q:12(a){18(!K.4h(a))14 0;17 b={},c=a[15.2j];18(!c){c=K.9X++;2q{b[15.2j]={1D:c},6A.fl(a,b)}2t(d){b[15.2j]=c,n.1p(a,b)}}14 15.29[c]||(15.29[c]={}),c},1C:12(a,b,c){17 d,e=15.4Q(a),f=15.29[e];18("1t"==1f b)f[b]=c;1u 18(n.4L(f))n.1p(15.29[e],b);1u 1c(d 1i b)f[d]=b[d];14 f},1l:12(a,b){17 c=15.29[15.4Q(a)];14 1b 0===b?c:c[b]},2g:12(a,b,c){17 d;14 1b 0===b||b&&"1t"==1f b&&1b 0===c?(d=15.1l(a,b),1b 0!==d?d:15.1l(a,n.3f(b))):(15.1C(a,b,c),1b 0!==c?c:b)},1S:12(a,b){17 c,d,e,f=15.4Q(a),g=15.29[f];18(1b 0===b)15.29[f]={};1u{n.2n(b)?d=b.4i(b.2k(n.3f)):(e=n.3f(b),b 1i g?d=[b,e]:(d=e,d=d 1i g?[d]:d.27(E)||[])),c=d.19;1h(c--)1U g[d[c]]}},4e:12(a){14!n.4L(15.29[a[15.2j]]||{})},fs:12(a){a[15.2j]&&1U 15.29[a[15.2j]]}};17 L=1r K,M=1r K,N=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,O=/([A-Z])/g;12 P(a,b,c){17 d;18(1b 0===c&&1===a.1e)18(d="1J-"+b.1w(O,"-$1").1s(),c=a.22(d),"1t"==1f c){2q{c="9W"===c?!0:"fE"===c?!1:"1a"===c?1a:+c+""===c?+c:N.1j(c)?n.7r(c):c}2t(e){}M.1C(a,b,c)}1u c=1b 0;14 c}n.1p({4e:12(a){14 M.4e(a)||L.4e(a)},1J:12(a,b,c){14 M.2g(a,b,c)},9V:12(a,b){M.1S(a,b)},fK:12(a,b,c){14 L.2g(a,b,c)},fL:12(a,b){L.1S(a,b)}}),n.fn.1p({1J:12(a,b){17 c,d,e,f=15[0],g=f&&f.5Z;18(1b 0===a){18(15.19&&(e=M.1l(f),1===f.1e&&!L.1l(f,"9U"))){c=g.19;1h(c--)g[c]&&(d=g[c].2Q,0===d.1Q("1J-")&&(d=n.3f(d.1x(5)),P(f,d,e[d])));L.1C(f,"9U",!0)}14 e}14"1X"==1f a?15.1k(12(){M.1C(15,a)}):J(15,12(b){17 c,d=n.3f(a);18(f&&1b 0===b){18(c=M.1l(f,a),1b 0!==c)14 c;18(c=M.1l(f,d),1b 0!==c)14 c;18(c=P(f,d,1b 0),1b 0!==c)14 c}1u 15.1k(12(){17 c=M.1l(15,d);M.1C(15,d,b),-1!==a.1Q("-")&&1b 0!==c&&M.1C(15,a,b)})},1a,b,1n.19>1,1a,!0)},9V:12(a){14 15.1k(12(){M.1S(15,a)})}}),n.1p({1G:12(a,b,c){17 d;14 a?(b=(b||"fx")+"1G",d=L.1l(a,b),c&&(!d||n.2n(c)?d=L.2g(a,b,n.4Z(c)):d.1m(c)),d||[]):1b 0},43:12(a,b){b=b||"fx";17 c=n.1G(a,b),d=c.19,e=c.2U(),f=n.69(a,b),g=12(){n.43(a,b)};"77"===e&&(e=c.2U(),d--),e&&("fx"===b&&c.3d("77"),1U f.2i,e.1g(a,g,f)),!d&&f&&f.2z.56()},69:12(a,b){17 c=b+"58";14 L.1l(a,c)||L.2g(a,c,{2z:n.4D("57 4E").2x(12(){L.1S(a,[b+"1G",c])})})}}),n.fn.1p({1G:12(a,b){17 c=2;14"1t"!=1f a&&(b=a,a="fx",c--),1n.19<c?n.1G(15[0],a):1b 0===b?15:15.1k(12(){17 c=n.1G(15,a,b);n.69(15,a),"fx"===a&&"77"!==c[0]&&n.43(15,a)})},43:12(a){14 15.1k(12(){n.43(15,a)})},bV:12(a){14 15.1G(a||"fx",[])},23:12(a,b){17 c,d=1,e=n.48(),f=15,g=15.19,h=12(){--d||e.4j(f,[f])};"1t"!=1f a&&(b=a,a=1b 0),a=a||"fx";1h(g--)c=L.1l(f[g],a+"58"),c&&c.2z&&(d++,c.2z.2x(h));14 h(),e.23(b)}});17 Q=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.9T,R=["c1","c3","c4","c5"],S=12(a,b){14 a=b||a,"2Z"===n.1A(a,"25")||!n.2b(a.1E,a)},T=/^(?:5g|4M)$/i;!12(){17 a=l.9Q(),b=a.2d(l.21("2w")),c=l.21("1R");c.35("1d","4M"),c.35("2o","2o"),c.35("2Q","t"),b.2d(c),k.9L=b.5a(!0).5a(!0).6v.2o,b.3j="<4G>x</4G>",k.9K=!!b.5a(!0).6v.5U}();17 U="6N";k.9J="cu"1i a;17 V=/^4Q/,W=/^(?:cv|cJ|9G)|3V/,X=/^(?:cM|cO)$/,Y=/^([^.]*)(?:\\.(.+)|)$/;12 Z(){14!0}12 $(){14!1}12 3O(){2q{14 l.at}2t(a){}}n.1B={5d:{},2x:12(a,b,c,d,e){17 f,g,h,i,j,k,l,m,o,p,q,r=L.1l(a);18(r){c.3D&&(f=c,c=f.3D,e=f.28),c.1Z||(c.1Z=n.1Z++),(i=r.2V)||(i=r.2V={}),(g=r.37)||(g=r.37=12(b){14 1f n!==U&&n.1B.6c!==b.1d?n.1B.7B.1y(a,1n):1b 0}),b=(b||"").27(E)||[""],j=b.19;1h(j--)h=Y.1Y(b[j])||[],o=q=h[1],p=(h[2]||"").2m(".").45(),o&&(l=n.1B.38[o]||{},o=(e?l.4J:l.6f)||o,l=n.1B.38[o]||{},k=n.1p({1d:o,4I:q,1J:d,3D:c,1Z:c.1Z,28:e,4B:e&&n.2v.27.4B.1j(e),3p:p.3l(".")},f),(m=i[o])||(m=i[o]=[],m.6i=0,l.7R&&l.7R.1g(a,d,p,g)!==!1||a.4d&&a.4d(o,g,!1)),l.2x&&(l.2x.1g(a,k),k.3D.1Z||(k.3D.1Z=c.1Z)),e?m.2N(m.6i++,0,k):m.1m(k),n.1B.5d[o]=!0)}},1S:12(a,b,c,d,e){17 f,g,h,i,j,k,l,m,o,p,q,r=L.4e(a)&&L.1l(a);18(r&&(i=r.2V)){b=(b||"").27(E)||[""],j=b.19;1h(j--)18(h=Y.1Y(b[j])||[],o=q=h[1],p=(h[2]||"").2m(".").45(),o){l=n.1B.38[o]||{},o=(d?l.4J:l.6f)||o,m=i[o]||[],h=h[2]&&1r 1I("(^|\\\\.)"+p.3l("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"),g=f=m.19;1h(f--)k=m[f],!e&&q!==k.4I||c&&c.1Z!==k.1Z||h&&!h.1j(k.3p)||d&&d!==k.28&&("**"!==d||!k.28)||(m.2N(f,1),k.28&&m.6i--,l.1S&&l.1S.1g(a,k));g&&!m.19&&(l.7S&&l.7S.1g(a,p,r.37)!==!1||n.7T(a,o,r.37),1U i[o])}1u 1c(o 1i i)n.1B.1S(a,o+b[j],c,d,!0);n.4L(i)&&(1U r.37,L.1S(a,"2V"))}},2f:12(b,c,d,e){17 f,g,h,i,k,m,o,p=[d||l],q=j.1g(b,"1d")?b.1d:b,r=j.1g(b,"3p")?b.3p.2m("."):[];18(g=h=d=d||l,3!==d.1e&&8!==d.1e&&!X.1j(q+n.1B.6c)&&(q.1Q(".")>=0&&(r=q.2m("."),q=r.2U(),r.45()),k=q.1Q(":")<0&&"2J"+q,b=b[n.2j]?b:1r n.4m(q,"1X"==1f b&&b),b.dK=e?2:3,b.3p=r.3l("."),b.7W=b.3p?1r 1I("(^|\\\\.)"+r.3l("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"):1a,b.3z=1b 0,b.2A||(b.2A=d),c=1a==c?[b]:n.4Z(c,[b]),o=n.1B.38[q]||{},e||!o.2f||o.2f.1y(d,c)!==!1)){18(!e&&!o.9F&&!n.40(d)){1c(i=o.4J||q,X.1j(i+q)||(g=g.1o);g;g=g.1o)p.1m(g),h=g;h===(d.1E||l)&&p.1m(h.62||h.dO||a)}f=0;1h((g=p[f++])&&!b.6w())b.1d=f>1?i:o.6f||q,m=(L.1l(g,"2V")||{})[b.1d]&&L.1l(g,"37"),m&&m.1y(g,c),m=k&&g[k],m&&m.1y&&n.53(g)&&(b.3z=m.1y(g,c),b.3z===!1&&b.3Z());14 b.1d=q,e||b.5j()||o.2W&&o.2W.1y(p.3X(),c)!==!1||!n.53(d)||k&&n.1z(d[q])&&!n.40(d)&&(h=d[k],h&&(d[k]=1a),n.1B.6c=q,d[q](),n.1B.6c=1b 0,h&&(d[k]=h)),b.3z}},7B:12(a){a=n.1B.85(a);17 b,c,e,f,g,h=[],i=d.1g(1n),j=(L.1l(15,"2V")||{})[a.1d]||[],k=n.1B.38[a.1d]||{};18(i[0]=a,a.9E=15,!k.9D||k.9D.1g(15,a)!==!1){h=n.1B.5m.1g(15,a,j),b=0;1h((f=h[b++])&&!a.6w()){a.9C=f.1F,c=0;1h((g=f.5m[c++])&&!a.8k())(!a.7W||a.7W.1j(g.3p))&&(a.5O=g,a.1J=g.1J,e=((n.1B.38[g.4I]||{}).37||g.3D).1y(f.1F,i),1b 0!==e&&(a.3z=e)===!1&&(a.3Z(),a.5o()))}14 k.8q&&k.8q.1g(15,a),a.3z}},5m:12(a,b){17 c,d,e,f,g=[],h=b.6i,i=a.2A;18(h&&i.1e&&(!a.32||"3V"!==a.1d))1c(;i!==15;i=i.1o||15)18(i.2p!==!0||"3V"!==a.1d){1c(d=[],c=0;h>c;c++)f=b[c],e=f.28+" ",1b 0===d[e]&&(d[e]=f.4B?n(e,15).73(i)>=0:n.1M(e,15,1a,[i]).19),d[e]&&d.1m(f);d.19&&g.1m({1F:i,5m:d})}14 h<b.19&&g.1m({1F:15,5m:b.1x(h)}),g},3k:"eg eh ej el 9C em en 9y ep 2A 8t et 5p".2m(" "),8v:{},9x:{3k:"ew 8y 4Q 9w".2m(" "),1P:12(a,b){14 1a==a.5p&&(a.5p=1a!=b.8y?b.8y:b.9w),a}},9v:{3k:"32 f0 6T 9t f3 f4 6V 9s f9 ff fg".2m(" "),1P:12(a,b){17 c,d,e,f=b.32;14 1a==a.6V&&1a!=b.6T&&(c=a.2A.1E||l,d=c.2K,e=c.5s,a.6V=b.6T+(d&&d.5W||e&&e.5W||0)-(d&&d.6Z||e&&e.6Z||0),a.9s=b.9t+(d&&d.5N||e&&e.5N||0)-(d&&d.71||e&&e.71||0)),a.5p||1b 0===f||(a.5p=1&f?1:2&f?3:4&f?2:0),a}},85:12(a){18(a[n.2j])14 a;17 b,c,d,e=a.1d,f=a,g=15.8v[e];g||(15.8v[e]=g=W.1j(e)?15.9v:V.1j(e)?15.9x:{}),d=g.3k?15.3k.4i(g.3k):15.3k,a=1r n.4m(f),b=d.19;1h(b--)c=d[b],a[c]=f[c];14 a.2A||(a.2A=l),3===a.2A.1e&&(a.2A=a.2A.1o),g.1P?g.1P(a,f):a},38:{4n:{9F:!0},4H:{2f:12(){14 15!==3O()&&15.4H?(15.4H(),!1):1b 0},4J:"72"},5t:{2f:12(){14 15===3O()&&15.5t?(15.5t(),!1):1b 0},4J:"74"},3V:{2f:12(){14"5g"===15.1d&&15.3V&&n.1v(15,"1R")?(15.3V(),!1):1b 0},2W:12(a){14 n.1v(a.2A,"a")}},fA:{8q:12(a){1b 0!==a.3z&&a.42&&(a.42.9m=a.3z)}}},9j:12(a,b,c,d){17 e=n.1p(1r n.4m,c,{1d:a,fG:!0,42:{}});d?n.1B.2f(e,1a,b):n.1B.7B.1g(b,e),e.5j()&&c.3Z()}},n.7T=12(a,b,c){a.5r&&a.5r(b,c,!1)},n.4m=12(a,b){14 15 aj n.4m?(a&&a.1d?(15.42=a,15.1d=a.1d,15.5j=a.9i||1b 0===a.9i&&a.9m===!1?Z:$):15.1d=a,b&&n.1p(15,b),15.8t=a&&a.8t||n.2C(),1b(15[n.2j]=!0)):1r n.4m(a,b)},n.4m.2I={5j:$,6w:$,8k:$,3Z:12(){17 a=15.42;15.5j=Z,a&&a.3Z&&a.3Z()},5o:12(){17 a=15.42;15.6w=Z,a&&a.5o&&a.5o()},79:12(){17 a=15.42;15.8k=Z,a&&a.79&&a.79(),15.5o()}},n.1k({7a:"9h",7c:"9g",fT:"fU",fV:"fW"},12(a,b){n.1B.38[a]={4J:b,6f:b,37:12(a){17 c,d=15,e=a.9y,f=a.5O;14(!e||e!==d&&!n.2b(d,e))&&(a.1d=f.4I,c=f.3D.1y(15,1n),a.1d=b),c}}}),k.9J||n.1k({4H:"72",5t:"74"},12(a,b){17 c=12(a){n.1B.9j(b,a.2A,n.1B.85(a),!0)};n.1B.38[b]={7R:12(){17 d=15.1E||15,e=L.2g(d,b);e||d.4d(a,c,!0),L.2g(d,b,(e||0)+1)},7S:12(){17 d=15.1E||15,e=L.2g(d,b)-1;e?L.2g(d,b,e):(d.5r(a,c,!0),L.1S(d,b))}}}),n.fn.1p({2J:12(a,b,c,d,e){17 f,g;18("1X"==1f a){"1t"!=1f b&&(c=c||b,b=1b 0);1c(g 1i a)15.2J(g,b,c,a[g],e);14 15}18(1a==c&&1a==d?(d=b,c=b=1b 0):1a==d&&("1t"==1f b?(d=c,c=1b 0):(d=c,c=b,b=1b 0)),d===!1)d=$;1u 18(!d)14 15;14 1===e&&(f=d,d=12(a){14 n().3n(a),f.1y(15,1n)},d.1Z=f.1Z||(f.1Z=n.1Z++)),15.1k(12(){n.1B.2x(15,a,d,c,b)})},9f:12(a,b,c,d){14 15.2J(a,b,c,d,1)},3n:12(a,b,c){17 d,e;18(a&&a.3Z&&a.5O)14 d=a.5O,n(a.9E).3n(d.3p?d.4I+"."+d.3p:d.4I,d.28,d.3D),15;18("1X"==1f a){1c(e 1i a)15.3n(e,b,a[e]);14 15}14(b===!1||"12"==1f b)&&(c=b,b=1b 0),c===!1&&(c=$),15.1k(12(){n.1B.1S(15,a,c,b)})},2f:12(a,b){14 15.1k(12(){n.1B.2f(a,b,15)})},7X:12(a,b){17 c=15[0];14 c?n.1B.2f(a,b,c,!0):1b 0}});17 ba=/<(?!fY|br|9d|g2|gd|gg|1R|9a|gk|65)(([\\w:]+)[^>]*)\\/>/gi,bb=/<([\\w:]+)/,cb=/<|&#?\\w+;/,db=/<(?:1O|1q|9a)/i,eb=/2o\\s*(?:[^=]|=\\s*.2o.)/i,fb=/^$|\\/(?:99|98)1O/i,gb=/^9W\\/(.*)/,2s=/^\\s*<!(?:\\[c0\\[|--)|(?:\\]\\]|--)>\\s*$/g,1H={3W:[1,"<2B 8r=\'8r\'>","</2B>"],96:[1,"<30>","</30>"],9d:[2,"<30><7o>","</7o></30>"],6a:[2,"<30><4l>","</4l></30>"],92:[3,"<30><4l><6a>","</6a></4l></30>"],2W:[0,"",""]};1H.91=1H.3W,1H.4l=1H.cl=1H.7o=1H.cm=1H.96,1H.cn=1H.92;12 41(a,b){14 n.1v(a,"30")&&n.1v(11!==b.1e?b:b.2u,"6a")?a.2G("4l")[0]||a.2d(a.1E.21("4l")):a}12 5v(a){14 a.1d=(1a!==a.22("1d"))+"/"+a.1d,a}12 66(a){17 b=gb.1Y(a.1d);14 b?a.1d=b[1]:a.7Q("1d"),a}12 4q(a,b){1c(17 c=0,d=a.19;d>c;c++)L.1C(a[c],"4O",!b||L.1l(b[c],"4O"))}12 2L(a,b){17 c,d,e,f,g,h,i,j;18(1===b.1e){18(L.4e(a)&&(f=L.2g(a),g=L.1C(b,f),j=f.2V)){1U g.37,g.2V={};1c(e 1i j)1c(c=0,d=j[e].19;d>c;c++)n.1B.2x(b,e,j[e][c])}M.4e(a)&&(h=M.2g(a),i=n.1p({},h),M.1C(b,i))}}12 1W(a,b){17 c=a.2G?a.2G(b||"*"):a.2X?a.2X(b||"*"):[];14 1b 0===b||b&&n.1v(a,b)?n.2M([a],c):c}12 5e(a,b){17 c=b.1v.1s();"1R"===c&&T.1j(a.1d)?b.2o=a.2o:("1R"===c||"4G"===c)&&(b.5U=a.5U)}n.1p({4U:12(a,b,c){17 d,e,f,g,h=a.5a(!0),i=n.2b(a.1E,a);18(!(k.9K||1!==a.1e&&11!==a.1e||n.5S(a)))1c(g=1W(h),f=1W(a),d=0,e=f.19;e>d;d++)5e(f[d],g[d]);18(b)18(c)1c(f=f||1W(a),g=g||1W(h),d=0,e=f.19;e>d;d++)2L(f[d],g[d]);1u 2L(a,h);14 g=1W(h,"1O"),g.19>0&&4q(g,!i&&1W(a,"1O")),h},7u:12(a,b,c,d){1c(17 e,f,g,h,i,j,k=b.9Q(),l=[],m=0,o=a.19;o>m;m++)18(e=a[m],e||0===e)18("1X"===n.1d(e))n.2M(l,e.1e?[e]:e);1u 18(cb.1j(e)){f=f||k.2d(b.21("2w")),g=(bb.1Y(e)||["",""])[1].1s(),h=1H[g]||1H.2W,f.3j=h[1]+e.1w(ba,"<$1></$2>")+h[2],j=h[0];1h(j--)f=f.6v;n.2M(l,f.3q),f=k.2u,f.3x=""}1u l.1m(b.cq(e));k.3x="",m=0;1h(e=l[m++])18((!d||-1===n.4w(e,d))&&(i=n.2b(e.1E,e),f=1W(k.2d(e),"1O"),i&&4q(f),c)){j=0;1h(e=f[j++])fb.1j(e.1d||"")&&c.1m(e)}14 k},5A:12(a){1c(17 b,c,d,e,f=n.1B.38,g=0;1b 0!==(c=a[g]);g++){18(n.53(c)&&(e=c[L.2j],e&&(b=L.29[e]))){18(b.2V)1c(d 1i b.2V)f[d]?n.1B.1S(c,d):n.7T(c,d,b.37);L.29[e]&&1U L.29[e]}1U M.29[c[M.2j]]}}}),n.fn.1p({1K:12(a){14 J(15,12(a){14 1b 0===a?n.1K(15):15.2z().1k(12(){(1===15.1e||11===15.1e||9===15.1e)&&(15.3x=a)})},1a,a,1n.19)},4P:12(){14 15.4k(1n,12(a){18(1===15.1e||11===15.1e||9===15.1e){17 b=41(15,a);b.2d(a)}})},90:12(){14 15.4k(1n,12(a){18(1===15.1e||11===15.1e||9===15.1e){17 b=41(15,a);b.5B(a,b.2u)}})},8Z:12(){14 15.4k(1n,12(a){15.1o&&15.1o.5B(a,15)})},8Y:12(){14 15.4k(1n,12(a){15.1o&&15.1o.5B(a,15.33)})},1S:12(a,b){1c(17 c,d=a?n.1P(a,15):15,e=0;1a!=(c=d[e]);e++)b||1!==c.1e||n.5A(1W(c)),c.1o&&(b&&n.2b(c.1E,c)&&4q(1W(c,"1O")),c.1o.5J(c));14 15},2z:12(){1c(17 a,b=0;1a!=(a=15[b]);b++)1===a.1e&&(n.5A(1W(a,!1)),a.3x="");14 15},4U:12(a,b){14 a=1a==a?!1:a,b=1a==b?a:b,15.2k(12(){14 n.4U(15,a,b)})},2O:12(a){14 J(15,12(a){17 b=15[0]||{},c=0,d=15.19;18(1b 0===a&&1===b.1e)14 b.3j;18("1t"==1f a&&!db.1j(a)&&!1H[(bb.1Y(a)||["",""])[1].1s()]){a=a.1w(ba,"<$1></$2>");2q{1c(;d>c;c++)b=15[c]||{},1===b.1e&&(n.5A(1W(b,!1)),b.3j=a);b=0}2t(e){}}b&&15.2z().4P(a)},1a,a,1n.19)},7C:12(){17 a=1n[0];14 15.4k(1n,12(b){a=15.1o,n.5A(1W(15)),a&&a.cN(b,15)}),a&&(a.19||a.1e)?15:15.1S()},7D:12(a){14 15.1S(a,!0)},4k:12(a,b){a=e.1y([],a);17 c,d,f,g,h,i,j=0,l=15.19,m=15,o=l-1,p=a[0],q=n.1z(p);18(q||l>1&&"1t"==1f p&&!k.9L&&eb.1j(p))14 15.1k(12(c){17 d=m.eq(c);q&&(a[0]=p.1g(15,c,d.2O())),d.4k(a,b)});18(l&&(c=n.7u(a,15[0].1E,!1,15),d=c.2u,1===c.3q.19&&(c=d),d)){1c(f=n.2k(1W(c,"1O"),5v),g=f.19;l>j;j++)h=c,j!==o&&(h=n.4U(h,!0,!0),g&&n.2M(f,1W(h,"1O"))),b.1g(15[j],h,j);18(g)1c(i=f[f.19-1].1E,n.2k(f,66),j=0;g>j;j++)h=f[j],fb.1j(h.1d||"")&&!L.2g(h,"4O")&&n.2b(i,h)&&(h.7E?n.7F&&n.7F(h.7E):n.4O(h.3x.1w(2s,"")))}14 15}}),n.1k({7G:"4P",cT:"90",5B:"8Z",d7:"8Y",d8:"7C"},12(a,b){n.fn[a]=12(a){1c(17 c,d=[],e=n(a),g=e.19-1,h=0;g>=h;h++)c=h===g?15:15.4U(!0),n(e[h])[b](c),f.1y(d,c.1l());14 15.2F(d)}});17 bd,4f={};12 4g(b,c){17 d,e=n(c.21(b)).7G(c.5s),f=a.8X&&(d=a.8X(e[0]))?d.25:n.1A(e[0],"25");14 e.7D(),f}12 4W(a){17 b=l,c=4f[a];14 c||(c=4g(a,b),"2Z"!==c&&c||(bd=(bd||n("<dh dk=\'0\' 24=\'0\' 3G=\'0\'/>")).7G(b.2K),b=bd[0].a8,b.dl(),b.dm(),c=4g(a,b),bd.7D()),4f[a]=c),c}17 be=/^3t/,3E=1r 1I("^("+Q+")(?!3J)[a-z%]+$","i"),3e=12(a){14 a.1E.62.6m(a,1a)};12 3F(a,b,c){17 d,e,f,g,h=a.1q;14 c=c||3e(a),c&&(g=c.ds(b)||c[b]),c&&(""!==g||n.2b(a.1E,a)||(g=n.1q(a,b)),3E.1j(g)&&be.1j(b)&&(d=h.24,e=h.7L,f=h.7M,h.7L=h.7M=h.24=g,g=c.24,h.24=d,h.7L=e,h.7M=f)),1b 0!==g?g+"":g}12 7N(a,b){14{1l:12(){14 a()?1b 1U 15.1l:(15.1l=b).1y(15,1n)}}}!12(){17 b,c,d=l.2K,e=l.21("2w"),f=l.21("2w");18(f.1q){f.1q.7O="3u-2c",f.5a(!0).1q.7O="",k.8V="3u-2c"===f.1q.7O,e.1q.6q="2r:0;24:0;3G:0;1N:0;2e:-dH;3t-1N:6s;39:6u",e.2d(f);12 g(){f.1q.6q="-8T-2c-4N:2r-2c;-8R-2c-4N:2r-2c;2c-4N:2r-2c;25:5F;3t-1N:1%;1N:1%;2r:6s;3B:6s;24:8P;39:6u",f.3j="",d.2d(e);17 g=a.6m(f,1a);b="1%"!==g.1N,c="8P"===g.24,d.5J(e)}a.6m&&n.1p(k,{8O:12(){14 g(),b},8M:12(){14 1a==c&&g(),c},8L:12(){17 b,c=f.2d(l.21("2w"));14 c.1q.6q=f.1q.6q="-8T-2c-4N:3u-2c;-8R-2c-4N:3u-2c;2c-4N:3u-2c;25:5F;3t:0;2r:0;3B:0",c.1q.6B=c.1q.24="0",f.1q.24="6s",d.2d(e),b=!3Y(a.6m(c,1a).6B),d.5J(e),b}})}}(),n.87=12(a,b,c,d){17 e,f,g={};1c(f 1i b)g[f]=a.1q[f],a.1q[f]=b[f];e=c.1y(a,d||[]);1c(f 1i b)a.1q[f]=g[f];14 e};17 bf=/^(2Z|30(?!-c[ea]).+)/,8K=1r 1I("^("+Q+")(.*)$","i"),8J=1r 1I("^([+-])=("+Q+")","i"),8I={39:"6u",e3:"3s",25:"5F"},8c={e6:"0",8H:"8G"},8f=["ec","O","ed","7p"];12 8g(a,b){18(b 1i a)14 b;17 c=b[0].6U()+b.1x(1),d=b,e=8f.19;1h(e--)18(b=8f[e]+c,b 1i a)14 b;14 d}12 8h(a,b,c){17 d=8K.1Y(b);14 d?3L.8i(0,d[1]-(c||0))+(d[2]||"3J"):b}12 8j(a,b,c,d,e){1c(17 f=c===(d?"2r":"3u")?4:"24"===b?1:0,g=0;4>f;f+=2)"3t"===c&&(g+=n.1A(a,c+R[f],!0,e)),d?("3u"===c&&(g-=n.1A(a,"3B"+R[f],!0,e)),"3t"!==c&&(g-=n.1A(a,"2r"+R[f]+"6G",!0,e))):(g+=n.1A(a,"3B"+R[f],!0,e),"3B"!==c&&(g+=n.1A(a,"2r"+R[f]+"6G",!0,e)));14 g}12 8l(a,b,c){17 d=!0,e="24"===b?a.8m:a.8E,f=3e(a),g="2r-2c"===n.1A(a,"8D",!1,f);18(0>=e||1a==e){18(e=3F(a,b,f),(0>e||1a==e)&&(e=a.1q[b]),3E.1j(e))14 e;d=g&&(k.8M()||e===a.1q[b]),e=3Y(e)||0}14 e+8j(a,b,c||(g?"2r":"3u"),d,f)+"3J"}12 8p(a,b){1c(17 c,d,e,f=[],g=0,h=a.19;h>g;g++)d=a[g],d.1q&&(f[g]=L.1l(d,"6J"),c=d.1q.25,b?(f[g]||"2Z"!==c||(d.1q.25=""),""===d.1q.25&&S(d)&&(f[g]=L.2g(d,"6J",4W(d.1v)))):(e=S(d),"2Z"===c&&e||L.1C(d,"6J",e?c:n.1A(d,"25"))));1c(g=0;h>g;g++)d=a[g],d.1q&&(b&&"2Z"!==d.1q.25&&""!==d.1q.25||(d.1q.25=b?f[g]||"":"2Z"));14 a}n.1p({2H:{3g:{1l:12(a,b){18(b){17 c=3F(a,"3g");14""===c?"1":c}}}},5M:{ex:!0,ey:!0,ez:!0,eA:!0,8H:!0,eB:!0,3g:!0,eC:!0,eD:!0,eG:!0,eH:!0,eI:!0},4r:{"8C":"eQ"},1q:12(a,b,c,d){18(a&&3!==a.1e&&8!==a.1e&&a.1q){17 e,f,g,h=n.3f(b),i=a.1q;14 b=n.4r[h]||(n.4r[h]=8g(i,h)),g=n.2H[b]||n.2H[h],1b 0===c?g&&"1l"1i g&&1b 0!==(e=g.1l(a,!1,d))?e:i[b]:(f=1f c,"1t"===f&&(e=8J.1Y(c))&&(c=(e[1]+1)*e[2]+3Y(n.1A(a,b)),f="5G"),1a!=c&&c===c&&("5G"!==f||n.5M[h]||(c+="3J"),k.8V||""!==c||0!==b.1Q("eR")||(i[b]="eS"),g&&"1C"1i g&&1b 0===(c=g.1C(a,c,d))||(i[b]=c)),1b 0)}},1A:12(a,b,c,d){17 e,f,g,h=n.3f(b);14 b=n.4r[h]||(n.4r[h]=8g(a.1q,h)),g=n.2H[b]||n.2H[h],g&&"1l"1i g&&(e=g.1l(a,!0,c)),1b 0===e&&(e=3F(a,b,d)),"eV"===e&&b 1i 8c&&(e=8c[b]),""===c||c?(f=3Y(e),c===!0||n.bI(f)?f||0:e):e}}),n.1k(["3G","24"],12(a,b){n.2H[b]={1l:12(a,c,d){14 c?bf.1j(n.1A(a,"25"))&&0===a.8m?n.87(a,8I,12(){14 8l(a,b,d)}):8l(a,b,d):1b 0},1C:12(a,c,d){17 e=d&&3e(a);14 8h(a,c,d?8j(a,b,d,"2r-2c"===n.1A(a,"8D",!1,e),e):0)}}}),n.2H.6B=7N(k.8L,12(a,b){14 b?n.87(a,{25:"6P-5F"},3F,[a,"6B"]):1b 0}),n.1k({3t:"",3B:"",2r:"6G"},12(a,b){n.2H[a+b]={8x:12(c){1c(17 d=0,e={},f="1t"==1f c?c.2m(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];14 e}},be.1j(a)||(n.2H[a+b].1C=8h)}),n.fn.1p({1A:12(a,b){14 J(15,12(a,b,c){17 d,e,f={},g=0;18(n.2n(b)){1c(d=3e(a),e=b.19;e>g;g++)f[b[g]]=n.1A(a,b[g],!1,d);14 f}14 1b 0!==c?n.1q(a,b,c):n.1A(a,b)},a,b,1n.19>1)},2S:12(){14 8p(15,!0)},3w:12(){14 8p(15)},4S:12(a){14"44"==1f a?a?15.2S():15.3w():15.1k(12(){S(15)?n(15).2S():n(15).3w()})}});12 2h(a,b,c,d,e){14 1r 2h.2I.4F(a,b,c,d,e)}n.a6=2h,2h.2I={4c:2h,4F:12(a,b,c,d,e,f){15.1F=a,15.1V=c,15.4K=e||"8F",15.3K=b,15.2R=15.2C=15.6D(),15.46=d,15.8a=f||(n.5M[c]?"":"3J")},6D:12(){17 a=2h.34[15.1V];14 a&&a.1l?a.1l(15):2h.34.2W.1l(15)},88:12(a){17 b,c=2h.34[15.1V];14 15.fp=b=15.3K.2y?n.4K[15.4K](a,15.3K.2y*a,0,1,15.3K.2y):a,15.2C=(15.46-15.2R)*b+15.2R,15.3K.5I&&15.3K.5I.1g(15.1F,15.2C,15),c&&c.1C?c.1C(15):2h.34.2W.1C(15),15}},2h.2I.4F.2I=2h.2I,2h.34={2W:{1l:12(a){17 b;14 1a==a.1F[a.1V]||a.1F.1q&&1a!=a.1F.1q[a.1V]?(b=n.1A(a.1F,a.1V,""),b&&"8N"!==b?b:0):a.1F[a.1V]},1C:12(a){n.fx.5I[a.1V]?n.fx.5I[a.1V](a):a.1F.1q&&(1a!=a.1F.1q[n.4r[a.1V]]||n.2H[a.1V])?n.1q(a.1F,a.1V,a.2C+a.8a):a.1F[a.1V]=a.2C}}},2h.34.5N=2h.34.5W={1C:12(a){a.1F.1e&&a.1F.1o&&(a.1F[a.1V]=a.2C)}},n.4K={fu:12(a){14 a},8F:12(a){14.5-3L.fv(a*3L.fy)/2}},n.fx=2h.2I.4F,n.fx.5I={};17 bg,5H,8Q=/^(?:4S|2S|3w)$/,7Y=1r 1I("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),8S=/58$/,5E=[8U],4s={"*":[12(a,b){17 c=15.8W(a,b),d=c.6D(),e=7Y.1Y(b),f=e&&e[3]||(n.5M[a]?"":"3J"),g=(n.5M[a]||"3J"!==f&&+d)&&7Y.1Y(n.1A(c.1F,a)),h=1,i=20;18(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.1q(c.1F,a,g+f);1h(h!==(h=c.6D()/d)&&1!==h&&--i)}14 e&&(g=c.2R=+g||+d||0,c.8a=f,c.46=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};12 7H(){14 5X(12(){bg=1b 0}),bg=n.2C()}12 5C(a,b){17 c,d=0,e={3G:a};1c(b=b?1:0;4>d;d+=2-b)c=R[d],e["3t"+c]=e["3B"+c]=a;14 b&&(e.3g=e.24=a),e}12 7z(a,b,c){1c(17 d,e=(4s[b]||[]).4i(4s["*"]),f=0,g=e.19;g>f;f++)18(d=e[f].1g(c,b,a))14 d}12 8U(a,b,c){17 d,e,f,g,h,i,j,k,l=15,m={},o=a.1q,p=a.1e&&S(a),q=L.1l(a,"7x");c.1G||(h=n.69(a,"fx"),1a==h.5y&&(h.5y=0,i=h.2z.56,h.2z.56=12(){h.5y||i()}),h.5y++,l.3h(12(){l.3h(12(){h.5y--,n.1G(a,"fx").19||h.2z.56()})})),1===a.1e&&("3G"1i b||"24"1i b)&&(c.3P=[o.3P,o.93,o.94],j=n.1A(a,"25"),k="2Z"===j?L.1l(a,"6J")||4W(a.1v):j,"6P"===k&&"2Z"===n.1A(a,"8C")&&(o.25="6P-5F")),c.3P&&(o.3P="3s",l.3h(12(){o.3P=c.3P[0],o.93=c.3P[1],o.94=c.3P[2]}));1c(d 1i b)18(e=b[d],8Q.1Y(e)){18(1U b[d],f=f||"4S"===e,e===(p?"3w":"2S")){18("2S"!==e||!q||1b 0===q[d])g0;p=!0}m[d]=q&&q[d]||n.1q(a,d)}1u j=1b 0;18(n.4L(m))"6P"===("2Z"===j?4W(a.1v):j)&&(o.25=j);1u{q?"3s"1i q&&(p=q.3s):q=L.2g(a,"7x",{}),f&&(q.3s=!p),p?n(a).2S():l.2P(12(){n(a).3w()}),l.2P(12(){17 b;L.1S(a,"7x");1c(b 1i m)n.1q(a,b,m[b])});1c(d 1i m)g=7z(p?q[d]:0,d,l),d 1i q||(q[d]=g.2R,p&&(g.46=g.2R,g.2R="24"===d||"3G"===d?1:0))}}12 95(a,b){17 c,d,e,f,g;1c(c 1i a)18(d=n.3f(c),e=b[d],f=a[c],n.2n(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,1U a[c]),g=n.2H[d],g&&"8x"1i g){f=g.8x(f),1U a[d];1c(c 1i f)c 1i a||(a[c]=f[c],b[c]=e)}1u b[d]=e}12 7m(a,b,c){17 d,e,f=0,g=5E.19,h=n.48().3h(12(){1U i.1F}),i=12(){18(e)14!1;1c(17 b=bg||7H(),c=3L.8i(0,j.97+j.2y-b),d=c/j.2y||0,f=1-d,g=0,i=j.4X.19;i>g;g++)j.4X[g].88(f);14 h.9Z(a,[j,f,c]),1>f&&i?c:(h.4j(a,[j]),!1)},j=h.23({1F:a,3k:n.1p({},b),2l:n.1p(!0,{7h:{}},c),bS:b,bT:c,97:bg||7H(),2y:c.2y,4X:[],8W:12(b,c){17 d=n.a6(a,j.2l,b,c,j.2l.7h[b]||j.2l.4K);14 j.4X.1m(d),d},2i:12(b){17 c=0,d=b?j.4X.19:0;18(e)14 15;1c(e=!0;d>c;c++)j.4X[c].88(1);14 b?h.4j(a,[j,b]):h.9b(a,[j,b]),15}}),k=j.3k;1c(95(k,j.2l.7h);g>f;f++)18(d=5E[f].1g(j,a,k,j.2l))14 d;14 n.2k(k,7z,j),n.1z(j.2l.2R)&&j.2l.2R.1g(a,j),n.fx.9c(n.1p(i,{1F:a,7g:j,1G:j.2l.1G})),j.55(j.2l.55).2P(j.2l.2P,j.2l.3y).4b(j.2l.4b).3h(j.2l.3h)}n.bW=n.1p(7m,{bX:12(a,b){n.1z(a)?(b=a,a=["*"]):a=a.2m(" ");1c(17 c,d=0,e=a.19;e>d;d++)c=a[d],4s[c]=4s[c]||[],4s[c].3d(b)},bY:12(a,b){b?5E.3d(a):5E.1m(a)}}),n.9e=12(a,b,c){17 d=a&&"1X"==1f a?n.1p({},a):{3y:c||!c&&b||n.1z(a)&&a,2y:a,4K:c&&b||b&&!n.1z(b)&&b};14 d.2y=n.fx.3n?0:"5G"==1f d.2y?d.2y:d.2y 1i n.fx.5u?n.fx.5u[d.2y]:n.fx.5u.2W,(1a==d.1G||d.1G===!0)&&(d.1G="fx"),d.7d=d.3y,d.3y=12(){n.1z(d.7d)&&d.7d.1g(15),d.1G&&n.43(15,d.1G)},d},n.fn.1p({c2:12(a,b,c,d){14 15.1P(S).1A("3g",0).2S().46().63({3g:b},a,c,d)},63:12(a,b,c,d){17 e=n.4L(a),f=n.9e(b,c,d),g=12(){17 b=7m(15,n.1p({},a),f);(e||L.1l(15,"3U"))&&b.2i(!0)};14 g.3U=g,e||f.1G===!1?15.1k(g):15.1G(f.1G,g)},2i:12(a,b,c){17 d=12(a){17 b=a.2i;1U a.2i,b(c)};14"1t"!=1f a&&(c=b,b=a,a=1b 0),b&&a!==!1&&15.1G(a||"fx",[]),15.1k(12(){17 b=!0,e=1a!=a&&a+"58",f=n.49,g=L.1l(15);18(e)g[e]&&g[e].2i&&d(g[e]);1u 1c(e 1i g)g[e]&&g[e].2i&&8S.1j(e)&&d(g[e]);1c(e=f.19;e--;)f[e].1F!==15||1a!=a&&f[e].1G!==a||(f[e].7g.2i(c),b=!1,f.2N(e,1));(b||!c)&&n.43(15,a)})},3U:12(a){14 a!==!1&&(a=a||"fx"),15.1k(12(){17 b,c=L.1l(15),d=c[a+"1G"],e=c[a+"58"],f=n.49,g=d?d.19:0;1c(c.3U=!0,n.1G(15,a,[]),e&&e.2i&&e.2i.1g(15,!0),b=f.19;b--;)f[b].1F===15&&f[b].1G===a&&(f[b].7g.2i(!0),f.2N(b,1));1c(b=0;g>b;b++)d[b]&&d[b].3U&&d[b].3U.1g(15);1U c.3U})}}),n.1k(["4S","2S","3w"],12(a,b){17 c=n.fn[b];n.fn[b]=12(a,d,e){14 1a==a||"44"==1f a?c.1y(15,1n):15.63(5C(b,!0),a,d,e)}}),n.1k({c6:5C("2S"),c7:5C("3w"),c8:5C("4S"),c9:{3g:"2S"},ca:{3g:"3w"},cc:{3g:"4S"}},12(a,b){n.fn[a]=12(a,c,d){14 15.63(b,a,c,d)}}),n.49=[],n.fx.9k=12(){17 a,b=0,c=n.49;1c(bg=n.2C();b<c.19;b++)a=c[b],a()||c[b]!==a||c.2N(b--,1);c.19||n.fx.2i(),bg=1b 0},n.fx.9c=12(a){n.49.1m(a),a()?n.fx.2R():n.49.3X()},n.fx.9l=13,n.fx.2R=12(){5H||(5H=cf(n.fx.9k,n.fx.9l))},n.fx.2i=12(){cg(5H),5H=1a},n.fx.5u={ch:ci,cj:60,2W:8G},n.fn.ck=12(a,b){14 a=n.fx?n.fx.5u[a]||a:a,b=b||"fx",15.1G(b,12(b,c){17 d=5X(b,a);c.2i=12(){9n(d)}})},12(){17 a=l.21("1R"),b=l.21("2B"),c=b.2d(l.21("3W"));a.1d="5g",k.9o=""!==a.1D,k.9p=c.3c,b.2p=!0,k.9q=!c.2p,a=l.21("1R"),a.1D="t",a.1d="4M",k.9r="t"===a.1D}();17 bh,6W,$b=n.2v.5w;n.fn.1p({3v:12(a,b){14 J(15,n.3v,a,b,1n.19>1)},51:12(a){14 15.1k(12(){n.51(15,a)})}}),n.1p({3v:12(a,b,c){17 d,e,f=a.1e;18(a&&3!==f&&8!==f&&2!==f)14 1f a.22===U?n.1V(a,b,c):(1===f&&n.5S(a)||(b=b.1s(),d=n.9u[b]||(n.2v.27.6k.1j(b)?6W:bh)),1b 0===c?d&&"1l"1i d&&1a!==(e=d.1l(a,b))?e:(e=n.1M.3v(a,b),1a==e?1b 0:e):1a!==c?d&&"1C"1i d&&1b 0!==(e=d.1C(a,c,b))?e:(a.35(b,c+""),c):1b n.51(a,b))},51:12(a,b){17 c,d,e=0,f=b&&b.27(E);18(f&&1===a.1e)1h(c=f[e++])d=n.5q[c]||c,n.2v.27.6k.1j(c)&&(a[d]=!1),a.7Q(c)},9u:{1d:{1C:12(a,b){18(!k.9r&&"4M"===b&&n.1v(a,"1R")){17 c=a.1D;14 a.35("1d",b),c&&(a.1D=c),b}}}}}),6W={1C:12(a,b,c){14 b===!1?n.51(a,c):a.35(c,c),c}},n.1k(n.2v.27.6k.9T.27(/\\w+/g),12(a,b){17 c=$b[b]||n.1M.3v;$b[b]=12(a,b,d){17 e,f;14 d||(f=$b[b],$b[b]=e,e=1a!=c(a,b,d)?b.1s():1a,$b[b]=f),e}});17 bi=/^(?:1R|2B|4G|32)$/i;n.fn.1p({1V:12(a,b){14 J(15,n.1V,a,b,1n.19>1)},cw:12(a){14 15.1k(12(){1U 15[n.5q[a]||a]})}}),n.1p({5q:{"1c":"cx","5Q":"1L"},1V:12(a,b,c){17 d,e,f,g=a.1e;18(a&&3!==g&&8!==g&&2!==g)14 f=1!==g||!n.5S(a),f&&(b=n.5q[b]||b,e=n.34[b]),1b 0!==c?e&&"1C"1i e&&1b 0!==(d=e.1C(a,c,b))?d:a[b]=c:e&&"1l"1i e&&1a!==(d=e.1l(a,b))?d:a[b]},34:{6e:{1l:12(a){14 a.cy("cz")||bi.1j(a.1v)||a.3C?a.6e:-1}}}}),k.9p||(n.34.3c={1l:12(a){17 b=a.1o;14 b&&b.1o&&b.1o.6d,1a}}),n.1k(["6e","cA","cB","cC","cD","cE","cF","cG","cH","cI"],12(){n.5q[15.1s()]=15});17 bj=/[\\t\\r\\n\\f]/g;n.fn.1p({5T:12(a){17 b,c,d,e,f,g,h="1t"==1f a&&a,i=0,j=15.19;18(n.1z(a))14 15.1k(12(b){n(15).5T(a.1g(15,b,15.1L))});18(h)1c(b=(a||"").27(E)||[];j>i;i++)18(c=15[i],d=1===c.1e&&(c.1L?(" "+c.1L+" ").1w(bj," "):" ")){f=0;1h(e=b[f++])d.1Q(" "+e+" ")<0&&(d+=e+" ");g=n.4o(d),c.1L!==g&&(c.1L=g)}14 15},5R:12(a){17 b,c,d,e,f,g,h=0===1n.19||"1t"==1f a&&a,i=0,j=15.19;18(n.1z(a))14 15.1k(12(b){n(15).5R(a.1g(15,b,15.1L))});18(h)1c(b=(a||"").27(E)||[];j>i;i++)18(c=15[i],d=1===c.1e&&(c.1L?(" "+c.1L+" ").1w(bj," "):"")){f=0;1h(e=b[f++])1h(d.1Q(" "+e+" ")>=0)d=d.1w(" "+e+" "," ");g=a?n.4o(d):"",c.1L!==g&&(c.1L=g)}14 15},9z:12(a,b){17 c=1f a;14"44"==1f b&&"1t"===c?b?15.5T(a):15.5R(a):15.1k(n.1z(a)?12(c){n(15).9z(a.1g(15,c,15.1L,b),b)}:12(){18("1t"===c){17 b,d=0,e=n(15),f=a.27(E)||[];1h(b=f[d++])e.9A(b)?e.5R(b):e.5T(b)}1u(c===U||"44"===c)&&(15.1L&&L.1C(15,"9B",15.1L),15.1L=15.1L||a===!1?"":L.1l(15,"9B")||"")})},9A:12(a){1c(17 b=" "+a+" ",c=0,d=15.19;d>c;c++)18(1===15[c].1e&&(" "+15[c].1L+" ").1w(bj," ").1Q(b)>=0)14!0;14!1}});17 bk=/\\r/g;n.fn.1p({5n:12(a){17 b,c,d,e=15[0];{18(1n.19)14 d=n.1z(a),15.1k(12(c){17 e;1===15.1e&&(e=d?a.1g(15,c,n(15).5n()):a,1a==e?e="":"5G"==1f e?e+="":n.2n(e)&&(e=n.2k(e,12(a){14 1a==a?"":a+""})),b=n.3S[15.1d]||n.3S[15.1v.1s()],b&&"1C"1i b&&1b 0!==b.1C(15,e,"1D")||(15.1D=e))});18(e)14 b=n.3S[e.1d]||n.3S[e.1v.1s()],b&&"1l"1i b&&1b 0!==(c=b.1l(e,"1D"))?c:(c=e.1D,"1t"==1f c?c.1w(bk,""):1a==c?"":c)}}}),n.1p({3S:{3W:{1l:12(a){17 b=n.1M.3v(a,"1D");14 1a!=b?b:n.4o(n.1K(a))}},2B:{1l:12(a){1c(17 b,c,d=a.3K,e=a.6d,f="2B-9f"===a.1d||0>e,g=f?1a:[],h=f?e+1:d.19,i=0>e?h:f?e:0;h>i;i++)18(c=d[i],!(!c.3c&&i!==e||(k.9q?c.2p:1a!==c.22("2p"))||c.1o.2p&&n.1v(c.1o,"91"))){18(b=n(c).5n(),f)14 b;g.1m(b)}14 g},1C:12(a,b){17 c,d,e=a.3K,f=n.4Z(b),g=e.19;1h(g--)d=e[g],(d.3c=n.4w(d.1D,f)>=0)&&(c=!0);14 c||(a.6d=-1),f}}}}),n.1k(["4M","5g"],12(){n.3S[15]={1C:12(a,b){14 n.2n(b)?a.2o=n.4w(n(a).5n(),b)>=0:1b 0}},k.9o||(n.3S[15].1l=12(a){14 1a===a.22("1D")?"2J":a.1D})}),n.1k("5t 4H 72 74 4n cS 86 7w 3V cU cV cW cX 9h 9g 7a 7c cY 2B 7y cZ d0 d1 1T 9G".2m(" "),12(a,b){n.fn[b]=12(a,c){14 1n.19>0?15.2J(b,1a,a,c):15.2f(b)}}),n.fn.1p({d2:12(a,b){14 15.7a(a).7c(b||a)},d3:12(a,b,c){14 15.2J(a,1a,b,c)},d4:12(a,b){14 15.3n(a,1a,b)},d5:12(a,b,c,d){14 15.2J(b,a,c,d)},d6:12(a,b,c){14 1===1n.19?15.3n(a,"**"):15.3n(b,a||"**",c)}});17 bl=n.2C(),dc=/\\?/;n.7r=12(a){14 d9.dd(a+"")},n.9H=12(a){17 b,c;18(!a||"1t"!=1f a)14 1a;2q{c=1r df,b=c.dg(a,"1K/3o")}2t(d){b=1b 0}14(!b||b.2G("9I").19)&&n.1T("di dj: "+a),b};17 bm,fc,gc=/#.*$/,7l=/([?&])3O=[^&]*/,9M=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,9N=/^(?:dr|9O|9O-dt|.+-du|7t|dv|dw):$/,9P=/^(?:6H|9R)$/,9S=/^\\/\\//,7e=/^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,6Y={},5V={},8A="*/".4i("*");2q{fc=76.3C}2t(dE){fc=l.21("a"),fc.3C="",fc=fc.3C}bm=7e.1Y(fc.1s())||[];12 8o(a){14 12(b,c){"1t"!=1f b&&(c=b,b="*");17 d,e=0,f=b.1s().27(E)||[];18(n.1z(c))1h(d=f[e++])"+"===d[0]?(d=d.1x(1)||"*",(a[d]=a[d]||[]).3d(c)):(a[d]=a[d]||[]).1m(c)}}12 82(a,b,c,d){17 e={},f=a===5V;12 g(h){17 i;14 e[h]=!0,n.1k(a[h]||[],12(a,h){17 j=h(b,c,d);14"1t"!=1f j||f||e[j]?f?!(i=j):1b 0:(b.2T.3d(j),g(j),!1)}),i}14 g(b.2T[0])||!e["*"]&&g("*")}12 6j(a,b){17 c,d,e=n.3N.a2||{};1c(c 1i b)1b 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);14 d&&n.1p(!0,a,d),a}12 a3(a,b,c){17 d,e,f,g,h=a.4z,i=a.2T;1h("*"===i[0])i.2U(),1b 0===d&&(d=a.6M||b.64("8B-a7"));18(d)1c(e 1i h)18(h[e]&&h[e].1j(d)){i.3d(e);2a}18(i[0]1i c)f=i[0];1u{1c(e 1i c){18(!i[0]||a.4C[e+" "+i[0]]){f=e;2a}g||(g=e)}f=f||g}14 f?(f!==i[0]&&i.3d(f),c[f]):1b 0}12 a9(a,b,c,d){17 e,f,g,h,i,j={},k=a.2T.1x();18(k[1])1c(g 1i a.4C)j[g.1s()]=a.4C[g];f=k.2U();1h(f)18(a.78[f]&&(c[a.78[f]]=b),!i&&d&&a.ab&&(b=a.ab(b,a.59)),i=f,f=k.2U())18("*"===f)f=i;1u 18("*"!==i&&i!==f){18(g=j[i+" "+f]||j["* "+f],!g)1c(e 1i j)18(h=e.2m(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.3d(h[1]));2a}18(g!==!0)18(g&&a["ad"])b=g(b);1u 2q{b=g(b)}2t(l){14{6x:"9I",1T:g?l:"ae dX dY "+i+" dZ "+f}}}14{6x:"6C",1J:b}}n.1p({8z:0,6E:{},5b:{},3N:{26:fc,1d:"6H",e4:9N.1j(bm[1]),5d:!0,ak:!0,4y:!0,5f:"47/x-an-ao-ap; aq=ee-8",4h:{"*":8A,1K:"1K/ef",2O:"1K/2O",3o:"47/3o, 1K/3o",36:"47/36, 1K/7i"},4z:{3o:/3o/,2O:/2O/,36:/36/},78:{3o:"ei",1K:"6g",36:"ek"},4C:{"* 1K":6y,"1K 2O":!0,"1K 36":n.7r,"1K 3o":n.9H},a2:{26:!0,2Y:!0}},6h:12(a,b){14 b?6j(6j(a,n.3N),b):6j(n.3N,a)},8e:8o(6Y),7Z:8o(5V),5i:12(a,b){"1X"==1f a&&(b=a,a=1b 0),b=b||{};17 c,d,e,f,g,h,i,j,k=n.6h({},b),l=k.2Y||k,m=k.2Y&&(l.1e||l.4V)?n(l):n.1B,o=n.48(),p=n.4D("57 4E"),q=k.7K||{},r={},s={},t=0,u="er",v={5P:0,64:12(a){17 b;18(2===t){18(!f){f={};1h(b=9M.1Y(e))f[b[1].1s()]=b[2]}b=f[a.1s()]}14 1a==b?1a:b},ay:12(){14 2===t?e:1a},4a:12(a,b){17 c=a.1s();14 t||(a=s[c]=s[c]||a,r[a]=b),15},7I:12(a){14 t||(k.6M=a),15},7K:12(a){17 b;18(a)18(2>t)1c(b 1i a)q[b]=[q[b],a[b]];1u v.3h(a[v.5k]);14 15},3b:12(a){17 b=a||u;14 c&&c.3b(b),x(0,b),15}};18(o.23(v).3y=p.2x,v.6C=v.2P,v.1T=v.4b,k.26=((a||k.26||fc)+"").1w(gc,"").1w(9S,bm[1]+"//"),k.1d=b.aD||b.1d||k.aD||k.1d,k.2T=n.4o(k.59||"*").1s().27(E)||[""],1a==k.4R&&(h=7e.1Y(k.26.1s()),k.4R=!(!h||h[1]===bm[1]&&h[2]===bm[2]&&(h[3]||("aF:"===h[1]?"80":"aG"))===(bm[3]||("aF:"===bm[1]?"80":"aG")))),k.1J&&k.ak&&"1t"!=1f k.1J&&(k.1J=n.65(k.1J,k.aH)),82(6Y,k,b,v),2===t)14 v;i=k.5d,i&&0===n.8z++&&n.1B.2f("aI"),k.1d=k.1d.6U(),k.6S=!9P.1j(k.1d),d=k.26,k.6S||(k.1J&&(d=k.26+=(dc.1j(d)?"&":"?")+k.1J,1U k.1J),k.29===!1&&(k.26=7l.1j(d)?d.1w(7l,"$eF="+bl++):d+(dc.1j(d)?"&":"?")+"3O="+bl++)),k.aK&&(n.6E[d]&&v.4a("aL-aM-eJ",n.6E[d]),n.5b[d]&&v.4a("aL-eK-eL",n.5b[d])),(k.1J&&k.6S&&k.5f!==!1||b.5f)&&v.4a("8B-a7",k.5f),v.4a("eM",k.2T[0]&&k.4h[k.2T[0]]?k.4h[k.2T[0]]+("*"!==k.2T[0]?", "+8A+"; q=0.eN":""):k.4h["*"]);1c(j 1i k.aN)v.4a(j,k.aN[j]);18(k.aO&&(k.aO.1g(l,v,k)===!1||2===t))14 v.3b();u="3b";1c(j 1i{6C:1,1T:1,3y:1})v[j](k[j]);18(c=82(5V,k,b,v)){v.5P=1,i&&m.2f("aP",[v,k]),k.4y&&k.81>0&&(g=5X(12(){v.3b("81")},k.81));2q{t=1,c.61(r,x)}2t(w){18(!(2>t))52 w;x(-1,w)}}1u x(-1,"ae eT");12 x(a,b,f,h){17 j,r,s,u,w,x=b;2!==t&&(t=2,g&&9n(g),c=1b 0,e=h||"",v.5P=a>0?4:0,j=a>=60&&eU>a||aS===a,f&&(u=a3(k,v,f)),u=a9(k,u,v,j),j?(k.aK&&(w=v.64("eW-aM"),w&&(n.6E[d]=w),w=v.64("5b"),w&&(n.5b[d]=w)),aT===a||"9R"===k.1d?x="eY":aS===a?x="eZ":(x=u.6x,r=u.1J,s=u.1T,j=!s)):(s=x,(a||!x)&&(x="1T",0>a&&(a=0))),v.5k=a,v.7n=(b||x)+"",j?o.4j(l,[r,x,v]):o.9b(l,[v,x,s]),v.7K(q),q=1b 0,i&&m.2f(j?"aV":"aW",[v,k,j?r:s]),p.5Y(l,[v,x]),i&&(m.2f("aX",[v,k]),--n.8z||n.1B.2f("aY")))}14 v},f5:12(a,b,c){14 n.1l(a,b,c,"36")},f6:12(a,b){14 n.1l(a,1b 0,b,"1O")}}),n.1k(["1l","f7"],12(a,b){n[b]=12(a,c,d,e){14 n.1z(c)&&(e=e||d,d=c,c=1b 0),n.5i({26:a,1d:b,59:e,1J:c,6C:d})}}),n.1k(["aI","aY","aX","aW","aV","aP"],12(a,b){n.fn[b]=12(a){14 15.2J(b,a)}}),n.7F=12(a){14 n.5i({26:a,1d:"6H",59:"1O",4y:!1,5d:!1,"ad":!0})},n.fn.1p({67:12(a){17 b;14 n.1z(a)?15.1k(12(b){n(15).67(a.1g(15,b))}):(15[0]&&(b=n(a,15[0].1E).eq(0).4U(!0),15[0].1o&&b.5B(15[0]),b.2k(12(){17 a=15;1h(a.b0)a=a.b0;14 a}).4P(15)),15)},b1:12(a){14 15.1k(n.1z(a)?12(b){n(15).b1(a.1g(15,b))}:12(){17 b=n(15),c=b.4z();c.19?c.67(a):b.4P(a)})},fa:12(a){17 b=n.1z(a);14 15.1k(12(c){n(15).67(b?a.1g(15,c):a)})},fd:12(){14 15.7q().1k(12(){n.1v(15,"5s")||n(15).7C(15.3q)}).46()}}),n.2v.5c.3s=12(a){14 a.8m<=0&&a.8E<=0},n.2v.5c.fe=12(a){14!n.2v.5c.3s(a)};17 bn=/%20/g,b2=/\\[\\]$/,7U=/\\r?\\n/g,b4=/^(?:7y|32|am|al|7t)$/i,b5=/^(?:1R|2B|4G|fk)/i;12 6b(a,b,c,d){17 e;18(n.2n(b))n.1k(b,12(b,e){c||b2.1j(a)?d(a,e):6b(a+"["+("1X"==1f e?b:"")+"]",e,c,d)});1u 18(c||"1X"!==n.1d(b))d(a,b);1u 1c(e 1i b)6b(a+"["+e+"]",b[e],c,d)}n.65=12(a,b){17 c,d=[],e=12(a,b){b=n.1z(b)?b():1a==b?"":b,d[d.19]=b7(a)+"="+b7(b)};18(1b 0===b&&(b=n.3N&&n.3N.aH),n.2n(a)||a.4V&&!n.5L(a))n.1k(a,12(){e(15.2Q,15.1D)});1u 1c(c 1i a)6b(c,a[c],b,e);14 d.3l("&").1w(bn,"+")},n.fn.1p({fo:12(){14 n.65(15.b8())},b8:12(){14 15.2k(12(){17 a=n.1V(15,"fq");14 a?n.4Z(a):15}).1P(12(){17 a=15.1d;14 15.2Q&&!n(15).8d(":2p")&&b5.1j(15.1v)&&!b4.1j(a)&&(15.2o||!T.1j(a))}).2k(12(a,b){17 c=n(15).5n();14 1a==c?1a:n.2n(c)?n.2k(c,12(a){14{2Q:b.2Q,1D:a.1w(7U,"\\r\\n")}}):{2Q:b.2Q,1D:c.1w(7U,"\\r\\n")}}).1l()}}),n.3N.7j=12(){2q{14 1r bc}2t(a){}};17 bo=0,5z={},bu={0:60,fw:aT},4T=n.3N.7j();a.fz&&n(a).2J("7w",12(){1c(17 a 1i 5z)5z[a]()}),k.bw=!!4T&&"fB"1i 4T,k.5i=4T=!!4T,n.7Z(12(a){17 b;14 k.bw||4T&&!a.4R?{61:12(c,d){17 e,f=a.7j(),g=++bo;18(f.bF(a.1d,a.26,a.4y,a.fC,a.ar),a.83)1c(e 1i a.83)f[e]=a.83[e];a.6M&&f.7I&&f.7I(a.6M),a.4R||c["X-by-54"]||(c["X-by-54"]="bc");1c(e 1i c)f.4a(e,c[e]);b=12(a){14 12(){b&&(1U 5z[g],b=f.bz=f.bA=1a,"3b"===a?f.3b():"1T"===a?d(f.5k,f.7n):d(bu[f.5k]||f.5k,f.7n,"1t"==1f f.6g?{1K:f.6g}:1b 0,f.ay()))}},f.bz=b(),f.bA=b("1T"),b=5z[g]=b("3b");2q{f.61(a.6S&&a.1J||1a)}2t(h){18(b)52 h}},3b:12(){b&&b()}}:1b 0}),n.6h({4h:{1O:"1K/7i, 47/7i, 47/bB, 47/x-bB"},4z:{1O:/(?:99|98)1O/},4C:{"1K 1O":12(a){14 n.4O(a),a}}}),n.8e("1O",12(a){1b 0===a.29&&(a.29=!1),a.4R&&(a.1d="6H")}),n.7Z("1O",12(a){18(a.4R){17 b,c;14{61:12(d,e){b=n("<1O>").1V({4y:!0,aq:a.fI,7E:a.26}).2J("4n 1T",c=12(a){b.1S(),c=1a,a&&e("1T"===a.1d?fJ:60,a.1d)}),l.bH.2d(b[0])},3b:12(){c&&c()}}}});17 bp=[],6o=/(=)\\?(?=&|$)|\\?\\?/;n.6h({4t:"fN",3T:12(){17 a=bp.3X()||n.2j+"3O"+bl++;14 15[a]=!0,a}}),n.8e("36 4t",12(b,c,d){17 e,f,g,h=b.4t!==!1&&(6o.1j(b.26)?"26":"1t"==1f b.1J&&!(b.5f||"").1Q("47/x-an-ao-ap")&&6o.1j(b.1J)&&"1J");14 h||"4t"===b.2T[0]?(e=b.3T=n.1z(b.3T)?b.3T():b.3T,h?b[h]=b[h].1w(6o,"$1"+e):b.4t!==!1&&(b.26+=(dc.1j(b.26)?"&":"?")+b.4t+"="+e),b.4C["1O 36"]=12(){14 g||n.1T(e+" fP 6t fQ"),g[0]},b.2T[0]="36",f=a[e],a[e]=12(){g=1n},d.3h(12(){a[e]=f,b[e]&&(b.3T=c.3T,bp.1m(e)),g&&n.1z(f)&&f(g[0]),g=f=1b 0}),"1O"):1b 0}),n.8n=12(a,b,c){18(!a||"1t"!=1f a)14 1a;"44"==1f b&&(c=b,b=!1),b=b||l;17 d=v.1Y(a),e=!c&&[];14 d?[b.21(d[1])]:(d=n.7u([a],b,e),e&&e.19&&n(e).1S(),n.2M([],d.3q))};17 bq=n.fn.4n;n.fn.4n=12(a,b,c){18("1t"!=1f a&&bq)14 bq.1y(15,1n);17 d,e,f,g=15,h=a.1Q(" ");14 h>=0&&(d=n.4o(a.1x(h)),a=a.1x(0,h)),n.1z(b)?(c=b,b=1b 0):b&&"1X"==1f b&&(e="fR"),g.19>0&&n.5i({26:a,1d:e,59:"2O",1J:b}).2P(12(a){f=1n,g.2O(d?n("<2w>").4P(n.8n(a)).1M(d):a)}).3y(c&&12(a,b){g.1k(c,f||[a.6g,b,a])}),15},n.2v.5c.fS=12(a){14 n.4A(n.49,12(b){14 a===b.1F}).19};17 br=a.3i.2K;12 8s(a){14 n.40(a)?a:9===a.1e&&a.62}n.3I={bJ:12(a,b,c){17 d,e,f,g,h,i,j,k=n.1A(a,"39"),l=n(a),m={};"bK"===k&&(a.1q.39="3H"),h=l.3I(),f=n.1A(a,"1N"),i=n.1A(a,"2e"),j=("6u"===k||"bL"===k)&&(f+i).1Q("8N")>-1,j?(d=l.39(),g=d.1N,e=d.2e):(g=3Y(f)||0,e=3Y(i)||0),n.1z(b)&&(b=b.1g(a,c,h)),1a!=b.1N&&(m.1N=b.1N-h.1N+g),1a!=b.2e&&(m.2e=b.2e-h.2e+e),"bM"1i b?b.bM.1g(a,m):l.1A(m)}},n.fn.1p({3I:12(a){18(1n.19)14 1b 0===a?15:15.1k(12(b){n.3I.bJ(15,a,b)});17 b,c,d=15[0],e={1N:0,2e:0},f=d&&d.1E;18(f)14 b=f.2K,n.2b(b,d)?(1f d.84!==U&&(e=d.84()),c=8s(f),{1N:e.1N+c.6K-b.71,2e:e.2e+c.89-b.6Z}):e},39:12(){18(15[0]){17 a,b,c=15[0],d={1N:0,2e:0};14"bL"===n.1A(c,"39")?b=c.84():(a=15.6L(),b=15.3I(),n.1v(a[0],"2O")||(d=a.3I()),d.1N+=n.1A(a[0],"g3",!0),d.2e+=n.1A(a[0],"g4",!0)),{1N:b.1N-d.1N-n.1A(c,"g5",!0),2e:b.2e-d.2e-n.1A(c,"g6",!0)}}},6L:12(){14 15.2k(12(){17 a=15.6L||br;1h(a&&!n.1v(a,"2O")&&"bK"===n.1A(a,"39"))a=a.6L;14 a||br})}}),n.1k({5W:"89",5N:"6K"},12(b,c){17 d="6K"===c;n.fn[b]=12(e){14 J(15,12(b,e,f){17 g=8s(b);14 1b 0===f?g?g[c]:b[e]:1b(g?g.g7(d?a.89:f,d?f:a.6K):b[e]=f)},b,e,1n.19,1a)}}),n.1k(["1N","2e"],12(a,b){n.2H[b]=7N(k.8O,12(a,c){14 c?(c=3F(a,b),3E.1j(c)?n(a).39()[b]+"3J":c):1b 0})}),n.1k({g8:"3G",6G:"24"},12(a,b){n.1k({3B:"g9"+a,3u:b,"":"ga"+a},12(c,d){n.fn[d]=12(d,e){17 f=1n.19&&(c||"44"!=1f d),g=c||(d===!0||e===!0?"3t":"2r");14 J(15,12(b,c,d){17 e;14 n.40(b)?b.3i.2K["bP"+a]:9===b.1e?(e=b.2K,3L.8i(b.5s["86"+a],e["86"+a],b.5s["3I"+a],e["3I"+a],e["bP"+a])):1b 0===d?n.1A(b,c,g):n.1q(b,c,d,g)},b,f?d:1b 0,f,1a)}})}),n.fn.ge=12(){14 15.19},n.fn.gf=n.fn.aa,"12"==1f 7P&&7P.gh&&7P("4V",[],12(){14 n});17 bs=a.4Y,bR=a.$;14 n.dV=12(b){14 a.$===n&&(a.$=bR),b&&a.4Y===n&&(a.4Y=bs),n},1f b===U&&(a.4Y=a.$=n),n});',62,1015,"||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||function||return|this||var|if|length|null|void|for|type|nodeType|typeof|call|while|in|test|each|get|push|arguments|parentNode|extend|style|new|toLowerCase|string|else|nodeName|replace|slice|apply|isFunction|css|event|set|value|ownerDocument|elem|queue|ib|RegExp|data|text|className|find|top|script|filter|indexOf|input|remove|error|delete|prop|ob|object|exec|guid||createElement|getAttribute|promise|width|display|url|match|selector|cache|break|contains|box|appendChild|left|trigger|access|Kb|stop|expando|map|opts|split|isArray|checked|disabled|try|border|hb|catch|firstChild|expr|div|add|duration|empty|target|select|now|dir|ready|pushStack|getElementsByTagName|cssHooks|prototype|on|documentElement|nb|merge|splice|html|done|name|start|show|dataTypes|shift|events|_default|querySelectorAll|context|none|table||button|nextSibling|propHooks|setAttribute|json|handle|special|position|id|abort|selected|unshift|wb|camelCase|opacity|always|document|innerHTML|props|join|getElementsByClassName|off|xml|namespace|childNodes|pseudos|hidden|margin|content|attr|hide|textContent|complete|result|compareDocumentPosition|padding|href|handler|vb|xb|height|relative|offset|px|options|Math|first|ajaxSettings|_|overflow|matches|ID|valHooks|jsonpCallback|finish|click|option|pop|parseFloat|preventDefault|isWindow|jb|originalEvent|dequeue|boolean|sort|end|application|Deferred|timers|setRequestHeader|fail|constructor|addEventListener|hasData|rb|sb|accepts|concat|resolveWith|domManip|tbody|Event|load|trim|last|mb|cssProps|Rb|jsonp|unique|nth|inArray|previousSibling|async|contents|grep|needsContext|converters|Callbacks|memory|init|textarea|focus|origType|delegateType|easing|isEmptyObject|radio|sizing|globalEval|append|key|crossDomain|toggle|Fc|clone|jquery|tb|tweens|jQuery|makeArray||removeAttr|throw|acceptData|With|progress|fire|once|queueHooks|dataType|cloneNode|etag|filters|global|pb|contentType|checkbox|lang|ajax|isDefaultPrevented|status|matchesSelector|handlers|val|stopPropagation|which|propFix|removeEventListener|body|blur|speeds|kb|attrHandle|getElementById|unqueued|Dc|cleanData|insertBefore|Tb|odd|Qb|block|number|Mb|step|removeChild|Array|isPlainObject|cssNumber|scrollTop|handleObj|readyState|class|removeClass|isXMLDoc|addClass|defaultValue|oc|scrollLeft|setTimeout|fireWith|attributes|200|send|defaultView|animate|getResponseHeader|param|lb|wrapAll|disable|_queueHooks|tr|Bc|triggered|selectedIndex|tabIndex|bindType|responseText|ajaxSetup|delegateCount|tc|bool|has|getComputedStyle|even|Hc|CHILD|cssText|TAG|1px|not|absolute|lastChild|isPropagationStopped|state|String|readyWait|Object|marginRight|success|cur|lastModified|isReady|Width|GET|prevObject|olddisplay|pageYOffset|offsetParent|mimeType|undefined|window|inline|Error|getAttributeNode|hasContent|clientX|toUpperCase|pageX|Zb|enabled|nc|clientLeft|sibling|clientTop|focusin|index|focusout|ATTR|location|inprogress|responseFields|stopImmediatePropagation|mouseenter|PSEUDO|mouseleave|old|mc|random|anim|specialEasing|javascript|xhr|hasOwnProperty|hc|Xb|statusText|colgroup|ms|parent|parseJSON|Date|file|buildFragment|reject|unload|fxshow|submit|Ub|uniqueSort|dispatch|replaceWith|detach|src|_evalUrl|appendTo|Sb|overrideMimeType|module|statusCode|minWidth|maxWidth|yb|backgroundClip|define|removeAttribute|setup|teardown|removeEvent|yc|getById|namespace_re|triggerHandler|Ob|ajaxTransport||timeout|sc|xhrFields|getBoundingClientRect|fix|scroll|swap|run|pageXOffset|unit|setFilters|Db|is|ajaxPrefilter|Eb|Fb|Gb|max|Hb|isImmediatePropagationStopped|Ib|offsetWidth|parseHTML|rc|Jb|postDispatch|multiple|Kc|timeStamp|prev|fixHooks|CLASS|expand|charCode|active|pc|Content|float|boxSizing|offsetHeight|swing|400|fontWeight|Cb|Bb|Ab|reliableMarginRight|boxSizingReliable|auto|pixelPosition|4px|Nb|moz|Pb|webkit|Vb|clearCloneStyle|createTween|getDefaultComputedStyle|after|before|prepend|optgroup|td|overflowX|overflowY|Wb|thead|startTime|ecma|java|link|rejectWith|timer|col|speed|one|mouseout|mouseover|defaultPrevented|simulate|tick|interval|returnValue|clearTimeout|checkOn|optSelected|optDisabled|radioValue|pageY|clientY|attrHooks|mouseHooks|keyCode|keyHooks|relatedTarget|toggleClass|hasClass|__className__|currentTarget|preDispatch|delegateTarget|noBubble|contextmenu|parseXML|parsererror|focusinBubbles|noCloneChecked|checkClone|ic|jc|app|kc|createDocumentFragment|HEAD|lc|source|hasDataAttrs|removeData|true|uid|DOMContentLoaded|notifyWith|then|notify|flatOptions|uc|resolve|lock|Tween|Type|contentDocument|vc|addBack|dataFilter|prevAll|throws|No|next|children|Until|parents|instanceof|processData|reset|image|www|form|urlencoded|charset|password|hasFocus|activeElement|unsupported|preFilter|selectors|getText|getAllResponseHeaders|sortStable|detectDuplicates|specified|sortDetached|method|disconnectedMatch|http|443|traditional|ajaxStart|msallowclip|ifModified|If|Modified|headers|beforeSend|ajaxSend|getElementsByName|attachEvent|304|204|isXML|ajaxSuccess|ajaxError|ajaxComplete|ajaxStop|sourceIndex|firstElementChild|wrapInner|xc|cacheLength|zc|Ac|finally|encodeURIComponent|serializeArray|qsa|||XMLHttpRequest|||||||||||||||||fromCharCode|Ec|65536|cors|lt|Requested|onload|onerror|ecmascript|gt|of|only|open|support|head|isNumeric|setOffset|static|fixed|using|xA0|uFEFF|client|exports|Mc|originalProperties|originalOptions|All|clearQueue|Animation|tweener|prefilter|defer|CDATA|Top|fadeTo|Right|Bottom|Left|slideDown|slideUp|slideToggle|fadeIn|fadeOut||fadeToggle|toString|Boolean|setInterval|clearInterval|slow|600|fast|delay|tfoot|caption|th|closest|ismap|createTextNode|onunload|child|loop|onfocusin|mouse|removeProp|htmlFor|hasAttribute|tabindex|readOnly|maxLength|cellSpacing|cellPadding|rowSpan|colSpan|useMap|frameBorder|contentEditable|pointer|parentsUntil|nextAll|focusinfocus|replaceChild|focusoutblur|nextUntil|prevUntil|siblings|resize|prependTo|dblclick|mousedown|mouseup|mousemove|change|keydown|keypress|keyup|hover|bind|unbind|delegate|undelegate|insertAfter|replaceAll|JSON||||parse|createComment|DOMParser|parseFromString|iframe|Invalid|XML|frameborder|write|close|reverse||pseudo|Number|about|getPropertyValue|storage|extension|res|widget|requires|stopOnFalse|innerText|readonly|required|locked|scoped|qc|fired|x20|9999px|hash|root|isTrigger|resolved|Function|x00|parentWindow|xa0|noop|isPrototypeOf|pending|native|array|noConflict|header|conversion|from|to|webkitMatchesSelector|pipe|when|visibility|isLocal|mozMatchesSelector|letterSpacing|oMatchesSelector|msMatchesSelector|holdReady|||Webkit|Moz|UTF|plain|altKey|bubbles|responseXML|cancelable|responseJSON|ctrlKey|eventPhase|metaKey|with|shiftKey||canceled|eval|view|sizzle|ig|char|columnCount|fillOpacity|flexGrow|flexShrink|lineHeight|order|orphans||1_|widows|zIndex|zoom|Since|None|Match|Accept|01|tokenize|toArray|cssFloat|background|inherit|Transport|300|normal|Last|0x|nocontent|notmodified|buttons|proxy|use|offsetX|offsetY|getJSON|getScript|post|defineProperty|screenX|wrap|||unwrap|visible|screenY|toElement|Syntax|unrecognized|compile|keygen|defineProperties|expression||serialize|pos|elements|55296|discard|1023|linear|cos|1223||PI|ActiveXObject|beforeunload|withCredentials|username|56320|false|strict|isSimulated|autofocus|scriptCharset|404|_data|_removeData|nodeValue|callback|autoplay|was|called|POST|animated|pointerenter|pointerover|pointerleave|pointerout|createPseudo|area|HTML|continue|setDocument|embed|borderTopWidth|borderLeftWidth|marginTop|marginLeft|scrollTo|Height|inner|outer|||hr|size|andSelf|img|amd||controls|meta|rejected|".split("|"),0,{})),
function(a){jQuery.fn.extend({slimScroll:function(b){var c=a.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},b);return this.each(function(){function d(b){if(j){b=b||window.event;var d=0;b.wheelDelta&&(d=-b.wheelDelta/120),b.detail&&(d=b.detail/3),a(b.target||b.srcTarget||b.srcElement).closest("."+c.wrapperClass).is(u.parent())&&e(d,!0),b.preventDefault&&!s&&b.preventDefault(),s||(b.returnValue=!1)}}function e(a,b,d){s=!1;var e=a,f=u.outerHeight()-w.outerHeight();b&&(e=parseInt(w.css("top"))+a*parseInt(c.wheelStep)/100*w.outerHeight(),e=Math.min(Math.max(e,0),f),e=a>0?Math.ceil(e):Math.floor(e),w.css({top:e+"px"})),p=parseInt(w.css("top"))/(u.outerHeight()-w.outerHeight()),e=p*(u[0].scrollHeight-u.outerHeight()),d&&(e=a,a=e/u[0].scrollHeight*u.outerHeight(),a=Math.min(Math.max(a,0),f),w.css({top:a+"px"})),u.scrollTop(e),u.trigger("slimscrolling",~~e),h(),i()}function f(){window.addEventListener?(this.addEventListener("DOMMouseScroll",d,!1),this.addEventListener("mousewheel",d,!1),this.addEventListener("MozMousePixelScroll",d,!1)):document.attachEvent("onmousewheel",d)}function g(){o=Math.max(u.outerHeight()/u[0].scrollHeight*u.outerHeight(),r),w.css({height:o+"px"});var a=o==u.outerHeight()?"none":"block";w.css({display:a})}function h(){g(),clearTimeout(m),p==~~p?(s=c.allowPageScroll,q!=p&&u.trigger("slimscroll",0==~~p?"top":"bottom")):s=!1,q=p,o>=u.outerHeight()?s=!0:(w.stop(!0,!0).fadeIn("fast"),c.railVisible&&x.stop(!0,!0).fadeIn("fast"))}function i(){c.alwaysVisible||(m=setTimeout(function(){c.disableFadeOut&&j||k||l||(w.fadeOut("slow"),x.fadeOut("slow"))},1e3))}var j,k,l,m,n,o,p,q,r=30,s=!1,u=a(this);if(u.parent().hasClass(c.wrapperClass)){var v=u.scrollTop(),w=u.parent().find("."+c.barClass),x=u.parent().find("."+c.railClass);if(g(),a.isPlainObject(b)){if("height"in b&&"auto"==b.height){u.parent().css("height","auto"),u.css("height","auto");var y=u.parent().parent().height();u.parent().css("height",y),u.css("height",y)}if("scrollTo"in b)v=parseInt(c.scrollTo);else if("scrollBy"in b)v+=parseInt(c.scrollBy);else if("destroy"in b)return w.remove(),x.remove(),void u.unwrap();e(v,!1,!0)}}else{c.height="auto"==c.height?u.parent().height():c.height,v=a("<div></div>").addClass(c.wrapperClass).css({position:"relative",overflow:"hidden",width:c.width,height:c.height}),u.css({overflow:"hidden",width:c.width,height:c.height});var x=a("<div></div>").addClass(c.railClass).css({width:c.size,height:"100%",position:"absolute",top:0,display:c.alwaysVisible&&c.railVisible?"block":"none","border-radius":c.railBorderRadius,background:c.railColor,opacity:c.railOpacity,zIndex:90}),w=a("<div></div>").addClass(c.barClass).css({background:c.color,width:c.size,position:"absolute",top:0,opacity:c.opacity,display:c.alwaysVisible?"block":"none","border-radius":c.borderRadius,BorderRadius:c.borderRadius,MozBorderRadius:c.borderRadius,WebkitBorderRadius:c.borderRadius,zIndex:99}),y="right"==c.position?{right:c.distance}:{left:c.distance};x.css(y),w.css(y),u.wrap(v),u.parent().append(w),u.parent().append(x),c.railDraggable&&w.bind("mousedown",function(b){var c=a(document);return l=!0,t=parseFloat(w.css("top")),pageY=b.pageY,c.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY,w.css("top",currTop),e(0,w.position().top,!1)}),c.bind("mouseup.slimscroll",function(a){l=!1,i(),c.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(a){return a.stopPropagation(),a.preventDefault(),!1}),x.hover(function(){h()},function(){i()}),w.hover(function(){k=!0},function(){k=!1}),u.hover(function(){j=!0,h(),i()},function(){j=!1,i()}),u.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(n=a.originalEvent.touches[0].pageY)}),u.bind("touchmove",function(a){s||a.originalEvent.preventDefault(),a.originalEvent.touches.length&&(e((n-a.originalEvent.touches[0].pageY)/c.touchScrollStep,!0),n=a.originalEvent.touches[0].pageY)}),g(),"bottom"===c.start?(w.css({top:u.outerHeight()-w.outerHeight()}),e(0,!0)):"top"!==c.start&&(e(a(c.start).position().top,null,!0),c.alwaysVisible||w.hide()),f()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),function(a){"use strict";if(a.URL=a.URL||a.webkitURL,a.Blob&&a.URL)try{return void new Blob}catch(b){}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=a.ArrayBuffer,r=a.Uint8Array;for(d.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;return k.createObjectURL||(n=a.URL={}),n.createObjectURL=function(a){var c,b=a.type;return null===b&&(b="application/octet-stream"),a instanceof d?(c="data:"+b,"base64"===a.encoding?c+";base64,"+a.data:"URI"===a.encoding?c+","+decodeURIComponent(a.data):o?c+";base64,"+o(a.data):c+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(r&&(a instanceof q||a instanceof r)){for(var e="",f=new r(a),i=0,j=f.length;j>i;i++)e+=String.fromCharCode(f[i]);c.push(e)}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");var k=new g;c.push(k.readAsBinaryString(a))}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=this.data.length=0},c}(a);a.Blob=function(a,b){var d=b?b.type||"":"",e=new c;if(a)for(var f=0,g=a.length;g>f;f++)e.append(a[f]);return e.getBlob(d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=a.URL||a.webkitURL||a,e=b.createElementNS("http://www.w3.org/1999/xhtml","a"),f=!a.externalHost&&"download"in e,h=a.webkitRequestFileSystem,i=a.requestFileSystem||h||a.mozRequestFileSystem,j=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},k="application/octet-stream",l=0,m=[],n=function(){for(var a=m.length;a--;){var b=m[a];"string"==typeof b?d.revokeObjectURL(b):b.remove()}m.length=0},o=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){j(f)}}},p=function(d,g){var q,r,x,j=this,n=d.type,p=!1,s=function(){var a=c().createObjectURL(d);return m.push(a),a},t=function(){o(j,"writestart progress write writeend".split(" "))},u=function(){if((p||!q)&&(q=s(d)),!r){if(navigator.userAgent.match(/7\.[\d\s\.]+Safari/)&&"undefined"!=typeof window.FileReader&&d.size<=157286400){var a=new window.FileReader;return a.readAsDataURL(d),a.onloadend=function(){var c=b.createElement("iframe");c.src=a.result,c.style.display="none",b.body.appendChild(c),t()},j.readyState=j.DONE,void(j.savedAs=j.SAVEDASUNKNOWN)}return window.open(q,"_blank"),j.readyState=j.DONE,j.savedAs=j.SAVEDASBLOB,void t()}r.location.href=q},v=function(a){return function(){return j.readyState!==j.DONE?a.apply(this,arguments):void 0}},w={create:!0,exclusive:!1};if(j.readyState=j.INIT,g||(g="download"),f){q=s(d),b=a.document,e=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e.href=q,e.download=g;var y=b.createEvent("MouseEvents");return y.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(y),j.readyState=j.DONE,j.savedAs=j.SAVEDASBLOB,void t()}return a.chrome&&n&&n!==k&&(x=d.slice||d.webkitSlice,d=x.call(d,0,d.size,k),p=!0),h&&"download"!==g&&(g+=".download"),(n===k||h)&&(r=a),i?(l+=d.size,void i(a.TEMPORARY,l,v(function(a){a.root.getDirectory("saved",w,v(function(a){var b=function(){a.getFile(g,w,v(function(a){a.createWriter(v(function(b){b.onwriteend=function(b){r.location.href=a.toURL(),m.push(a),j.readyState=j.DONE,j.savedAs=j.SAVEDASBLOB,o(j,"writeend",b)},b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&u()},"writestart progress write abort".split(" ").forEach(function(a){b["on"+a]=j["on"+a]}),b.write(d),j.abort=function(){b.abort(),j.readyState=j.DONE,j.savedAs=j.FAILED},j.readyState=j.WRITING}),u)}),u)};a.getFile(g,{create:!1},v(function(a){a.remove(),b()}),v(function(a){a.code===a.NOT_FOUND_ERR?b():u()}))}),u)}),u)):void u()},q=p.prototype,r=function(a,b){return new p(a,b)};return q.abort=function(){var a=this;a.readyState=a.DONE,a.savedAs=a.FAILED,o(a,"abort")},q.readyState=q.INIT=0,q.WRITING=1,q.DONE=2,q.FAILED=-1,q.SAVEDASBLOB=1,q.SAVEDASURI=2,q.SAVEDASUNKNOWN=3,q.error=q.onwritestart=q.onprogress=q.onwrite=q.onabort=q.onerror=q.onwriteend=null,a.addEventListener("unload",n,!1),r.unload=function(){n(),a.removeEventListener("unload",n,!1)},r}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd?define([],function(){return saveAs}):"undefined"!=typeof Meteor&&(Meteor.saveAs=saveAs);